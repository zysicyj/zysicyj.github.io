<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>1. 深入了解 Redis 数据类型和底层数据结构 | </title><meta name="keywords" content="Redis,有序集合,数据结构,List,跳表,哈希表,Set,Hash,String"><meta name="author" content="程序员朱永胜"><meta name="copyright" content="程序员朱永胜"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="1. 深入了解 Redis 数据类型和底层数据结构"><meta name="application-name" content="1. 深入了解 Redis 数据类型和底层数据结构"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="1. 深入了解 Redis 数据类型和底层数据结构"><meta property="og:url" content="https://blog.zysicyj.top/84392d3f.html"><meta property="og:site_name" content=""><meta property="og:description" content="Redis 有以下几种常用的数据类型：  redis 数据是如何组织的  为了实现从键到值的快速访问，Redis 使用了一个哈希表来保存所有键值对。 Redis 全局哈希表（Global Hash Table）是指在 Redis 数据库内部用于存储所有键值对的主要数据结构。它的实现原理涉及到哈希表、"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://img.xjh.me/random_img.php?return=302&amp;_r_=4e9fb960-1028-acba-82c9-edc682e2e9ac"><meta property="article:author" content="程序员朱永胜"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://img.xjh.me/random_img.php?return=302&amp;_r_=4e9fb960-1028-acba-82c9-edc682e2e9ac"><meta name="description" content="Redis 有以下几种常用的数据类型：  redis 数据是如何组织的  为了实现从键到值的快速访问，Redis 使用了一个哈希表来保存所有键值对。 Redis 全局哈希表（Global Hash Table）是指在 Redis 数据库内部用于存储所有键值对的主要数据结构。它的实现原理涉及到哈希表、"><link rel="shortcut icon" href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308012321669.jpg"><link rel="canonical" href="https://blog.zysicyj.top/84392d3f.html"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-9343722716173603',
  enable_page_level_ads: 'true'
});</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?16bc6435aa26c2ae803ad0e62e4f5fa8";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: {"enable":true,"ck":"3Is8EMFcqgGHzmLJ","LingQueMonitorID":"3Is8EMFcqgGHzmLJ"},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":1},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 程序员朱永胜","link":"链接: ","source":"来源: ","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: {"enable":true,"delay":100,"shiftDelay":200},
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '',
  title: '1. 深入了解 Redis 数据类型和底层数据结构',
  postAI: '',
  pageFillDescription: 'redis 数据是如何组织的 , 底层实现复杂度总结, 一、字符串（String）, 适用场景 , 底层实现是什么 , 如何使用 , 需要注意的地方 , 二、列表（List）, 适用场景 , 底层实现是什么 , 如何使用 , 需要注意的地方 , 三、集合（Set）, 适用场景, 底层实现是什么 , 如何使用, 需要注意的地方 , 四、有序集合（Sorted Set）：与集合类似但每个元素都关联一个分数可以根据分数进行排序。, 适用场景 , 底层实现是什么, 如何使用 , 需要注意的地方 , 五、哈希表（Hash）, 适用场景, 底层实现是什么, 如何使用 , 需要注意的地方 有以下几种常用的数据类型数据是如何组织的为了实现从键到值的快速访问使用了一个哈希表来保存所有键值对全局哈希表是指在数据库内部用于存储所有键值对的主要数据结构它的实现原理涉及到哈希表字典渐进式等技术以下是全局哈希表的实现原理和查询流程实现原理哈希表的全局哈希表是由多个哈希表构成的每个哈希表称为一个数据库数据库的数量可以通过配置进行设置默认是个每个数据库都是一个独立的哈希表负责存储键值对字典每个数据库都使用字典来实现键值对的存储字典是一种高效的键值对存储结构它使用哈希表来支持快速的查找插入和删除操作渐进式当数据库的键值对数量较多时为了保持查询性能会在不中断服务的情况下逐步将旧的数据库哈希表中的数据迁移到新的数据库哈希表中这个过程叫做渐进式这样能够平滑地将数据从旧的哈希表迁移到新的哈希表避免大规模的数据迁移对性能造成影响查询流程客户端发送查询命令指定要查询的键会根据键通过哈希函数计算哈希槽的索引确定键在哪个数据库中根据数据库的哈希表找到对应的字典在字典中使用键进行查找通过哈希表查找对应的值如果找到了值则将其返回给客户端如果键在当前数据库没有找到对应的值可以根据需要进行跳转到其他数据库例如在集群中整个查询流程涉及到多次哈希计算和哈希表查找这使得能够在平均时间复杂度为的情况下高效地进行键值对的查询操作由于的全局哈希表是一个核心组件其优化和设计对于保障的性能和可用性非常重要如果你只是了解了哈希表的复杂度和快速查找特性那么当你往中写入大量数据后就可能发现操作有时候会突然变慢了这其实是因为你忽略了一个潜在的风险点那就是哈希表的冲突问题和可能带来的操作阻塞为什么哈希表操作变慢了解决哈希冲突的方式就是链式哈希链式哈希也很容易理解就是指同一个哈希桶中的多个元素用一个链表来保存它们之间依次用指针连接哈希冲突是指在使用哈希函数将键映射到哈希表中的索引时两个或多个键被映射到相同的索引位置在中哈希表是通过哈希函数将键映射到一个固定数量的桶中的使用算法作为默认的哈希函数它是一种快速且低碰撞率的哈希函数然而即使使用了高质量的哈希函数仍然存在哈希冲突的可能性当发生哈希冲突时使用链地址法来解决具体来说每个桶中存储的是一个链表链表中的每个节点都包含了键值对当多个键被映射到同一个桶时它们会被添加到链表中形成一个键值对的集合当执行哈希表的读取操作时会遍历链表直到找到匹配的键值对或者链表结束这个过程的时间复杂度取决于链表的长度因此如果哈希冲突较多链表会变得很长导致读取操作的性能下降为了减少哈希冲突的发生可以采取以下措施使用更好的哈希函数选择一个更具随机性和低碰撞率的哈希函数可以减少哈希冲突的概率扩大哈希表的大小增加哈希表的桶数量可以分散键的分布减少哈希冲突的可能性使用一致性哈希算法一致性哈希算法可以将键均匀地映射到多个节点上减少单个节点上的哈希冲突哈希冲突是不可避免的但可以通过选择合适的哈希函数和调整哈希表的大小来减少其发生的概率并且的链地址法能够有效地解决哈希冲突带来的问题但是这里依然存在一个问题哈希冲突链上的元素只能通过指针逐一查找再操作如果哈希表里写入的数据越来越多哈希冲突可能也会越来越多这就会导致某些哈希冲突链过长进而导致这个链上的元素查找耗时长效率降低对于追求快的来说这是不太能接受的所以会对哈希表做操作也就是增加现有的哈希桶数量让逐渐增多的元素能在更多的桶之间分散保存减少单个桶中的元素数量从而减少单个桶中的冲突那具体怎么做呢的是指在哈希表扩容或缩小时重新计算并重新分配所有键值对的过程的目的是为了保持哈希表的负载因子在一个合理的范围内以提高哈希表的性能在中是一个渐进式的过程它不会一次性地将所有键值对重新分配到新的哈希表中而是分多次进行每次处理一小部分键值对这种渐进式的过程可以保证在期间仍然可以正常处理读取和写入操作不会阻塞客户端请求具体的过程如下会创建一个新的空哈希表大小是当前哈希表的两倍或更小如果是缩小操作会将当前哈希表的属性设置为表示的起始位置在每次执行读取或写入操作时会同时对当前哈希表和新哈希表进行操作对于读取操作首先在当前哈希表中查找键值对如果找不到则继续在新哈希表中查找对于写入操作会将新的键值对添加到新哈希表中同时保留当前哈希表中的键值对在每次执行完一定数量的操作后会逐步将当前哈希表中的键值对迁移到新哈希表中直到迁移完成最后会将新哈希表设置为当前哈希表并释放旧的哈希表的内存空间通过渐进式的过程可以平滑地将键值对从旧哈希表迁移到新哈希表避免了一次性的大规模迁移带来的性能问题同时由于读取操作可以同时在两个哈希表中进行所以即使在过程中仍然可以提供正常的读取服务需要注意的是过程是一个相对耗时的操作特别是在哈希表中存储了大量键值对的情况下因此在进行时应该避免对进行大量的写入操作以免影响性能底层实现复杂度总结一字符串适用场景字符串类型在中是最常用的数据类型之一适用于以下场景缓存字符串类型可以用于缓存数据例如缓存数据库查询结果计算结果等由于的高性能和快速读写能力使用字符串类型作为缓存可以大大提高系统的响应速度计数器字符串类型可以用于实现计数器功能例如统计网站的访问次数用户的点赞数等通过使用字符串类型的自增命令可以方便地对计数器进行增加或减少操作分布式锁字符串类型可以用于实现分布式锁保证在分布式环境下的数据一致性和并发控制通过设置一个唯一的字符串作为锁的值并利用的原子性操作可以实现简单而高效的分布式锁机制会话管理字符串类型可以用于存储用户的会话信息例如用户登录状态购物车内容等通过将会话信息存储在字符串类型中可以方便地进行读写操作并且可以设置过期时间来自动清理过期的会话数据消息队列字符串类型可以用于实现简单的消息队列例如将消息内容作为字符串存储在中然后使用列表类型的命令进行消息的发布和订阅分布式缓存字符串类型可以用于实现分布式缓存例如将经过序列化的对象存储在字符串类型中然后通过缓存命中来提高系统的性能和扩展性底层实现是什么当我们在中存储字符串时使用了一种称为简单动态字符串的数据结构来表示字符串是自己实现的一种字符串表示方式相比于传统的语言字符串具有许多优势和特点动态调整大小可以根据字符串的长度动态调整内存大小这意味着当我们向中添加更多的字符时会自动分配更多的内存空间来容纳新的字符而不需要手动管理内存分配和释放这样可以避免频繁的内存重新分配操作提高了性能时间复杂度的长度获取在内部维护了字符串的长度信息因此无论字符串的长度是多少我们都可以在常数时间内获取字符串的长度而不需要遍历整个字符串这使得获取字符串长度的操作非常高效二进制安全可以存储任意二进制数据而不仅仅局限于文本字符串这意味着我们可以在中存储包含空字符在内的任意二进制数据而不会导致字符串的截断或错误解析缓冲区溢出保护在内部维护了字符串的长度信息这使得能够有效地防止缓冲区溢出的问题当我们向中添加新的字符时会检查是否有足够的空间来容纳新的字符如果没有足够的空间会自动分配更多的内存空间以避免溢出兼容字符串可以通过转换函数与字符串进行互相转换这意味着我们可以在中使用来存储字符串然后将其转换为字符串以便与现有的代码进行交互反之我们也可以将字符串转换为以便在中使用更多的字符串操作功能的结构如下字符串的长度未使用的字节长度字符串的实际内容其中表示字符串的长度表示未使用的字节长度是一个柔性数组用于存储字符串的实际内容通过使用简单动态字符串作为底层数据结构能够高效地处理字符串操作并提供了丰富的字符串操作命令和功能这使得成为一个强大的键值存储系统可以用于各种不同的应用场景作为新手了解的特点和结构将有助于你更好地理解和使用中的字符串数据类型如何使用要在中使用字符串类型你可以使用以下命令设置字符串值使用命令可以设置一个字符串键的值例如将键的值设置为获取字符串值使用命令可以获取一个字符串键的值例如将返回键的值自增自减操作使用命令可以将一个字符串键的值自增使用命令可以将一个字符串键的值自减例如将键的值增加设置过期时间使用命令可以为一个字符串键设置过期时间单位为秒例如将键的过期时间设置为秒批量操作使用命令可以同时设置多个字符串键的值使用命令可以同时获取多个字符串键的值字符串拼接使用命令可以将指定字符串追加到一个字符串键的值的末尾其他操作还提供了许多其他的字符串操作命令如获取子字符串获取字符串长度设置指定位置的字符等以下是一些示例命令的用法设置键为的值为获取键为的值将键为的值自增设置键为的过期时间为秒同时设置多个键值对同时获取多个键的值将追加到键的值的末尾通过使用这些命令你可以在中灵活地操作字符串类型实现各种功能和应用场景记得在使用字符串类型时根据具体需求选择合适的命令和参数并注意处理异常情况和错误返回值需要注意的地方在使用的字符串类型时有一些需要注意的地方字符串长度限制的字符串类型最大可以存储的数据如果需要存储更大的数据可以考虑使用的其他数据类型或将数据分片存储数据类型转换当使用字符串类型时需要注意数据类型的转换的字符串类型是二进制安全的可以存储任意二进制数据但在使用时需要根据具体情况进行数据的序列化和反序列化过期时间设置通过使用命令可以为字符串键设置过期时间但需要注意过期时间的合理设置过期时间过短可能导致频繁的数据失效和重新加载过期时间过长可能导致数据过期不及时内存使用由于是内存数据库使用字符串类型时需要注意内存的使用情况特别是在存储大量字符串数据时需要合理控制内存的分配和释放避免出现内存溢出的问题并发操作在多线程或多进程环境下使用字符串类型时需要注意并发操作的问题提供了原子性操作命令如自增自减等可以保证操作的原子性但需要注意并发操作可能导致的数据竞争和一致性问题键的命名规范为了避免键的冲突和混淆建议在命名字符串键时使用有意义的具有一定规范的命名方式以便更好地管理和维护数据数据备份和持久化提供了数据持久化的机制可以将数据保存到磁盘上以防止数据丢失在使用字符串类型时可以考虑定期进行数据备份和持久化操作以保证数据的安全性和可恢复性总之在使用的字符串类型时需要根据具体的应用场景和需求合理选择命令和参数并注意处理异常情况和错误返回值同时合理规划和管理数据注意内存使用和并发操作可以更好地利用的字符串类型提高系统的性能和可靠性二列表适用场景列表类型在中是一种非常常用的数据类型适用于以下场景消息队列列表类型可以用于实现简单的消息队列生产者可以使用命令将消息添加到列表的头部消费者可以使用命令从列表的尾部获取消息这种方式可以实现先进先出的消息处理实时排行榜列表类型可以用于实现实时排行榜例如可以使用命令将用户的得分添加到列表中然后使用命令获取排行榜的前几名任务队列列表类型可以用于实现任务队列生产者可以使用命令将任务添加到列表的尾部消费者可以使用命令从列表的头部获取任务这种方式可以实现任务的分发和处理消息发布与订阅列表类型可以用于实现简单的消息发布与订阅生产者可以使用命令将消息添加到列表的头部订阅者可以使用命令阻塞地从列表中获取消息历史记录列表类型可以用于存储历史记录例如可以使用命令将用户的浏览记录添加到列表中然后使用命令获取最近的浏览记录底层实现是什么当涉及到中列表类型的底层实现时有两种可能的数据结构压缩列表和双向链表压缩列表压缩列表是一种紧凑的数据结构用于存储较小的列表它将多个列表元素紧密地存储在一起以减少内存的使用压缩列表的结构如下表示压缩列表的总字节数指向压缩列表的最后一个节点表示压缩列表中的元素数量表示每个列表元素的存储形式包括元素长度和元素内容表示压缩列表的结束标志压缩列表的优势在于它可以在一定程度上减少内存的使用并且对于较小的列表它的性能比双向链表更好但是当列表的长度或元素的大小超过一定限制时会自动将压缩列表转换为双向链表双向链表双向链表是一种常见的数据结构用于存储列表元素每个节点都包含一个指向前一个节点和后一个节点的指针双向链表的结构如下指向前一个节点的指针表示节点中存储的列表元素指向后一个节点的指针双向链表的优势在于它可以高效地进行插入删除和遍历操作通过指针可以快速地在链表中移动并且在任意位置插入或删除节点的开销较小在选择使用压缩列表还是双向链表作为列表的底层实现时会根据以下两个因素进行判断列表的长度当列表的长度超过一定限制默认为个元素时会将压缩列表转换为双向链表以便更好地处理大型列表列表元素的大小当列表中的元素大小超过一定限制默认为字节时会将压缩列表转换为双向链表以便更好地处理大型元素转换时机是在执行插入或删除操作时进行检查的如果列表满足转换条件会自动将压缩列表转换为双向链表并将数据从压缩列表复制到新的双向链表中这个转换过程可能会导致一些额外的内存开销但它使得能够更好地处理大型列表和大型元素通过使用压缩列表和双向链表作为底层实现的列表类型可以在不同的场景下提供高效的性能和灵活性如何使用在中可以使用列表类型进行以下操作添加元素使用命令将一个或多个元素添加到列表的头部使用命令将一个或多个元素添加到列表的尾部弹出元素使用命令从列表的头部弹出并返回一个元素使用命令从列表的尾部弹出并返回一个元素获取元素使用命令获取列表中指定位置的元素索引从开始负数表示从尾部开始计数使用命令获取列表中指定范围的元素范围包括起始位置和结束位置负数表示从尾部开始计数获取列表长度使用命令获取列表的长度在指定元素前或后插入元素使用命令在列表中指定元素的前或后插入一个元素移除指定数量的元素使用命令从列表中移除指定数量的匹配元素获取并设置指定位置的元素使用命令将列表中指定位置的元素设置为新的值并返回旧的值获取并移动元素使用命令从一个列表的尾部弹出一个元素并将它添加到另一个列表的头部阻塞弹出元素使用命令阻塞地从多个列表中弹出元素直到有元素可弹出或超时这些是列表类型的一些常用操作可以根据具体的需求选择适合的命令来操作列表列表类型在中非常灵活和多用途适用于各种场景包括消息队列排行榜任务队列消息发布与订阅历史记录等需要注意的地方在使用中的列表数据类型时有一些注意事项和最佳实践特别是对于新手来说以下是一些使用列表时需要注意的地方插入顺序和重复列表是有序的数据结构插入的元素按照插入的顺序排列允许插入重复的元素因此列表可以作为一个简单的数据结构来实现队列或栈左右插入操作提供了和命令来在列表的左侧和右侧插入元素左侧插入类似于栈的操作右侧插入类似于队列的操作范围操作使用命令可以获取列表中的一定范围的元素这对于分页显示获取最近的数据等场景非常有用修剪列表使用命令可以修剪列表只保留指定范围的元素其余的元素会被删除列表长度使用命令可以获取列表的长度弹出元素使用和命令可以从列表的左侧和右侧弹出一个元素这可以用于实现队列和栈的行为阻塞操作还提供了阻塞版本的弹出操作例如和这些命令可以在列表为空时阻塞等待新元素的到来遍历操作并没有直接提供像迭代器一样的遍历机制因此如果需要遍历列表需要自己实现内存注意列表虽然很方便但随着元素的增加内存占用也会增加在插入大量元素时要注意内存消耗不适合大型列表的列表是基于链表实现的对于大型列表的随机访问效率较低如果需要频繁的随机访问请考虑其他数据结构避免滥用列表适用于有序插入和删除的场景但不适合用作集合数据的存储如果需要集合操作可以考虑使用集合数据类型总之使用列表时需要根据具体的业务需求和场景来选择了解列表的特点和限制可以帮助你更好地规划和使用这一数据类型三集合适用场景的数据类型是一个无序的字符串集合它可以存储多个不重复的元素在中有许多实际的使用场景以下是一些常见的使用场景唯一性数据存储最基本的使用场景就是用来存储不重复的数据你可以使用来存储用户地址邮箱地址等确保数据的唯一性标签和标记系统可以用于创建标签或标记系统例如你可以为文章商品或其他实体创建一个包含相关标签的以便后续快速检索关注和粉丝系统在社交媒体或用户关系管理中可以用来实现关注和粉丝系统每个用户可以有一个其中包含他们关注的其他用户或粉丝在线用户可以用于跟踪在线用户将用户添加到一个中表示用户当前在线通过检查中的成员可以快速查找在线用户投票系统可以用于实现投票系统每个投票项目可以表示为一个用户投票时将其添加到相应的中确保每个用户只能投一次集合运算提供了多种运算如交集并集和差集这些运算可以用于计算多个集合之间的共同元素合并元素等排行榜和排名可以用于创建排行榜系统例如每个元素代表一个玩家分数作为元素的权重可以通过有序集合操作获取排名和排行地理位置标记可以用于存储地理位置数据例如存储用户的经纬度坐标然后利用运算来查找附近的位置过滤重复事件如果你需要记录一系列事件并且要确保事件不重复记录可以使用来存储已经发生的事件防止重复记录总的来说的数据类型非常适合需要存储不重复数据进行集合运算以及需要高效查找元素的场景无论是在社交网络实时分析排行榜地理位置服务等领域都有着广泛的应用底层实现是什么在中集合类型的底层实现有两种哈希表和跳跃表哈希表哈希表是一种使用哈希函数将元素映射到桶的数据结构在中集合的每个元素都被存储在哈希表的一个桶中哈希表提供了快速的插入删除和查找操作平均情况下的时间复杂度为哈希表适用于存储大量元素的集合并且对于查找操作的性能要求较高跳跃表跳跃表是一种有序的数据结构它通过多层链表的方式来提供快速的查找操作每个节点都包含一个指向下一层和右侧节点的指针在中集合的元素按照从小到大的顺序存储在跳跃表中跳跃表提供了快速的插入删除和范围查找操作平均情况下的时间复杂度为跳跃表适用于有序集合的场景或者对于范围查找操作的性能要求较高在中当集合的元素数量较少时底层实现会使用哈希表当集合的元素数量增加到一定阈值时会自动将哈希表转换为跳跃表以提供更好的性能和空间效率中的有序集合使用的是跳跃表数据结构来实现的跳跃表是一种用于有序元素存储和检索的数据结构它的设计使得有序集合的插入删除和查找操作都能在平均情况下达到的时间复杂度跳跃表实现原理多级索引跳跃表的核心思想是使用多级索引来加速查找操作除了底层的链表结构跳跃表还有多个级别的索引每一级索引都是一个较小的有序链表其中的节点包含指向下一级索引节点的指针底层链表跳跃表的底层是一个有序链表节点按照键的大小顺序排列每个节点包含一个键和对应的值多级索引节点跳跃表的多级索引节点也是有序链表但是它的节点数目比底层链表少每个多级索引节点都存储了指向底层链表中对应范围节点的指针不同级别的索引通过链式连接在一起节点的分布节点在不同级别的索引中以一定概率分布使得跳跃表在查询时能够快速跳过一些不必要的节点从而达到快速查找的效果跳跃表查询流程客户端发送查询命令指定要查询的成员会从顶级索引最高级别开始逐级向右移动查找每一级索引中的节点在每一级索引中会沿着链表移动比较节点的键与要查找的成员的大小当找到第一个大于等于要查找成员的节点时如果节点的键等于要查找的成员查找成功如果节点的键大于要查找的成员就会进入下一级索引继续查找如果最底层链表中没有找到匹配的节点那么查询失败返回结果为空跳跃表的设计使得它在有序集合中实现高效的查找插入和删除操作特别是对于范围查询等操作通过多级索引和有序链表的结合的有序集合能够在平均情况下达到的时间复杂度从而保证了高性能的数据操作如何使用的是一种无序不重复元素的数据结构类似于数学上的集合它支持添加删除和查询元素并且能够对多个集合进行交集并集差集等操作下面是关于的基本使用方法添加元素使用命令可以向一个中添加一个或多个元素删除元素使用命令可以从一个中删除一个或多个元素判断元素是否存在使用命令可以判断一个元素是否存在于中获取集合中的元素数量使用命令可以获取一个中元素的数量获取集合中的所有元素使用命令可以获取一个中的所有元素集合操作并集使用命令可以对多个进行并集操作交集使用命令可以对多个进行交集操作差集使用命令可以对多个进行差集操作需要注意的地方在使用的数据类型时有一些注意事项和最佳实践可以帮助你更好地利用它以下是使用时需要注意的几个方面唯一性是无序不重复元素的集合确保你向中添加的元素是唯一的因为不会存储重复的值数据量虽然可以处理大量的数据但仍需谨慎处理数据量较大的当中的元素数量变得很大时查询插入和删除等操作的性能可能会受到影响考虑使用过期时间可以为设置过期时间让不再需要的数据自动过期以释放内存资源避免大量的成员操作在某些情况下如果需要对中的大量成员进行操作如删除可能会影响性能如果需要频繁进行大规模操作可以考虑使用多个小规模的而不是一个包含大量成员的集合操作注意事项集合操作如并集交集差集可能会对性能产生一定影响特别是在的成员数量较大时在执行集合操作时应该考虑其对性能的影响并根据实际情况进行优化避免全量遍历避免使用等命令获取所有成员因为在大数据集下会产生性能问题如果需要遍历成员可以考虑使用命令进行分页式的遍历使用有序集合代替如果你需要有序的集合可以考虑使用有序集合数据类型它可以同时提供有序性和唯一性适用于排行榜计分系统等场景持久化和备份在重要的生产环境中始终要考虑持久化和备份策略以确保数据不会因为意外情况而丢失总之在使用的数据类型时需要根据应用需求和数据量合理规划和优化了解你的数据模型数据量以及操作需求可以帮助你更好地利用的功能并确保系统的性能和稳定性四有序集合与集合类似但每个元素都关联一个分数可以根据分数进行排序适用场景有序集合是中的一种特殊数据类型它在有序性和唯一性的基础上为存储一组成员元素分配了一个分数这种数据结构使得有序集合在许多应用场景中非常有用以下是一些适用场景排行榜和计分系统有序集合非常适合实现排行榜和计分系统成员的分数可以表示玩家的得分评分积分等你可以通过分数对成员进行排序快速地获取前几名的排名时间序列数据如果你需要存储带有时间戳的数据有序集合可以根据时间戳作为分数进行排序然后按时间范围快速查询数据最新消息有序集合可以用来存储最新的消息每个消息的分数可以是消息的时间戳这样可以方便地获取最新的消息带权重的标签标签云在社交网络或标签系统中你可以使用有序集合来存储标签成员是标签分数可以表示标签的热度权重等这可以用来实现标签云热门标签等功能范围查询有序集合允许根据分数范围进行查询从而可以快速地获取在某个分数范围内的成员唯一性有序集合保持了成员的唯一性这意味着你可以方便地存储和查询不重复的元素高级集合运算提供了对有序集合的集合运算交集并集差集操作这可以用来实现多个数据集的交叉分析数据筛选等范围分页使用等命令可以对有序集合进行分页查询获取指定范围内的成员总之有序集合适用于需要保持元素有序性需要快速进行范围查询具有权重或分数的情况它在多个场景中都提供了高效的数据存储和操作使得成为了解决这些问题的有力工具底层实现是什么的有序集合底层的实现采用了跳跃表和哈希表的结合这种设计使得有序集合既能在保持有序性的同时也能够高效地执行添加删除查询等操作跳跃表跳跃表是用来维护有序集合中的成员的在有序集合中每个成员都有一个分数而跳跃表则根据这个分数来排序成员跳跃表通过多级索引可以在平均情况下实现的插入删除和查询操作哈希表有序集合在存储成员和分数之间的映射关系时使用了哈希表每个成员都会在哈希表中对应一个键值对其中键是成员值是分数通过哈希表可以在时间内查找某个成员的分数结合使用的方式有序集合的每个元素在底层的哈希表中存储着成员和分数的映射关系同时在跳跃表中存储了成员的排序信息通过这种方式可以在跳跃表中按照成员的分数顺序快速地进行范围查询而在哈希表中通过成员快速查找分数这种底层实现结合了跳跃表和哈希表的优点使得有序集合能够同时满足有序性和高效性的需求这种设计让有序集合在插入删除查询和范围操作等场景下都能表现出色如何使用使用的有序集合需要掌握一些基本命令和操作以下是一些常见的有序集合操作示例添加成员使用命令可以向有序集合中添加成员同时指定成员的分数获取成员分数使用命令可以获取指定成员的分数获取成员排名使用命令可以获取指定成员在有序集合中的排名从开始获取分数范围内的成员使用命令可以获取指定分数范围内的成员列表获取排名范围内的成员使用命令可以获取指定排名范围内的成员列表删除成员使用命令可以从有序集合中删除一个或多个成员获取成员数量使用命令可以获取有序集合中成员的数量集合操作并集使用命令可以对多个有序集合进行并集操作交集使用命令可以对多个有序集合进行交集操作这只是有序集合的基本操作你还可以使用其他命令进行更复杂的操作如获取成员排名计算分数之差等使用有序集合时要根据实际需求选择合适的命令和操作以充分利用其有序性和高效性需要注意的地方在使用的有序集合时有一些注意事项可以帮助你避免一些常见的问题以及优化性能和数据管理以下是一些需要注意的地方成员的唯一性有序集合的成员是唯一的重复的成员不会被插入确保你向有序集合中添加的成员是唯一的以免出现预期之外的数据情况分数的重复性虽然成员是唯一的但是不同成员之间的分数可以是重复的这在一些场景中是正常的但需要根据具体需求处理数据量尽管有序集合可以处理大量的数据但仍需谨慎处理数据量较大的有序集合大数据集合可能会影响性能和内存使用分数范围在进行范围查询时确保分数范围是合理的大范围查询可能会消耗较多的计算资源数据结构选择有序集合适用于需要有序性的场景但不适合用于仅仅需要存储唯一性成员的情况对于仅需要唯一性的数据使用集合数据类型更合适集合操作的影响在执行集合操作并集交集差集时考虑其对性能的影响集合操作可能会消耗更多的计算资源特别是在有大量成员的情况下选择适当的分数类型分数可以是整数或浮点数根据实际需求选择适合的分数类型性能和内存优化合理使用的配置参数考虑分片持久化内存管理等策略以优化性能和内存使用避免全量遍历避免使用等命令获取所有成员特别是在大数据集合中考虑使用进行分页式遍历持久化和备份在重要的生产环境中考虑持久化和备份策略以防止数据丢失内存占用有序集合会占用一定的内存要注意监控和管理内存使用防止内存溢出总之使用的有序集合时要根据实际需求合理规划和优化以保证系统的性能和稳定性五哈希表适用场景的哈希表是一种存储键值对的数据结构其中的键是唯一的而值则可以是字符串整数浮点数等哈希表适用于许多场景特别是需要存储和查询多个字段的情况以下是一些适用场景存储对象信息如果你需要存储一个对象的多个字段信息例如用户信息用户名年龄邮箱等可以使用哈希表来存储每个用户的字段信息缓存数据哈希表适用于缓存大量的键值对数据例如缓存数据库查询结果以减少数据库的访问频率存储配置信息将配置信息存储在哈希表中可以方便地获取和修改配置项而无需在内存中存储多个单独的键计数器可以使用哈希表来实现计数器功能每个字段存储一个计数比如网站的点赞数阅读数等存储多种属性如果你需要为一组对象存储多种属性例如商品的名称价格库存等可以使用哈希表来存储每个商品的多个属性联合索引在关系型数据库中联合索引常用于加速多字段的查询在中可以使用哈希表来存储多个字段并通过一个字段作为主键实现类似的联合索引效果实时统计哈希表可以用于实时统计信息例如统计用户每天的登录次数订单数等用户会话可以使用哈希表来存储用户会话信息每个字段存储一个会话属性如用户登录时间过期时间等图数据结构如果需要实现图数据结构例如社交网络关系图可以使用哈希表来表示节点和边多字段查询哈希表适用于存储多个字段可以更快速地查询和更新多个字段的值总之哈希表适用于需要存储多个字段信息的情况可以在一次查询中获取和更新多个字段从而提高了数据的访问效率它在多种应用场景中都能发挥作用特别是需要存储和操作多个属性的数据底层实现是什么的哈希表数据类型在底层的实现上是使用哈希表来存储键值对的哈希表是一种非常高效的数据结构它能够在平均情况下以的时间复杂度进行插入删除和查询操作下面是哈希表底层实现的一些细节散列函数在哈希表中键通过散列函数计算得到一个哈希值这个哈希值被用作数组桶的索引使用等散列函数来均匀地将键分散到不同的桶中桶数组哈希表底层维护了一个桶数组每个桶中存储了一个或多个键值对这个数组的大小通常会动态调整以保证桶的填充因子不会过高冲突处理由于不同的键可能会经过散列函数映射到同一个桶中这就产生了冲突使用链式解决冲突的方法每个桶中可以存储一个链表当有多个键映射到同一个桶时它们会按照插入顺序形成链表动态扩容当哈希表中的元素数量逐渐增加时会根据负载因子动态扩容桶数组以保持桶的填充因子在一个合适的范围内这可以保证插入删除和查询操作的高效性迁移在扩容时会将原有的键值对重新散列到新的桶数组中这个过程称为迁移它会在后台进行以免影响正常的读写操作哈希表的嵌套在的源码中哈希表本身也可以被嵌套使用这种嵌套的哈希表常常用于实现数据类型的复杂结构例如用于存储集合和有序集合等综上所述的哈希表底层是通过散列函数桶数组链式解决冲突等机制来实现的这种设计使得能够高效地存储和查询键值对数据哈希表在中扮演着非常重要的角色如何使用使用的哈希表数据类型涉及一系列命令这些命令可以帮助你对哈希表中的键值对进行添加查询删除等操作以下是一些常见的哈希表操作示例添加键值对使用命令可以向哈希表中添加一个键值对获取单个键的值使用命令可以获取指定键的值获取多个键的值使用命令可以同时获取多个键的值获取所有键值对使用命令可以获取哈希表中所有的键值对增加或更新键的值使用命令可以为键的值增加一个整数如果键不存在会创建一个新的键删除键值对使用命令可以从哈希表中删除一个或多个键值对获取所有键或值使用命令可以获取哈希表中所有的键使用命令可以获取哈希表中所有的值获取键值对数量使用命令可以获取哈希表中键值对的数量检查键是否存在使用命令可以检查指定键是否存在于哈希表中这些只是哈希表的基本操作你还可以使用其他命令来进行更高级的操作如迭代批量添加获取字段数量等在使用哈希表时要根据实际需求选择合适的命令和操作以充分利用其灵活性和高效性需要注意的地方在使用的哈希表数据类型时有一些注意事项可以帮助你避免常见问题优化性能以及更好地管理数据以下是一些需要注意的地方键的命名选择有意义的键名以便更好地区分不同的哈希表避免过长或者冗余的键名以减少内存占用数据量虽然可以处理大量的数据但仍需谨慎处理大数据量的哈希表大数据量可能会影响性能和内存使用单个哈希表的字段数量虽然能够高效地处理多个字段但是如果单个哈希表中的字段数量非常多可能会影响性能如果需要存储大量的字段考虑拆分成多个哈希表或其他数据结构复杂度在哈希表中的字段数量不宜过多以保持读写操作的高效性过多的字段可能会增加内存消耗和操作复杂度适用场景哈希表适用于存储和查询多个字段的情况如果只需要存储单一的值或者简单的数据考虑使用字符串数据类型批量操作如果需要一次操作多个键值对使用批量操作命令如而不是多次使用单个键的操作命令缓存失效设置适当的缓存失效时间避免过期的键值对占用内存键值大小如果哈希表中的字段值较大考虑其对内存的影响大字段值可能会增加内存占用深度嵌套避免在哈希表中使用太多嵌套的键值对这可能会增加查找和维护的复杂度数据持久化对于重要的数据考虑开启持久化以防止数据丢失数据备份定期备份数据以防止意外数据丢失总之使用哈希表时要根据实际需求合理规划和优化以确保系统的性能和稳定性考虑数据模型数据量操作频率等因素以及根据需要选择合适的配置和命令来使用哈希表选择合适的配置和命令来使用哈希表程序员朱永胜',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-01-17 06:42:23',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="atom.xml" title="" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://blog.zysicyj.top/" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/13/64d8c2748ef34.jpg" alt="个人主页"/><span class="back-menu-item-text">个人主页</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">写作软件</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://editor.runjs.cool/post?id=demo" title="Mdx"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2024-07-16/4296739868700.png" alt="Mdx"/><span class="back-menu-item-text">Mdx</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://openwrite.cn/" title="OpenWrite"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://openwrite.cn/logo.png" alt="OpenWrite"/><span class="back-menu-item-text">OpenWrite</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.jetbrains.com/zh-cn/writerside/" title="WriteSide"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="data:image/jpeg;base64,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" alt="WriteSide"/><span class="back-menu-item-text">WriteSide</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">开发工具</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.jetbrains.com/zh-cn/idea/" title="idea"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2024-07-16/4576710485000.png" alt="idea"/><span class="back-menu-item-text">idea</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.jetbrains.com/zh-cn/datagrip/" title="DataGrip"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2024-07-16/4604435065400.png" alt="DataGrip"/><span class="back-menu-item-text">DataGrip</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2024-07-16/4663369180700.png" title="WebStorm"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2024-07-16/4604435065400.png" alt="WebStorm"/><span class="back-menu-item-text">WebStorm</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" title="微信开发者工具"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2024-07-16/4743988475500.png" alt="微信开发者工具"/><span class="back-menu-item-text">微信开发者工具</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" title="HBuilder"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.dcloud.io/hbuilderx.html" alt="HBuilder"/><span class="back-menu-item-text">HBuilder</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://mobaxterm.mobatek.net/" title="MobaXterm"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2024-07-16/4849682167700.png" alt="MobaXterm"/><span class="back-menu-item-text">MobaXterm</span></a></div></div></div></div><a id="site-name" href="index.html" accesskey="h"><div class="title"></div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)" rel="external nofollow noreferrer">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="index.html"><i class="fas fa-home faa-tada"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-link faa-tada"></i><span> 目录</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="fas fa-archive faa-tada"></i><span> 时间轴</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="fas fa-folder-open faa-tada"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-list faa-tada"></i><span> 清单</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/movies/"><i class="fas fa-video faa-tada"></i><span> 电影</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/books/"><i class="fas fa-book faa-tada"></i><span> 阅读</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/songs/"><i class="fas fa-music faa-tada"></i><span> 音乐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="fa-brands fa-bilibili faa-tada"></i><span> 追番</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/cinemas/"><i class="fa-brands fa-bilibili faa-tada"></i><span> 追剧</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="fas fa-link faa-tada"></i><span> 友链</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/gallery/"><i class="fas fa-solid fa-image faa-tada"></i><span> 相册集</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/love/static/index.html"><i class="fas fa-heart faa-tada"></i><span> Love</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="fa-solid fa-user faa-tada"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="fa-solid  fa-comment faa-tada"></i><span> 闲言碎语</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142337659.png" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" alt="wechat" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142337659.png"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142338230.png" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" alt="alipay" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142338230.png"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="tags/2024%E5%B9%B4/" style="font-size: 1.05rem;">2024年<sup>1</sup></a><a href="tags/2024%E5%B9%B47%E6%9C%88/" style="font-size: 1.05rem;">2024年7月<sup>1</sup></a><a href="tags/2%E6%97%A5/" style="font-size: 1.05rem;">2日<sup>1</sup></a><a href="tags/7%E6%9C%88/" style="font-size: 1.05rem;">7月<sup>1</sup></a><a href="tags/Butterfly/" style="font-size: 1.05rem;">Butterfly<sup>2</sup></a><a href="tags/CSS/" style="font-size: 1.05rem;">CSS<sup>2</sup></a><a href="tags/Docker-Compose%E5%AE%89%E8%A3%85Space/" style="font-size: 1.05rem;">Docker Compose安装Space<sup>1</sup></a><a href="tags/NR/" style="font-size: 1.05rem;">NR<sup>8</sup></a><a href="tags/Redis%E9%9B%86%E7%BE%A4/" style="font-size: 1.05rem;">Redis集群<sup>1</sup></a><a href="tags/gossip%E5%8D%8F%E8%AE%AE/" style="font-size: 1.05rem;">gossip协议<sup>1</sup></a><a href="tags/nari/" style="font-size: 1.05rem;">nari<sup>22</sup></a><a href="tags/xxc/" style="font-size: 1.05rem;">xxc<sup>1</sup></a><a href="tags/%E4%BB%A3%E7%A0%81/" style="font-size: 1.05rem;">代码<sup>1</sup></a><a href="tags/%E4%BB%A3%E7%A0%81%E5%A4%8D%E5%88%B6/" style="font-size: 1.05rem;">代码复制<sup>1</sup></a><a href="tags/%E4%BB%A3%E7%A0%81%E6%8D%A2%E8%A1%8C/" style="font-size: 1.05rem;">代码换行<sup>1</sup></a><a href="tags/%E4%BB%A3%E7%A0%81%E6%A1%86%E5%B1%95%E5%BC%80-%E5%85%B3%E9%97%AD/" style="font-size: 1.05rem;">代码框展开/关闭<sup>1</sup></a><a href="tags/%E4%BB%A3%E7%A0%81%E9%AB%98%E4%BA%AE%E4%B8%BB%E9%A2%98/" style="font-size: 1.05rem;">代码高亮主题<sup>1</sup></a><a href="tags/%E4%BB%A3%E7%A0%81%E9%AB%98%E5%BA%A6%E9%99%90%E5%88%B6/" style="font-size: 1.05rem;">代码高度限制<sup>1</sup></a><a href="tags/%E5%86%85%E5%AD%98%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 1.05rem;">内存数据库<sup>1</sup></a><a href="tags/%E5%8D%95%E7%BA%BF%E7%A8%8B/" style="font-size: 1.05rem;">单线程<sup>1</sup></a><a href="tags/%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AE/" style="font-size: 1.05rem;">参数设置<sup>1</sup></a><a href="tags/%E5%95%86%E5%93%81/" style="font-size: 1.05rem;">商品<sup>9</sup></a><a href="tags/%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/" style="font-size: 1.05rem;">多路复用<sup>1</sup></a><a href="tags/%E5%A4%B4%E5%83%8F/" style="font-size: 1.05rem;">头像<sup>1</sup></a><a href="tags/%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/" style="font-size: 1.05rem;">安装文档<sup>2</sup></a><a href="tags/%E5%AF%BC%E8%88%AA%E6%A0%8F%E8%AE%BE%E7%BD%AE/" style="font-size: 1.05rem;">导航栏设置<sup>1</sup></a><a href="tags/%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5/" style="font-size: 1.05rem;">数据同步<sup>1</sup></a><a href="tags/%E6%97%A5%E8%AE%B0/" style="font-size: 1.05rem;">日记<sup>14</sup></a><a href="tags/%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97/" style="font-size: 1.05rem;">更新日志<sup>10</sup></a><a href="tags/%E6%A7%BD%E5%88%86%E9%85%8D/" style="font-size: 1.05rem;">槽分配<sup>1</sup></a><a href="tags/%E7%9F%A5%E5%90%8D%E9%A1%B9%E7%9B%AE-Redis/" style="font-size: 1.05rem;">知名项目/Redis<sup>1</sup></a><a href="tags/%E7%A4%BE%E4%BA%A4%E5%9B%BE%E6%A0%87/" style="font-size: 1.05rem;">社交图标<sup>1</sup></a><a href="tags/%E7%BD%91%E7%AB%99%E8%B5%84%E6%96%99/" style="font-size: 1.05rem;">网站资料<sup>1</sup></a><a href="tags/%E8%8A%82%E7%82%B9%E9%80%9A%E4%BF%A1/" style="font-size: 1.05rem;">节点通信<sup>1</sup></a><a href="tags/%E8%8F%9C%E5%8D%95-%E7%9B%AE%E5%BD%95/" style="font-size: 1.05rem;">菜单/目录<sup>1</sup></a><a href="tags/%E8%AF%AD%E8%A8%80/" style="font-size: 1.05rem;">语言<sup>1</sup></a><a href="tags/%E8%B5%84%E6%BA%90/" style="font-size: 1.05rem;">资源<sup>9</sup></a><a href="tags/%E9%9B%86%E7%BE%A4%E5%88%86%E7%89%87/" style="font-size: 1.05rem;">集群分片<sup>1</sup></a><a href="tags/%E9%A1%B6%E9%83%A8%E5%9B%BE/" style="font-size: 1.05rem;">顶部图<sup>1</sup></a><a href="tags/%E9%AB%98%E6%80%A7%E8%83%BD/" style="font-size: 1.05rem;">高性能<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">16</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">66</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">16</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">27</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);" rel="external nofollow noreferrer"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a></div></div><h1 class="post-title" itemprop="name headline">1. 深入了解 Redis 数据类型和底层数据结构</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-08-12T09:50:43.000Z" title="发表于 2023-08-12 09:50:43">2023-08-12</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-01-17T06:42:23.628Z" title="更新于 2025-01-17 06:42:23">2025-01-17</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">13.6k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>41分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="1. 深入了解 Redis 数据类型和底层数据结构"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为南京"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>南京</span></div></div></div><article class="post-content" id="article-container" itemscope itemtype="https://blog.zysicyj.top/84392d3f.html"><header><h1 id="CrawlerTitle" itemprop="name headline">1. 深入了解 Redis 数据类型和底层数据结构</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">程序员朱永胜</span><time itemprop="dateCreated datePublished" datetime="2023-08-12T09:50:43.000Z" title="发表于 2023-08-12 09:50:43">2023-08-12</time><time itemprop="dateCreated datePublished" datetime="2025-01-17T06:42:23.628Z" title="更新于 2025-01-17 06:42:23">2025-01-17</time></header><div id="readmore-container"><link rel="stylesheet external nofollow noreferrer" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>Redis 有以下几种常用的数据类型：</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/image.png" class="gallery-item"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/image.png"></a></p>
<h2 id="redis 数据是如何组织的"><a href="#redis 数据是如何组织的" class="headerlink" title="redis 数据是如何组织的"></a>redis 数据是如何组织的 </h2><p> 为了实现从键到值的快速访问，Redis 使用了一个哈希表来保存所有键值对。</p>
<p>Redis 全局哈希表（Global Hash Table）是指在 Redis 数据库内部用于存储所有键值对的主要数据结构。它的实现原理涉及到哈希表、字典、渐进式 rehash 等技术，以下是 Redis 全局哈希表的实现原理和查询流程：</p>
<p><strong>实现原理：</strong></p>
<ol>
<li><p><strong>哈希表（Hash Table）：</strong></p>
<p>Redis 的全局哈希表是由多个哈希表构成的，每个哈希表称为一个数据库（DB）。数据库的数量可以通过配置进行设置，默认是 16 个。每个数据库都是一个独立的哈希表，负责存储键值对。</p>
</li>
<li><p><strong>字典（Dictionary）：</strong></p>
<p>每个数据库都使用字典（Dictionary）来实现键值对的存储。字典是一种高效的键值对存储结构，它使用哈希表来支持快速的查找、插入和删除操作。</p>
</li>
<li><p><strong>渐进式 rehash：</strong></p>
<p>当数据库的键值对数量较多时，为了保持查询性能，Redis 会在不中断服务的情况下，逐步将旧的数据库哈希表中的数据迁移到新的数据库哈希表中，这个过程叫做渐进式 rehash。这样，Redis 能够平滑地将数据从旧的哈希表迁移到新的哈希表，避免大规模的数据迁移对性能造成影响。</p>
</li>
</ol>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121104358.png" class="gallery-item"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121104358.png"></a></p>
<p><strong>查询流程：</strong></p>
<ol>
<li>客户端发送查询命令，指定要查询的键。</li>
<li>Redis 会根据键通过哈希函数计算哈希槽（hash slot）的索引，确定键在哪个数据库中。</li>
<li>Redis 根据数据库的哈希表，找到对应的字典。</li>
<li>在字典中，Redis 使用键进行查找，通过哈希表查找对应的值。如果找到了值，则将其返回给客户端。</li>
<li>如果键在当前数据库没有找到对应的值，Redis 可以根据需要进行跳转到其他数据库（例如在 Redis 集群中）。</li>
</ol>
<p>整个查询流程涉及到多次哈希计算和哈希表查找，这使得 Redis 能够在平均时间复杂度为 O(1)<br>的情况下，高效地进行键值对的查询操作。由于 Redis 的全局哈希表是一个核心组件，其优化和设计对于保障 Redis 的性能和可用性非常重要。</p>
<p>如果你只是了解了哈希表的 O(1) 复杂度和快速查找特性，那么，当你往 Redis<br>中写入大量数据后，就可能发现操作有时候会突然变慢了。这其实是因为你忽略了一个潜在的风险点，那就是哈希表的冲突问题和 rehash<br>可能带来的操作阻塞。</p>
<p><strong>为什么哈希表操作变慢了？</strong></p>
<p>Redis 解决哈希冲突的方式，就是链式哈希。链式哈希也很容易理解，就是指同一个哈希桶中的多个元素用一个链表来保存，它们之间依次用指针连接。</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121106905.png" class="gallery-item"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121106905.png"></a></p>
<p>哈希冲突是指在使用哈希函数将键映射到哈希表中的索引时，两个或多个键被映射到相同的索引位置。在 Redis 中，哈希表是通过哈希函数将键映射到一个固定数量的桶（bucket）中的。</p>
<p>Redis 使用 MurmurHash2 算法作为默认的哈希函数，它是一种快速且低碰撞率的哈希函数。然而，即使使用了高质量的哈希函数，仍然存在哈希冲突的可能性。</p>
<p>当发生哈希冲突时，Redis 使用链地址法（chaining）来解决。具体来说，每个桶中存储的是一个链表，链表中的每个节点都包含了键值对。当多个键被映射到同一个桶时，它们会被添加到链表中，形成一个键值对的集合。</p>
<p>当执行哈希表的读取操作时，Redis 会遍历链表，直到找到匹配的键值对或者链表结束。这个过程的时间复杂度取决于链表的长度，因此，如果哈希冲突较多，链表会变得很长，导致读取操作的性能下降。</p>
<p><strong>为了减少哈希冲突的发生，可以采取以下措施：</strong></p>
<ol>
<li>使用更好的哈希函数：选择一个更具随机性和低碰撞率的哈希函数，可以减少哈希冲突的概率。</li>
<li>扩大哈希表的大小：增加哈希表的桶数量，可以分散键的分布，减少哈希冲突的可能性。</li>
<li>使用一致性哈希算法：一致性哈希算法可以将键均匀地映射到多个节点上，减少单个节点上的哈希冲突。</li>
</ol>
<p>哈希冲突是不可避免的，但可以通过选择合适的哈希函数和调整哈希表的大小来减少其发生的概率，并且 Redis 的链地址法能够有效地解决哈希冲突带来的问题。</p>
<p>但是，这里依然存在一个问题，哈希冲突链上的元素只能通过指针逐一查找再操作。如果哈希表里写入的数据越来越多，哈希冲突可能也会越来越多，这就会导致某些哈希冲突链过长，进而导致这个链上的元素查找耗时长，效率降低。对于追求“快”的<br>Redis 来说，这是不太能接受的。</p>
<p>所以，Redis 会对哈希表做 rehash 操作。rehash 也就是增加现有的哈希桶数量，让逐渐增多的 entry<br>元素能在更多的桶之间分散保存，减少单个桶中的元素数量，从而减少单个桶中的冲突。</p>
<p><strong>那具体怎么做 rehash 呢？</strong></p>
<p>Redis 的 rehash 是指在哈希表扩容或缩小时，重新计算并重新分配所有键值对的过程。rehash 的目的是为了保持哈希表的负载因子在一个合理的范围内，以提高哈希表的性能。</p>
<p>在 Redis 中，rehash 是一个渐进式的过程，它不会一次性地将所有键值对重新分配到新的哈希表中，而是分多次进行，每次处理一小部分键值对。这种渐进式的 rehash 过程可以保证在 rehash 期间，Redis 仍然可以正常处理读取和写入操作，不会阻塞客户端请求。</p>
<p><strong>具体的 rehash 过程 </strong> 如下：</p>
<ol>
<li>Redis 会创建一个新的空哈希表，大小是当前哈希表的两倍（或更小，如果是缩小操作）。</li>
<li>Redis 会将当前哈希表的 rehashidx 属性设置为 0，表示 rehash 的起始位置。</li>
<li>在每次执行读取或写入操作时，Redis 会同时对当前哈希表和新哈希表进行操作。</li>
<li>对于读取操作，Redis 首先在当前哈希表中查找键值对，如果找不到，则继续在新哈希表中查找。</li>
<li>对于写入操作，Redis 会将新的键值对添加到新哈希表中，同时保留当前哈希表中的键值对。</li>
<li>在每次执行完一定数量的操作后，Redis 会逐步将当前哈希表中的键值对迁移到新哈希表中，直到迁移完成。</li>
<li>最后，Redis 会将新哈希表设置为当前哈希表，并释放旧的哈希表的内存空间。</li>
</ol>
<p>通过 <strong> 渐进式的 rehash 过程</strong><br>，Redis 可以平滑地将键值对从旧哈希表迁移到新哈希表，避免了一次性的大规模迁移带来的性能问题。同时，由于读取操作可以同时在两个哈希表中进行，所以即使在 rehash 过程中，Redis 仍然可以提供正常的读取服务。</p>
<p>需要注意的是，rehash 过程是一个相对耗时的操作，特别是在哈希表中存储了大量键值对的情况下。因此，在进行 rehash 时，应该避免对 Redis 进行大量的写入操作，以免影响性能。</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121115732.png" class="gallery-item"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121115732.png"></a></p>
<h2 id="底层实现复杂度总结"><a href="# 底层实现复杂度总结" class="headerlink" title="底层实现复杂度总结"></a>底层实现复杂度总结</h2><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121119851.png" class="gallery-item"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121119851.png"></a></p>
<h2 id="一、字符串（String）"><a href="# 一、字符串（String）" class="headerlink" title="一、字符串（String）"></a>一、字符串（String）</h2><h3 id="适用场景"><a href="# 适用场景" class="headerlink" title="适用场景"></a>适用场景 </h3><p> 字符串（String）类型在 Redis 中是最常用的数据类型之一，适用于以下场景：</p>
<ol>
<li>缓存：字符串类型可以用于缓存数据，例如缓存数据库查询结果、计算结果等。由于 Redis 的高性能和快速读写能力，使用字符串类型作为缓存可以大大提高系统的响应速度。</li>
<li>计数器：字符串类型可以用于实现计数器功能，例如统计网站的访问次数、用户的点赞数等。通过使用字符串类型的自增命令，可以方便地对计数器进行增加或减少操作。</li>
<li>分布式锁：字符串类型可以用于实现分布式锁，保证在分布式环境下的数据一致性和并发控制。通过设置一个唯一的字符串作为锁的值，并利用 Redis 的原子性操作，可以实现简单而高效的分布式锁机制。</li>
<li>会话管理：字符串类型可以用于存储用户的会话信息，例如用户登录状态、购物车内容等。通过将会话信息存储在字符串类型中，可以方便地进行读写操作，并且可以设置过期时间来自动清理过期的会话数据。</li>
<li>消息队列：字符串类型可以用于实现简单的消息队列，例如将消息内容作为字符串存储在 Redis 中，然后使用列表类型的命令进行消息的发布和订阅。</li>
<li>分布式缓存：字符串类型可以用于实现分布式缓存，例如将经过序列化的对象存储在字符串类型中，然后通过缓存命中来提高系统的性能和扩展性。</li>
</ol>
<h3 id="底层实现是什么"><a href="# 底层实现是什么" class="headerlink" title="底层实现是什么"></a>底层实现是什么 </h3><p> 当我们在 Redis 中存储字符串时，Redis 使用了一种称为简单动态字符串（Simple Dynamic String，SDS）的数据结构来表示字符串。</p>
<p>SDS 是 Redis 自己实现的一种字符串表示方式，相比于传统的 C 语言字符串，SDS 具有许多优势和特点。</p>
<ol>
<li>动态调整大小：SDS 可以根据字符串的长度动态调整内存大小。这意味着当我们向 SDS 中添加更多的字符时，SDS 会自动分配更多的内存空间来容纳新的字符，而不需要手动管理内存分配和释放。这样可以避免频繁的内存重新分配操作，提高了性能。</li>
<li>O(1)时间复杂度的长度获取：SDS 在内部维护了字符串的长度信息。因此，无论字符串的长度是多少，我们都可以在常数时间内获取字符串的长度，而不需要遍历整个字符串。这使得获取字符串长度的操作非常高效。</li>
<li>二进制安全：SDS 可以存储任意二进制数据，而不仅仅局限于文本字符串。这意味着我们可以在 SDS 中存储包含空字符（’\0’<br>）在内的任意二进制数据，而不会导致字符串的截断或错误解析。<ol start="4">
<li></li>
</ol>
</li>
</ol>
<p>缓冲区溢出保护：SDS 在内部维护了字符串的长度信息，这使得 Redis 能够有效地防止缓冲区溢出的问题。当我们向 SDS 中添加新的字符时，Redis 会检查是否有足够的空间来容纳新的字符，如果没有足够的空间，Redis 会自动分配更多的内存空间，以避免溢出。</p>
<ol start="5">
<li></li>
</ol>
<p>兼容 C 字符串：SDS 可以通过转换函数与 C 字符串进行互相转换。这意味着我们可以在 Redis 中使用 SDS 来存储字符串，然后将其转换为 C 字符串，以便与现有的 C 代码进行交互。反之，我们也可以将 C 字符串转换为 SDS，以便在 Redis 中使用更多的字符串操作功能。</p>
<p>SDS 的结构如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sdshdr</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> len;        <span class="comment">// 字符串的长度</span></span><br><span class="line">    <span class="type">int</span> <span class="built_in">free</span>;       <span class="comment">// 未使用的字节长度</span></span><br><span class="line">    <span class="type">char</span> buf[];     <span class="comment">// 字符串的实际内容</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>其中，<code>len</code>表示字符串的长度，<code>free</code>表示未使用的字节长度，<code>buf</code>是一个柔性数组，用于存储字符串的实际内容。</p>
<p>通过使用简单动态字符串作为底层数据结构，Redis 能够高效地处理字符串操作，并提供了丰富的字符串操作命令和功能。这使得 Redis 成为一个强大的键值存储系统，可以用于各种不同的应用场景。作为新手，了解 SDS 的特点和结构将有助于你更好地理解和使用 Redis 中的字符串数据类型。</p>
<h3 id="如何使用"><a href="# 如何使用" class="headerlink" title="如何使用"></a>如何使用 </h3><p> 要在 Redis 中使用字符串类型，你可以使用以下命令：</p>
<ol>
<li>设置字符串值：使用 <code>SET</code> 命令可以设置一个字符串键的值。例如，<code>SET key value</code>将键 <code>key</code> 的值设置为<code>value</code>。</li>
<li>获取字符串值：使用 <code>GET</code> 命令可以获取一个字符串键的值。例如，<code>GET key</code>将返回键 <code>key</code> 的值。</li>
<li>自增 &#x2F; 自减操作：使用 <code>INCR</code> 命令可以将一个字符串键的值自增 1，使用 <code>DECR</code> 命令可以将一个字符串键的值自减 1。例如，<code>INCR key</code><br>将键 <code>key</code> 的值增加 1。</li>
<li>设置过期时间：使用 <code>EXPIRE</code> 命令可以为一个字符串键设置过期时间，单位为秒。例如，<code>EXPIRE key seconds</code>将键 <code>key</code><br> 的过期时间设置为 <code>seconds</code> 秒。</li>
<li>批量操作：使用 <code>MSET</code> 命令可以同时设置多个字符串键的值，使用 <code>MGET</code> 命令可以同时获取多个字符串键的值。</li>
<li>字符串拼接：使用 <code>APPEND</code> 命令可以将指定字符串追加到一个字符串键的值的末尾。</li>
<li>其他操作：Redis 还提供了许多其他的字符串操作命令，如获取子字符串、获取字符串长度、设置指定位置的字符等。</li>
</ol>
<p>以下是一些示例命令的用法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SET name <span class="string">&quot;John&quot;</span>          // 设置键为 name 的值为 <span class="string">&quot;John&quot;</span></span><br><span class="line">GET name                 // 获取键为 name 的值</span><br><span class="line">INCR counter             // 将键为 counter 的值自增 1</span><br><span class="line">EXPIRE key 60            // 设置键为 key 的过期时间为 60 秒</span><br><span class="line">MSET key1 value1 key2 value2   // 同时设置多个键值对</span><br><span class="line">MGET key1 key2           // 同时获取多个键的值</span><br><span class="line">APPEND greeting <span class="string">&quot;, welcome!&quot;</span>   // 将<span class="string">&quot;, welcome!&quot;</span> 追加到键 greeting 的值的末尾</span><br></pre></td></tr></table></figure>

<p>通过使用这些命令，你可以在 Redis 中灵活地操作字符串类型，实现各种功能和应用场景。记得在使用字符串类型时，根据具体需求选择合适的命令和参数，并注意处理异常情况和错误返回值。</p>
<h3 id="需要注意的地方"><a href="# 需要注意的地方" class="headerlink" title="需要注意的地方"></a>需要注意的地方 </h3><p> 在使用 Redis 的字符串类型时，有一些需要注意的地方：</p>
<ol>
<li>字符串长度限制：Redis 的字符串类型最大可以存储 512MB 的数据。如果需要存储更大的数据，可以考虑使用 Redis 的其他数据类型或将数据分片存储。</li>
<li>数据类型转换：当使用字符串类型时，需要注意数据类型的转换。Redis 的字符串类型是二进制安全的，可以存储任意二进制数据，但在使用时需要根据具体情况进行数据的序列化和反序列化。</li>
<li>过期时间设置：通过使用 <code>EXPIRE</code> 命令可以为字符串键设置过期时间，但需要注意过期时间的合理设置。过期时间过短可能导致频繁的数据失效和重新加载，过期时间过长可能导致数据过期不及时。</li>
<li>内存使用：由于 Redis 是内存数据库，使用字符串类型时需要注意内存的使用情况。特别是在存储大量字符串数据时，需要合理控制内存的分配和释放，避免出现内存溢出的问题。</li>
<li>并发操作：在多线程或多进程环境下使用字符串类型时，需要注意并发操作的问题。Redis 提供了原子性操作命令，如自增、自减等，可以保证操作的原子性，但需要注意并发操作可能导致的数据竞争和一致性问题。</li>
<li>键的命名规范：为了避免键的冲突和混淆，建议在命名字符串键时使用有意义的、具有一定规范的命名方式，以便更好地管理和维护数据。</li>
<li>数据备份和持久化：Redis 提供了数据持久化的机制，可以将数据保存到磁盘上，以防止数据丢失。在使用字符串类型时，可以考虑定期进行数据备份和持久化操作，以保证数据的安全性和可恢复性。</li>
</ol>
<p>总之，在使用 Redis 的字符串类型时，需要根据具体的应用场景和需求，合理选择命令和参数，并注意处理异常情况和错误返回值。同时，合理规划和管理数据，注意内存使用和并发操作，可以更好地利用 Redis 的字符串类型，提高系统的性能和可靠性。</p>
<h2 id="二、列表（List）"><a href="# 二、列表（List）" class="headerlink" title="二、列表（List）"></a>二、列表（List）</h2><h3 id="适用场景 -1"><a href="# 适用场景 -1" class="headerlink" title="适用场景"></a>适用场景 </h3><p> 列表（List）类型在 Redis 中是一种非常常用的数据类型，适用于以下场景：</p>
<ol>
<li>消息队列：列表类型可以用于实现简单的消息队列。生产者可以使用 <code>LPUSH</code> 命令将消息添加到列表的头部，消费者可以使用 <code>RPOP</code><br> 命令从列表的尾部获取消息。这种方式可以实现先进先出（FIFO）的消息处理。</li>
<li>实时排行榜：列表类型可以用于实现实时排行榜。例如，可以使用 <code>LPUSH</code> 命令将用户的得分添加到列表中，然后使用 <code>LPOP</code> 命令获取排行榜的前几名。</li>
<li>任务队列：列表类型可以用于实现任务队列。生产者可以使用 <code>LPUSH</code> 命令将任务添加到列表的尾部，消费者可以使用 <code>RPOP</code><br> 命令从列表的头部获取任务。这种方式可以实现任务的分发和处理。</li>
<li>消息发布与订阅：列表类型可以用于实现简单的消息发布与订阅。生产者可以使用 <code>LPUSH</code><br> 命令将消息添加到列表的头部，订阅者可以使用 <code>BLPOP</code> 命令阻塞地从列表中获取消息。</li>
<li>历史记录：列表类型可以用于存储历史记录。例如，可以使用 <code>LPUSH</code> 命令将用户的浏览记录添加到列表中，然后使用 <code>LRANGE</code><br> 命令获取最近的浏览记录。</li>
</ol>
<h3 id="底层实现是什么 -1"><a href="# 底层实现是什么 -1" class="headerlink" title="底层实现是什么"></a>底层实现是什么 </h3><p> 当涉及到 Redis 中列表类型的底层实现时，有两种可能的数据结构：压缩列表（Ziplist）和双向链表（Doubly Linked List）。</p>
<ol>
<li><p>压缩列表（Ziplist）：</p>
<p>压缩列表是一种紧凑的数据结构，用于存储较小的列表。它将多个列表元素紧密地存储在一起，以减少内存的使用。压缩列表的结构如下：</p>
</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;zlbytes&gt;&lt;zltail&gt;&lt;zllen&gt;&lt;entry&gt;&lt;entry&gt;...&lt;entry&gt;&lt;zlend&gt;</span></span><br></pre></td></tr></table></figure>

<pre><code>- `&lt;zlbytes&gt;`：表示压缩列表的总字节数。
- `&lt;zltail&gt;`：指向压缩列表的最后一个节点。
- `&lt;zllen&gt;`：表示压缩列表中的元素数量。
- `&lt;entry&gt;`：表示每个列表元素的存储形式，包括元素长度和元素内容。
- `&lt;zlend&gt;`：表示压缩列表的结束标志。

压缩列表的优势在于它可以在一定程度上减少内存的使用，并且对于较小的列表，它的性能比双向链表更好。但是，当列表的长度或元素的大小超过一定限制时，Redis 会自动将压缩列表转换为双向链表。
</code></pre>
<ol start="2">
<li><p>双向链表（Doubly Linked List）：</p>
<p>双向链表是一种常见的数据结构，用于存储列表元素。每个节点都包含一个指向前一个节点和后一个节点的指针。双向链表的结构如下：</p>
</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;prev&gt;&lt;entry&gt;&lt;next&gt;</span></span><br></pre></td></tr></table></figure>

<pre><code>- `&lt;prev&gt;`：指向前一个节点的指针。
- `&lt;entry&gt;`：表示节点中存储的列表元素。
- `&lt;next&gt;`：指向后一个节点的指针。

双向链表的优势在于它可以高效地进行插入、删除和遍历操作。通过指针，可以快速地在链表中移动，并且在任意位置插入或删除节点的开销较小。
</code></pre>
<p>Redis 在选择使用压缩列表还是双向链表作为列表的底层实现时，会根据以下两个因素进行判断：</p>
<ul>
<li>列表的长度：当列表的长度超过一定限制（默认为 512 个元素）时，Redis 会将压缩列表转换为双向链表，以便更好地处理大型列表。</li>
<li>列表元素的大小：当列表中的元素大小超过一定限制（默认为 64 字节）时，Redis 会将压缩列表转换为双向链表，以便更好地处理大型元素。</li>
</ul>
<p>转换时机是在执行插入或删除操作时进行检查的。如果列表满足转换条件，Redis 会自动将压缩列表转换为双向链表，并将数据从压缩列表复制到新的双向链表中。这个转换过程可能会导致一些额外的内存开销，但它使得 Redis 能够更好地处理大型列表和大型元素。</p>
<p>通过使用压缩列表和双向链表作为底层实现，Redis 的列表类型可以在不同的场景下提供高效的性能和灵活性。</p>
<h3 id="如何使用 -1"><a href="# 如何使用 -1" class="headerlink" title="如何使用"></a>如何使用 </h3><p> 在 Redis 中，可以使用列表（List）类型进行以下操作：</p>
<ol>
<li>添加元素：<ul>
<li>使用 <code>LPUSH key value</code> 命令将一个或多个元素添加到列表的头部。</li>
<li>使用 <code>RPUSH key value</code> 命令将一个或多个元素添加到列表的尾部。</li>
</ul>
</li>
<li>弹出元素：<ul>
<li>使用 <code>LPOP key</code> 命令从列表的头部弹出并返回一个元素。</li>
<li>使用 <code>RPOP key</code> 命令从列表的尾部弹出并返回一个元素。</li>
</ul>
</li>
<li>获取元素：<ul>
<li>使用 <code>LINDEX key index</code> 命令获取列表中指定位置的元素。索引从 0 开始，负数表示从尾部开始计数。</li>
<li>使用 <code>LRANGE key start stop</code> 命令获取列表中指定范围的元素。范围包括起始位置和结束位置，负数表示从尾部开始计数。</li>
</ul>
</li>
<li>获取列表长度：<ul>
<li>使用 <code>LLEN key</code> 命令获取列表的长度。</li>
</ul>
</li>
<li>在指定元素前或后插入元素：<ul>
<li>使用 <code>LINSERT key BEFORE|AFTER pivot value</code> 命令在列表中指定元素的前或后插入一个元素。</li>
</ul>
</li>
<li>移除指定数量的元素：<ul>
<li>使用 <code>LREM key count value</code> 命令从列表中移除指定数量的匹配元素。</li>
</ul>
</li>
<li>获取并设置指定位置的元素：<ul>
<li>使用 <code>LSET key index value</code> 命令将列表中指定位置的元素设置为新的值，并返回旧的值。</li>
</ul>
</li>
<li>获取并移动元素：<ul>
<li>使用 <code>RPOPLPUSH source destination</code> 命令从一个列表的尾部弹出一个元素，并将它添加到另一个列表的头部。</li>
</ul>
</li>
<li>阻塞弹出元素：<ul>
<li>使用 <code>BLPOP key1 key2 ... timeout</code> 命令阻塞地从多个列表中弹出元素，直到有元素可弹出或超时。</li>
</ul>
</li>
</ol>
<p>这些是列表类型的一些常用操作，可以根据具体的需求选择适合的命令来操作列表。列表类型在 Redis 中非常灵活和多用途，适用于各种场景，包括消息队列、排行榜、任务队列、消息发布与订阅、历史记录等。</p>
<h3 id="需要注意的地方 -1"><a href="# 需要注意的地方 -1" class="headerlink" title="需要注意的地方"></a>需要注意的地方 </h3><p> 在使用 Redis 中的列表数据类型时，有一些注意事项和最佳实践，特别是对于新手来说。以下是一些使用 Redis 列表时需要注意的地方：</p>
<ol>
<li><p><strong>插入顺序和重复：</strong></p>
<p>列表是有序的数据结构，插入的元素按照插入的顺序排列。允许插入重复的元素，因此列表可以作为一个简单的数据结构来实现队列或栈。</p>
</li>
<li><p><strong>左右插入操作：</strong></p>
<p>Redis 提供了 <code>LPUSH</code> 和 <code>RPUSH</code> 命令来在列表的左侧和右侧插入元素。左侧插入类似于栈的操作，右侧插入类似于队列的操作。</p>
</li>
<li><p><strong>范围操作：</strong></p>
<p>使用 <code>LRANGE</code> 命令可以获取列表中的一定范围的元素。这对于分页显示、获取最近的数据等场景非常有用。</p>
</li>
<li><p><strong>修剪列表：</strong></p>
<p>使用 <code>LTRIM</code> 命令可以修剪列表，只保留指定范围的元素，其余的元素会被删除。</p>
</li>
<li><p><strong>列表长度：</strong></p>
<p>使用 <code>LLEN</code> 命令可以获取列表的长度。</p>
</li>
<li><p><strong>弹出元素：</strong></p>
<p>使用 <code>LPOP</code> 和 <code>RPOP</code> 命令可以从列表的左侧和右侧弹出一个元素。这可以用于实现队列和栈的行为。</p>
</li>
<li><p><strong>阻塞操作：</strong></p>
<p>Redis 还提供了阻塞版本的弹出操作，例如 <code>BLPOP</code> 和 <code>BRPOP</code>，这些命令可以在列表为空时阻塞等待新元素的到来。</p>
</li>
<li><p><strong>遍历操作：</strong></p>
<p>Redis 并没有直接提供像迭代器一样的遍历机制，因此如果需要遍历列表，需要自己实现。</p>
</li>
<li><p><strong>内存注意：</strong></p>
<p>列表虽然很方便，但随着元素的增加，内存占用也会增加。在插入大量元素时要注意内存消耗。</p>
</li>
<li><p><strong>不适合大型列表：</strong></p>
<p>Redis 的列表是基于链表实现的，对于大型列表的随机访问效率较低，如果需要频繁的随机访问，请考虑其他数据结构。</p>
</li>
<li><p><strong>避免滥用：</strong></p>
<p>列表适用于有序插入和删除的场景，但不适合用作集合数据的存储。如果需要集合操作，可以考虑使用集合（Set）数据类型。</p>
</li>
</ol>
<p>总之，使用 Redis 列表时需要根据具体的业务需求和场景来选择。了解 Redis 列表的特点和限制，可以帮助你更好地规划和使用这一数据类型。</p>
<h2 id="三、集合（Set）"><a href="# 三、集合（Set）" class="headerlink" title="三、集合（Set）"></a>三、集合（Set）</h2><h3 id="适用场景 -2"><a href="# 适用场景 -2" class="headerlink" title="适用场景"></a>适用场景</h3><p>Redis 的 Set 数据类型是一个无序的字符串集合，它可以存储多个不重复的元素。Set 在 Redis 中有许多实际的使用场景，以下是一些常见的使用场景：</p>
<ol>
<li><p><strong>唯一性数据存储：</strong></p>
<p>最基本的使用场景就是用来存储不重复的数据。你可以使用 Set 来存储用户 ID、IP 地址、邮箱地址等，确保数据的唯一性。</p>
</li>
<li><p><strong>标签和标记系统：</strong></p>
<p>Set 可以用于创建标签或标记系统。例如，你可以为文章、商品或其他实体创建一个包含相关标签的 Set，以便后续快速检索。</p>
</li>
<li><p><strong>关注和粉丝系统：</strong></p>
<p>在社交媒体或用户关系管理中，Set 可以用来实现关注和粉丝系统。每个用户可以有一个 Set，其中包含他们关注的其他用户或粉丝。</p>
</li>
<li><p><strong>在线用户：</strong></p>
<p>Set 可以用于跟踪在线用户。将用户 ID 添加到一个 Set 中，表示用户当前在线。通过检查 Set 中的成员，可以快速查找在线用户。</p>
</li>
<li><p><strong>投票系统：</strong></p>
<p>Set 可以用于实现投票系统。每个投票项目可以表示为一个 Set，用户投票时将其 ID 添加到相应的 Set 中，确保每个用户只能投一次。</p>
</li>
<li><p><strong>集合运算：</strong></p>
<p>Redis 提供了多种 Set 运算，如交集、并集和差集。这些运算可以用于计算多个集合之间的共同元素、合并元素等。</p>
</li>
<li><p><strong>排行榜和排名：</strong></p>
<p>Set 可以用于创建排行榜系统。例如，每个元素代表一个玩家，分数作为元素的权重。可以通过有序集合操作获取排名和排行。</p>
</li>
<li><p><strong>地理位置标记：</strong></p>
<p>Set 可以用于存储地理位置数据，例如存储用户的经纬度坐标，然后利用 Set 运算来查找附近的位置。</p>
</li>
<li><p><strong>过滤重复事件：</strong></p>
<p>如果你需要记录一系列事件，并且要确保事件不重复记录，可以使用 Set 来存储已经发生的事件，防止重复记录。</p>
</li>
</ol>
<p>总的来说，Redis 的 Set 数据类型非常适合需要存储不重复数据、进行集合运算以及需要高效查找元素的场景。无论是在社交网络、实时分析、排行榜、地理位置服务等领域，Set 都有着广泛的应用。</p>
<h3 id="底层实现是什么 -2"><a href="# 底层实现是什么 -2" class="headerlink" title="底层实现是什么"></a>底层实现是什么 </h3><p> 在 Redis 中，集合（Set）类型的底层实现有两种：哈希表（Hash Table）和跳跃表（Skip List）。</p>
<ol>
<li>哈希表（Hash<br>Table）：哈希表是一种使用哈希函数将元素映射到桶（bucket）的数据结构。在 Redis 中，集合的每个元素都被存储在哈希表的一个桶中。哈希表提供了快速的插入、删除和查找操作，平均情况下的时间复杂度为 O(<br>1)。哈希表适用于存储大量元素的集合，并且对于查找操作的性能要求较高。</li>
<li>跳跃表（Skip<br>List）：跳跃表是一种有序的数据结构，它通过多层链表的方式来提供快速的查找操作。每个节点都包含一个指向下一层和右侧节点的指针。在 Redis 中，集合的元素按照从小到大的顺序存储在跳跃表中。跳跃表提供了快速的插入、删除和范围查找操作，平均情况下的时间复杂度为 O(<br>log n)。跳跃表适用于有序集合的场景，或者对于范围查找操作的性能要求较高。</li>
</ol>
<p>在 Redis 中，当集合的元素数量较少时，底层实现会使用哈希表。当集合的元素数量增加到一定阈值时，Redis 会自动将哈希表转换为跳跃表，以提供更好的性能和空间效率。</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121117928.png" class="gallery-item"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121117928.png"></a></p>
<p>Redis 中的有序集合（Sorted Set）使用的是跳跃表（Skip List）数据结构来实现的。跳跃表是一种用于有序元素存储和检索的数据结构，它的设计使得有序集合的插入、删除和查找操作都能在平均情况下达到<br>O(log n) 的时间复杂度。</p>
<p><strong>跳跃表（Skip List）实现原理：</strong></p>
<ol>
<li><p><strong>多级索引：</strong></p>
<p>跳跃表的核心思想是使用多级索引来加速查找操作。除了底层的链表结构，跳跃表还有多个级别的索引，每一级索引都是一个较小的有序链表，其中的节点包含指向下一级索引节点的指针。</p>
</li>
<li><p><strong>底层链表：</strong></p>
<p>跳跃表的底层是一个有序链表，节点按照键的大小顺序排列。每个节点包含一个键和对应的值。</p>
</li>
<li><p><strong>多级索引节点：</strong></p>
<p>跳跃表的多级索引节点也是有序链表，但是它的节点数目比底层链表少。每个多级索引节点都存储了指向底层链表中对应范围节点的指针。不同级别的索引通过链式连接在一起。</p>
</li>
<li><p><strong>节点的分布：</strong></p>
<p>节点在不同级别的索引中以一定概率分布，使得跳跃表在查询时能够快速跳过一些不必要的节点，从而达到快速查找的效果。</p>
</li>
</ol>
<p><strong>跳跃表查询流程：</strong></p>
<ol>
<li>客户端发送查询命令，指定要查询的成员。</li>
<li>Redis 会从顶级索引（最高级别）开始，逐级向右移动，查找每一级索引中的节点。</li>
<li>在每一级索引中，Redis 会沿着链表移动，比较节点的键与要查找的成员的大小。</li>
<li>当找到第一个大于等于要查找成员的节点时，如果节点的键等于要查找的成员，查找成功；如果节点的键大于要查找的成员，就会进入下一级索引继续查找。</li>
<li>如果最底层链表中没有找到匹配的节点，那么查询失败，返回结果为空。</li>
</ol>
<p>跳跃表的设计使得它在有序集合中实现高效的查找、插入和删除操作，特别是对于范围查询等操作。通过多级索引和有序链表的结合，Redis 的有序集合能够在平均情况下达到<br>O(log n) 的时间复杂度，从而保证了高性能的数据操作。</p>
<h3 id="如何使用 -2"><a href="# 如何使用 -2" class="headerlink" title="如何使用"></a>如何使用</h3><p>Redis 的 Set 是一种无序、不重复元素的数据结构，类似于数学上的集合。它支持添加、删除和查询元素，并且能够对多个集合进行交集、并集、差集等操作。下面是关于 Redis<br>Set 的基本使用方法：</p>
<p><strong>1. 添加元素：</strong></p>
<p>使用 <code>SADD</code> 命令可以向一个 Set 中添加一个或多个元素。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SADD myset value1 value2 value3</span><br></pre></td></tr></table></figure>

<p><strong>2. 删除元素：</strong></p>
<p>使用 <code>SREM</code> 命令可以从一个 Set 中删除一个或多个元素。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SREM myset value1 value2</span><br></pre></td></tr></table></figure>

<p><strong>3. 判断元素是否存在：</strong></p>
<p>使用 <code>SISMEMBER</code> 命令可以判断一个元素是否存在于 Set 中。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SISMEMBER myset value</span><br></pre></td></tr></table></figure>

<p><strong>4. 获取集合中的元素数量：</strong></p>
<p>使用 <code>SCARD</code> 命令可以获取一个 Set 中元素的数量。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SCARD myset</span><br></pre></td></tr></table></figure>

<p><strong>5. 获取集合中的所有元素：</strong></p>
<p>使用 <code>SMEMBERS</code> 命令可以获取一个 Set 中的所有元素。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SMEMBERS myset</span><br></pre></td></tr></table></figure>

<p><strong>6. 集合操作：</strong></p>
<ul>
<li>并集：使用 <code>SUNION</code> 命令可以对多个 Set 进行并集操作。</li>
<li>交集：使用 <code>SINTER</code> 命令可以对多个 Set 进行交集操作。</li>
<li>差集：使用 <code>SDIFF</code> 命令可以对多个 Set 进行差集操作。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SUNION destination_set set1 set2</span><br><span class="line">SINTER destination_set set1 set2</span><br><span class="line">SDIFF destination_set set1 set2</span><br></pre></td></tr></table></figure>

<h3 id="需要注意的地方 -2"><a href="# 需要注意的地方 -2" class="headerlink" title="需要注意的地方"></a>需要注意的地方 </h3><p> 在使用 Redis 的 Set 数据类型时，有一些注意事项和最佳实践可以帮助你更好地利用它。以下是使用 Redis Set 时需要注意的几个方面：</p>
<p><strong>1. 唯一性：</strong></p>
<p>Set 是无序、不重复元素的集合。确保你向 Set 中添加的元素是唯一的，因为 Set 不会存储重复的值。</p>
<p><strong>2. 数据量：</strong></p>
<p>虽然 Redis 可以处理大量的数据，但仍需谨慎处理数据量较大的 Set。当 Set 中的元素数量变得很大时，查询、插入和删除等操作的性能可能会受到影响。</p>
<p><strong>3. 考虑使用过期时间：</strong></p>
<p>可以为 Set 设置过期时间，让不再需要的数据自动过期，以释放内存资源。</p>
<p><strong>4. 避免大量的成员操作：</strong></p>
<p>在某些情况下，如果需要对 Set 中的大量成员进行操作（如删除），可能会影响性能。如果需要频繁进行大规模操作，可以考虑使用多个小规模的 Set，而不是一个包含大量成员的 Set。</p>
<p><strong>5. 集合操作注意事项：</strong></p>
<p>集合操作（如并集、交集、差集）可能会对性能产生一定影响，特别是在 Set 的成员数量较大时。在执行集合操作时，应该考虑其对性能的影响，并根据实际情况进行优化。</p>
<p><strong>6. 避免全量遍历：</strong></p>
<p>避免使用 <code>SMEMBERS</code> 等命令获取所有成员，因为在大数据集下会产生性能问题。如果需要遍历成员，可以考虑使用 <code>SSCAN</code> 命令进行分页式的遍历。</p>
<p><strong>7. 使用有序集合代替：</strong></p>
<p>如果你需要有序的集合，可以考虑使用有序集合（Sorted Set）数据类型，它可以同时提供有序性和唯一性，适用于排行榜、计分系统等场景。</p>
<p><strong>8. 持久化和备份：</strong></p>
<p>在重要的生产环境中，始终要考虑持久化和备份策略，以确保数据不会因为意外情况而丢失。</p>
<p>总之，在使用 Redis 的 Set 数据类型时，需要根据应用需求和数据量合理规划和优化。了解你的数据模型、数据量以及操作需求，可以帮助你更好地利用 Redis 的 Set 功能，并确保系统的性能和稳定性。</p>
<h2 id="四、有序集合（Sorted-Set）：与集合类似，但每个元素都关联一个分数，可以根据分数进行排序。"><a href="# 四、有序集合（Sorted-Set）：与集合类似，但每个元素都关联一个分数，可以根据分数进行排序。" class="headerlink" title="四、有序集合（Sorted Set）：与集合类似，但每个元素都关联一个分数，可以根据分数进行排序。"></a>四、有序集合（Sorted Set）：与集合类似，但每个元素都关联一个分数，可以根据分数进行排序。</h2><h3 id="适用场景 -3"><a href="# 适用场景 -3" class="headerlink" title="适用场景"></a>适用场景 </h3><p> 有序集合（Sorted Set）是 Redis 中的一种特殊数据类型，它在有序性和唯一性的基础上，为存储一组成员（元素）分配了一个分数（score）。这种数据结构使得有序集合在许多应用场景中非常有用。以下是一些适用场景：</p>
<p><strong>1. 排行榜和计分系统：</strong><br>有序集合非常适合实现排行榜和计分系统。成员的分数可以表示玩家的得分、评分、积分等。你可以通过分数对成员进行排序，快速地获取前几名的排名。</p>
<p><strong>2. 时间序列数据：</strong><br>如果你需要存储带有时间戳的数据，有序集合可以根据时间戳（作为分数）进行排序，然后按时间范围快速查询数据。</p>
<p><strong>3. 最新消息：</strong><br>有序集合可以用来存储最新的消息，每个消息的分数可以是消息的时间戳，这样可以方便地获取最新的消息。</p>
<p><strong>4. 带权重的标签 &#x2F; 标签云：</strong><br>在社交网络或标签系统中，你可以使用有序集合来存储标签，成员是标签，分数可以表示标签的热度、权重等。这可以用来实现标签云、热门标签等功能。</p>
<p><strong>5. 范围查询：</strong><br>有序集合允许根据分数范围进行查询，从而可以快速地获取在某个分数范围内的成员。</p>
<p><strong>6. 唯一性：</strong><br>有序集合保持了成员的唯一性，这意味着你可以方便地存储和查询不重复的元素。</p>
<p><strong>7. 高级集合运算：</strong><br>Redis 提供了对有序集合的集合运算（交集、并集、差集）操作，这可以用来实现多个数据集的交叉分析、数据筛选等。</p>
<p><strong>8. 范围分页：</strong><br>使用 <code>ZRANGE</code> 等命令，可以对有序集合进行分页查询，获取指定范围内的成员。</p>
<p>总之，有序集合适用于需要保持元素有序性、需要快速进行范围查询、具有权重或分数的情况。它在多个场景中都提供了高效的数据存储和操作，使得 Redis 成为了解决这些问题的有力工具。</p>
<h3 id="底层实现是什么 -3"><a href="# 底层实现是什么 -3" class="headerlink" title="底层实现是什么"></a>底层实现是什么</h3><p>Redis 的有序集合（Sorted Set）底层的实现采用了跳跃表（Skip List）和哈希表（Hash<br>Table）的结合。这种设计使得有序集合既能在保持有序性的同时，也能够高效地执行添加、删除、查询等操作。</p>
<p><strong>跳跃表（Skip List）：</strong><br>跳跃表是用来维护有序集合中的成员的。在有序集合中，每个成员都有一个分数（score），而跳跃表则根据这个分数来排序成员。跳跃表通过多级索引，可以在平均情况下实现<br>O(log n) 的插入、删除和查询操作。</p>
<p><strong>哈希表（Hash Table）：</strong><br>有序集合在存储成员和分数之间的映射关系时，使用了哈希表。每个成员都会在哈希表中对应一个键值对，其中键是成员，值是分数。通过哈希表，Redis 可以在<br>O(1) 时间内查找某个成员的分数。</p>
<p><strong>结合使用的方式：</strong><br>有序集合的每个元素在底层的哈希表中存储着成员和分数的映射关系，同时在跳跃表中存储了成员的排序信息。通过这种方式，Redis 可以在跳跃表中按照成员的分数顺序快速地进行范围查询，而在哈希表中通过成员快速查找分数。</p>
<p>这种底层实现结合了跳跃表和哈希表的优点，使得 Redis 有序集合能够同时满足有序性和高效性的需求。这种设计让有序集合在插入、删除、查询和范围操作等场景下都能表现出色。</p>
<h3 id="如何使用 -3"><a href="# 如何使用 -3" class="headerlink" title="如何使用"></a>如何使用 </h3><p> 使用 Redis 的有序集合（Sorted Set）需要掌握一些基本命令和操作。以下是一些常见的有序集合操作示例：</p>
<p><strong>1. 添加成员：</strong></p>
<p>使用 <code>ZADD</code> 命令可以向有序集合中添加成员，同时指定成员的分数。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ZADD myset 10 member1</span><br><span class="line">ZADD myset 20 member2</span><br></pre></td></tr></table></figure>

<p><strong>2. 获取成员分数：</strong></p>
<p>使用 <code>ZSCORE</code> 命令可以获取指定成员的分数。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZSCORE myset member1</span><br></pre></td></tr></table></figure>

<p><strong>3. 获取成员排名：</strong></p>
<p>使用 <code>ZRANK</code> 命令可以获取指定成员在有序集合中的排名（从 0 开始）。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZRANK myset member2</span><br></pre></td></tr></table></figure>

<p><strong>4. 获取分数范围内的成员：</strong></p>
<p>使用 <code>ZRANGEBYSCORE</code> 命令可以获取指定分数范围内的成员列表。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZRANGEBYSCORE myset 15 25</span><br></pre></td></tr></table></figure>

<p><strong>5. 获取排名范围内的成员：</strong></p>
<p>使用 <code>ZRANGE</code> 命令可以获取指定排名范围内的成员列表。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZRANGE myset 0 2</span><br></pre></td></tr></table></figure>

<p><strong>6. 删除成员：</strong></p>
<p>使用 <code>ZREM</code> 命令可以从有序集合中删除一个或多个成员。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZREM myset member1</span><br></pre></td></tr></table></figure>

<p><strong>7. 获取成员数量：</strong></p>
<p>使用 <code>ZCARD</code> 命令可以获取有序集合中成员的数量。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZCARD myset</span><br></pre></td></tr></table></figure>

<p><strong>8. 集合操作：</strong></p>
<ul>
<li>并集：使用 <code>ZUNIONSTORE</code> 命令可以对多个有序集合进行并集操作。</li>
<li>交集：使用 <code>ZINTERSTORE</code> 命令可以对多个有序集合进行交集操作。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ZUNIONSTORE destination_set 2 set1 set2 WEIGHTS 1 2</span><br><span class="line">ZINTERSTORE destination_set 2 set1 set2 WEIGHTS 0.5 0.5</span><br></pre></td></tr></table></figure>

<p>这只是有序集合的基本操作，你还可以使用其他命令进行更复杂的操作，如获取成员排名、计算分数之差等。使用有序集合时，要根据实际需求选择合适的命令和操作，以充分利用其有序性和高效性。</p>
<h3 id="需要注意的地方 -3"><a href="# 需要注意的地方 -3" class="headerlink" title="需要注意的地方"></a>需要注意的地方 </h3><p> 在使用 Redis 的有序集合（Sorted Set）时，有一些注意事项可以帮助你避免一些常见的问题，以及优化性能和数据管理。以下是一些需要注意的地方：</p>
<p><strong>1. 成员的唯一性：</strong><br>有序集合的成员是唯一的，重复的成员不会被插入。确保你向有序集合中添加的成员是唯一的，以免出现预期之外的数据情况。</p>
<p><strong>2. 分数的重复性：</strong><br>虽然成员是唯一的，但是不同成员之间的分数可以是重复的。这在一些场景中是正常的，但需要根据具体需求处理。</p>
<p><strong>3. 数据量：</strong><br>尽管有序集合可以处理大量的数据，但仍需谨慎处理数据量较大的有序集合。大数据集合可能会影响性能和内存使用。</p>
<p><strong>4. 分数范围：</strong><br>在进行范围查询时，确保分数范围是合理的。大范围查询可能会消耗较多的计算资源。</p>
<p><strong>5. 数据结构选择：</strong><br>有序集合适用于需要有序性的场景，但不适合用于仅仅需要存储唯一性成员的情况。对于仅需要唯一性的数据，使用集合（Set）数据类型更合适。</p>
<p><strong>6. 集合操作的影响：</strong><br>在执行集合操作（并集、交集、差集）时，考虑其对性能的影响。集合操作可能会消耗更多的计算资源，特别是在有大量成员的情况下。</p>
<p><strong>7. 选择适当的分数类型：</strong><br>分数可以是整数或浮点数。根据实际需求，选择适合的分数类型。</p>
<p><strong>8. 性能和内存优化：</strong><br>合理使用 Redis 的配置参数，考虑分片、持久化、内存管理等策略，以优化性能和内存使用。</p>
<p><strong>9. 避免全量遍历：</strong><br>避免使用 <code>ZRANGE</code> 等命令获取所有成员，特别是在大数据集合中。考虑使用 <code>ZSCAN</code> 进行分页式遍历。</p>
<p><strong>10. 持久化和备份：</strong><br>在重要的生产环境中，考虑持久化和备份策略，以防止数据丢失。</p>
<p><strong>11. 内存占用：</strong><br>有序集合会占用一定的内存，要注意监控和管理内存使用，防止内存溢出。</p>
<p>总之，使用 Redis 的有序集合时，要根据实际需求合理规划和优化，以保证系统的性能和稳定性。</p>
<h2 id="五、哈希表（Hash）"><a href="# 五、哈希表（Hash）" class="headerlink" title="五、哈希表（Hash）"></a>五、哈希表（Hash）</h2><h3 id="适用场景 -4"><a href="# 适用场景 -4" class="headerlink" title="适用场景"></a>适用场景</h3><p>Redis 的哈希表（Hash）是一种存储键值对的数据结构，其中的键是唯一的，而值则可以是字符串、整数、浮点数等。哈希表适用于许多场景，特别是需要存储和查询多个字段的情况。以下是一些适用场景：</p>
<p><strong>1. 存储对象信息：</strong><br>如果你需要存储一个对象的多个字段信息，例如用户信息（用户名、年龄、邮箱等），可以使用哈希表来存储每个用户的字段信息。</p>
<p><strong>2. 缓存数据：</strong><br>哈希表适用于缓存大量的键值对数据，例如缓存数据库查询结果，以减少数据库的访问频率。</p>
<p><strong>3. 存储配置信息：</strong><br>将配置信息存储在哈希表中，可以方便地获取和修改配置项，而无需在内存中存储多个单独的键。</p>
<p><strong>4. 计数器：</strong><br>可以使用哈希表来实现计数器功能，每个字段存储一个计数，比如网站的点赞数、阅读数等。</p>
<p><strong>5. 存储多种属性：</strong><br>如果你需要为一组对象存储多种属性，例如商品的名称、价格、库存等，可以使用哈希表来存储每个商品的多个属性。</p>
<p><strong>6. 联合索引：</strong><br>在关系型数据库中，联合索引常用于加速多字段的查询。在 Redis 中，可以使用哈希表来存储多个字段，并通过一个字段作为主键，实现类似的联合索引效果。</p>
<p><strong>7. 实时统计：</strong><br>哈希表可以用于实时统计信息，例如统计用户每天的登录次数、订单数等。</p>
<p><strong>8. 用户会话：</strong><br>可以使用哈希表来存储用户会话信息，每个字段存储一个会话属性，如用户 ID、登录时间、过期时间等。</p>
<p><strong>9. 图数据结构：</strong><br>如果需要实现图数据结构，例如社交网络关系图，可以使用哈希表来表示节点和边。</p>
<p><strong>10. 多字段查询：</strong><br>哈希表适用于存储多个字段，可以更快速地查询和更新多个字段的值。</p>
<p>总之，哈希表适用于需要存储多个字段信息的情况，可以在一次查询中获取和更新多个字段，从而提高了数据的访问效率。它在多种应用场景中都能发挥作用，特别是需要存储和操作多个属性的数据。</p>
<h3 id="底层实现是什么 -4"><a href="# 底层实现是什么 -4" class="headerlink" title="底层实现是什么"></a>底层实现是什么</h3><p>Redis 的哈希表（Hash）数据类型在底层的实现上是使用哈希表（Hash Table）来存储键值对的。哈希表是一种非常高效的数据结构，它能够在平均情况下以<br>O(1) 的时间复杂度进行插入、删除和查询操作。下面是 Redis 哈希表底层实现的一些细节：</p>
<p><strong>1. 散列函数（Hash Function）：</strong><br>在哈希表中，键通过散列函数计算得到一个哈希值（hash），这个哈希值被用作数组（桶）的索引。Redis 使用 MurmurHash2 等散列函数来均匀地将键分散到不同的桶中。</p>
<p><strong>2. 桶数组：</strong><br>哈希表底层维护了一个桶数组，每个桶中存储了一个或多个键值对。这个数组的大小通常会动态调整，以保证桶的填充因子不会过高。</p>
<p><strong>3. 冲突处理：</strong><br>由于不同的键可能会经过散列函数映射到同一个桶中，这就产生了冲突。Redis 使用链式解决冲突的方法，每个桶中可以存储一个链表，当有多个键映射到同一个桶时，它们会按照插入顺序形成链表。</p>
<p><strong>4. 动态扩容：</strong><br>当哈希表中的元素数量逐渐增加时，Redis 会根据负载因子动态扩容桶数组，以保持桶的填充因子在一个合适的范围内。这可以保证插入、删除和查询操作的高效性。</p>
<p><strong>5. 迁移：</strong><br>在扩容时，Redis 会将原有的键值对重新散列到新的桶数组中。这个过程称为“迁移”，它会在后台进行，以免影响正常的读写操作。</p>
<p><strong>6. 哈希表的嵌套：</strong><br>在 Redis 的源码中，哈希表本身也可以被嵌套使用，这种嵌套的哈希表常常用于实现数据类型的复杂结构，例如用于存储集合和有序集合等。</p>
<p>综上所述，Redis 的哈希表底层是通过散列函数、桶数组、链式解决冲突等机制来实现的。这种设计使得 Redis 能够高效地存储和查询键值对数据，哈希表在 Redis 中扮演着非常重要的角色。</p>
<h3 id="如何使用 -4"><a href="# 如何使用 -4" class="headerlink" title="如何使用"></a>如何使用 </h3><p> 使用 Redis 的哈希表（Hash）数据类型涉及一系列命令，这些命令可以帮助你对哈希表中的键值对进行添加、查询、删除等操作。以下是一些常见的哈希表操作示例：</p>
<p><strong>1. 添加键值对：</strong></p>
<p>使用 <code>HSET</code> 命令可以向哈希表中添加一个键值对。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HSET user:id123 name <span class="string">&quot;John&quot;</span> age 30</span><br></pre></td></tr></table></figure>

<p><strong>2. 获取单个键的值：</strong></p>
<p>使用 <code>HGET</code> 命令可以获取指定键的值。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HGET user:id123 name</span><br></pre></td></tr></table></figure>

<p><strong>3. 获取多个键的值：</strong></p>
<p>使用 <code>HMGET</code> 命令可以同时获取多个键的值。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HMGET user:id123 name age</span><br></pre></td></tr></table></figure>

<p><strong>4. 获取所有键值对：</strong></p>
<p>使用 <code>HGETALL</code> 命令可以获取哈希表中所有的键值对。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HGETALL user:id123</span><br></pre></td></tr></table></figure>

<p><strong>5. 增加或更新键的值：</strong></p>
<p>使用 <code>HINCRBY</code> 命令可以为键的值增加一个整数。如果键不存在，会创建一个新的键。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HINCRBY user:id123 age 1</span><br></pre></td></tr></table></figure>

<p><strong>6. 删除键值对：</strong></p>
<p>使用 <code>HDEL</code> 命令可以从哈希表中删除一个或多个键值对。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HDEL user:id123 age</span><br></pre></td></tr></table></figure>

<p><strong>7. 获取所有键或值：</strong></p>
<p>使用 <code>HKEYS</code> 命令可以获取哈希表中所有的键，使用 <code>HVALS</code> 命令可以获取哈希表中所有的值。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HKEYS user:id123</span><br><span class="line">HVALS user:id123</span><br></pre></td></tr></table></figure>

<p><strong>8. 获取键值对数量：</strong></p>
<p>使用 <code>HLEN</code> 命令可以获取哈希表中键值对的数量。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HLEN user:id123</span><br></pre></td></tr></table></figure>

<p><strong>9. 检查键是否存在：</strong></p>
<p>使用 <code>HEXISTS</code> 命令可以检查指定键是否存在于哈希表中。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HEXISTS user:id123 name</span><br></pre></td></tr></table></figure>

<p>这些只是哈希表的基本操作，你还可以使用其他命令来进行更高级的操作，如迭代、批量添加、获取字段数量等。在使用哈希表时，要根据实际需求选择合适的命令和操作，以充分利用其灵活性和高效性。</p>
<h3 id="需要注意的地方 -4"><a href="# 需要注意的地方 -4" class="headerlink" title="需要注意的地方"></a>需要注意的地方 </h3><p> 在使用 Redis 的哈希表（Hash）数据类型时，有一些注意事项可以帮助你避免常见问题，优化性能，以及更好地管理数据。以下是一些需要注意的地方：</p>
<p><strong>1. 键的命名：</strong><br>选择有意义的键名，以便更好地区分不同的哈希表。避免过长或者冗余的键名，以减少内存占用。</p>
<p><strong>2. 数据量：</strong><br>虽然 Redis 可以处理大量的数据，但仍需谨慎处理大数据量的哈希表。大数据量可能会影响性能和内存使用。</p>
<p><strong>3. 单个哈希表的字段数量：</strong><br>虽然 Redis 能够高效地处理多个字段，但是如果单个哈希表中的字段数量非常多，可能会影响性能。如果需要存储大量的字段，考虑拆分成多个哈希表或其他数据结构。</p>
<p><strong>4. 复杂度：</strong><br>在哈希表中的字段数量不宜过多，以保持读写操作的高效性。过多的字段可能会增加内存消耗和操作复杂度。</p>
<p><strong>5. 适用场景：</strong><br>哈希表适用于存储和查询多个字段的情况。如果只需要存储单一的值或者简单的数据，考虑使用字符串（String）数据类型。</p>
<p><strong>6. 批量操作：</strong><br>如果需要一次操作多个键值对，使用批量操作命令如 <code>HMSET</code>，而不是多次使用单个键的操作命令。</p>
<p><strong>7. 缓存失效：</strong><br>设置适当的缓存失效时间，避免过期的键值对占用内存。</p>
<p><strong>8. 键值大小：</strong><br>如果哈希表中的字段值较大，考虑其对内存的影响。大字段值可能会增加内存占用。</p>
<p><strong>9. 深度嵌套：</strong><br>避免在哈希表中使用太多嵌套的键值对，这可能会增加查找和维护的复杂度。</p>
<p><strong>10. 数据持久化：</strong><br>对于重要的数据，考虑开启持久化以防止数据丢失。</p>
<p><strong>11. 数据备份：</strong><br>定期备份数据，以防止意外数据丢失。</p>
<p>总之，使用哈希表时，要根据实际需求合理规划和优化，以确保系统的性能和稳定性。考虑数据模型、数据量、操作频率等因素，以及根据需要选择合适的 Redis 配置和命令来使用哈希表。��选择合适的 Redis 配置和命令来使用哈希表。</p>
</div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {selector: '.gallery-item'};
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div>
				<link rel="stylesheet" type="text/css" href="https://qiniu.techgrow.cn/readmore/dist/hexo.css">
				<script src="https://qiniu.techgrow.cn/readmore/dist/readmore.js" type="text/javascript"></script>
				<script>
				var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);
				var isEncrypt = document.getElementById('hexo-blog-encrypt');
				var allowMobile = false;
				if (!isEncrypt && (!isMobile || (isMobile && allowMobile))) {
					try {
						var plugin = new ReadmorePlugin();
						plugin.init({
							"type": "hexo",
							"id": "readmore-container",
							"name": "程序员朱永胜",
							"blogId": "39259-6450029321246-893",
							"qrcode": "https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142242856.jpg",
							"keyword": "1",
							"random": "1",
							"height": "auto",
							"expires": "365",
							"lockToc": "yes",
							"interval": "60",
							"baseUrl": ""
						});
					} catch(e) {
						console.warn("readmore plugin occurred error: " + e.name + " | " + e.message);
					}
				}
				</script>
			</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="index.html" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308012321669.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308012321669.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">程序员朱永胜</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.zysicyj.top/84392d3f.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://blog.zysicyj.top/84392d3f.html')">1. 深入了解 Redis 数据类型和底层数据结构</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142337659.png" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142337659.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142338230.png" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142338230.png" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.zysicyj.top/84392d3f.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=undefined&amp;url=https://blog.zysicyj.top/84392d3f.html&amp;pic=undefined" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.zysicyj.top" target="_blank"></a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"></div><div class="post_share"><div class="social-share" data-image="https://img.xjh.me/random_img.php?return=302&amp;_r_=04928ef3-3365-9afd-0f57-9ce2826ba365" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="5ee71a5e.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.xjh.me/random_img.php?return=302&amp;_r_=1d0c9ad8-ac3a-dc78-9b8e-89470598fac1" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">EasyCode 自动生成脚本</div></div></a></div><div class="next-post pull-right"><a href="52275545.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.xjh.me/random_img.php?return=302&amp;_r_=fdfcab60-dd40-07a0-ecb2-dec803079b15" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">2. 深入解读 Redis 的两种持久化方式</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="ca67f3be.html" title="【面试题系列】（一）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.xjh.me/random_img.php?return=302&_r_=bdcc231c-4ef8-5a95-b5ac-d417e56f76bc" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-history fa-fw"></i> 2025-01-17</div><div class="title">【面试题系列】（一）</div></div></a></div><div><a href="136d302c.html" title="6.Redis 中 String 的认知误区，详解 String 数据类型"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.xjh.me/random_img.php?return=302&_r_=3c490ae9-cc5f-506e-cfb6-0a6c02d60e38" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-history fa-fw"></i> 2025-01-17</div><div class="title">6.Redis 中 String 的认知误区，详解 String 数据类型</div></div></a></div><div><a href="plan.html" title="【日记】文章更新计划"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.xjh.me/random_img.php?return=302&_r_=64e07c28-6e6b-f9c8-5740-9973d1cd4015" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-history fa-fw"></i> 2025-01-17</div><div class="title">【日记】文章更新计划</div></div></a></div><div><a href="71270883.html" title="Redis 如何实现分布式锁"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.xjh.me/random_img.php?return=302&_r_=712621ce-499a-0606-d72d-523956308371" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-history fa-fw"></i> 2025-01-17</div><div class="title">Redis 如何实现分布式锁</div></div></a></div><div><a href="52275545.html" title="2. 深入解读 Redis 的两种持久化方式"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.xjh.me/random_img.php?return=302&_r_=fdfcab60-dd40-07a0-ecb2-dec803079b15" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-history fa-fw"></i> 2025-01-17</div><div class="title">2. 深入解读 Redis 的两种持久化方式</div></div></a></div><div><a href="e5ef9f90.html" title="3. 深入解读 Redis 主从同步机制"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.xjh.me/random_img.php?return=302&_r_=b9d502ef-d9e8-6a82-aa2f-05c72dd99bcd" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-history fa-fw"></i> 2025-01-17</div><div class="title">3. 深入解读 Redis 主从同步机制</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308012321669.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about"><h1 class="author-info__name">程序员朱永胜</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="mailto:zhuyongsheng@xxc99.cn" rel="external nofollow noreferrer" target="_blank" title="fas fa-envelope"></a><a class="social-icon faa-parent animated-hover" href="https://blog.csdn.net/njpkhuan" rel="external nofollow noreferrer" target="_blank" title="fa-solid fa-blog fa-beat"></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/258577429" rel="external nofollow noreferrer" target="_blank" title="fa-brands fa-bilibili"></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://img02.anheyu.com/adminuploads/1/2022/09/11/631ddb7c9b250.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/tc/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#redis%20%E6%95%B0%E6%8D%AE%E6%98%AF%E5%A6%82%E4%BD%95%E7%BB%84%E7%BB%87%E7%9A%84"><span class="toc-number">1.</span> <span class="toc-text">redis 数据是如何组织的 </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E5%A4%8D%E6%9D%82%E5%BA%A6%E6%80%BB%E7%BB%93"><span class="toc-number">2.</span> <span class="toc-text">底层实现复杂度总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%88String%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">一、字符串（String）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">3.1.</span> <span class="toc-text">适用场景 </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">3.2.</span> <span class="toc-text">底层实现是什么 </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8"><span class="toc-number">3.3.</span> <span class="toc-text">如何使用 </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9C%B0%E6%96%B9"><span class="toc-number">3.4.</span> <span class="toc-text">需要注意的地方 </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%88%97%E8%A1%A8%EF%BC%88List%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">二、列表（List）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%20-1"><span class="toc-number">4.1.</span> <span class="toc-text">适用场景 </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E6%98%AF%E4%BB%80%E4%B9%88%20-1"><span class="toc-number">4.2.</span> <span class="toc-text">底层实现是什么 </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%20-1"><span class="toc-number">4.3.</span> <span class="toc-text">如何使用 </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9C%B0%E6%96%B9%20-1"><span class="toc-number">4.4.</span> <span class="toc-text">需要注意的地方 </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E9%9B%86%E5%90%88%EF%BC%88Set%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">三、集合（Set）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%20-2"><span class="toc-number">5.1.</span> <span class="toc-text">适用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E6%98%AF%E4%BB%80%E4%B9%88%20-2"><span class="toc-number">5.2.</span> <span class="toc-text">底层实现是什么 </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%20-2"><span class="toc-number">5.3.</span> <span class="toc-text">如何使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9C%B0%E6%96%B9%20-2"><span class="toc-number">5.4.</span> <span class="toc-text">需要注意的地方 </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%EF%BC%88Sorted-Set%EF%BC%89%EF%BC%9A%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB%E4%BC%BC%EF%BC%8C%E4%BD%86%E6%AF%8F%E4%B8%AA%E5%85%83%E7%B4%A0%E9%83%BD%E5%85%B3%E8%81%94%E4%B8%80%E4%B8%AA%E5%88%86%E6%95%B0%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E5%88%86%E6%95%B0%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%E3%80%82"><span class="toc-number">6.</span> <span class="toc-text">四、有序集合（Sorted Set）：与集合类似，但每个元素都关联一个分数，可以根据分数进行排序。</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%20-3"><span class="toc-number">6.1.</span> <span class="toc-text">适用场景 </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E6%98%AF%E4%BB%80%E4%B9%88%20-3"><span class="toc-number">6.2.</span> <span class="toc-text">底层实现是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%20-3"><span class="toc-number">6.3.</span> <span class="toc-text">如何使用 </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9C%B0%E6%96%B9%20-3"><span class="toc-number">6.4.</span> <span class="toc-text">需要注意的地方 </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%93%88%E5%B8%8C%E8%A1%A8%EF%BC%88Hash%EF%BC%89"><span class="toc-number">7.</span> <span class="toc-text">五、哈希表（Hash）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF%20-4"><span class="toc-number">7.1.</span> <span class="toc-text">适用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E6%98%AF%E4%BB%80%E4%B9%88%20-4"><span class="toc-number">7.2.</span> <span class="toc-text">底层实现是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%20-4"><span class="toc-number">7.3.</span> <span class="toc-text">如何使用 </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9C%B0%E6%96%B9%20-4"><span class="toc-number">7.4.</span> <span class="toc-text">需要注意的地方 </span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="../1b1004aa.html" title="【日记】9 月 12 日"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.xjh.me/random_img.php?return=302&amp;_r_=770fd63e-7b06-a66a-bca6-aba42693cb81" onerror="this.onerror=null;this.src='../img/404.jpg'" alt="【日记】9 月 12 日"/></a><div class="content"><a class="title" href="../1b1004aa.html" title="【日记】9 月 12 日">【日记】9 月 12 日</a><time datetime="2025-01-17T06:42:23.669Z" title="更新于 2025-01-17 06:42:23">2025-01-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="../a3ac63cf.html" title="【日记】9 月 13 日"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.xjh.me/random_img.php?return=302&amp;_r_=9c9d46e4-174d-6319-e270-c329119436bf" onerror="this.onerror=null;this.src='../img/404.jpg'" alt="【日记】9 月 13 日"/></a><div class="content"><a class="title" href="../a3ac63cf.html" title="【日记】9 月 13 日">【日记】9 月 13 日</a><time datetime="2025-01-17T06:42:23.669Z" title="更新于 2025-01-17 06:42:23">2025-01-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="../86c73c13.html" title="【日记】9 月 15 日"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.xjh.me/random_img.php?return=302&amp;_r_=b3b7ced1-d064-72d3-8c35-b43e63aa7165" onerror="this.onerror=null;this.src='../img/404.jpg'" alt="【日记】9 月 15 日"/></a><div class="content"><a class="title" href="../86c73c13.html" title="【日记】9 月 15 日">【日记】9 月 15 日</a><time datetime="2025-01-17T06:42:23.669Z" title="更新于 2025-01-17 06:42:23">2025-01-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="../86c73c13.html" title="【日记】9 月 15 日"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.xjh.me/random_img.php?return=302&amp;_r_=e6d5dce5-3478-7659-9b63-c159c6829d6e" onerror="this.onerror=null;this.src='../img/404.jpg'" alt="【日记】9 月 15 日"/></a><div class="content"><a class="title" href="../86c73c13.html" title="【日记】9 月 15 日">【日记】9 月 15 日</a><time datetime="2025-01-17T06:42:23.669Z" title="更新于 2025-01-17 06:42:23">2025-01-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="../2ccef498.html" title="【日记】9 月 17 日"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.xjh.me/random_img.php?return=302&amp;_r_=66b5fff9-bca3-4a61-2f42-f16b495baff3" onerror="this.onerror=null;this.src='../img/404.jpg'" alt="【日记】9 月 17 日"/></a><div class="content"><a class="title" href="../2ccef498.html" title="【日记】9 月 17 日">【日记】9 月 17 日</a><time datetime="2025-01-17T06:42:23.669Z" title="更新于 2025-01-17 06:42:23">2025-01-17</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><div id="runtimeTextTip"></div></div><div class="footer_custom_text"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://beian.miit.gov.cn/"><span>苏ICP备2024066768号-1</span></a></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2023 - 2025 By <a class="footer-bar-link" href="index.html" title="程序员朱永胜" target="_blank">程序员朱永胜</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="archives/" title="archive"><div class="headline">文章</div><div class="length-num">1219</div></a><a href="tags/" title="tag"><div class="headline">标签</div><div class="length-num">897</div></a><a href="categories/" title="category"><div class="headline">分类</div><div class="length-num">14</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" rel="external nofollow noreferrer" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://blog.zysicyj.top/" title="个人主页"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/13/64d8c2748ef34.jpg" alt="个人主页"/><span class="back-menu-item-text">个人主页</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">写作软件</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://editor.runjs.cool/post?id=demo" title="Mdx"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2024-07-16/4296739868700.png" alt="Mdx"/><span class="back-menu-item-text">Mdx</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://openwrite.cn/" title="OpenWrite"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://openwrite.cn/logo.png" alt="OpenWrite"/><span class="back-menu-item-text">OpenWrite</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.jetbrains.com/zh-cn/writerside/" title="WriteSide"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="data:image/jpeg;base64,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" alt="WriteSide"/><span class="back-menu-item-text">WriteSide</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">开发工具</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.jetbrains.com/zh-cn/idea/" title="idea"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2024-07-16/4576710485000.png" alt="idea"/><span class="back-menu-item-text">idea</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.jetbrains.com/zh-cn/datagrip/" title="DataGrip"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2024-07-16/4604435065400.png" alt="DataGrip"/><span class="back-menu-item-text">DataGrip</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2024-07-16/4663369180700.png" title="WebStorm"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2024-07-16/4604435065400.png" alt="WebStorm"/><span class="back-menu-item-text">WebStorm</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" title="微信开发者工具"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2024-07-16/4743988475500.png" alt="微信开发者工具"/><span class="back-menu-item-text">微信开发者工具</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" title="HBuilder"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.dcloud.io/hbuilderx.html" alt="HBuilder"/><span class="back-menu-item-text">HBuilder</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://mobaxterm.mobatek.net/" title="MobaXterm"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2024-07-16/4849682167700.png" alt="MobaXterm"/><span class="back-menu-item-text">MobaXterm</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="index.html"><i class="fas fa-home faa-tada"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-link faa-tada"></i><span> 目录</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="fas fa-archive faa-tada"></i><span> 时间轴</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="fas fa-folder-open faa-tada"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-list faa-tada"></i><span> 清单</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/movies/"><i class="fas fa-video faa-tada"></i><span> 电影</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/books/"><i class="fas fa-book faa-tada"></i><span> 阅读</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/songs/"><i class="fas fa-music faa-tada"></i><span> 音乐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="fa-brands fa-bilibili faa-tada"></i><span> 追番</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/cinemas/"><i class="fa-brands fa-bilibili faa-tada"></i><span> 追剧</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="fas fa-link faa-tada"></i><span> 友链</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/gallery/"><i class="fas fa-solid fa-image faa-tada"></i><span> 相册集</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/love/static/index.html"><i class="fas fa-heart faa-tada"></i><span> Love</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="fa-solid fa-user faa-tada"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="fa-solid  fa-comment faa-tada"></i><span> 闲言碎语</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="js/utils.js"></script><script src="js/main.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("07/01/2023 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2023 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 程序员朱永胜 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("07/01/2023 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "";
        img.title = "下班了就该开开心心的玩耍，嘿嘿~";
        img.alt = "下班了就该开开心心的玩耍，嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="js/search/local-search.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>