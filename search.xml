<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>【面试题精讲】Java超过long类型的数据如何表示</title>
      <link href="/5bd93b63.html"/>
      <url>/5bd93b63.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>在Java中，如果需要表示超过long类型范围的数据，可以使用BigInteger类。BigInteger是Java提供的一个用于处理任意精度整数的类，它可以表示非常大或非常小的整数。</p><p>BigInteger类位于java.math包中，可以通过以下方式进行实例化：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"></span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">bigInteger</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;12345678901234567890&quot;</span>);</span><br></pre></td></tr></table></figure><p>上述代码创建了一个BigInteger对象，其值为”12345678901234567890”。BigInteger类支持各种算术运算和比较操作，例如加法、减法、乘法、除法等。</p><p>下面是一些常用的BigInteger方法示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BigInteger</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;1234567890&quot;</span>);</span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;9876543210&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加法</span></span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">sum</span> <span class="operator">=</span> a.add(b);</span><br><span class="line">System.out.println(sum); <span class="comment">// 输出：11111111100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 减法</span></span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">difference</span> <span class="operator">=</span> a.subtract(b);</span><br><span class="line">System.out.println(difference); <span class="comment">// 输出：-8641975320</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 乘法</span></span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">product</span> <span class="operator">=</span> a.multiply(b);</span><br><span class="line">System.out.println(product); <span class="comment">// 输出：12193263111263526900</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 除法</span></span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">quotient</span> <span class="operator">=</span> a.divide(b);</span><br><span class="line">System.out.println(quotient); <span class="comment">// 输出：0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 求余</span></span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">remainder</span> <span class="operator">=</span> a.remainder(b);</span><br><span class="line">System.out.println(remainder); <span class="comment">// 输出：1234567890</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 比较大小</span></span><br><span class="line"><span class="type">int</span> <span class="variable">compareResult</span> <span class="operator">=</span> a.compareTo(b);</span><br><span class="line">System.out.println(compareResult); <span class="comment">// 输出：-1（a &lt; b）</span></span><br></pre></td></tr></table></figure><p>通过使用BigInteger类，我们可以方便地处理超过long类型范围的数据，并进行各种算术运算和比较操作。但需要注意的是，由于BigInteger类使用了更多的内存和计算资源，因此在处理大量数据时可能会影响性能。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Java如何解决浮点数计算不精确问题</title>
      <link href="/1045a69f.html"/>
      <url>/1045a69f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是浮点数计算不精确问题"><a href="#1-什么是浮点数计算不精确问题" class="headerlink" title="1. 什么是浮点数计算不精确问题?"></a>1. 什么是浮点数计算不精确问题?</h2><p>在Java中，浮点数计算不精确问题指的是使用浮点数进行运算时，由于浮点数的内部表示方式和十进制数的表示方式存在差异，导致计算结果可能出现误差。这种误差主要是由于浮点数的二进制表示无法准确地表示某些十进制小数。</p><h2 id="2-为什么需要解决浮点数计算不精确问题"><a href="#2-为什么需要解决浮点数计算不精确问题" class="headerlink" title="2. 为什么需要解决浮点数计算不精确问题?"></a>2. 为什么需要解决浮点数计算不精确问题?</h2><p>浮点数计算不精确问题会影响到程序的计算结果的准确性。特别是在涉及到金融、科学计算等领域，对计算结果的精度要求较高的情况下，浮点数计算不精确问题就显得尤为重要。</p><h2 id="3-Java如何解决浮点数计算不精确问题"><a href="#3-Java如何解决浮点数计算不精确问题" class="headerlink" title="3. Java如何解决浮点数计算不精确问题?"></a>3. Java如何解决浮点数计算不精确问题?</h2><p>Java提供了一些方法来解决浮点数计算不精确问题：</p><h3 id="3-1-使用BigDecimal类"><a href="#3-1-使用BigDecimal类" class="headerlink" title="3.1 使用BigDecimal类"></a>3.1 使用BigDecimal类</h3><p>BigDecimal类是Java提供的用于处理任意精度的十进制数的类。它可以避免浮点数计算不精确问题，但相应地也增加了计算的复杂性。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BigDecimalExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.1&quot;</span>);</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">num2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.2&quot;</span>);</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">sum</span> <span class="operator">=</span> num1.add(num2);</span><br><span class="line">        System.out.println(sum); <span class="comment">// 输出 0.3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-使用DecimalFormat类"><a href="#3-2-使用DecimalFormat类" class="headerlink" title="3.2 使用DecimalFormat类"></a>3.2 使用DecimalFormat类</h3><p>DecimalFormat类是Java提供的用于格式化数字的类。通过指定合适的格式，可以将浮点数转换为字符串，并保留指定的小数位数。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.DecimalFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DecimalFormatExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">0.1</span>;</span><br><span class="line">        <span class="type">double</span> <span class="variable">num2</span> <span class="operator">=</span> <span class="number">0.2</span>;</span><br><span class="line">        <span class="type">double</span> <span class="variable">sum</span> <span class="operator">=</span> num1 + num2;</span><br><span class="line">        </span><br><span class="line">        <span class="type">DecimalFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#0.00&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">formattedSum</span> <span class="operator">=</span> df.format(sum);</span><br><span class="line">        System.out.println(formattedSum); <span class="comment">// 输出 0.30</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-浮点数计算不精确问题的使用示例"><a href="#4-浮点数计算不精确问题的使用示例" class="headerlink" title="4. 浮点数计算不精确问题的使用示例"></a>4. 浮点数计算不精确问题的使用示例</h2><p>下面是一个简单的示例，演示了浮点数计算不精确问题以及如何使用BigDecimal来解决：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FloatingPointExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">0.1</span>;</span><br><span class="line">        <span class="type">double</span> <span class="variable">num2</span> <span class="operator">=</span> <span class="number">0.2</span>;</span><br><span class="line">        <span class="type">double</span> <span class="variable">sum</span> <span class="operator">=</span> num1 + num2;</span><br><span class="line">        System.out.println(sum); <span class="comment">// 输出 0.30000000000000004</span></span><br><span class="line">        </span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">bd1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.1&quot;</span>);</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">bd2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.2&quot;</span>);</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">bdSum</span> <span class="operator">=</span> bd1.add(bd2);</span><br><span class="line">        System.out.println(bdSum); <span class="comment">// 输出 0.3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-解决浮点数计算不精确问题的优点"><a href="#5-解决浮点数计算不精确问题的优点" class="headerlink" title="5. 解决浮点数计算不精确问题的优点"></a>5. 解决浮点数计算不精确问题的优点</h2><ul><li>使用BigDecimal类可以避免浮点数计算不精确问题，保证计算结果的准确性。</li><li>使用DecimalFormat类可以将浮点数格式化为指定小数位数的字符串。</li></ul><h2 id="6-解决浮点数计算不精确问题的缺点"><a href="#6-解决浮点数计算不精确问题的缺点" class="headerlink" title="6. 解决浮点数计算不精确问题的缺点"></a>6. 解决浮点数计算不精确问题的缺点</h2><ul><li>使用BigDecimal类进行计算会增加代码的复杂性和运行时的开销。</li><li>使用DecimalFormat类需要额外的转换步骤，可能会影响程序的性能。</li></ul><h2 id="7-解决浮点数计算不精确问题的使用注意事项"><a href="#7-解决浮点数计算不精确问题的使用注意事项" class="headerlink" title="7. 解决浮点数计算不精确问题的使用注意事项"></a>7. 解决浮点数计算不精确问题的使用注意事项</h2><ul><li>在涉及到对计算结果精度要求较高的场景下，建议使用BigDecimal类来处理浮点数计算。</li><li>在仅需要显示特定小数位数的情况下，可以使用DecimalFormat类来格式化浮点数。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Java中的浮点数计算不精确问题可以通过使用BigDecimal类或DecimalFormat类来解决。BigDecimal类提供了任意精度的十进制数计算，而DecimalFormat类则用于格式化数字并控制小数位数。在实际应用中，根据具体需求选择合适的方法来解决浮点数计算不精确问题。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Java浮点运算为什么不精确</title>
      <link href="/3dcede5e.html"/>
      <url>/3dcede5e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是Java浮点运算"><a href="#1-什么是Java浮点运算" class="headerlink" title="1. 什么是Java浮点运算?"></a>1. 什么是Java浮点运算?</h2><p>在Java中，浮点运算指的是对浮点数进行加减乘除等基本运算操作。Java提供了两种浮点类型：float和double。</p><h2 id="2-为什么Java浮点运算不精确"><a href="#2-为什么Java浮点运算不精确" class="headerlink" title="2. 为什么Java浮点运算不精确?"></a>2. 为什么Java浮点运算不精确?</h2><p>Java浮点运算不精确主要是由于浮点数的内部表示方式以及计算机硬件的限制所导致的。</p><h3 id="2-1-浮点数的内部表示"><a href="#2-1-浮点数的内部表示" class="headerlink" title="2.1 浮点数的内部表示"></a>2.1 浮点数的内部表示</h3><p>浮点数在计算机中采用二进制科学计数法来表示，即将一个实数分解为尾数和指数两个部分，并使用有限位数的二进制数来近似表示。例如，0.1无法精确地用二进制表示，因此在计算机中会存在一定的误差。</p><h3 id="2-2-计算机硬件的限制"><a href="#2-2-计算机硬件的限制" class="headerlink" title="2.2 计算机硬件的限制"></a>2.2 计算机硬件的限制</h3><p>计算机硬件对浮点数的存储和计算都有一定的限制。通常情况下，计算机使用固定长度的字节来表示浮点数，如32位或64位。这就意味着浮点数的有效位数是有限的，超过该位数的部分会被截断或舍入，从而引入了误差。</p><p>另外，计算机处理浮点数时还需要进行舍入操作，以适应有限的存储空间。舍入操作会导致一定的精度损失。</p><h2 id="3-Java浮点运算的实现原理"><a href="#3-Java浮点运算的实现原理" class="headerlink" title="3. Java浮点运算的实现原理"></a>3. Java浮点运算的实现原理</h2><p>Java浮点数的内部表示采用IEEE 754标准，该标准定义了浮点数的二进制格式以及基本运算规则。在进行浮点运算时，Java会按照IEEE 754标准对浮点数进行处理。</p><p>具体来说，Java使用有符号位、指数位和尾数位来表示浮点数。其中，指数位用于表示浮点数的数量级，尾数位用于表示浮点数的精度。通过调整指数位和尾数位的值，可以表示不同范围和精度的浮点数。</p><p>在进行浮点运算时，Java会根据运算符和操作数的类型选择相应的运算规则。例如，加法运算会将两个浮点数的尾数对齐，并根据指数位的差异进行补偿，然后再进行相加。这样的处理方式可以保证运算结果的有效性和正确性。</p><h2 id="4-Java浮点运算的使用示例"><a href="#4-Java浮点运算的使用示例" class="headerlink" title="4. Java浮点运算的使用示例"></a>4. Java浮点运算的使用示例</h2><p>下面是一个简单的Java浮点运算示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">0.1</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">0.2</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> a + b;</span><br><span class="line"></span><br><span class="line">System.out.println(c);</span><br></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0.30000000000000004</span><br></pre></td></tr></table></figure><p>上述代码中，由于0.1和0.2无法精确表示，所以在进行加法运算时会引入一定的误差，导致最终结果不是0.3。</p><h2 id="5-Java浮点运算的优点"><a href="#5-Java浮点运算的优点" class="headerlink" title="5. Java浮点运算的优点"></a>5. Java浮点运算的优点</h2><ul><li>能够处理大范围和高精度的数值计算需求。</li><li>提供了标准化的浮点数表示方式和运算规则，保证了跨平台的兼容性。</li></ul><h2 id="6-Java浮点运算的缺点"><a href="#6-Java浮点运算的缺点" class="headerlink" title="6. Java浮点运算的缺点"></a>6. Java浮点运算的缺点</h2><ul><li>精度有限，可能存在舍入误差。</li><li>对于要求精确计算的场景（如金融领域），需要使用BigDecimal等其他数据类型来替代浮点数。</li></ul><h2 id="7-Java浮点运算的使用注意事项"><a href="#7-Java浮点运算的使用注意事项" class="headerlink" title="7. Java浮点运算的使用注意事项"></a>7. Java浮点运算的使用注意事项</h2><ul><li>避免直接比较浮点数是否相等，应该使用误差范围判断。</li><li>在涉及到累加或累减操作时，尽量避免多次运算，可以先将所有操作数累加或累减后再进行运算，以减少舍入误差的积累。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Java浮点运算不精确主要是由于浮点数的内部表示方式以及计算机硬件的限制所导致的。虽然存在一定的精度损失，但Java提供了标准化的浮点数表示方式和运算规则，能够满足大多数数值计算需求。在需要精确计算的场景下，可以使用BigDecimal等其他数据类型来替代浮点数。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Java包装类缓存机制</title>
      <link href="/126dfcf8.html"/>
      <url>/126dfcf8.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是Java包装类缓存机制"><a href="#1-什么是Java包装类缓存机制" class="headerlink" title="1. 什么是Java包装类缓存机制?"></a>1. 什么是Java包装类缓存机制?</h2><p>Java中的包装类（Wrapper Class）是为了将基本数据类型转换为对象而存在的。在Java中，每个基本数据类型都有对应的包装类，如Integer、Double等。</p><p>Java包装类缓存机制指的是，在某些情况下，Java会对一定范围内的包装类对象进行缓存，以提高性能和节省内存空间。</p><h2 id="2-为什么需要Java包装类缓存机制"><a href="#2-为什么需要Java包装类缓存机制" class="headerlink" title="2. 为什么需要Java包装类缓存机制?"></a>2. 为什么需要Java包装类缓存机制?</h2><p>使用包装类可以使基本数据类型具备面向对象的特性，同时也方便了在集合类中存储基本数据类型。然而，由于包装类是对象，相比于基本数据类型，它们占用更多的内存空间。</p><p>为了解决这个问题，Java引入了包装类缓存机制，通过缓存一定范围内的包装类对象，减少重复创建对象的开销，从而提高性能和节省内存空间。</p><h2 id="3-Java包装类缓存机制的实现原理"><a href="#3-Java包装类缓存机制的实现原理" class="headerlink" title="3. Java包装类缓存机制的实现原理"></a>3. Java包装类缓存机制的实现原理</h2><p>Java包装类缓存机制是通过静态成员变量来实现的。在Integer、Long、Short、Byte、Character这五个包装类中，定义了一个静态数组cache[]，用于缓存常用的数值。</p><ul><li>Integer类：默认缓存了-128到127之间的整数。</li><li>Long类：默认缓存了-128到127之间的长整数。</li><li>Short类：默认缓存了-128到127之间的短整数。</li><li>Byte类：默认缓存了-128到127之间的字节。</li><li>Character类：默认缓存了0到127之间的字符。</li></ul><p>当使用valueOf()方法创建包装类对象时，会先检查该值是否在缓存范围内。如果是，则直接返回缓存中的对象；否则，创建一个新的对象并放入缓存中。</p><h2 id="4-Java包装类缓存机制的使用示例"><a href="#4-Java包装类缓存机制的使用示例" class="headerlink" title="4. Java包装类缓存机制的使用示例"></a>4. Java包装类缓存机制的使用示例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> Integer.valueOf(<span class="number">100</span>); <span class="comment">// 缓存中不存在，创建新对象</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">b</span> <span class="operator">=</span> Integer.valueOf(<span class="number">100</span>); <span class="comment">// 缓存中存在，直接返回缓存对象</span></span><br><span class="line"></span><br><span class="line">System.out.println(a == b); <span class="comment">// 输出true，表示a和b引用同一个对象</span></span><br></pre></td></tr></table></figure><p>上述示例中，通过调用<code>Integer.valueOf()</code>方法创建两个Integer对象。由于100在缓存范围内，第二次创建时直接返回了缓存中的对象，所以a和b引用同一个对象，输出结果为true。</p><h2 id="5-Java包装类缓存机制的优点"><a href="#5-Java包装类缓存机制的优点" class="headerlink" title="5. Java包装类缓存机制的优点"></a>5. Java包装类缓存机制的优点</h2><ul><li>提高性能：避免重复创建相同数值的包装类对象，减少了内存开销和垃圾回收的压力。</li><li>节省内存空间：对于常用的数值，在缓存范围内的包装类对象可以被多个引用共享，减少了内存占用。</li></ul><h2 id="6-Java包装类缓存机制的缺点"><a href="#6-Java包装类缓存机制的缺点" class="headerlink" title="6. Java包装类缓存机制的缺点"></a>6. Java包装类缓存机制的缺点</h2><ul><li>缓存范围有限：只有在特定范围内的数值才会被缓存，超出范围仍然会创建新对象。</li><li>自动装箱和拆箱的性能损耗：自动装箱和拆箱操作可能导致频繁的包装类对象创建和销毁，影响性能。</li></ul><h2 id="7-Java包装类缓存机制的使用注意事项"><a href="#7-Java包装类缓存机制的使用注意事项" class="headerlink" title="7. Java包装类缓存机制的使用注意事项"></a>7. Java包装类缓存机制的使用注意事项</h2><ul><li>不要依赖包装类缓存机制进行比较：由于缓存机制的存在，相同数值的包装类对象并不一定引用同一个对象。因此，在比较两个包装类对象时，应该使用equals()方法而不是”&#x3D;&#x3D;”运算符。</li><li>超出缓存范围时需要额外注意：当数值超出缓存范围时，每次调用valueOf()方法都会创建新的对象，这可能会导致意想不到的结果。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Java包装类缓存机制通过缓存常用的包装类对象，提高了性能和节省了内存空间。它的实现原理是通过静态数组来缓存对象，并在创建对象时先检查是否在缓存范围内。尽管具有一定的局限性和性能损耗，但在合适的场景下，包装类缓存机制仍然是一个有用的优化手段。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Java包装类与自动拆箱装箱</title>
      <link href="/c289f150.html"/>
      <url>/c289f150.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是Java包装类和自动拆箱装箱？"><a href="#1-什么是Java包装类和自动拆箱装箱？" class="headerlink" title="1. 什么是Java包装类和自动拆箱装箱？"></a>1. 什么是Java包装类和自动拆箱装箱？</h2><p>Java中的基本数据类型（如int、char、boolean等）是不具备面向对象特性的，不能直接参与面向对象的操作。为了解决这个问题，Java提供了对应的包装类来将基本数据类型转换为对象。</p><p>Java的包装类是一组用于封装基本数据类型的类，每种基本数据类型都有对应的包装类。例如，Integer是int的包装类，Character是char的包装类，Boolean是boolean的包装类等。</p><p>自动拆箱和装箱是指在基本数据类型和其对应的包装类之间进行自动转换的过程。当需要使用包装类时，可以直接使用基本数据类型，而无需手动创建包装类对象；反之，当需要使用基本数据类型时，可以直接使用包装类对象，而无需手动进行类型转换。</p><h2 id="2-为什么需要Java包装类和自动拆箱装箱？"><a href="#2-为什么需要Java包装类和自动拆箱装箱？" class="headerlink" title="2. 为什么需要Java包装类和自动拆箱装箱？"></a>2. 为什么需要Java包装类和自动拆箱装箱？</h2><p>Java的包装类和自动拆箱装箱主要有以下几个原因：</p><ul><li>面向对象：Java是一门面向对象的编程语言，但基本数据类型不具备面向对象的特性。通过使用包装类，可以将基本数据类型转换为对象，从而使得基本数据类型也能够参与面向对象的操作。</li><li>泛型支持：泛型只能使用引用类型，不能使用基本数据类型。通过使用包装类，可以将基本数据类型转换为对应的引用类型，从而在泛型中使用。</li><li>集合框架：Java的集合框架只能存储对象，不能直接存储基本数据类型。通过使用包装类，可以将基本数据类型转换为对应的对象，从而在集合中存储。</li></ul><h2 id="3-Java包装类和自动拆箱装箱的实现原理？"><a href="#3-Java包装类和自动拆箱装箱的实现原理？" class="headerlink" title="3. Java包装类和自动拆箱装箱的实现原理？"></a>3. Java包装类和自动拆箱装箱的实现原理？</h2><p>Java的包装类是通过封装基本数据类型的值来实现的。每个包装类都有一个与之对应的构造方法，用于创建包装类对象，并将基本数据类型的值传递给该构造方法。</p><p>自动拆箱和装箱是由编译器在编译时进行的操作。当需要将基本数据类型赋值给包装类对象时，编译器会自动调用对应的构造方法创建包装类对象；反之，当需要将包装类对象赋值给基本数据类型时，编译器会自动调用包装类的<code>xxxValue()</code>方法获取基本数据类型的值。</p><p>例如，以下代码演示了自动装箱和拆箱的过程：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">// 自动装箱，将int类型的值赋值给Integer对象</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">obj</span> <span class="operator">=</span> num;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> obj + <span class="number">5</span>; <span class="comment">// 自动拆箱，将Integer对象的值赋值给int类型的变量</span></span><br></pre></td></tr></table></figure><h2 id="4-Java包装类和自动拆箱装箱的使用示例"><a href="#4-Java包装类和自动拆箱装箱的使用示例" class="headerlink" title="4. Java包装类和自动拆箱装箱的使用示例"></a>4. Java包装类和自动拆箱装箱的使用示例</h2><p>以下是Java包装类和自动拆箱装箱的一些使用示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自动装箱</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">Double</span> <span class="variable">num2</span> <span class="operator">=</span> <span class="number">3.14</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 手动装箱</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">num3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">20</span>);</span><br><span class="line"><span class="type">Double</span> <span class="variable">num4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Double</span>(<span class="number">5.6</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自动拆箱</span></span><br><span class="line"><span class="type">int</span> <span class="variable">result1</span> <span class="operator">=</span> num1 + <span class="number">5</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">result2</span> <span class="operator">=</span> num2 - <span class="number">2.0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 手动拆箱</span></span><br><span class="line"><span class="type">int</span> <span class="variable">result3</span> <span class="operator">=</span> num3.intValue() * <span class="number">2</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">result4</span> <span class="operator">=</span> num4.doubleValue() / <span class="number">2.0</span>;</span><br></pre></td></tr></table></figure><h2 id="5-Java包装类和自动拆箱装箱的优点"><a href="#5-Java包装类和自动拆箱装箱的优点" class="headerlink" title="5. Java包装类和自动拆箱装箱的优点"></a>5. Java包装类和自动拆箱装箱的优点</h2><ul><li>提供了基本数据类型与对象之间的转换，使得基本数据类型也能够参与面向对象的操作。</li><li>支持泛型，使得可以在泛型中使用基本数据类型。</li><li>方便集合框架的使用，可以将基本数据类型转换为对应的对象进行存储。</li></ul><h2 id="6-Java包装类和自动拆箱装箱的缺点"><a href="#6-Java包装类和自动拆箱装箱的缺点" class="headerlink" title="6. Java包装类和自动拆箱装箱的缺点"></a>6. Java包装类和自动拆箱装箱的缺点</h2><ul><li>包装类占用更多的内存空间，因为每个包装类都需要额外的对象头和实例变量来保存值。</li><li>包装类的创建和销毁会产生额外的开销，影响性能。</li><li>自动拆箱和装箱可能导致一些隐式的类型转换错误，需要注意类型匹配的问题。</li></ul><h2 id="7-Java包装类和自动拆箱装箱的使用注意事项"><a href="#7-Java包装类和自动拆箱装箱的使用注意事项" class="headerlink" title="7. Java包装类和自动拆箱装箱的使用注意事项"></a>7. Java包装类和自动拆箱装箱的使用注意事项</h2><ul><li>在进行包装类与基本数据类型之间的比较时，应当使用<code>equals()</code>方法而不是<code>==</code>运算符。</li><li>在进行包装类与基本数据类型之间的赋值时，要注意类型匹配的问题，避免出现隐式的类型转换错误。</li><li>注意包装类对象的空指针问题，避免在空对象上调用方法导致空指针异常。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Java的包装类和自动拆箱装箱提供了基本数据类型与对象之间的转换功能，使得基本数据类型也能够参与面向对象的操作。通过自动拆箱和装箱，可以方便地在基本数据类型和包装类之间进行转换，并支持泛型和集合框架的使用。然而，包装类占用更多内存并且可能影响性能，需要注意类型匹配和空指针等问题。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Java中有哪些基础类型</title>
      <link href="/daa974c1.html"/>
      <url>/daa974c1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>Java中有以下基础类型：</p><ol><li><p><strong>整数类型</strong>：byte、short、int、long。它们分别表示不同范围的整数值，占用的内存空间也不同。</p></li><li><p><strong>浮点类型</strong>：float、double。它们用于表示带小数部分的数字，其中double精度更高。</p></li><li><p><strong>字符类型</strong>：char。它用于表示单个字符，例如字母、数字或符号。</p></li><li><p><strong>布尔类型</strong>：boolean。它只有两个取值true和false，用于表示逻辑值。</p></li></ol><p>这些基础类型在Java中是直接支持的，可以直接使用，无需导入其他包。每种基础类型都有对应的默认值，如果没有显式赋值，则会被初始化为其默认值。</p><h2 id="为什么需要基础类型？"><a href="#为什么需要基础类型？" class="headerlink" title="为什么需要基础类型？"></a>为什么需要基础类型？</h2><p>基础类型是编程语言中最基本的数据类型，用于存储和操作各种数据。它们提供了一种简单而有效的方式来处理常见的数据类型，如整数、浮点数、字符和布尔值。使用基础类型可以节省内存空间，并且执行速度较快。</p><h2 id="基础类型的实现原理"><a href="#基础类型的实现原理" class="headerlink" title="基础类型的实现原理"></a>基础类型的实现原理</h2><p>基础类型在Java虚拟机中以二进制形式进行存储和计算。每种基础类型都有固定的位数和范围，根据不同的类型，采用不同的编码方式。例如，整数类型使用补码表示，浮点类型使用IEEE 754标准进行编码。</p><h2 id="基础类型的使用示例"><a href="#基础类型的使用示例" class="headerlink" title="基础类型的使用示例"></a>基础类型的使用示例</h2><p>以下是基础类型的一些使用示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">25</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">salary</span> <span class="operator">=</span> <span class="number">5000.50</span>;</span><br><span class="line"><span class="type">char</span> <span class="variable">grade</span> <span class="operator">=</span> <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">isStudent</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>在上面的示例中，我们定义了一个整数变量<code>age</code>，一个浮点数变量<code>salary</code>，一个字符变量<code>grade</code>和一个布尔变量<code>isStudent</code>。可以根据需要对这些变量进行赋值和操作。</p><h2 id="基础类型的优点"><a href="#基础类型的优点" class="headerlink" title="基础类型的优点"></a>基础类型的优点</h2><ul><li><strong>效率高</strong>：基础类型直接存储数据的二进制表示形式，不需要额外的内存空间和计算开销。</li><li><strong>占用内存少</strong>：基础类型在内存中占用的空间较小，节省内存资源。</li><li><strong>简单易用</strong>：基础类型提供了一种简单而直观的方式来处理常见的数据类型。</li></ul><h2 id="基础类型的缺点"><a href="#基础类型的缺点" class="headerlink" title="基础类型的缺点"></a>基础类型的缺点</h2><ul><li><strong>精度有限</strong>：由于基础类型的位数和范围是固定的，因此可能无法满足某些特殊需求，如大数字计算或高精度计算。</li><li><strong>不支持面向对象特性</strong>：基础类型不能直接参与面向对象的操作，如继承、多态等。</li></ul><h2 id="基础类型的使用注意事项"><a href="#基础类型的使用注意事项" class="headerlink" title="基础类型的使用注意事项"></a>基础类型的使用注意事项</h2><ul><li><strong>避免不必要的类型转换</strong>：在进行基础类型之间的运算或赋值时，需要注意数据类型的匹配和范围是否合理。</li><li><strong>谨慎处理精度问题</strong>：浮点类型存在精度损失的问题，对于涉及到精确计算的场景，应该使用BigDecimal等类来处理。</li></ul><p>总结：<br>Java中有byte、short、int、long、float、double、char和boolean这些基础类型。它们提供了一种简单而高效的方式来处理常见的数据类型，并且占用内存较少。但是基础类型的精度有限，不能直接参与面向对象的操作。在使用基础类型时，需要注意类型转换和精度问题。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】continuebreak和return的区别是什么</title>
      <link href="/9cebc5b6.html"/>
      <url>/9cebc5b6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>continue、break和return是在编程中常用的控制流语句，它们有不同的作用和使用场景。</p><ol><li><p><strong>continue</strong>：当程序执行到continue语句时，会跳过当前循环中剩余的代码，并开始下一次循环。通常用于在循环中遇到某些条件时，跳过当前迭代，直接进入下一次迭代。</p><ul><li>例如，在一个for循环中，如果需要跳过某些特定的值，可以使用continue语句：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>输出结果为：0 1 2 3 4 6 7 8 9</li></ul></li><li><p><strong>break</strong>：当程序执行到break语句时，会立即终止当前所在的循环或者switch语句，并跳出该结构体外部的代码块。通常用于在满足某个条件时，提前结束循环或者跳出switch语句。</p><ul><li>例如，在一个while循环中，当满足某个条件时，可以使用break语句来终止循环：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(i);</span><br><span class="line">    i++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>输出结果为：0 1 2 3 4</li></ul></li><li><p><strong>return</strong>：用于结束当前方法的执行，并返回一个值（如果有定义返回类型）。当程序执行到return语句时，会立即退出当前方法，并将指定的值返回给调用者。通常用于在满足某个条件时，提前结束方法的执行并返回结果。</p><ul><li>例如，在一个方法中，根据不同的情况返回不同的结果：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>; <span class="comment">// 返回错误码表示除数为0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a / b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>在上述代码中，如果除数为0，则使用return语句返回-1作为错误码；否则，计算a除以b的结果并返回。</li></ul></li></ol><p>总结：</p><ul><li><strong>continue</strong>用于跳过当前迭代，进入下一次迭代；</li><li><strong>break</strong>用于终止循环或者switch语句，并跳出该结构体外部的代码块；</li><li><strong>return</strong>用于结束当前方法的执行，并返回一个值给调用者。</li></ul><p>需要注意的是，这三个关键字的使用要根据具体的场景和需求来选择合适的控制流语句。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Java自增自减运算符</title>
      <link href="/c0cb6d89.html"/>
      <url>/c0cb6d89.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是自增自减运算符"><a href="#1-什么是自增自减运算符" class="headerlink" title="1. 什么是自增自减运算符?"></a>1. 什么是自增自减运算符?</h2><p>自增自减运算符是一种用于对变量进行加1或减1操作的特殊运算符。在大多数编程语言中，自增运算符表示将变量的值增加1，而自减运算符表示将变量的值减少1。</p><p>在Java中，自增自减运算符有两种形式：</p><ul><li>前缀形式：++i 或 –i</li><li>后缀形式：i++ 或 i–</li></ul><p>其中，前缀形式会先执行自增或自减操作，然后返回结果；后缀形式会先返回原始值，然后再执行自增或自减操作。</p><h2 id="2-为什么需要自增自减运算符"><a href="#2-为什么需要自增自减运算符" class="headerlink" title="2. 为什么需要自增自减运算符?"></a>2. 为什么需要自增自减运算符?</h2><p>自增自减运算符可以方便地对变量进行加1或减1操作，常用于循环、计数器和条件判断等场景。使用自增自减运算符可以简化代码，并提高代码的可读性和易维护性。</p><h2 id="3-自增自减运算符的实现原理"><a href="#3-自增自减运算符的实现原理" class="headerlink" title="3. 自增自减运算符的实现原理?"></a>3. 自增自减运算符的实现原理?</h2><p>自增自减运算符的实现原理与编程语言相关。在大多数编程语言中，自增自减运算符都是通过修改变量的值来实现的。</p><p>以Java为例，当使用自增自减运算符时，编译器会生成相应的字节码指令来执行操作。对于前缀形式的自增自减运算符，编译器会先将变量的值加1或减1，然后再返回结果；对于后缀形式的自增自减运算符，编译器会先返回原始值，然后再将变量的值加1或减1。</p><h2 id="4-自增自减运算符的使用示例"><a href="#4-自增自减运算符的使用示例" class="headerlink" title="4. 自增自减运算符的使用示例"></a>4. 自增自减运算符的使用示例</h2><p>下面是Java中自增自减运算符的使用示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">System.out.println(++i); <span class="comment">// 输出: 1</span></span><br><span class="line">System.out.println(i++); <span class="comment">// 输出: 1</span></span><br><span class="line">System.out.println(i);   <span class="comment">// 输出: 2</span></span><br></pre></td></tr></table></figure><p>在上述示例中，首先定义了一个整型变量<code>i</code>并初始化为0。然后通过前缀形式的自增运算符将<code>i</code>的值加1，并输出结果为1。接着通过后缀形式的自增运算符将<code>i</code>的值再次加1，并输出结果为1（注意此时输出的是原始值）。最后输出<code>i</code>的值为2。</p><h2 id="5-自增自减运算符的优点"><a href="#5-自增自减运算符的优点" class="headerlink" title="5. 自增自减运算符的优点"></a>5. 自增自减运算符的优点</h2><ul><li>简化代码：使用自增自减运算符可以简化对变量进行加1或减1操作的代码。</li><li>提高可读性：自增自减运算符能够更清晰地表达对变量的递增或递减操作，提高代码的可读性。</li></ul><h2 id="6-自增自减运算符的缺点"><a href="#6-自增自减运算符的缺点" class="headerlink" title="6. 自增自减运算符的缺点"></a>6. 自增自减运算符的缺点</h2><ul><li>容易引起误解：自增自减运算符的使用可能会导致代码逻辑不清晰，特别是在复杂的表达式中。</li><li>可能影响性能：某些编程语言对于自增自减运算符的实现可能存在性能问题，尤其是在循环中频繁使用时。</li></ul><h2 id="7-自增自减运算符的使用注意事项"><a href="#7-自增自减运算符的使用注意事项" class="headerlink" title="7. 自增自减运算符的使用注意事项"></a>7. 自增自减运算符的使用注意事项</h2><ul><li>避免过度使用：虽然自增自减运算符可以简化代码，但过度使用可能会降低代码的可读性和维护性。应该根据具体情况谨慎选择是否使用自增自减运算符。</li><li>注意前缀与后缀形式的区别：前缀形式的自增自减运算符会先执行操作再返回结果，而后缀形式则相反。在使用时要注意这种差异，以避免产生意外的结果。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>自增自减运算符是一种用于对变量进行加1或减1操作的特殊运算符。它可以简化代码，并提高代码的可读性和易维护性。在使用自增自减运算符时，需要注意前缀与后缀形式的区别，以及避免过度使用。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Java移位运算符</title>
      <link href="/84f268fc.html"/>
      <url>/84f268fc.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是移位运算符"><a href="#1-什么是移位运算符" class="headerlink" title="1. 什么是移位运算符?"></a>1. 什么是移位运算符?</h2><p>在Java中，移位运算符用于对二进制数进行位移操作。它们可以将一个数的所有位向左或向右移动指定的位数。</p><p>Java提供了三种移位运算符：</p><ul><li>左移运算符（&lt;&lt;）：将一个数的所有位向左移动指定的位数，并在低位补0。</li><li>右移运算符（&gt;&gt;）：将一个数的所有位向右移动指定的位数，并根据原来最高位的值，在高位补上相同的值。</li><li>无符号右移运算符（&gt;&gt;&gt;）：将一个数的所有位向右移动指定的位数，并在高位补0。</li></ul><h2 id="2-为什么需要移位运算符"><a href="#2-为什么需要移位运算符" class="headerlink" title="2. 为什么需要移位运算符?"></a>2. 为什么需要移位运算符?</h2><p>移位运算符主要用于处理二进制数据和优化某些计算过程。它们可以快速地进行乘法、除法和取模等运算，同时也可以用于位掩码和位标志的设置与清除。</p><h2 id="3-移位运算符的实现原理"><a href="#3-移位运算符的实现原理" class="headerlink" title="3. 移位运算符的实现原理"></a>3. 移位运算符的实现原理</h2><p>移位运算符的实现原理是基于二进制数的位操作。具体来说，左移运算符（&lt;&lt;）将一个数的所有位向左移动指定的位数，右移运算符（&gt;&gt;）将一个数的所有位向右移动指定的位数，并根据原来最高位的值，在高位补上相同的值，无符号右移运算符（&gt;&gt;&gt;）将一个数的所有位向右移动指定的位数，并在高位补0。</p><h2 id="4-移位运算符的使用示例"><a href="#4-移位运算符的使用示例" class="headerlink" title="4. 移位运算符的使用示例"></a>4. 移位运算符的使用示例</h2><p>下面是一些移位运算符的使用示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">// 二进制表示为 00001010</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 左移运算符（&lt;&lt;）</span></span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> a &lt;&lt; <span class="number">2</span>; <span class="comment">// 结果为 40，二进制表示为 00101000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 右移运算符（&gt;&gt;）</span></span><br><span class="line"><span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> a &gt;&gt; <span class="number">1</span>; <span class="comment">// 结果为 5，二进制表示为 00000101</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 无符号右移运算符（&gt;&gt;&gt;）</span></span><br><span class="line"><span class="type">int</span> <span class="variable">d</span> <span class="operator">=</span> a &gt;&gt;&gt; <span class="number">3</span>; <span class="comment">// 结果为 1，二进制表示为 00000001</span></span><br></pre></td></tr></table></figure><h2 id="5-移位运算符的优点"><a href="#5-移位运算符的优点" class="headerlink" title="5. 移位运算符的优点"></a>5. 移位运算符的优点</h2><p>移位运算符具有以下优点：</p><ul><li>快速进行乘法、除法和取模等运算。</li><li>可以用于位掩码和位标志的设置与清除。</li><li>在某些情况下可以提高代码的性能和效率。</li></ul><h2 id="6-移位运算符的缺点"><a href="#6-移位运算符的缺点" class="headerlink" title="6. 移位运算符的缺点"></a>6. 移位运算符的缺点</h2><p>移位运算符的缺点主要包括：</p><ul><li>容易引起错误，特别是对负数进行右移操作时可能会导致意外结果。</li><li>不够直观，需要理解二进制数的位操作规则才能正确使用。</li></ul><h2 id="7-移位运算符的使用注意事项"><a href="#7-移位运算符的使用注意事项" class="headerlink" title="7. 移位运算符的使用注意事项"></a>7. 移位运算符的使用注意事项</h2><p>在使用移位运算符时，需要注意以下事项：</p><ul><li>对于有符号的整数类型（如int），右移运算符（&gt;&gt;）会保留原来最高位的值，并在高位补上相同的值。而无符号右移运算符（&gt;&gt;&gt;）则会在高位补0。</li><li>移位操作可能导致溢出或丢失精度，特别是当移动的位数超过了数据类型的范围时。</li><li>在进行位掩码和位标志的设置与清除时，需要使用适当的移位运算符和位操作技巧。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>移位运算符是Java中用于对二进制数进行位移操作的工具。它们可以将一个数的所有位向左或向右移动指定的位数，并根据规则在低位或高位补上相应的值。移位运算符主要用于处理二进制数据和优化某些计算过程，但在使用时需要注意溢出、精度丢失和位操作等问题。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Java语言关键字有哪些</title>
      <link href="/61d34d64.html"/>
      <url>/61d34d64.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】标识符和关键字的区别是什么</title>
      <link href="/4916a199.html"/>
      <url>/4916a199.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是标识符和关键字"><a href="#1-什么是标识符和关键字" class="headerlink" title="1. 什么是标识符和关键字?"></a>1. 什么是标识符和关键字?</h2><ul><li><p><strong>标识符</strong>：在编程语言中，标识符是用来表示变量、函数、类等命名实体的名称。它由一系列字符组成，可以包含字母、数字和下划线，并且必须以字母或下划线开头。例如，在Java中，<code>myVariable</code>就是一个标识符。</p></li><li><p><strong>关键字</strong>：关键字是编程语言中预定义的具有特殊意义的单词。这些单词被保留，不能用作标识符来命名变量、函数或类等。关键字通常用于控制程序的结构、定义数据类型、声明变量等。例如，在Java中，<code>if</code>、<code>for</code>、<code>class</code>等都是关键字。</p></li></ul><h2 id="2-标识符和关键字的区别"><a href="#2-标识符和关键字的区别" class="headerlink" title="2. 标识符和关键字的区别"></a>2. 标识符和关键字的区别</h2><ul><li><p><strong>含义不同</strong>：标识符是用来给变量、函数、类等命名的，而关键字是编程语言中预定义的具有特殊意义的单词。</p></li><li><p><strong>使用方式不同</strong>：标识符可以根据需要自由选择，但要遵循一定的命名规则；而关键字是编程语言中固定的，不能用作标识符。</p></li><li><p><strong>数量不同</strong>：每个编程语言中的关键字数量是固定的，而标识符的数量取决于程序员的需求。</p></li><li><p><strong>作用范围不同</strong>：标识符只在特定的上下文中起作用，例如变量名只在其所属的代码块内有效；而关键字具有全局性质，在整个程序中都有特殊含义。</p></li></ul><h2 id="3-标识符和关键字的使用示例"><a href="#3-标识符和关键字的使用示例" class="headerlink" title="3. 标识符和关键字的使用示例"></a>3. 标识符和关键字的使用示例</h2><p>以下是一个Java程序中的标识符和关键字的使用示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">myVariable</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">// 标识符</span></span><br><span class="line">        <span class="keyword">if</span> (myVariable &gt; <span class="number">5</span>) &#123; <span class="comment">// 关键字</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的示例中，<code>myVariable</code>是一个标识符，用来表示一个整数类型的变量。<code>if</code>是一个关键字，用于控制程序的流程。</p><h2 id="4-标识符和关键字的优点"><a href="#4-标识符和关键字的优点" class="headerlink" title="4. 标识符和关键字的优点"></a>4. 标识符和关键字的优点</h2><ul><li><p><strong>标识符</strong>：</p><ul><li>可以根据需要自由选择命名，使代码更易读、理解和维护。</li><li>提高了代码的可重用性，可以在不同的上下文中使用相同的标识符。</li></ul></li><li><p><strong>关键字</strong>：</p><ul><li>确保编程语言的语法规则得到正确应用，避免出现语法错误。</li><li>提供了一种统一的方式来定义数据类型、控制程序结构等，使代码更加规范化。</li></ul></li></ul><h2 id="5-标识符和关键字的缺点"><a href="#5-标识符和关键字的缺点" class="headerlink" title="5. 标识符和关键字的缺点"></a>5. 标识符和关键字的缺点</h2><ul><li><p><strong>标识符</strong>：</p><ul><li>如果命名不规范，可能导致代码可读性差、易混淆。</li><li>过多或过长的标识符可能增加代码的复杂度。</li></ul></li><li><p><strong>关键字</strong>：</p><ul><li>关键字是固定的，不能用作标识符，有时会限制了程序员的自由度。</li><li>不同编程语言中的关键字可能存在差异，需要熟悉具体语言的关键字列表。</li></ul></li></ul><h2 id="6-标识符和关键字的使用注意事项"><a href="#6-标识符和关键字的使用注意事项" class="headerlink" title="6. 标识符和关键字的使用注意事项"></a>6. 标识符和关键字的使用注意事项</h2><ul><li><p><strong>标识符</strong>：</p><ul><li>命名要遵循一定的规则，如驼峰命名法、下划线命名法等。</li><li>避免使用与关键字相同的名称作为标识符。</li><li>尽量选择有意义的名称，提高代码的可读性。</li></ul></li><li><p><strong>关键字</strong>：</p><ul><li>熟悉所使用编程语言的关键字列表，避免将其作为标识符。</li><li>在编辑器中关键字通常会有特殊的颜色显示，便于辨识。</li></ul></li></ul><h2 id="7-总结"><a href="#7-总结" class="headerlink" title="7. 总结"></a>7. 总结</h2><p>标识符是用来给变量、函数、类等命名的，而关键字是编程语言中预定义的具有特殊意义的单词。它们在含义、使用方式、数量和作用范围等方面有所区别。标识符和关键字的正确使用可以提高代码的可读性、规范性和维护性，但如果使用不当可能会导致代码混乱或出现语法错误。因此，在编程中需要注意选择合适的标识符，并熟悉所使用编程语言的关键字列表。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】注释有哪几种形式</title>
      <link href="/676e7ab5.html"/>
      <url>/676e7ab5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是Java注释"><a href="#1-什么是Java注释" class="headerlink" title="1. 什么是Java注释?"></a>1. 什么是Java注释?</h2><p>Java注释是一种用于在代码中添加说明和解释的特殊文本。它们不会被编译器处理，因此对程序的运行没有任何影响。Java注释主要有三种类型：单行注释、多行注释和文档注释。</p><ul><li>单行注释以双斜线（&#x2F;&#x2F;）开头，可以在一行中添加注释。</li><li>多行注释以斜线星号（&#x2F;<em>）开始，以星号斜线（</em>&#x2F;）结束，可以跨越多行。</li><li>文档注释以斜线星号两个连续的星号（&#x2F;*<em>）开始，以星号斜线（</em>&#x2F;）结束，可以包含多行描述，并且可以通过工具生成API文档。</li></ul><h2 id="2-为什么需要Java注释"><a href="#2-为什么需要Java注释" class="headerlink" title="2. 为什么需要Java注释?"></a>2. 为什么需要Java注释?</h2><p>Java注释是一种良好的编程实践，有以下几个重要原因：</p><ul><li>提供代码的可读性：注释可以帮助其他人理解你的代码，尤其是当代码变得复杂或难以理解时。</li><li>方便代码维护：注释可以记录代码的目的、逻辑和设计思路，使得后续的修改和维护更加容易。</li><li>自动生成文档：文档注释可以通过工具自动生成API文档，方便其他开发人员使用你的代码。</li><li>团队协作：注释可以促进团队成员之间的沟通和合作，减少代码理解上的困惑。</li></ul><h2 id="3-Java注释的使用方法"><a href="#3-Java注释的使用方法" class="headerlink" title="3. Java注释的使用方法"></a>3. Java注释的使用方法</h2><h3 id="单行注释"><a href="#单行注释" class="headerlink" title="单行注释"></a>单行注释</h3><p>单行注释用于在一行中添加简短的注释。它们可以出现在任何地方，并且不会影响程序的执行。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">// 定义一个整数变量x并赋值为10</span></span><br></pre></td></tr></table></figure><h3 id="多行注释"><a href="#多行注释" class="headerlink" title="多行注释"></a>多行注释</h3><p>多行注释用于跨越多行的注释内容。它们常用于对较长的代码块进行解释或暂时禁用一段代码。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这是一个多行注释示例。</span></span><br><span class="line"><span class="comment">它可以包含多行描述，</span></span><br><span class="line"><span class="comment">以及对代码的详细解释。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> <span class="number">20</span>;</span><br></pre></td></tr></table></figure><h3 id="文档注释"><a href="#文档注释" class="headerlink" title="文档注释"></a>文档注释</h3><p>文档注释用于生成API文档，并提供给其他开发人员使用你的代码。它们应该放在类、方法和字段的前面，并使用特定的标记来描述各个部分。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这是一个文档注释示例。</span></span><br><span class="line"><span class="comment"> * 它可以包含多行描述，</span></span><br><span class="line"><span class="comment"> * 并使用标记说明类、方法和字段的作用。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 这是一个方法的文档注释。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x 参数x的说明</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回值的说明</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">myMethod</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-Java注释的优点"><a href="#4-Java注释的优点" class="headerlink" title="4. Java注释的优点"></a>4. Java注释的优点</h2><ul><li>提高代码可读性：注释可以帮助其他人理解你的代码，尤其是当代码变得复杂或难以理解时。</li><li>方便代码维护：注释可以记录代码的目的、逻辑和设计思路，使得后续的修改和维护更加容易。</li><li>自动生成文档：文档注释可以通过工具自动生成API文档，方便其他开发人员使用你的代码。</li></ul><h2 id="5-Java注释的缺点"><a href="#5-Java注释的缺点" class="headerlink" title="5. Java注释的缺点"></a>5. Java注释的缺点</h2><ul><li>可能过度注释：如果注释过多或不准确，会导致代码冗余和混乱。</li><li>注释可能过时：如果代码发生了改变而注释没有及时更新，就会产生误导。</li></ul><h2 id="6-Java注释的使用注意事项"><a href="#6-Java注释的使用注意事项" class="headerlink" title="6. Java注释的使用注意事项"></a>6. Java注释的使用注意事项</h2><ul><li>注释应该清晰明了：注释应该简洁明了，用简单的语言描述代码的意图和功能。</li><li>避免无用的注释：删除不再需要的注释，避免给阅读者造成困惑。</li><li>及时更新注释：当代码发生变化时，要记得更新相应的注释，保持注释与代码的一致性。</li></ul><h2 id="7-总结"><a href="#7-总结" class="headerlink" title="7. 总结"></a>7. 总结</h2><p>Java注释是一种用于在代码中添加说明和解释的特殊文本。它们提供了代码的可读性、方便代码维护、自动生成文档等好处。Java注释有三种类型：单行注释、多行注释和文档注释。使用时需要注意清晰明了、避免过度注释和及时更新的原则。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>打造全网最细最全Java面试题库</title>
      <link href="/35792a27.html"/>
      <url>/35792a27.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="学习建议"><a href="#学习建议" class="headerlink" title="学习建议"></a>学习建议</h1><p>最全最详细最高质量 java 面试题，建议不要死记硬背，每天过一下，有印象即可</p><p>支持微信提醒</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/3048682703500.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/3048682703500.jpg"></a></p><p>支持统计</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/3134386585700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/3134386585700.png"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/3145961764300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/3145961764300.png"></a></p><p>轻松学习</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/3169823769100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/3169823769100.png"></a></p><p>只需要简单的点击【忘记】【模糊】【简单】，本身卡片是根据艾宾浩斯记忆法规划的，科学有效的帮助你记忆</p><h1 id="关于价格"><a href="#关于价格" class="headerlink" title="关于价格"></a>关于价格</h1><p>限时低价，随着人数不断增加，价格会持续变更</p><p>关注公众号➕加我个人微信备注 兑换码 半价获取</p><h1 id="关于更新"><a href="#关于更新" class="headerlink" title="关于更新"></a>关于更新</h1><p>文章持续更新中。每月不低于30篇✍️(˶ˆ꒳ˆ˵)，于2023年9月26日正式上架</p><h1 id="关于我"><a href="#关于我" class="headerlink" title="关于我"></a>关于我</h1><p>欢迎关注我的博课 <a href="https://blog.zysicyj.top/">https://blog.zysicyj.top</a></p><h1 id="交流群"><a href="#交流群" class="headerlink" title="交流群"></a>交流群</h1><p>想加入交流群讨论技术的请加我个人微信备注【交流群】，微信号。【sheng_chenyuanjie】</p><p>不想付费？</p><p>可以关注微信公众号，或者个人博客，所有的面试题上面都能免费看到</p><h1 id="更新计划"><a href="#更新计划" class="headerlink" title="更新计划"></a>更新计划</h1><ul><li><p>Java</p><ul><li>基础</li><li>集合</li><li>并发编程</li><li>I&#x2F;O</li><li>新特性</li><li>JVM</li></ul></li><li><p>计算机基础</p><ul><li>网络</li><li>操作系统</li><li>数据结构</li><li>算法</li></ul></li><li><p>数据库</p><ul><li>基础</li><li>Mysql</li><li>Redis</li><li>Elastic search</li></ul></li></ul><p>开发工具<br>Git<br>Maven<br>Gradle<br>Docker<br>Jenkins<br>Idea</p><p>常用框架<br>Spring&amp;SpringBoot<br>Mybatis<br>Netty</p><p>系统设计<br>基础<br>安全</p><p>分布式<br>理论<br>API网关<br>分布式ID<br>分布式锁<br>分布式事务<br>分布式配置中心<br>RPC<br>zookeeper</p><p>高性能<br>CDN<br>负载均衡<br>数据库优化<br>消息队列</p><p>高可用<br>基础<br>冗余设计<br>服务限流<br>降级&amp;熔断<br>超时&amp;重试<br>性能测试</p><p>设计模式</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p><p>~~</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Java 和 C++ 的区别?</title>
      <link href="/6e4b1dfc.html"/>
      <url>/6e4b1dfc.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-Java-和-C-是什么？"><a href="#1-Java-和-C-是什么？" class="headerlink" title="1. Java 和 C++ 是什么？"></a>1. Java 和 C++ 是什么？</h2><p>Java和C++都是流行的编程语言，用于开发各种类型的应用程序。它们具有不同的特点和用途。</p><ul><li><strong>Java</strong>：Java是一种面向对象的高级编程语言，最初由Sun Microsystems开发，并且现在由Oracle维护。Java被设计为可移植、跨平台的语言，可以在不同的操作系统上运行。它广泛用于Web应用程序、企业级应用程序、移动应用程序等领域。</li><li>**C++**：C++是一种通用的编程语言，扩展自C语言。它支持面向对象编程和底层系统编程，并提供了更多的控制和性能优化选项。C++被广泛用于游戏开发、嵌入式系统、高性能计算等领域。</li></ul><h2 id="2-Java-和-C-的主要区别"><a href="#2-Java-和-C-的主要区别" class="headerlink" title="2. Java 和 C++ 的主要区别"></a>2. Java 和 C++ 的主要区别</h2><p>Java和C++之间存在以下几个主要区别：</p><ul><li><strong>内存管理</strong>：Java使用自动内存管理机制（垃圾回收器），开发者无需手动分配和释放内存。而C++需要手动管理内存，包括显式地分配和释放内存，这可能导致内存泄漏和悬挂指针等问题。</li><li><strong>安全性</strong>：Java具有强大的安全性机制，包括字节码验证、安全沙箱和访问控制等。这使得Java在网络环境中更加安全，可以防止恶意代码的执行。C++没有内置的安全性机制，开发者需要自己处理安全问题。</li><li><strong>跨平台性</strong>：Java是一种完全可移植的语言，编写的Java程序可以在不同的操作系统上运行。而C++的可移植性较差，因为它依赖于底层操作系统和硬件特性。</li><li><strong>面向对象编程</strong>：Java是一种纯粹的面向对象编程语言，所有的代码都必须位于类中。C++也支持面向对象编程，但同时也允许使用传统的过程式编程风格。</li><li><strong>性能</strong>：由于Java的垃圾回收机制和其他运行时特性，相对于C++来说，Java的性能可能会稍低一些。然而，随着JVM（Java虚拟机）的改进和优化，Java的性能正在逐渐提升。</li></ul><h2 id="3-Java-和-C-的适用场景"><a href="#3-Java-和-C-的适用场景" class="headerlink" title="3. Java 和 C++ 的适用场景"></a>3. Java 和 C++ 的适用场景</h2><p>Java和C++在不同的应用领域有各自的优势：</p><ul><li><strong>Java</strong>：由于其跨平台性、安全性和易学性，Java广泛应用于Web开发、企业级应用程序、移动应用程序等领域。它也是Android应用开发的主要语言。</li><li>**C++**：由于其性能和底层系统编程能力，C++常用于游戏开发、嵌入式系统、高性能计算等需要对硬件进行直接控制的领域。</li></ul><h2 id="4-Java-和-C-的共同点"><a href="#4-Java-和-C-的共同点" class="headerlink" title="4. Java 和 C++ 的共同点"></a>4. Java 和 C++ 的共同点</h2><p>尽管Java和C++有很多不同之处，但它们也有一些共同点：</p><ul><li><strong>面向对象编程</strong>：Java和C++都支持面向对象编程范式，并提供类、继承、多态等特性。</li><li><strong>丰富的标准库</strong>：Java和C++都有丰富的标准库，提供了各种功能和工具，方便开发者使用。</li><li><strong>广泛的社区支持</strong>：Java和C++都有庞大的开发者社区，可以获得丰富的资源、文档和支持。</li></ul><p>无论选择Java还是C++，都取决于项目需求、开发团队的技术背景以及个人偏好。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> JVM </tag>
            
            <tag> 性能 </tag>
            
            <tag> 内存管理 </tag>
            
            <tag> 安全性 </tag>
            
            <tag> 跨平台 </tag>
            
            <tag> 面向对象 </tag>
            
            <tag> C++ </tag>
            
            <tag> 编程语言 </tag>
            
            <tag> 高级编程语言 </tag>
            
            <tag> 可移植 </tag>
            
            <tag> 应用程序 </tag>
            
            <tag> 网络环境 </tag>
            
            <tag> 跨平台性 </tag>
            
            <tag> 面向对象编程 </tag>
            
            <tag> 垃圾回收机制 </tag>
            
            <tag> 适用场景 </tag>
            
            <tag> Web开发 </tag>
            
            <tag> 企业级应用程序 </tag>
            
            <tag> 移动应用程序 </tag>
            
            <tag> Android应用开发 </tag>
            
            <tag> 游戏开发 </tag>
            
            <tag> 嵌入式系统 </tag>
            
            <tag> 高性能计算 </tag>
            
            <tag> 共同点 </tag>
            
            <tag> 标准库 </tag>
            
            <tag> 开发者社区 </tag>
            
            <tag> 项目需求 </tag>
            
            <tag> 技术背景 </tag>
            
            <tag> 个人偏好 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】OracleJDK和OpenJDK区别</title>
      <link href="/a9e18c15.html"/>
      <url>/a9e18c15.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-Oracle-JDK-和-OpenJDK-是什么？"><a href="#1-Oracle-JDK-和-OpenJDK-是什么？" class="headerlink" title="1. Oracle JDK 和 OpenJDK 是什么？"></a>1. Oracle JDK 和 OpenJDK 是什么？</h2><p>Oracle JDK（Java Development Kit）和 OpenJDK（Open Java Development Kit）都是用于开发和运行Java应用程序的软件开发工具包。它们提供了编译器、运行时环境和其他必要的工具，使得开发者能够创建和执行Java代码。</p><ul><li><strong>Oracle JDK</strong>：由Oracle公司提供和维护的Java开发工具包。在过去，Oracle JDK被认为是Java的标准实现，并且需要付费许可证才能使用商业环境中。</li><li><strong>OpenJDK</strong>：由一群自愿参与的开源社区贡献者共同开发和维护的Java开发工具包。OpenJDK是基于Sun Microsystems发布的Java SE规范而构建的，是Java的开源实现。</li></ul><h2 id="2-Oracle-JDK-和-OpenJDK-的关系"><a href="#2-Oracle-JDK-和-OpenJDK-的关系" class="headerlink" title="2. Oracle JDK 和 OpenJDK 的关系"></a>2. Oracle JDK 和 OpenJDK 的关系</h2><p>Oracle JDK和OpenJDK之间有着密切的关系：</p><ul><li><strong>源代码</strong>: Oracle JDK的大部分代码都是从OpenJDK项目派生而来的。Oracle会对OpenJDK进行修改和增强，并将这些变更作为Oracle JDK的一部分发布。</li><li><strong>功能差异</strong>: 在某些情况下，Oracle JDK可能会包含一些额外的功能或工具，这些功能或工具不在OpenJDK中提供。例如，Oracle JDK可能包括一些商业特性，如Java Flight Recorder和Java Mission Control。</li><li><strong>许可证</strong>: Oracle JDK在过去需要付费许可证才能在商业环境中使用，而OpenJDK是免费的。然而，自Java 11版本开始，Oracle宣布将Oracle JDK和OpenJDK的许可方式统一为GPLv2 + Classpath Exception，并且不再区分商业和非商业用途。</li></ul><h2 id="3-Oracle-JDK-和-OpenJDK-的版本同步"><a href="#3-Oracle-JDK-和-OpenJDK-的版本同步" class="headerlink" title="3. Oracle JDK 和 OpenJDK 的版本同步"></a>3. Oracle JDK 和 OpenJDK 的版本同步</h2><p>Oracle JDK和OpenJDK之间的版本通常是同步的，即相同版本号的Oracle JDK和OpenJDK提供了相同的功能和修复了相同的漏洞。这意味着开发者可以选择使用Oracle JDK或OpenJDK来满足他们的需求，而无需担心功能上的差异。</p><p>然而，在某些情况下，Oracle可能会在其商业产品中添加一些额外的功能或工具，这些功能或工具可能不会立即出现在对应的OpenJDK版本中。但随着时间的推移，这些变更通常会被合并到OpenJDK中。</p><h2 id="4-使用-Oracle-JDK-还是-OpenJDK？"><a href="#4-使用-Oracle-JDK-还是-OpenJDK？" class="headerlink" title="4. 使用 Oracle JDK 还是 OpenJDK？"></a>4. 使用 Oracle JDK 还是 OpenJDK？</h2><p>对于大多数开发者来说，选择使用Oracle JDK还是OpenJDK取决于以下几个因素：</p><ul><li><strong>许可证要求</strong>：如果你的项目或组织有特殊的许可证要求，需要商业支持或使用商业特性（如Java Flight Recorder），则可能需要考虑使用Oracle JDK。</li><li><strong>版本需求</strong>：如果你需要使用最新的Java功能和修复了特定漏洞的版本，则可以选择Oracle JDK，因为它通常会在OpenJDK之前发布。</li><li><strong>开源偏好</strong>：如果你更倾向于使用开源软件，并且不需要商业支持或特殊功能，则可以选择OpenJDK。</li></ul><p>无论选择Oracle JDK还是OpenJDK，都能够满足大多数Java应用程序的开发和运行需求。并且随着时间的推移，Oracle JDK和OpenJDK之间的差异将进一步减少，让开发者有更多的自由选择。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编译器 </tag>
            
            <tag> Oracle JDK </tag>
            
            <tag> OpenJDK </tag>
            
            <tag> Java Development Kit </tag>
            
            <tag> 开发工具包 </tag>
            
            <tag> Java应用程序 </tag>
            
            <tag> 运行时环境 </tag>
            
            <tag> 商业环境 </tag>
            
            <tag> 开源实现 </tag>
            
            <tag> 源代码 </tag>
            
            <tag> 功能差异 </tag>
            
            <tag> 商业特性 </tag>
            
            <tag> 许可证 </tag>
            
            <tag> 版本同步 </tag>
            
            <tag> 商业支持 </tag>
            
            <tag> 开源软件 </tag>
            
            <tag> 特殊功能 </tag>
            
            <tag> Java功能 </tag>
            
            <tag> 漏洞修复 </tag>
            
            <tag> 自由选择 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】AOT与JIT区别</title>
      <link href="/c7f1080e.html"/>
      <url>/c7f1080e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-AOT（Ahead-of-Time-Compilation）和JIT（Just-in-Time-Compilation）"><a href="#1-AOT（Ahead-of-Time-Compilation）和JIT（Just-in-Time-Compilation）" class="headerlink" title="1. AOT（Ahead-of-Time Compilation）和JIT（Just-in-Time Compilation）"></a>1. AOT（Ahead-of-Time Compilation）和JIT（Just-in-Time Compilation）</h2><p>AOT（Ahead-of-Time Compilation）和JIT（Just-in-Time Compilation）是两种不同的编译方式，用于将高级语言代码转换为机器码以便执行。</p><ul><li><strong>AOT</strong>: AOT编译是在程序运行之前将整个源代码或字节码文件一次性地编译成本地机器码。这意味着在程序运行时不需要再进行额外的编译工作，直接执行已经编译好的机器码。</li><li><strong>JIT</strong>: JIT编译是在程序运行过程中动态地将热点代码（频繁执行的代码）从字节码即时编译成本地机器码。JIT编译器会根据实际的执行情况来选择需要编译的代码，并且可以根据优化策略对代码进行优化。</li></ul><h2 id="2-AOT与JIT的区别"><a href="#2-AOT与JIT的区别" class="headerlink" title="2. AOT与JIT的区别"></a>2. AOT与JIT的区别</h2><p>AOT和JIT有以下几个主要区别：</p><ul><li><strong>编译时间</strong>: AOT编译发生在程序运行之前，需要预先将整个代码编译成机器码，因此编译时间较长。而JIT编译发生在程序运行时，只对热点代码进行编译，所以编译时间相对较短。</li><li><strong>执行速度</strong>: AOT编译生成的机器码直接执行，无需再进行额外的编译工作，因此执行速度较快。而JIT编译在运行时将字节码即时编译成机器码，可能会引入一定的延迟，但由于对热点代码进行优化，所以在后续的执行中可以获得更高的性能。</li><li><strong>内存占用</strong>: AOT编译生成的机器码需要占用额外的存储空间，因为整个程序都被编译成了机器码。而JIT编译只对热点代码进行编译，所以占用的内存相对较少。</li><li><strong>灵活性</strong>: AOT编译是静态的，一次性地将整个代码编译成机器码，无法根据实际情况进行动态调整。而JIT编译是动态的，在运行时根据实际的执行情况选择需要编译的代码，并且可以根据优化策略对代码进行优化。</li></ul><h2 id="3-AOT与JIT的使用场景"><a href="#3-AOT与JIT的使用场景" class="headerlink" title="3. AOT与JIT的使用场景"></a>3. AOT与JIT的使用场景</h2><p>AOT和JIT适用于不同的使用场景：</p><ul><li><strong>AOT</strong>: AOT编译适用于对启动时间要求较高、稳定性要求较高的应用场景。例如，移动应用程序或桌面应用程序通常会使用AOT编译来提前将整个应用程序编译成机器码，以便用户能够快速启动并获得稳定的性能。</li><li><strong>JIT</strong>: JIT编译适用于对执行性能要求较高、灵活性要求较高的应用场景。例如，Java虚拟机使用JIT编译器将热点代码即时编译成机器码，以提高程序的执行效率。JIT编译还可以根据实际的执行情况进行优化，使得程序在后续的执行中获得更好的性能。</li></ul><h2 id="4-AOT与JIT的结合使用"><a href="#4-AOT与JIT的结合使用" class="headerlink" title="4. AOT与JIT的结合使用"></a>4. AOT与JIT的结合使用</h2><p>AOT和JIT也可以结合使用，以发挥各自的优势：</p><ul><li><strong>静态AOT + 动态JIT</strong>: 在某些语言或框架中，可以使用静态AOT编译来提前将整个应用程序或库编译成机器码，以加快启动时间和稳定性。同时，使用动态JIT编译来对热点代码进行优化，以提高执行性能。</li><li><strong>动态AOT + 静态JIT</strong>: 在某些环境下，可以使用动态AOT编译来根据实际的执行情况选择需要编译的代码，并且可以根据优化策略对代码进行优化。同时，使用静态JIT编译来将剩余的字节码编译成机器码，以进一步提高执行性能。</li></ul><p>通过结合使用AOT和JIT，可以根据具体的应用场景和需求来选择最合适的编译方式，以获得更好的性能和灵活性。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 灵活性 </tag>
            
            <tag> AOT编译 </tag>
            
            <tag> JIT编译 </tag>
            
            <tag> 编译方式 </tag>
            
            <tag> 机器码 </tag>
            
            <tag> 高级语言 </tag>
            
            <tag> 热点代码 </tag>
            
            <tag> 预编译 </tag>
            
            <tag> 动态编译 </tag>
            
            <tag> 执行速度 </tag>
            
            <tag> 内存占用 </tag>
            
            <tag> 使用场景 </tag>
            
            <tag> 启动时间 </tag>
            
            <tag> 执行性能 </tag>
            
            <tag> 结合使用 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】语言编译与解释并存？</title>
      <link href="/cf1028ee.html"/>
      <url>/cf1028ee.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-Java语言的编译与解释"><a href="#1-Java语言的编译与解释" class="headerlink" title="1. Java语言的编译与解释"></a>1. Java语言的编译与解释</h2><p>Java语言被称为“编译与解释并存”的原因是它在执行过程中同时使用了编译和解释两种方式。</p><ul><li><strong>编译</strong>: 在Java开发过程中，源代码会经过编译器（javac）将其转换成字节码文件（.class），这个过程就是编译。编译后的字节码文件可以在任何支持Java虚拟机（JVM）的平台上运行。</li><li><strong>解释</strong>: 当Java程序运行时，Java虚拟机会对字节码进行解释或即时编译为机器码再执行。解释执行是逐条解释执行字节码指令，而即时编译则是将热点代码（经常执行的代码）编译成本地机器码，以提高执行效率。</li></ul><h2 id="2-编译与解释的优势"><a href="#2-编译与解释的优势" class="headerlink" title="2. 编译与解释的优势"></a>2. 编译与解释的优势</h2><p>Java语言采用编译与解释相结合的方式带来了以下几个优势：</p><ul><li><strong>跨平台性</strong>: Java字节码作为中间形式具有跨平台特性，可以在不同操作系统和硬件架构上运行。通过编译生成的字节码文件可以在任何支持Java虚拟机的平台上执行，实现了”一次编写，到处运行”的目标。</li><li><strong>安全性</strong>: 字节码隐藏了源代码的细节，提高了程序的安全性，防止源代码被反编译。Java虚拟机还提供了安全管理器（Security Manager）来控制程序的访问权限，增加了应用程序的安全性。</li><li><strong>动态性</strong>: Java语言支持动态特性，如反射、动态代理等。字节码可以在运行时进行加载、链接和执行，实现了Java的动态特性。</li></ul><h2 id="3-编译与解释的工作流程"><a href="#3-编译与解释的工作流程" class="headerlink" title="3. 编译与解释的工作流程"></a>3. 编译与解释的工作流程</h2><p>Java语言的编译与解释工作流程如下：</p><ol><li>使用Java编译器（javac）将源代码编译成字节码文件（.class）。</li><li>在运行时，Java虚拟机加载字节码文件，并对其进行解释或即时编译为机器码。</li><li>解释执行：逐条解释执行字节码指令。</li><li>即时编译：将热点代码（经常执行的代码）编译成本地机器码，以提高执行效率。</li><li>执行编译后的机器码。</li></ol><p>根据具体情况，Java虚拟机会根据代码的执行频率和优化策略选择合适的方式进行执行。</p><h2 id="4-编译与解释的使用示例"><a href="#4-编译与解释的使用示例" class="headerlink" title="4. 编译与解释的使用示例"></a>4. 编译与解释的使用示例</h2><p>以下是一个简单的Java程序的编译与解释示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以使用<code>javac</code>命令将上述Java源文件编译为字节码文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac HelloWorld.java</span><br></pre></td></tr></table></figure><p>编译完成后会生成名为<code>HelloWorld.class</code>的字节码文件。</p><p>然后可以使用<code>java</code>命令运行字节码文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java HelloWorld</span><br></pre></td></tr></table></figure><p>在运行过程中，Java虚拟机会对字节码进行解释或即时编译为机器码并执行。</p><h2 id="5-总结"><a href="#5-总结" class="headerlink" title="5. 总结"></a>5. 总结</h2><p>Java语言被称为“编译与解释并存”，是因为它在执行过程中同时使用了编译和解释两种方式。编译将源代码转换成字节码文件，而解释执行字节码指令或即时编译为机器码再执行。这种方式带来了跨平台性、安全性和动态性等优势。在开发过程中，我们只需关注源代码的编写，而无需直接操作字节码。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JVM </tag>
            
            <tag> 总结 </tag>
            
            <tag> 安全性 </tag>
            
            <tag> 编译器 </tag>
            
            <tag> 机器码 </tag>
            
            <tag> 源代码 </tag>
            
            <tag> 字节码 </tag>
            
            <tag> 即时编译 </tag>
            
            <tag> Java语言 </tag>
            
            <tag> 编译 </tag>
            
            <tag> 跨平台性 </tag>
            
            <tag> 解释 </tag>
            
            <tag> 动态性 </tag>
            
            <tag> 字节码文件 </tag>
            
            <tag> 执行效率 </tag>
            
            <tag> 动态特性 </tag>
            
            <tag> 反射 </tag>
            
            <tag> 动态代理 </tag>
            
            <tag> 加载 </tag>
            
            <tag> 链接 </tag>
            
            <tag> 机器码文件 </tag>
            
            <tag> 编译流程 </tag>
            
            <tag> 解释流程 </tag>
            
            <tag> 编译示例 </tag>
            
            <tag> 解释示例 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】什么是字节码?</title>
      <link href="/1e7dfa04.html"/>
      <url>/1e7dfa04.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是字节码"><a href="#1-什么是字节码" class="headerlink" title="1. 什么是字节码?"></a>1. 什么是字节码?</h2><p><strong>字节码（Bytecode）</strong> 是一种中间形式的二进制代码，它由Java编译器将Java源代码编译而成。字节码不同于机器码，它并不直接在计算机上执行，而是由Java虚拟机（JVM）解释或即时编译为机器码后再执行。</p><p>字节码是一种与平台无关的格式，它可以在任何支持Java虚拟机的操作系统和硬件上运行。这使得Java具有跨平台的能力，只需编写一次代码，就可以在多个平台上运行。</p><h2 id="2-为什么需要字节码"><a href="#2-为什么需要字节码" class="headerlink" title="2. 为什么需要字节码?"></a>2. 为什么需要字节码?</h2><p>使用字节码作为中间形式有以下几个优点：</p><ul><li><strong>跨平台性</strong>: 字节码可以在不同操作系统和硬件架构上运行，实现了Java的”一次编写，到处运行”的特性。</li><li><strong>安全性</strong>: 字节码文件经过编译，隐藏了源代码的细节，提高了程序的安全性，防止源代码被反编译。</li><li><strong>可移植性</strong>: 字节码可以在不同版本的Java虚拟机上运行，保证了应用程序的兼容性和可移植性。</li><li><strong>动态性</strong>: 字节码可以在运行时进行加载、链接和执行，实现了Java的动态特性，如反射、动态代理等。</li></ul><h2 id="3-字节码的实现原理"><a href="#3-字节码的实现原理" class="headerlink" title="3. 字节码的实现原理"></a>3. 字节码的实现原理</h2><p>字节码是由Java编译器将Java源代码编译而成的。在编译过程中，Java源代码首先被转换为抽象语法树（AST），然后通过语义分析和优化生成字节码。</p><p>字节码采用了一种基于栈的指令集架构，它使用操作数栈来进行计算，并且提供了一系列的指令来执行各种操作，如加载、存储、运算、控制流等。</p><p>JVM负责解释或即时编译字节码为机器码并执行。解释执行是逐条解释执行字节码指令，而即时编译则是将热点代码（经常执行的代码）编译成本地机器码，以提高执行效率。</p><h2 id="4-字节码的使用示例"><a href="#4-字节码的使用示例" class="headerlink" title="4. 字节码的使用示例"></a>4. 字节码的使用示例</h2><p>以下是一个简单的Java程序的字节码示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以使用<code>javac</code>命令将上述Java源文件编译为字节码文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac HelloWorld.java</span><br></pre></td></tr></table></figure><p>编译完成后会生成名为<code>HelloWorld.class</code>的字节码文件。</p><h2 id="5-字节码的优点"><a href="#5-字节码的优点" class="headerlink" title="5. 字节码的优点"></a>5. 字节码的优点</h2><ul><li><strong>跨平台性</strong>: 字节码可以在不同操作系统和硬件架构上运行，实现了Java的跨平台特性。</li><li><strong>安全性</strong>: 字节码隐藏了源代码的细节，提高了程序的安全性，防止源代码被反编译。</li><li><strong>可移植性</strong>: 字节码可以在不同版本的Java虚拟机上运行，保证了应用程序的兼容性和可移植性。</li><li><strong>动态性</strong>: 字节码可以在运行时进行加载、链接和执行，实现了Java的动态特性。</li></ul><h2 id="6-字节码的缺点"><a href="#6-字节码的缺点" class="headerlink" title="6. 字节码的缺点"></a>6. 字节码的缺点</h2><ul><li><strong>执行效率相对较低</strong>: 相比于直接执行机器码，解释执行字节码或即时编译为机器码后再执行会有一定的性能损失。</li><li><strong>依赖于Java虚拟机</strong>: 字节码需要依赖Java虚拟机才能执行，限制了其在其他环境中的使用。</li></ul><h2 id="7-字节码的使用注意事项"><a href="#7-字节码的使用注意事项" class="headerlink" title="7. 字节码的使用注意事项"></a>7. 字节码的使用注意事项</h2><ul><li>在开发过程中，通常只需关注Java源代码，而无需直接操作字节码。</li><li>如果需要对字节码进行分析或修改，可以使用相关工具，如ASM、Javassist等。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>字节码是由Java编译器将Java源代码编译而成的中间形式的二进制代码。它具有跨平台、安全、可移植和动态的特性。字节码通过Java虚拟机解释或即时编译为机器码后执行。尽管字节码相对于直接执行机器码会有一定的性能损失，但它提供了跨平台和动态特性的优势。在开发过程中，通常只需关注Java源代码，而无需直接操作字节码。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JVM </tag>
            
            <tag> 安全性 </tag>
            
            <tag> 注意事项 </tag>
            
            <tag> 机器码 </tag>
            
            <tag> 热点代码 </tag>
            
            <tag> 字节码 </tag>
            
            <tag> 即时编译 </tag>
            
            <tag> 编译 </tag>
            
            <tag> 跨平台性 </tag>
            
            <tag> 动态性 </tag>
            
            <tag> 字节码文件 </tag>
            
            <tag> 执行效率 </tag>
            
            <tag> 加载 </tag>
            
            <tag> 中间形式 </tag>
            
            <tag> 二进制代码 </tag>
            
            <tag> Java编译器 </tag>
            
            <tag> Java源代码 </tag>
            
            <tag> 可移植性 </tag>
            
            <tag> 解释执行 </tag>
            
            <tag> 操作数栈 </tag>
            
            <tag> 指令集架构 </tag>
            
            <tag> 存储 </tag>
            
            <tag> 运算 </tag>
            
            <tag> 控制流 </tag>
            
            <tag> javac命令 </tag>
            
            <tag> 跨平台特性 </tag>
            
            <tag> 性能损失 </tag>
            
            <tag> 依赖 </tag>
            
            <tag> 分析 </tag>
            
            <tag> 修改 </tag>
            
            <tag> ASM </tag>
            
            <tag> Javassist </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】JVM和JDK/JRE之间的关系是什么？</title>
      <link href="/79297fe6.html"/>
      <url>/79297fe6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是JVM、JDK和JRE"><a href="#1-什么是JVM、JDK和JRE" class="headerlink" title="1. 什么是JVM、JDK和JRE?"></a>1. 什么是JVM、JDK和JRE?</h2><ul><li><p><strong>JVM</strong>（Java Virtual Machine）是Java虚拟机的缩写，它是Java程序运行的环境。JVM负责将Java字节码翻译成特定平台上的机器指令，并执行这些指令。</p></li><li><p><strong>JDK</strong>（Java Development Kit）是Java开发工具包的缩写，它是用于开发Java应用程序的软件包。JDK包含了编译器、调试器、类库等工具，以及JRE（Java Runtime Environment）。</p></li><li><p><strong>JRE</strong>（Java Runtime Environment）是Java运行时环境的缩写，它是在计算机上运行Java程序所需的最小环境。JRE包含了JVM和一些基本的类库，可以让用户运行已经编译好的Java程序。</p></li></ul><h2 id="2-为什么需要JVM、JDK和JRE"><a href="#2-为什么需要JVM、JDK和JRE" class="headerlink" title="2. 为什么需要JVM、JDK和JRE?"></a>2. 为什么需要JVM、JDK和JRE?</h2><ul><li><p>JVM的存在使得Java程序具有跨平台的能力，即同一个Java程序可以在不同操作系统上运行，而无需修改代码。这是因为JVM会根据不同的操作系统来解释和执行Java字节码。</p></li><li><p>JDK提供了丰富的开发工具和类库，方便开发人员进行Java应用程序的开发、测试和调试。开发人员可以使用JDK中的编译器将Java源代码编译成字节码，然后再由JVM执行。</p></li><li><p>JRE则是为了让用户能够运行已经编译好的Java程序，而无需安装完整的开发工具包。JRE只包含了运行Java程序所需的最小环境，可以节省计算机资源和存储空间。</p></li></ul><h2 id="3-JVM、JDK和JRE的实现原理"><a href="#3-JVM、JDK和JRE的实现原理" class="headerlink" title="3. JVM、JDK和JRE的实现原理?"></a>3. JVM、JDK和JRE的实现原理?</h2><ul><li><p>JVM通过将Java字节码翻译成特定平台上的机器指令来执行Java程序。它使用即时编译（Just-In-Time Compilation）技术，在运行时动态地将热点代码编译成本地机器码，以提高程序的执行效率。</p></li><li><p>JDK是由Oracle公司提供的Java开发工具包，其中包含了编译器、调试器、类库等工具。JDK中的编译器将Java源代码编译成字节码，然后再由JVM执行。</p></li><li><p>JRE包含了JVM和一些基本的类库，用于支持Java程序的运行。当用户运行一个Java程序时，JRE会启动JVM，并加载程序所需的类库，然后执行程序。</p></li></ul><h2 id="4-JVM、JDK和JRE的使用示例"><a href="#4-JVM、JDK和JRE的使用示例" class="headerlink" title="4. JVM、JDK和JRE的使用示例"></a>4. JVM、JDK和JRE的使用示例</h2><p>以下是一个简单的Java程序示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>如果你只想运行这个Java程序，那么你只需要安装JRE即可。在命令行中输入<code>java HelloWorld</code>即可运行。</p></li><li><p>如果你想开发Java程序，那么你需要安装JDK。在命令行中输入<code>javac HelloWorld.java</code>编译源代码，然后再输入<code>java HelloWorld</code>运行程序。</p></li></ul><h2 id="5-JVM、JDK和JRE的优点"><a href="#5-JVM、JDK和JRE的优点" class="headerlink" title="5. JVM、JDK和JRE的优点"></a>5. JVM、JDK和JRE的优点</h2><ul><li><p>JVM使得Java具有跨平台的能力，可以在不同操作系统上运行相同的Java程序。</p></li><li><p>JDK提供了丰富的开发工具和类库，方便开发人员进行Java应用程序的开发、测试和调试。</p></li><li><p>JRE只包含了运行Java程序所需的最小环境，节省计算机资源和存储空间。</p></li></ul><h2 id="6-JVM、JDK和JRE的缺点"><a href="#6-JVM、JDK和JRE的缺点" class="headerlink" title="6. JVM、JDK和JRE的缺点"></a>6. JVM、JDK和JRE的缺点</h2><ul><li><p>JVM的性能可能会受到一些限制，因为它需要将Java字节码翻译成特定平台上的机器指令。</p></li><li><p>JDK的安装包比较大，占用较多的存储空间。</p></li><li><p>JRE只包含了基本的类库，对于一些高级功能可能需要额外安装其他组件。</p></li></ul><h2 id="7-JVM、JDK和JRE的使用注意事项"><a href="#7-JVM、JDK和JRE的使用注意事项" class="headerlink" title="7. JVM、JDK和JRE的使用注意事项"></a>7. JVM、JDK和JRE的使用注意事项</h2><ul><li><p>在选择JVM时，要根据目标平台选择合适的版本，并确保其与Java程序兼容。</p></li><li><p>在使用JDK进行开发时，要遵循Java语法规范，以及良好的编程习惯。</p></li><li><p>在使用JRE运行Java程序时，要确保已经安装了正确的JRE版本，并且程序所需的类库在classpath中可用。</p></li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><ul><li><p>JVM是Java虚拟机，负责将Java字节码翻译成特定平台上的机器指令，并执行这些指令。</p></li><li><p>JDK是Java开发工具包，提供了丰富的开发工具和类库，方便开发人员进行Java应用程序的开发、测试和调试。</p></li><li><p>JRE是Java运行时环境，包含了JVM和一些基本的类库，可以让用户运行已经编译好的Java程序。</p></li><li><p>JVM使得Java具有跨平台的能力，JDK提供了开发工具和类库，JRE提供了最小的运行环境。</p></li><li><p>在使用JVM、JDK和JRE时，需要根据实际需求选择合适的版本，并遵循相应的使用注意事项。</p></li></ul><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JVM </tag>
            
            <tag> 优点 </tag>
            
            <tag> 缺点 </tag>
            
            <tag> 注意事项 </tag>
            
            <tag> 编译器 </tag>
            
            <tag> JDK </tag>
            
            <tag> JRE </tag>
            
            <tag> 跨平台 </tag>
            
            <tag> 开发工具 </tag>
            
            <tag> 类库 </tag>
            
            <tag> 字节码 </tag>
            
            <tag> 机器指令 </tag>
            
            <tag> 调试器 </tag>
            
            <tag> 即时编译 </tag>
            
            <tag> 命令行 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】JavaSe和JavaEE的区别</title>
      <link href="/89742280.html"/>
      <url>/89742280.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是JavaSE和JavaEE"><a href="#1-什么是JavaSE和JavaEE" class="headerlink" title="1. 什么是JavaSE和JavaEE?"></a>1. 什么是JavaSE和JavaEE?</h2><ul><li><p><strong>JavaSE</strong>（Java Platform, Standard Edition）是Java平台的标准版，提供了Java语言的核心API和运行环境。它包含了Java编程语言、JVM（Java虚拟机）、基础类库等组件，用于开发桌面应用程序、命令行工具等。</p></li><li><p><strong>JavaEE</strong>（Java Platform, Enterprise Edition）是Java平台的企业版，建立在JavaSE之上，为开发大型、分布式、可扩展的企业级应用提供支持。它包含了JavaSE的所有功能，并且还提供了一系列的API和服务，如Servlet、JSP、EJB、JMS等，用于开发Web应用、企业级应用服务器等。</p></li></ul><h2 id="2-为什么需要JavaSE和JavaEE"><a href="#2-为什么需要JavaSE和JavaEE" class="headerlink" title="2. 为什么需要JavaSE和JavaEE?"></a>2. 为什么需要JavaSE和JavaEE?</h2><p>JavaSE提供了Java语言的核心功能和基础类库，可以满足普通应用程序的开发需求。而对于大型、复杂的企业级应用来说，需要更多的功能和服务来支持分布式计算、事务管理、安全性等方面的需求，这就是JavaEE的作用所在。</p><p>JavaEE通过提供一系列的API和服务，简化了企业级应用的开发过程，提高了开发效率和代码质量。同时，JavaEE还提供了各种容器和中间件，如Web容器、应用服务器等，可以方便地部署和管理企业级应用。</p><h2 id="3-JavaSE和JavaEE的实现原理"><a href="#3-JavaSE和JavaEE的实现原理" class="headerlink" title="3. JavaSE和JavaEE的实现原理?"></a>3. JavaSE和JavaEE的实现原理?</h2><p>JavaSE和JavaEE都是基于Java语言开发的，使用了相同的编程模型和工具链。它们之间的区别主要体现在提供的功能和服务上。</p><p>JavaSE的实现原理包括以下几个方面：</p><ul><li><strong>JVM</strong>：Java虚拟机负责将Java字节码转换为机器码，并执行程序。</li><li><strong>Java编译器</strong>：将Java源代码编译成字节码文件（.class）。</li><li><strong>类加载器</strong>：负责将字节码文件加载到内存中，并解析成可执行的类对象。</li><li><strong>垃圾回收器</strong>：自动回收不再使用的内存空间，释放资源。</li></ul><p>JavaEE的实现原理则更加复杂，涉及到以下几个关键组件：</p><ul><li><strong>Servlet容器</strong>：负责接收HTTP请求并调用对应的Servlet进行处理。</li><li><strong>Web容器</strong>：扩展了Servlet容器，提供了更多的Web相关功能，如JSP、过滤器等。</li><li><strong>EJB容器</strong>：负责管理和调度Enterprise JavaBeans（EJB）组件的生命周期和事务。</li><li><strong>消息队列</strong>：用于异步通信和解耦系统各个组件之间的依赖关系。</li><li><strong>持久化框架</strong>：用于将数据持久化到数据库中，如JPA、Hibernate等。</li></ul><h2 id="4-JavaSE和JavaEE的使用示例"><a href="#4-JavaSE和JavaEE的使用示例" class="headerlink" title="4. JavaSE和JavaEE的使用示例"></a>4. JavaSE和JavaEE的使用示例</h2><p>以下是一个简单的JavaSE示例，用于计算两个整数的和：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Calculator</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> a + b;</span><br><span class="line">        System.out.println(<span class="string">&quot;Sum: &quot;</span> + sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以下是一个简单的JavaEE示例，用于处理HTTP请求并返回响应：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorldServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        out.println(<span class="string">&quot;&lt;html&gt;&lt;body&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;h1&gt;Hello, World!&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-JavaSE和JavaEE的优点"><a href="#5-JavaSE和JavaEE的优点" class="headerlink" title="5. JavaSE和JavaEE的优点"></a>5. JavaSE和JavaEE的优点</h2><ul><li><p><strong>JavaSE的优点</strong>：</p><ul><li>提供了丰富的基础类库，方便开发各种类型的应用程序。</li><li>跨平台性好，可以在不同操作系统上运行。</li><li>高度可靠性和稳定性，通过垃圾回收机制自动管理内存。</li></ul></li><li><p><strong>JavaEE的优点</strong>：</p><ul><li>提供了一系列的API和服务，简化了企业级应用的开发过程。</li><li>支持分布式计算和事务管理，保证了应用的高可用性和数据一致性。</li><li>可扩展性好，可以根据需求灵活地添加或移除组件。</li></ul></li></ul><h2 id="6-JavaSE和JavaEE的缺点"><a href="#6-JavaSE和JavaEE的缺点" class="headerlink" title="6. JavaSE和JavaEE的缺点"></a>6. JavaSE和JavaEE的缺点</h2><ul><li><p><strong>JavaSE的缺点</strong>：</p><ul><li>缺乏对企业级应用开发所需的一些高级功能和服务的支持。</li><li>开发过程相对繁琐，需要手动处理很多底层细节。</li></ul></li><li><p><strong>JavaEE的缺点</strong>：</p><ul><li>学习曲线较陡峭，需要掌握大量的API和规范。</li><li>部署和管理复杂度较高，需要依赖各种容器和中间件。</li></ul></li></ul><h2 id="7-JavaSE和JavaEE的使用注意事项"><a href="#7-JavaSE和JavaEE的使用注意事项" class="headerlink" title="7. JavaSE和JavaEE的使用注意事项"></a>7. JavaSE和JavaEE的使用注意事项</h2><ul><li>在选择Java平台时，根据实际需求选择合适的版本。如果只是开发简单的桌面应用程序，可以选择JavaSE；如果需要开发大型、分布式的企业级应用，就需要选择JavaEE。</li><li>对于JavaEE开发，建议使用成熟的开发框架和工具，如Spring、Hibernate等，以提高开发效率和代码质量。</li><li>注意JavaSE和JavaEE的版本兼容性，确保所使用的库和组件与Java平台的版本匹配。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>JavaSE是Java平台的标准版，提供了Java语言的核心功能和基础类库，适用于开发普通应用程序。JavaEE是Java平台的企业版，建立在JavaSE之上，提供了一系列的API和服务，用于开发大型、分布式的企业级应用。</p><p>JavaSE和JavaEE都有各自的优点和缺点，根据实际需求选择合适的版本。在使用过程中，需要注意版本兼容性，并结合成熟的开发框架和工具来提高开发效率和代码质量。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 实现原理 </tag>
            
            <tag> 优点 </tag>
            
            <tag> 缺点 </tag>
            
            <tag> 使用示例 </tag>
            
            <tag> 总结 </tag>
            
            <tag> 注意事项 </tag>
            
            <tag> JavaSE </tag>
            
            <tag> JavaEE </tag>
            
            <tag> 区别 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Java语言概念</title>
      <link href="/c8b9ad7e.html"/>
      <url>/c8b9ad7e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是Java语言"><a href="#1-什么是Java语言" class="headerlink" title="1. 什么是Java语言?"></a>1. 什么是Java语言?</h2><p>Java是一种面向对象的编程语言，由Sun Microsystems（现在是Oracle）于1995年推出。它被设计成具有简单、可移植和安全性强的特点，并且可以应用于各种平台上的软件开发。</p><p>Java语言具有以下特点：</p><ul><li><strong>面向对象</strong>：Java支持面向对象的编程范式，通过类和对象来组织代码。</li><li><strong>跨平台</strong>：Java程序可以在不同的操作系统上运行，只需将源代码编译为字节码文件（.class），然后在Java虚拟机（JVM）上执行。</li><li><strong>自动内存管理</strong>：Java提供了垃圾回收机制，自动管理内存分配和释放，减少了程序员对内存管理的负担。</li><li><strong>异常处理</strong>：Java引入了异常处理机制，使得程序能够更好地处理错误和异常情况。</li><li><strong>多线程支持</strong>：Java提供了多线程编程的支持，允许程序同时执行多个任务。</li><li><strong>丰富的库</strong>：Java拥有庞大而丰富的标准类库，包含了各种常用的功能模块，如输入输出、网络通信、数据库连接等。</li></ul><h2 id="2-为什么需要Java语言"><a href="#2-为什么需要Java语言" class="headerlink" title="2. 为什么需要Java语言?"></a>2. 为什么需要Java语言?</h2><p>Java语言之所以广泛使用，主要有以下几个原因：</p><ul><li><p><strong>跨平台性</strong>：Java程序可以在不同的操作系统上运行，这使得开发人员能够编写一次代码，然后在多个平台上部署和执行。这种可移植性大大简化了软件开发和维护的工作。</p></li><li><p><strong>安全性</strong>：Java具有内置的安全机制，如字节码验证、安全沙箱等，可以防止恶意代码对计算机系统造成损害。这使得Java成为开发网络应用和浏览器插件等安全敏感领域的首选语言。</p></li><li><p><strong>丰富的库支持</strong>：Java拥有庞大而丰富的标准类库，其中包含了各种常用的功能模块，如输入输出、网络通信、数据库连接等。这些库提供了高效、可靠的解决方案，加速了开发过程。</p></li><li><p><strong>广泛的应用领域</strong>：由于其灵活性和可扩展性，Java被广泛应用于各个领域，包括企业级应用、移动应用、嵌入式系统、游戏开发等。无论是大型企业还是初创公司，都可以利用Java构建强大的软件解决方案。</p></li></ul><h2 id="3-Java语言的实现原理"><a href="#3-Java语言的实现原理" class="headerlink" title="3. Java语言的实现原理?"></a>3. Java语言的实现原理?</h2><p>Java语言的实现原理主要涉及以下几个方面：</p><ul><li><p><strong>编译</strong>：Java源代码通过Java编译器（javac）编译成字节码文件（.class），其中包含了与特定平台无关的中间代码。</p></li><li><p><strong>虚拟机</strong>：Java虚拟机（JVM）是Java语言的核心组件，负责解释和执行字节码文件。它提供了内存管理、垃圾回收、线程调度等功能，并将字节码转换为底层操作系统能够理解的机器指令。</p></li><li><p><strong>类加载</strong>：在运行时，JVM会动态加载字节码文件并生成对应的类对象。类加载器负责从文件系统或网络中加载类文件，并将其转换为可执行的类对象。</p></li><li><p><strong>即时编译</strong>：JVM还具备即时编译（Just-In-Time Compilation）的能力，可以将频繁执行的字节码转换为本地机器代码，以提高程序的执行效率。</p></li><li><p><strong>垃圾回收</strong>：Java的垃圾回收机制自动管理内存分配和释放，减少了程序员对内存管理的负担。垃圾回收器会周期性地检查不再使用的对象，并释放其占用的内存空间。</p></li></ul><h2 id="4-Java语言的使用示例"><a href="#4-Java语言的使用示例" class="headerlink" title="4. Java语言的使用示例"></a>4. Java语言的使用示例</h2><p>下面是一个简单的Java程序示例，实现了计算两个数之和并输出结果的功能：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> num1 + num2;</span><br><span class="line">        System.out.println(<span class="string">&quot;Sum: &quot;</span> + sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-Java语言的优点"><a href="#5-Java语言的优点" class="headerlink" title="5. Java语言的优点"></a>5. Java语言的优点</h2><p>Java语言具有以下几个优点：</p><ul><li><p><strong>跨平台性</strong>：Java程序可以在不同的操作系统上运行，实现了一次编写、到处运行的目标。</p></li><li><p><strong>面向对象</strong>：Java是一种纯粹的面向对象编程语言，支持封装、继承和多态等特性，使得代码更加模块化、可重用和易于维护。</p></li><li><p><strong>丰富的类库</strong>：Java拥有庞大而丰富的标准类库，提供了各种常用的功能模块，如输入输出、网络通信、数据库连接等。这些库能够极大地提高开发效率。</p></li><li><p><strong>安全性</strong>：Java具有内置的安全机制，如字节码验证、安全沙箱等，可以防止恶意代码对计算机系统造成损害。</p></li><li><p><strong>多线程支持</strong>：Java提供了多线程编程的支持，允许程序同时执行多个任务，提高了程序的并发性能。</p></li></ul><h2 id="6-Java语言的缺点"><a href="#6-Java语言的缺点" class="headerlink" title="6. Java语言的缺点"></a>6. Java语言的缺点</h2><p>Java语言也存在一些缺点：</p><ul><li><p><strong>相对较慢</strong>：由于Java程序需要通过JVM解释执行，相比于直接编译成机器码的语言，如C++，Java程序的性能较低。</p></li><li><p><strong>内存消耗大</strong>：由于Java的自动内存管理机制，需要额外的内存空间来维护对象和垃圾回收信息，导致Java应用程序占用的内存较多。</p></li><li><p><strong>学习曲线陡峭</strong>：相对于其他编程语言，Java的语法和概念较为复杂，初学者可能需要花费更多的时间和精力来掌握。</p></li></ul><h2 id="7-Java语言的使用注意事项"><a href="#7-Java语言的使用注意事项" class="headerlink" title="7. Java语言的使用注意事项"></a>7. Java语言的使用注意事项</h2><p>在使用Java语言时，需要注意以下几点：</p><ul><li><p><strong>版本兼容性</strong>：不同版本的Java语言可能存在一些差异，特别是在使用新特性或库时。因此，在开发过程中要确保所使用的Java版本与目标平台的兼容性。</p></li><li><p><strong>异常处理</strong>：Java引入了异常处理机制，建议在代码中合理地捕获和处理异常，以避免程序崩溃或产生未知错误。</p></li><li><p><strong>资源释放</strong>：Java虚拟机会自动进行垃圾回收，但并不代表所有资源都会被及时释放。对于一些需要手动关闭的资源，如文件、数据库连接等，应该及时释放，以避免资源泄露。</p></li><li><p><strong>安全性</strong>：尽量避免使用不安全的代码和库，以防止恶意攻击或数据泄露。在网络通信、文件操作等敏感场景下，要注意加强安全措施。</p></li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Java语言是一种面向对象的编程语言，具有跨平台性、安全性、丰富的类库支持等优点。它通过JVM实现了字节码解释执行，并提供了自动内存管理、多线程支持等功能。然而，Java也存在相对较慢、内存消耗大等缺点。在使用Java时，需要注意版本兼容性、异常处理、资源释放和安全性等方面的问题。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 面试题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 虚拟机 </tag>
            
            <tag> 优点 </tag>
            
            <tag> 缺点 </tag>
            
            <tag> 使用注意事项 </tag>
            
            <tag> 安全性 </tag>
            
            <tag> 跨平台 </tag>
            
            <tag> 即时编译 </tag>
            
            <tag> Java语言 </tag>
            
            <tag> 面向对象 </tag>
            
            <tag> 自动内存管理 </tag>
            
            <tag> 异常处理 </tag>
            
            <tag> 多线程支持 </tag>
            
            <tag> 丰富的库 </tag>
            
            <tag> 编译 </tag>
            
            <tag> 类加载 </tag>
            
            <tag> 垃圾回收 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>添加阿里云maven镜像</title>
      <link href="/bf8ff131.html"/>
      <url>/bf8ff131.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><p>打开 maven 的配置文件（ windows 机器一般在 maven 安装目录的 conf&#x2F;settings.xml ），在<mirrors></mirrors>标签中添加 mirror 子节点:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyunmaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>阿里云公共仓库<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyunmaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>阿里云公共仓库snapshots<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/apache-snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在你的 pom.xml 文件<denpendencies></denpendencies>节点中加入你要引用的文件信息：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>[GROUP_ID]<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>[ARTIFACT_ID]<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>[VERSION]<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      
        <tags>
            
            <tag> 阿里云 </tag>
            
            <tag> 配置文件 </tag>
            
            <tag> maven镜像 </tag>
            
            <tag> mirror </tag>
            
            <tag> 阿里云公共仓库 </tag>
            
            <tag> pom.xml </tag>
            
            <tag> denpendencies </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【BUG】Springboot报错不支持major65</title>
      <link href="/4aebfff7.html"/>
      <url>/4aebfff7.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/RocketMq/">系列文章地址</a></p><hr><h1 id="报错内容"><a href="#报错内容" class="headerlink" title="报错内容"></a>报错内容</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">nested exception is org.springframework.core.NestedIOException: ASM ClassReader failed to parse <span class="keyword">class</span> <span class="title class_">file</span> - probably due to a <span class="keyword">new</span> <span class="title class_">Java</span> <span class="keyword">class</span> <span class="title class_">file</span> version that isn<span class="string">&#x27;t supported yet: URL [jar:file:/D:/code/cppCode20221025/leader-admin/target/leader-admin.jar!/BOOT-INF/classes!/com/nari/LeaderApplication.class]; nested exception is java.lang.IllegalArgumentException: Unsupported class file major version 65</span></span><br><span class="line"><span class="string">        at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:452)</span></span><br><span class="line"><span class="string">        at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:315)</span></span><br><span class="line"><span class="string">        at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:276)</span></span><br><span class="line"><span class="string">        at org.springframework.context.annotation.ComponentScanAnnotationParser.parse(ComponentScanAnnotationParser.java:132)</span></span><br><span class="line"><span class="string">        at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:296)</span></span><br><span class="line"><span class="string">        at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:250)</span></span><br><span class="line"><span class="string">        at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:207)</span></span><br><span class="line"><span class="string">        at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:175)</span></span><br><span class="line"><span class="string">        at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:319)</span></span><br><span class="line"><span class="string">        at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:236)</span></span><br><span class="line"><span class="string">        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:280)</span></span><br><span class="line"><span class="string">        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:96)</span></span><br><span class="line"><span class="string">        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:707)</span></span><br><span class="line"><span class="string">        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:533)</span></span><br><span class="line"><span class="string">        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)</span></span><br><span class="line"><span class="string">        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747)</span></span><br><span class="line"><span class="string">        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:405)</span></span><br><span class="line"><span class="string">        at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)</span></span><br><span class="line"><span class="string">        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)</span></span><br><span class="line"><span class="string">        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215)</span></span><br><span class="line"><span class="string">        at com.nari.LeaderApplication.main(LeaderApplication.java:18)</span></span><br><span class="line"><span class="string">        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)</span></span><br><span class="line"><span class="string">        at java.base/java.lang.reflect.Method.invoke(Method.java:580)</span></span><br><span class="line"><span class="string">        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)</span></span><br><span class="line"><span class="string">        at org.springframework.boot.loader.Launcher.launch(Launcher.java:95)</span></span><br><span class="line"><span class="string">        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)</span></span><br><span class="line"><span class="string">        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)</span></span><br><span class="line"><span class="string">        Caused by: org.springframework.core.NestedIOException: ASM ClassReader failed to parse class file - probably due to a new Java class file version that isn&#x27;</span>t supported yet: URL [jar:file:/D:/code/cppCode20221025/leader-admin/target/leader-admin.jar!/BOOT-INF/classes!/com/nari/LeaderApplication.class]; nested exception is java.lang.IllegalArgumentException: Unsupported <span class="keyword">class</span> <span class="title class_">file</span> major version <span class="number">65</span></span><br><span class="line">        at org.springframework.core.type.classreading.SimpleMetadataReader.getClassReader(SimpleMetadataReader.java:<span class="number">60</span>)</span><br><span class="line">        at org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:<span class="number">49</span>)</span><br><span class="line">        at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:<span class="number">103</span>)</span><br><span class="line">        at org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:<span class="number">123</span>)</span><br><span class="line">        at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:<span class="number">429</span>)</span><br><span class="line">        ... <span class="number">26</span> common frames omitted</span><br><span class="line">        Caused by: java.lang.IllegalArgumentException: Unsupported <span class="keyword">class</span> <span class="title class_">file</span> major version <span class="number">65</span></span><br><span class="line">        at org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:<span class="number">196</span>)</span><br><span class="line">        at org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:<span class="number">177</span>)</span><br><span class="line">        at org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:<span class="number">163</span>)</span><br><span class="line">        at org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:<span class="number">284</span>)</span><br><span class="line">        at org.springframework.core.type.classreading.SimpleMetadataReader.getClassReader(SimpleMetadataReader.java:<span class="number">57</span>)</span><br><span class="line">        ... <span class="number">30</span> common frames omitted</span><br></pre></td></tr></table></figure><h1 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h1><p>与spring版本兼容</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>升级springboot版本，目前官网只有3.2.0-SNAPSHOT</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-25/143861315936000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-25/143861315936000.png"></a></p><p>官网地址：<a href="https://docs.spring.io/spring-boot/docs/3.2.0-SNAPSHOT/reference/html/getting-started.html#getting-started">https://docs.spring.io/spring-boot/docs/3.2.0-SNAPSHOT/reference/html/getting-started.html#getting-started</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>【BUG】failed_to_execute_goal_org_springframework_boot_spring_boot_maven_plugin_2_1_1_RELEASE_repackage_default_on_project_leader_admin_execution_default_of_goal_org_springframework_boot_spring_boot_maven_plugin_2_1_1_RELEASE_repackage_failed_unsupported_class_file_major_version_65</title>
      <link href="/3e4a3c49.html"/>
      <url>/3e4a3c49.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/RocketMq/">系列文章地址</a></p><hr><h1 id="报错内容"><a href="#报错内容" class="headerlink" title="报错内容"></a>报错内容</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-25/141629510849800.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-25/141629510849800.png"></a></p><h1 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h1><p>这个错误是由于您的项目中使用了一个类文件版本为65.0的类，而当前的Java运行时环境不支持该版本。</p><p>根据错误信息，您正在使用的是Spring Boot Maven插件，版本为2.1.1.RELEASE。该插件的默认目标是将项目打包为可执行的JAR文件。</p><p>要解决这个问题，您可以尝试以下几个步骤：</p><ol><li><p>确认您使用的Java版本是否与该插件兼容。您可以查看Spring Boot官方文档或插件的文档，了解其兼容的Java版本范围。</p></li><li><p>确保您的项目中使用的所有依赖项（包括Spring Boot和其他库）的版本与您的Java版本兼容。您可以查看它们的文档或发布说明，了解其兼容的Java版本要求。</p></li><li><p>如果您的Java版本较低，并且您无法升级到支持类文件版本65.0的Java版本，您可以尝试降低您的项目中的类文件版本。您可以在项目的pom.xml文件中配置maven-compiler-plugin插件，指定目标类文件版本。例如，您可以将目标版本设置为61.0，以与Java<br>17兼容。</p></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">target</span>&gt;</span>17<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">source</span>&gt;</span>17<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>请根据您的实际情况进行调整。</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>替换为 3.1.3</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">goal</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      
        <tags>
            
            <tag> 报错 </tag>
            
            <tag> 插件 </tag>
            
            <tag> Spring Boot </tag>
            
            <tag> Maven </tag>
            
            <tag> 类文件版本 </tag>
            
            <tag> 兼容 </tag>
            
            <tag> 解决方案 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>随机ID生成工具</title>
      <link href="/7ac5ccbc.html"/>
      <url>/7ac5ccbc.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nari.common.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IdUtilV2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">AtomicInteger</span> <span class="variable">ids</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">IdUtilV2</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getIdStr</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getId().toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> System.nanoTime() + Thread.currentThread().getId() + (ids.getAndIncrement());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 工具类 </tag>
            
            <tag> 随机ID生成工具 </tag>
            
            <tag> 唯一标识符 </tag>
            
            <tag> 并发安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实测Hutool的雪花算法8G内存跑到7600万条OOM</title>
      <link href="/2a57ec04.html"/>
      <url>/2a57ec04.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><p>本地跑的，cpu是i9-13代，内存32G</p><p>方法是这个:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1000000</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i2</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">        <span class="type">StopWatch</span> <span class="variable">watch</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StopWatch</span>();</span><br><span class="line">        watch.start();</span><br><span class="line">        Set&lt;Long&gt; ids = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i21</span> <span class="operator">=</span> i2; i21 &gt; <span class="number">0</span>; i21--) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">0</span>; i1 &lt; i; i1++) &#123;</span><br><span class="line">                ids.add(IdUtil.getSnowflake().nextId());</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(ids.size());</span><br><span class="line">        &#125;</span><br><span class="line">        watch.stop();</span><br><span class="line">        System.out.println(watch.getLastTaskTimeMillis());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>实际跑了7600万，然后OOM了，内存是8G</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      
        <tags>
            
            <tag> OOM </tag>
            
            <tag> Hutool </tag>
            
            <tag> 雪花算法 </tag>
            
            <tag> 内存 </tag>
            
            <tag> i9-13代 </tag>
            
            <tag> 32G </tag>
            
            <tag> 8G </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【BUG】循环中重复使用对象一定要注意</title>
      <link href="/b0042947.html"/>
      <url>/b0042947.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有时候博客内容会有变动，首发博客是最新的，其他博客地址可能未同步，请认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/RocketMq/">系列文章地址</a></p><hr><h1 id="报错内容"><a href="#报错内容" class="headerlink" title="报错内容"></a>报错内容</h1><p>报错信息显示ID重复。</p><h1 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h1><p>在最终添加的方法中，出现了重复ID的报错。对于为什么ID会重复，我思考了很久也没有想通。我沿着代码往上找到了<code>saveList</code>。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">batchSize</span> <span class="operator">=</span> <span class="number">5000</span>;</span><br><span class="line"><span class="keyword">if</span> (CollUtil.isNotEmpty(saveList)) &#123;</span><br><span class="line">    List&lt;List&lt;Map&lt;String, Object&gt;&gt;&gt; batchList = ListUtil.partition(saveList, batchSize);</span><br><span class="line">    <span class="keyword">for</span> (List&lt;Map&lt;String, Object&gt;&gt; batch : batchList) &#123;</span><br><span class="line">        <span class="keyword">if</span> (CollUtil.isNotEmpty(batch)) &#123;</span><br><span class="line">            firstRecordMapper.insertJghzLdryList(batch.stream().filter(v -&gt; v != <span class="literal">null</span> &amp;&amp; ObjectUtil.isNotEmpty(v.get(<span class="string">&quot;ID&quot;</span>))).collect(Collectors.toList()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码大致如上所示。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Map&lt;String, Object&gt; item : list) &#123;</span><br><span class="line">    ...</span><br><span class="line">    Map&lt;String, Object&gt; oneCellMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">    <span class="comment">// 遍历这一类型的10个二级指标，每个指标存成一行数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; secIndexNameList.size(); i++) &#123;</span><br><span class="line">        ...</span><br><span class="line">        oneCellMap.clear();</span><br><span class="line">        oneCellMap.put(<span class="string">&quot;ID&quot;</span>, IdUtilV2.getInstance().getId());</span><br><span class="line">        ...</span><br><span class="line">        saveList.add(oneCellMap);</span><br><span class="line">        px++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 保存这一行数据的 综合得分</span></span><br><span class="line">    oneCellMap.clear();</span><br><span class="line">    oneCellMap.put(<span class="string">&quot;ID&quot;</span>, IdUtilV2.getInstance().getId());</span><br><span class="line">    ...</span><br><span class="line">    saveList.add(oneCellMap);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我也不是很确定，但我怀疑问题出在这里，于是我做了以下修改：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Map&lt;String, Object&gt; item : list) &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 遍历这一类型的10个二级指标，每个指标存成一行数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; secIndexNameList.size(); i++) &#123;</span><br><span class="line">        ...</span><br><span class="line">        Map&lt;String, Object&gt; oneCellMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">        oneCellMap.put(<span class="string">&quot;ID&quot;</span>, IdUtilV2.getInstance().getId());</span><br><span class="line">        ...</span><br><span class="line">        saveList.add(oneCellMap);</span><br><span class="line">        px++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 保存这一行数据的 综合得分</span></span><br><span class="line">    Map&lt;String, Object&gt; oneCellMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">    oneCellMap.put(<span class="string">&quot;ID&quot;</span>, IdUtilV2.getInstance().getId());</span><br><span class="line">    ...</span><br><span class="line">    saveList.add(oneCellMap);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后问题就解决了。我感到很奇怪，后来才反应过来…原来是使用了同一个对象。</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>问题的根本原因是在循环中重复使用了同一个<code>oneCellMap</code>对象，导致了ID重复的问题。在第一个版本的代码中，每次循环都会清空<code>oneCellMap</code>对象并重新添加ID，但是由于<code>saveList</code>中保存的是引用，所以最终<code>saveList</code>中的所有<code>oneCellMap</code>对象的ID都是相同的。</p><p>在修改后的代码中，每次循环都创建了一个新的<code>oneCellMap</code>对象，确保了每个<code>oneCellMap</code>对象的ID都是唯一的，解决了ID重复的问题。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> BUG </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BUG </tag>
            
            <tag> 循环 </tag>
            
            <tag> 对象 </tag>
            
            <tag> ID重复 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Mysql的row_number函数</title>
      <link href="/7a63a993.html"/>
      <url>/7a63a993.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是MySQL的ROW-NUMBER-函数"><a href="#1-什么是MySQL的ROW-NUMBER-函数" class="headerlink" title="1. 什么是MySQL的ROW_NUMBER()函数?"></a>1. 什么是MySQL的ROW_NUMBER()函数?</h2><p>ROW_NUMBER()是MySQL中的一个窗口函数，用于为查询结果集中的每一行分配一个唯一的连续整数值。它可以根据指定的排序规则对结果进行排序，并为每一行分配一个序号。</p><h2 id="2-为什么需要使用MySQL的ROW-NUMBER-函数"><a href="#2-为什么需要使用MySQL的ROW-NUMBER-函数" class="headerlink" title="2. 为什么需要使用MySQL的ROW_NUMBER()函数?"></a>2. 为什么需要使用MySQL的ROW_NUMBER()函数?</h2><p>在某些情况下，我们可能需要对查询结果进行编号或者按照特定的顺序进行排序。ROW_NUMBER()函数提供了一种简单而有效的方法来实现这个目标。通过使用ROW_NUMBER()函数，我们可以轻松地为结果集中的每一行分配一个唯一的序号，并且可以根据需要对结果进行排序。</p><h2 id="3-MySQL-ROW-NUMBER-函数的实现原理"><a href="#3-MySQL-ROW-NUMBER-函数的实现原理" class="headerlink" title="3. MySQL ROW_NUMBER()函数的实现原理"></a>3. MySQL ROW_NUMBER()函数的实现原理</h2><p>MySQL并没有内置的ROW_NUMBER()函数，但我们可以使用变量和子查询来模拟实现该功能。具体步骤如下：</p><ul><li>首先，在查询语句中添加一个变量，并初始化为0。</li><li>然后，使用子查询将结果集按照指定的排序规则排序。</li><li>接下来，使用SELECT语句从子查询中选择所有列，并在每一行上递增变量的值。</li><li>最后，返回带有行号的结果集。</li></ul><p>以下是一个示例代码，演示了如何使用ROW_NUMBER()函数：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="variable">@row_number</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> (<span class="variable">@row_number</span>:<span class="operator">=</span><span class="variable">@row_number</span> <span class="operator">+</span> <span class="number">1</span>) <span class="keyword">AS</span> row_number, column1, column2</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">table</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column1;</span><br></pre></td></tr></table></figure><p>在上面的代码中，我们首先将变量<code>@row_number</code>初始化为0。然后，在SELECT语句中使用子查询对结果集进行排序，并通过递增<code>@row_number</code>的值来为每一行分配一个唯一的序号。</p><h2 id="4-MySQL-ROW-NUMBER-函数的使用示例"><a href="#4-MySQL-ROW-NUMBER-函数的使用示例" class="headerlink" title="4. MySQL ROW_NUMBER()函数的使用示例"></a>4. MySQL ROW_NUMBER()函数的使用示例</h2><p>假设我们有一个名为<code>employees</code>的表，包含员工的姓名和薪水信息。现在我们想要按照薪水从高到低的顺序对员工进行排名，并为每个员工分配一个唯一的序号。</p><p>以下是一个使用ROW_NUMBER()函数的示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="variable">@row_number</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> (<span class="variable">@row_number</span>:<span class="operator">=</span><span class="variable">@row_number</span> <span class="operator">+</span> <span class="number">1</span>) <span class="keyword">AS</span> rank, name, salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><p>在上面的示例中，我们首先将变量<code>@row_number</code>初始化为0。然后，使用ROW_NUMBER()函数为每个员工分配一个唯一的序号，并根据薪水字段进行降序排序。</p><h2 id="5-MySQL-ROW-NUMBER-函数的优点"><a href="#5-MySQL-ROW-NUMBER-函数的优点" class="headerlink" title="5. MySQL ROW_NUMBER()函数的优点"></a>5. MySQL ROW_NUMBER()函数的优点</h2><ul><li>简单易用：ROW_NUMBER()函数提供了一种简单而直观的方法来为查询结果集中的每一行分配一个唯一的序号。</li><li>灵活性：可以根据需要指定不同的排序规则，并且可以与其他窗口函数结合使用。</li></ul><h2 id="6-MySQL-ROW-NUMBER-函数的缺点"><a href="#6-MySQL-ROW-NUMBER-函数的缺点" class="headerlink" title="6. MySQL ROW_NUMBER()函数的缺点"></a>6. MySQL ROW_NUMBER()函数的缺点</h2><ul><li>需要使用变量和子查询：由于MySQL没有内置的ROW_NUMBER()函数，我们需要使用变量和子查询来模拟实现该功能。这可能会增加代码的复杂性。</li><li>性能影响：在处理大型数据集时，使用ROW_NUMBER()函数可能会对性能产生一定的影响。</li></ul><h2 id="7-MySQL-ROW-NUMBER-函数的使用注意事项"><a href="#7-MySQL-ROW-NUMBER-函数的使用注意事项" class="headerlink" title="7. MySQL ROW_NUMBER()函数的使用注意事项"></a>7. MySQL ROW_NUMBER()函数的使用注意事项</h2><ul><li>变量初始化：在使用ROW_NUMBER()函数之前，务必将变量初始化为0或其他适当的值。</li><li>排序规则：根据需要指定正确的排序规则，以确保结果按照预期进行排序。</li><li>数据类型：请注意，ROW_NUMBER()函数返回的是一个整数值。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>MySQL的ROW_NUMBER()函数是一个强大而灵活的窗口函数，用于为查询结果集中的每一行分配一个唯一的连续整数值，并可以根据指定的排序规则对结果进行排序。尽管MySQL并没有内置的ROW_NUMBER()函数，但我们可以使用变量和子查询来模拟实现该功能。通过使用ROW_NUMBER()函数，我们可以轻松地对查询结果进行编号和排序，提高查询的灵活性和可读性。然而，在使用ROW_NUMBER()函数时需要注意变量的初始化、排序规则的设置以及潜在的性能影响。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> 排序 </tag>
            
            <tag> 实现原理 </tag>
            
            <tag> 优点 </tag>
            
            <tag> 缺点 </tag>
            
            <tag> 示例 </tag>
            
            <tag> 注意事项 </tag>
            
            <tag> ROW_NUMBER() </tag>
            
            <tag> 窗口函数 </tag>
            
            <tag> 编号 </tag>
            
            <tag> 查询结果 </tag>
            
            <tag> 变量 </tag>
            
            <tag> 子查询 </tag>
            
            <tag> 性能影响 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测评票脚本</title>
      <link href="/da0e3f58.html"/>
      <url>/da0e3f58.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="9b5a86774a7e22eafe1b613b05081504c7d4ec8e9844bd9901f56735155b8cbb">b9883d58b8990977424973b91adc44d1e7904864033180a8ca281396f6c6ef513f51fead549bd7f505da4b0eb79b968a3be249dfaa85756f77b925df4e29b534e5be7a9128c4c479853556d91b2a443365863c1b0202a03f0176624bfd60709d5656aaa33754e32b7bc07322d4e8bf2895cd6d11f869e68d73fdada32382cabcda0770211b1c7a1f1176398c43429dd1d97b75df792945b2f3d863058343d65165adf486adf79a54643ec3439f2079db92941dc28585b92e1e93a477684d6f5c95643d7994a6531a49ce1eb82472924837e85f847d59b6010bc14479c62cb0f3012c76297d4553a0d392028f39ff9181fe681596d9acf216c2b8ba949915e3bccc68b9d6cf962506735e122e9931188a11881093a87bf3077c15a9a38dcb5532d07598d3c15beac8f9be067fac1a6d72bf8e815a31510f56bc733e312dd28ba2fc4e12f7eab5817fa2a4f4de85b3dfe8d028a16e38d16a418c252f00696f69ce0b21b34fec5b09c2c6d8e15f33e471f506a99ac8d224ec9325a7d8b8bdfc89878bb389cbe0aa735d1fb73c659c2ce790205f1cefdbcae5c97a492cca809e8f53e374eb5159fb887b937683e261998f7151ead7640868cb0a34d63d0be70d3e5cc1e28b29af9128f4405f22d41fa3fc3e83734c24cc0e9b55ef73541e7f22cb6f47ee00ec697e38f210afffa4c701d7ba435480b582c24cd8fb29729ed3e71cdf69fce879cb8d352d8e5904d5ab08fd2410ae9086b2669ba79a67fd240f7563ce3354b42b13d85c5116e78249294dab80f7bde135a9ecb5f5f6f88559331b66ed30ad52dcb3e18807d26ac93ed67d333dc7613d82e8a642f6c6b11f2c58a012e23744b04d16041e83af60633a3ab49398b3bdd2cccf508637c391e9d085075dc61ec756a1ed82ede33e5bbb1cbc7c57f5adcb5830feadfb5b619964f5e720812ed840351c5a2acf7edb2fcd7962e8ce191d583702e1090a1112f50b18c9d65327239ee4754235d502c0a049d80653c5579c2f6cf6a42d5b8471e8b9f3fead7b424fd14f342da4c2dd09b7f5ca83c6790ea90914a4173ad525a5e4ce7d100334b75bf7a7cf671402e1f51c9d45d152fa85f1102d8defb1fed0368b57dd5d2b940b4ecbadfd2a748cdd1d7e53a40db473df0890d3d9ed958fa00c6c12fcd115290d5d699cc6d0ce7f1451d2ba68b164ac89174c803ae993fe41c25ee6fdbc3ee7d52866da4dd64f39e44ed48f4f6bf98c844917f7a13796deb38c0dc9d2ba0a5ae70e219c08e3347b3556692e000773c88e958ad4f5aa04b89606c294ba431c7e1b87b27d39d9bedaaeb8687d2f7c6753c136e9da6c7fac94c08af05a355d1a23d9bec9928590a82bbdd5aa919bc815c7ef3e1c6b7f4e0e8f031779ae2f2785c146688b0d2041525b29c2ee9ffa2e4637e00ae49c15ad0fc8937821c1a32ad3744b56e7b3e3f6630c995a2225cffa8fbdb799f646046d08f5eb882d5f7afe21bc3c857cf5d7219689d668d97e836744ceb04ffe2544e2722b5c73069f02c59962ec068a6875ef2788c4cc1dc85d1581b0ef7dff92d4cf4dc0bffd827a21df611d96ad1446234c7b08296b52f4eeede4804ab2de91c7296c07159e61103992e2b2088852ffadc64080c39f40b01a81ce6a9c29f4dddf1753dd5a09340f1af95958e14a096cc0ab21240d45e7a382fe11fa220ba6398d48f5306f9e58dd5f8e26c2764340bdab166c1cf1851e5e95a010a3a87756f309363448b4f387e2e1337d8d95b92e8a6da1969c56f8b8255e86dec2556f300849fd47e17678a8db836fa286edb0dd142bc78c466d8bb2a715c3cd4f0b76d65d5b587f054b8bb867d5c334ef0a554bf82db7a6094a564133d64750516047ef99e66bb9b95b7c0be6dbb9c0ba724c8169d12dac9872d1696467b3d9d90619f0fbff9db2256b9a4d5a447c1d1cfb590d2a17336e646e26f896384af63a3dc924942c9d5e4f1b7f91f7ac2fdcb904e67dc7776677d32b1fe2d3a12cf6931a9db1060a4d2cd73c6250f0ae0766271e3f9c85a8daddbde2341a7ad517d529292fa245f2edfb35f66fb7477576ecaab49299548ad4f43ecf2b91bf0a93c42f2e08861cf7d621dee0bcb28af95abf80e28ad698bba723873ef09857348429a1e04a34d04d8ee128d08c4607aa95950a1f3d50de085e305c57a196d767986db07b9a16556d8460a15cd7adfb74a6dfd27b81c0fa3ef713477b180d4be979b5f5e0b74c31b57b17da36515da211dfc3a69bfa6f749a473a0ae29af8f578327a57eb521aa4fb3e5bd62fd87ac5e23b7646c273d58ef46fe024d0d4fcfb9c93216a92d4e40bd77a937985bc5bc2625c8b208781ec1cef6810ee78d47e6f665921541b4c31a825398521b3a0cd480ab1469bb2c717828b8806bb759624aded6b671065a415d44b67209c14759e0591fa4ef688b42d972f013bb6c55df4414069b0b0f7084aea2b888fb23b5e3f283b0c73909dc7c992030777d6360a98cc300503ed480a35c8fdea5cc82b7c3552de55bb5135b174fd8c083a01b3c450fb639e5752a492f4ff0b78100a9230c4fd643c52115013490bc9620aea489a88ac6e521e0e2517f7c7d5df0182224f60a7f010e6c4d0fcf1968c92b18abf4ab54c2ed28ba216c807db5662af34c3583724149cb521e5042ffaba9023e255cb3e153006b44929dd81db350de77209120eb9e39c858706eab83091cb046ecf62b6c7a5fedbcbc2ff7831f4e6f3ff98518159d6660881fdf5b3e0597c78cccb0d14069019eb5fd77a718dbd3cab551910071e410adb7f489be00cf8ae46f4e26ba19a12a90ebf1fc0b2df4dc8ed4abe22188a44ea51ce94defba9642cc9d4311222f701d8e7318f3a6b937cf6f04094f0f8d9d153ebf2e426b3713201609732ccc437bae48403327f7d9364e83442f250a1f078522631b1aa83ee7e6fa3fa9c3b5bda7d0563eff63ba7bbb4b99d6b594cd6e3273ffce5a9eecf871aeefdceaebb2ec855e1e436d5727b7c64204d9fed7cb5c988f73a6061af284da9e0af4227fd7e77f011b6c82cae6342df53421686de6395f5888935b282334931ef8c79c7a48050e6adb034cf993d79933b5623d0bcddbe693e8bfb8ae96da3ac80698928bbe576471c8d019de52082c41e992a7395ac103c8a3c6b9a787bd15188d399e46e8f54243a850ff33d3cbc47fa5d7c88cd191e06e7979bf68ae7357e0ee8bf7885af590e764a192e0354a4cfdcf12309c8f619db1df09bcfc081ff97847cdbeb81b79ee89eac86052aa7109e8119982f57f1f6a41fd0ba5d8f765e47c6885deaac73ae102aa43a5d0202726825cc7bd22c553804e49eb8f478de3e9bda978d150a0a00c577e886b4767f3513d82381ed0b6e9dd22f12ba0d3ce43438059216a1965849ba68cba830975300ca57d7d0734fb0613ad8a1700ccbb5ca17edc98336b08d2426e9de0c4c37c648167172891771c5965f251f43d8b6ed4b21923541b7a000ef45811e1db94c7441348e5fa0ba16e7aa5de3e1360613ae38099d621676a3befe27950ac274173ec07a4abd159416e357ca081bd37c5e5be58450028fdb3f10bba335ac9a4097bdfa3e6b8cb1100e098d578509abb2522a92a2a660fed9c5dbae23e30794b2d7f0435bf87decd3a54cef1fcb8b96679fe624e3b7ab228cc20d040a8b16682be84b9624cf6574e6baf61411dddd1df390bb330dfea1c4f83d56de8858493f8a3520cce1a5a5369d5fa7694563c56b3e32d667d3577e230a1b45b1fa44509898e62fa184cf383d84991ca0bd319f26bb7bee7825ad3b5bdc349065a21d4c89408a3c200ba7677c07c5641aff69d014fc0a039c3044a3fdbe6fbb685923cbb5b898c341e6040aeaccde02f41f1d4a7b483cdc505d834baef6f3676c36ae190d8afbc537bd4d84b0af0ccf8bc40e749643757082c014e78c9c64fc20b8a6990903eeac3b53356b8fe47fa766142af9de5e9f78cfb74af0dc25faf6e12617aa2501d3dd585193d34cb629dd1c59ce750d7f3a6d02d29ab7edab4232b56c1af9dd5432153ad80df96a0ad7c50319149187f0fda38f7bd8389b755aaa734ded8e0c9d0102bc47140d93321ccac59e274a9099933c9ccdbf52a28c923df8dae3429bb2b5d8134daded2c84af9d97cdbbeb28e1a7ddb126500b5ff2574ccdc5f55848f3d533cb750e11eee15c9587db1e324335806b2b0f31d5266efaa147d2fcfdbbf858c095b4860142dedfccfe206150ce77019cd05bc600eabc996f7f0ebfcd1c3fd03e4565a899fa276cae674f0bcf326224dfdd170bfbedfc214d11a248d6f80d715fd9241513dc0fe43a0b452f8418a98a8dcc129605927c416e69a89c72d46b7b2dd996f3e480d1581c3c9a40c2f9caa15036272fc030ac80b32ccad9d79dd02e83c89efc9724b109d2c1a2bdce1a828882cd6e627c19edbc0d2bcd17d629f0ec6281629e0117f25b598d81b25e828443539d8ecb98f9f9fedd12ea4a4aa0ce5f924b9e9eb6c8515824b9049f44596dcf1d3131d549760a59c50e750284bb97e1eb32cebafad5ef1c6c1b73ff60e08e78b74430adb72466719fed500c7e0b627069f90d418586bf30cf49b6c355c3667ee524afc2e9df68845a9ddcccba33e1763492de57f81d9ee820f3861109d300c43999df71a32aee97318eaf1282b66607dc8502481f74a15dddbf952142d7725efbbd15ab73e82c9786b5a4ed66df7939e3a6987d7aa1df10d8ef33cc01e7da49c9908158a5312480a5cb9d37bdf32c8aa2f8cba747386dae020cb60cdf607b4cdb9b32ec0b74bc510ab947781f4af728a7c4379ff68e5b2ff2acb3f3ee835f66297137010919e170848caf36746572d01f828432a287227c1e4bce4d91490a5ab905b618aef537de2288bf686bdb3287edea7f11d830313850070e9cbfb7b64c56a3eda5627d463f74c928b8fd27de6e69dcc2615e89f925b750910caa348770a813f10a6fdcf3ba60df9ae166ad3df420a5cd07d43eae62321e398d03f18e0df74a43819d7217aa8072d5559c2e2b8570e5cb30682d174e947c153accc1158c898d1ac831ce902ab5fb1ea7a9ace8fd72b9b1285caa2fc038d8ef167cfe7a53ddb577389d3a2ebfa73eaaa216765df9a82b62bf35ef19fd8f4330796a82025ddd429e568bf52f1a80b75db906b715aa1ff4740b7fe75578e17b3dad7a4c3afb6cdef15810b647f8207acbdb25b3efa59bec68c1abebad89d1ff7546402c1c7d455ab270a5fccfaeaa383f2c6521fcc509b673e197229a9a861617f0cf16da58b03c59042a5964d1ab64ff31b8605db9c6996271fad910bea4cade38bf664955af67f51cb5be2671dcb4caf25b42e70197414bef73a12016c223839ce3eedd1802750e9003f2bda67f22b8e5bc13265cb497fa0c5653f0129358c149d376077e31bd3ab69c178edef171f7ad01f39ca5c44f334707d2943060f971f10978f65f1d36f4778a6666169c966693d3d8a9698b1f1ff7ddad0d6970e028867741a6590729013388ba62d219b42166dbe2f30771b5d62c1a532689869e7ee66495dee9fc895fd07a6c108b54a2fa7cb38166513d2acf4e2c3c761bac4dfa39bbd10eae380b690dae4277289e428c3b3d6e3aa2a68d008dd8866e8602a3387565bc251678027f783daafe86d7f3d5a5cb6315c765aa493d216f81cbd5b371c37db6acaa9fbcbd2cd49f2209400e3bf358abcdac979f3920aeeb02c55bf381b074bdce3d0a7b21aa1dbff589ff8044c73c0ad2913d92ffc4ddaf3d362634cfe2a97fc810298076838ecf4fec75b84b04cadaff12de771b8e0fdecb95799143fd154aea0e65a2501bb08c7600a95b6f4829aa5830eae6d3412e04ac05a8dfe2f326e1c7dbb4809a7c7be51481fc1f89d066e277d04540170dba5674d2b4e88e973b4febdf19e8f6429801dc8cfd5ab16e1aee99e3de7ad4c06d12d190e0bb607cebefd9967aa8bbe36d5291b4aac660c932c733f6c2c7bdf68f0a6441816404405a0246a4ccdc44c10130661c46fab385e9838a9af5ce5c92139d4e465d4b0a0d863f6b65d92916a942db134a4811ad33c426d7b0b0e404cc97c9b8f58bc15e1a9f4a8dd56a56c394e3c021ff8be9d47a77283f576d77d7ceb1f9f31f66a80c40fd8f69e0b3e8854f805f3fc894a12c390d047a9a185e0306abcef730e6b0305ece479f6b00c1d4cd535f762bc2c79d91da529addc1d64ca7903a436697b0dec195dfb89561a1f8c8304e04f09b271f66fcfdb701bd53e8be46211cbb977450efc729613b78b264e6cd4b88ca2a6692ca21f07bd202171492c79ec58c563d4a386a0972a53a0ae8614d8c45e91724b6db32ff197e693b6182903c61369c027ecb09875aa90ff227b301496752f3c91a72bb9eb78a51ee0f47752b7ed20398a671b3138bc03465e212ea0ef2d5dfb6c7d1528542821760c7e5d91c106c9cdfe7cafdf2f3cce32295c22938f8cbc2637690b73173b709c2694ddbecd34ba01778192ddb215dcaff79db4edaa0ae7ecddc0c9728455a07e0250059cb41501cfef4962b7ad0a0ee4a3cb4f3aae3a5ccf4469fe195b1be3b7a609942fb10230e89caf2d6bbb540c32c38175d3dfa72b2c3c93079718332d42c4698cdd50923efe79a471af257c56398fbe9f0bfb0cc31d5b5cf2659fee12c58744044a17936981ca431947d38a3b8120b15306ddd34aad63e48d5ddb9df6de2a69a3e45b55e5b0c19f88d35a9625e2cc86d84b23d7ca5b056559936f4321b67359941d631b1c02eb94833af4a9631cd6b6338ac53bf0c5e85f8bfa3ebb206d57bd1105b3294c216b632c53a379e9bb5bf43c545ccb6871afcda78c110f759e813861960ccac8017ffff2ee0e562f752586e314c3358d88566a233236a68c76cc07d27a4119b45e71206a7710ecc03434458971a3e7470ec6c6427c3d27ac7d2d54621a16043ce76643a5d489b6e7c6bd1c50881f64695eb3b2102385f1a8fc586d38a79a9523970791c36d85e912e9ec521dfa2a6b9df4330aa3e39820b553ea7de17fca0003856d133cc3b2da87b13998372dd9f1f77bcbc83ad1338b3ca214ee5c37e55ead77c3809819a3fe4e7d7c60a31c9b187dc5de23d91c7ab8b401ac468c5440508f1e50e9e92b72d8dca469a4ba940083694bcda91d3a535872c1ab7cd4606caf00585dc683543ed95657c51f05adc9fd774f0cb4410c09fc99de2882ea042d883ece72f7155b7bb448987fa6efb58a7c5a58db1048800d0b50bf637cf3070ce1db4d156d098e2d0f530c9e0c8080b4bf6237e6ae567f02620883e51a68a5a5fcc018a363304901f78d67cf4f6eb45490342965df916ff91e55d7ff82f9afe87a56c22e31c3eb94ad256bae461a34b2c7dcb5ef2a5af5a9f891687d9876885dc04ac67d5ce386939e6012801a52e7d66f708493948dda31591cf30dd8463cec8405104f2337553175771f9bae8c44940eb0b6c60b65049b392fd43b524fef9840e675377752d60e4c1ffb3d543dbb9a547c16a80e3766389f72d030eaf66e3551406652c070fe1df995decc8b3de988e68dd9c626be0576a684895ea07242f0359fc8cb391bb512e6f3bb0585bfb8a55905ae29deb12ced7612bf10f223d3cfa60d4b6699c834cf5bb1210fa1a1549bd7133fc9aa953e597fe73afef1376991601efc6e676cda6a0c39a15545c674fa0a86f570b36e10f5baca5f94a852f52dd12158da1a35f6274efa38c695cf629c5cf5fa3702255b6b8911bc3e9867ae76e4c1e8d90ea50cdf4b8e8b2c9fbabf68d302df4db9c0ed51a5f08d27bdbeb5fe07a39473da998b61976d0bc0671c3fad2a17374fb52a17a3d56027bea9b03965b2476234b8b32b71c2bc6518646ddc8e3c963a89b2d38234f32bcfc67ed2ebfea86ec1fcd01f552e0d3e3d6f39b8570b5093489e9602b8c488aadc63a85dea9bdad25977789158ee8083d8f6916c6f31ac5c0657bff36a47f122f87509ff64ca4a5d2674e59a6e1334973190d2c7396c690fae0477f1bf5be07a7654f2adf1d3ca72bdbfad4092753e19abe6472f9ce83a06c7c6db7e8128371aef756e3f372a3863f4cd04c190766d295f532864e7e6572a31e05f076c5678ce62c2d16ab55b4192022f30ff8a8b85f3811b36d5a4ed5b93f67b7726283ecef802ed269668c871ef89d4bc95b7d593337f4ee73328e5456b92e03f79736b30f75a09e47201b47a31f9ece72c4edc510e7a9f389294b7e170e5e522c0cf3e704d12a95e9ec3c393258a88aec3afec0841250e0e6bc39002b21181f51f74003167fb589068555be2251bb92dcc79aa0d63496e4a1de9aafb37a710fe8ea60b8d6d044d25464f7419dd193d15cec4e2fc4ba24013514ee5712580ee36ffba475fd3254231b492e3d7856077684a67b0fc46c909df33ad74f2972b997b66d4615b6ca516306542fa1eb6b27fdabc0d1e5ac70d830dddaeb93f37de2256520de568c67c42ae782e1255d3fd179e9b56148ff0314d17f165212e78bda3da7a9c2825e223b3af69a935953a82658b6eea06b3d0bdd7c5cbabd1b4c8a11a613ada19b7cc768aa5b060b9952d4ffc145a7441dbc6ee3894687089a2c106ec9084fa913afd843dfe0a4779ac9f131deba315fb903050a100516a495f56420eab70edd81d49e99fa4e60a721864ad03bd39b73e65afdb1aeaf5ff7a005dfc71ecb8a733ad10e0360b87a392fc092b82d890629a6e4afa9429915ed4973c06d43cf651c09f28d103b98e434e3026abcbbd9507df9b1ebb721aea976433b1fcf8b016671789fbdce4ebc3aa108b41c7dfab782f91315ac2445e7c56fe9141b1ed5bcd4419f4c10c54493be2f7ed70a5fa87fe7451c63f26e9c2bb827cb8f06e32a532d82da2a1d3f513dc29afd8254df9d252b392bdcca20ceaab22028d9bd6404ae92d93d98be902145c0c285be4d2b14ea3856bed4eac140d7d2a4abe8adb88df7a7935aaccc27b913b70c17120d98665982fe06367a82dfc1457a6a6a23278dc0919adfd38eb69b4a39cadd8bc7b6d31b377f75c3d713a6db16560c5c25a1e1a86fee38d9a89d5efae10b555c67d38332a6a178dd2df83790a77d5528534b5a88f917ba10bd70f06042172441bdf54a5eb010c2a4cbdbae60548480a7f08377c2b851509936c4acf13cf74d899496fc6d5b845a1940e0896e6909e6146d0f896c76d570e6e8e5d094c4c4f43ef5793efd3a8444a886c2788ee190e92ad785e1a057e35fabbcaa914dda251ee2fa3fad2935465f73659c38aef7ed35335790bbfcec5302c6950ef6c6936d0765e2ea9072dcd074cb427ae615515359b5bc8929146d2b3fffe8e6f7c0f1c97d2b293564a4170fd23aae3d67243fe2c10ffb0e8e3b100267324e591cb9c5ab71f96664d84671c4699b4890b3a9fe30847bbe33dab5c5bd4ddde534bfb0813d672813493626a1f42f9cceed8b1213b02e0d60415cc0c94f278850f4668640d4364cc79a4dedd6335265cd0f62da8e902882f693c5ef35b144e8ccfeab1b9b47f7215d09fd2b54227bd5422d934c32bc0a38af276fa9fb1bf9d1295f87ea37df350c831f042c33aedecaa3b554b0e228532a320d2620fb0427e362deec320f0a8a4d0b11bca8c2f37c58fc2ef672a1f145cfc64561818927792990c50d0359db71296bb6c5b73c5b0e192a02314923f6d4be3a5bd127736a993ec8375bcf8ca73a44612924fbea840869cc60253de464b327bce47cc7a60423b2d566dd0b20babe6840c003117d91bf8d1369016efaa245c56032e609d1591c416c71961dce88461a4fdadb0324e3b91e30476a2e87e6daa76e3628733b54cfc5cea499eab84296fd5ad6f2791e5eeb87a3b80abf3711b183870722e202c52f34e317007788aebc47812901d3c9e1d3fa401a9b0b96ed0241178c4d06d1f3bb509f36a5dbb48ee6947f99962a90de8f9e0eb3bde9a299da6efa74140f822a3a69b89ba3028e9a71e1575b5de8d58649f7a1ff9c0fbada34c5b0abb0a847696aa76835301da900ce47f565b34858b64bc4d6645c80a1f074791328e563d7d8c7575b34bda55626b23d45843ebe75647d18aabff0fb341bd7cdbd809e8269ca70cadeea9bd03e3b539726abf0622ce13905e98a2208d97c7448fb390f734b3dd5fc1e9d9d4c121077f8d494317f1d6656c40b8ad4d9c95c93525126949a48129bceb8936999e4ee7be465fe81a244da5c27ea16b5cac4c87c0b384562eb8309e9ee18ab12747c24a5161b1ca644e276e4acbdf39d7ab58da563de7ed11f385fc52824f64150ae50e4328125e58655a68b9e62e27dd58019862d54948972b0e25def7df26f4a6ef8e6b989089b02cd370301684e04cbea935d694b54246e96b7edb9608a3fedc4a1895988944b6c725be07254424f984e825384d3a836b9d63ef6a53fc80bdd6188c64e766db3dec313e3af03fa0c42f0bbbf4b2f17926d0cc250fbb56e3f77fdcefd52b63f2e7898f8bec37e8d02c8ab3cc3afee0ef80ff7fb45dbc74ef4a24f28ea5ff43d3cde26bd4876344a473227ccb7cffdc616e756f0e4ce4c8ed882dcdd478c18ce25b4b159cc2537731ad3e827f2efd67facc3bc57985a677519ed172957167ff309824050a560317effe6bf81fb4614560a56ceb0e5801b311422f82108c8ef80aa4d04bb2dfcf651879418de0bc4019eaa0e379b31903a25509ce8eb87b62129dbc54bb3df99e15ca3b88ad9ce7cdca32a1f2aa1f858713b6955ab7281000f4e293c19b8a949cd7488899228afcd2d61c8c0fd9e666baef43c29c3f0600c79ea2e309ccd626df636d8466882f19948375d2359c5a44cb2c7dca0388cfc22489deccf1276c1d35d829f6857cdaed539b26e527497422ff9a681c7d9c1c198d263da2dd7c2a6efeea432f03e86606aedfa00128b0d39c1feae952890d4378195a320b47cf384099cf78e0deba734581ecc9ef7d91c025aa2a7fd8c5042100a17dd223798baa3e5c6940ee52a9c8715947eeb7d8bb8c80e87d9103a9165adb96a4109e224c5be6a2edb6ee9067029a833cc44d1e7b841d0110485d406acdb02bbea50da126ce02ffbf532c641ce6d9d566c6af35809cd5b551663350b1e727310cd2972d7d74b774c925e11228bb3fb75a5524946659bfded4849e068b42492ba01638d1057429e62a51110b614dc3357833e5ea15fe80499d73e238247a436d812aa9d0b0d75d0141c5276f9e77d0e1cc948e3ac1b10c14cb5bacc9128b7fbce257db299e01774a98b00bcb606fc6dad1e3cbf6194bae564386c10d93bf40180c4f35a8b8efd6436a80373f73fa0650b34165c431550101b697f32a97bf67c29fab9c0a6ba8e2fd2be8af989aea8f125b9f3583c1015c4ad2755233dcc67c1a2af5e3dd3f53f0e6e6083b243432b97a10aa18dcce2fcdebfa22ff3c2160a1740f927002f4201af6a7440934a164d245dd8e22620c3d947224755625d3519185e36d161c53121f197a52a4e137c7dbb1ee8f2d3f37219b8bc8e7d7d460731f3be05a125005e7e2e0caf52fc56944d6cba7a1a1e87b2b651b71ce96621c43e7aef963ea82e06256ae8c6167a9c42a2359cc50924539ef0cf85c6e7d0ec397fa3acea2f9f483ab18b495f311f446bd300d147fdea0c8884a4095300d0e7269878f9a73d3aef8407203e7dc1c504951aa870669aba2828ce61feb8733efd062521defc6a926f860f4ca6d44b1ce394d7d638062a6a505d9dbe6be9cf6bbb90141c21d5c85e9a81ef160e38e7e32d59c25d7245e6d346c77bf84e0bb48b43928fc3a683e91d6b87fac81cab8421a71a8e821e44888bf912a3068afecfdbe060c01876b2d933f06406dde64e78750a89059e4c22843a0180510970a0aa7f9689c38ba02db39d035cc726867e351213164b9e88c196564e8dd3e19d5f76c21c5bd855986376cea66aebf9bdcf3a53c5a9cff07f0862864752e5c7e9d6ec5b6246eeef3130ea7ececa17eee7c1b88b2c8a6fee35e5111503fed188023ca38fafffd97044ff349cc1cec82ec8d3048fbd3857c8b4b2e9aa6054d262cbb85dd1d1998e4a0f920951bb7947d3fa57b9919bd5ca375b93860fd3b39b94c580662cb7435c0f68bc848af5855ec5792a61f38b9216fb45db20b52f261ffd3896f70d61a4c900c7549e918c849aa46fe59df2353ed9fbe39a6a87d28ecba6182786a15eb9ed95cd9daed093fa548edd1b36f70cfa7ff6b95d6e625d60309f506994adbd1a86a0ae047fa3d15a98c003b9381b6e1561df621204e275adf8a39dc64b521713a67f730533ab0ff0a180c1a11d940912636229f79ccac3eb6e450f7cc75552f84d96aeca3d998a9f5fe97434248d414c30cd8cdbc8faca37acf2e6a6c0d08c0869cfe3cfb41bf7da87b4e599958de74d2b1654f3377ad793dfa600658727f6b901dc63a1066b6aeba31fc2ab9019f29edbf6a1812ed44e21d5710d4205fb730e9aab8c9efa737ce3ad4677b5864fba4bf4fa4e7a5f92c759203114bdac337abd8b7a4813b44c9a54be495710b1f57478474ebe9574944e8e582d4125d5aa3563cf0f90b9dd665bcb2477584a01427d0861314fbe1bbc1086d242287f9652aa6570ebdb150c8ca382186d5c4f3cf10a4d127a0bd2aef6439547a4cf09fbb052ca7bbdd31a69beb551738276f46f468d81cf6b01bac57e4c531c7e9ba7845cf25720ab745e3d05bcdf5cd1e295cd19d416d76f2bc02bdea0de6d6bf88ce7c55d0d29ff20744ea76c8aee4f4cd26b6b014b4c79bebe503879b2f43470eb3dbc4984c9f03bbcc7e332a6a0b01ce242894b5f0f9cca43b2b40655ff3de7d3b6f2bbe1b2b01ac08182fbb2690cc727c4af64168a53f548f1ff27a2d0b62d35368fc14d54e6920b7eca6541a8401bb9f4ec369d3abf1aa573a246f7445f7eef0ae49a86154ec6b81618114dcc4aaf50f2e0d14bca571067d72c142059d4536ac1bb45fa4414dcc72f71a669e10f56e4a57405c149eb1258d19104dd30d94bbd3bb7bf24f7eee18a2a0d89e7899221cdbd60b3aa64b898ddd3a8d3d64e2688c67f7f5ed8db8ede6b34ed81d15678c132daefa0e731288668b48727f38e454b19f0ba4f909859104599d8e65d22a29d39b7d6c78f9d8c4bbe7d75e364090d7b13d7a6df18f0125d1b1d4385cf3197cc72db40b90a19eb093777f78e71bfd28ff009c9e471722aa267253028b44ebfd65ca221c62e86c7618d29f8d3f831491a73126424348a89ae8d4b7b29532e0012af68da89557ed0effc2a637c396271cf15fcf0e43f8559dfdd4be379940e15d2bfdaf530457c024c0d83436b6e3b33e58526241984bc0d112deafb03f37e940062d8b5ac34cc98fd120b04311edf441b1c1cbae1539ed14c9202f2178f4ea4fa33fe2aff2ca224fa779ca1a5c65ec405630c32c9f990364a3cc49b49ffa6fe9c951a2560b82a88a12a3aa4f4860203b9398117ded64bf04401a383e4b4036e32332280142625115642264dd1aeee8d46c65ab8623c9c5c63f20b608bf6b2379f73b6fe3ac31ea714e791c6c6d28f642edeccce9f92870f96b20f9b664208dcdc48e5d902a17890e819d34aed2a83f8ef895701ed0aeec7913eddba7ecea8839271f818f5bcd7fd26749b730e5f914545f1477eef66cfb705a937d2cfac639d5797ba126c8bd36ae37950e22fa18e149ef2e33f01b155c3e9fdc4b5d507a70bfd506ddcfb7dff8522fd6a445c89fca56757cd37b7a1de8c441039fb3bf5ad386ed1e7e02ece2a0be5af92712b7870226e7951b01ab8217ebbf8b176ab2c7431f9c5bf2aefd5f52dc483cc5c914a73</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 公司 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nari </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：结构化并发编程</title>
      <link href="/dbf2c6e9.html"/>
      <url>/dbf2c6e9.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="453-Structured-Concurrency-Preview"><a href="#453-Structured-Concurrency-Preview" class="headerlink" title="| 453: | Structured Concurrency (Preview) |"></a>| 453: | <a href="https://openjdk.org/jeps/453">Structured Concurrency (Preview)</a> |</h1><h1 id="什么是结构化并发（Structured-Concurrency）？"><a href="#什么是结构化并发（Structured-Concurrency）？" class="headerlink" title="什么是结构化并发（Structured Concurrency）？"></a>什么是结构化并发（Structured Concurrency）？</h1><p>结构化并发是一种用于简化并发编程的API。它将在不同线程中运行的相关任务组视为一个单独的工作单元，从而简化错误处理和取消操作，提高可靠性，并增强可观察性。</p><h1 id="为什么需要结构化并发？"><a href="#为什么需要结构化并发？" class="headerlink" title="为什么需要结构化并发？"></a>为什么需要结构化并发？</h1><p>传统的并发编程模型，如<code>ExecutorService</code><br>API，由于其无限制的并发模式，引入了复杂性和风险。这些模型没有强制执行或跟踪任务和子任务之间的关系，使得管理和观察并发任务变得困难。结构化并发模型认为任务结构应该反映代码结构，在单线程代码中，执行总是强制实施任务和子任务的层次结构，每个子任务的生命周期相对于其他子任务受到代码的语法块结构的控制。</p><p>结构化并发旨在消除与并发编程相关的常见风险，例如线程泄漏和取消延迟，并增强并发代码的可观察性。</p><h1 id="结构化并发的实现原理"><a href="#结构化并发的实现原理" class="headerlink" title="结构化并发的实现原理"></a>结构化并发的实现原理</h1><p>结构化并发通过引入新的API来实现，其中最重要的类是<code>StructuredTaskScope</code>。<code>StructuredTaskScope</code><br>封装了一组相关的任务，这些任务应该一起完成，如果任何子任务失败，则会取消剩余的子任务。</p><p>在结构化并发中，使用<code>StructuredTaskScope</code><br>创建一个作用域，在该作用域内可以派生出多个子任务。这些子任务将被视为整体，并且它们之间存在依赖关系。当所有子任务完成后，可以对它们进行处理，例如获取结果或抛出异常。</p><h1 id="结构化并发的优点"><a href="#结构化并发的优点" class="headerlink" title="结构化并发的优点"></a>结构化并发的优点</h1><ul><li>简化并发编程：结构化并发提供了一种更简单、更直观的方式来处理并发任务。</li><li>错误处理和取消操作：通过将相关任务组合成一个单元，结构化并发使错误处理和取消操作更加容易和可靠。</li><li>提高可靠性：结构化并发模型消除了常见的风险，如线程泄漏和取消延迟，从而提高了并发代码的可靠性。</li><li>增强可观察性：结构化并发模型使得观察并发任务的执行状态变得更加方便。</li></ul><h1 id="结构化并发的缺点"><a href="#结构化并发的缺点" class="headerlink" title="结构化并发的缺点"></a>结构化并发的缺点</h1><ul><li>预览功能：目前，结构化并发仍处于预览阶段，需要启用预览功能才能使用。</li></ul><h1 id="结构化并发的使用示例"><a href="#结构化并发的使用示例" class="headerlink" title="结构化并发的使用示例"></a>结构化并发的使用示例</h1><p>下面是一个使用结构化并发的示例代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Response <span class="title function_">handle</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">    <span class="keyword">try</span> (<span class="type">var</span> <span class="variable">scope</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StructuredTaskScope</span>.ShutdownOnFailure()) &#123;</span><br><span class="line">        Supplier&lt;String&gt;  user  = scope.fork(() -&gt; findUser());</span><br><span class="line">        Supplier&lt;Integer&gt; order = scope.fork(() -&gt; fetchOrder());</span><br><span class="line"></span><br><span class="line">        scope.join()            </span><br><span class="line">             .throwIfFailed();  </span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(user.get(), order.get());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个示例中，我们创建了一个新的<code>StructuredTaskScope</code>作用域，并使用它派生了两个子任务：一个执行<code>findUser()</code><br>方法，另一个执行<code>fetchOrder()</code>方法。一旦两个子任务都完成，就可以使用它们的结果创建一个新的<code>Response</code>对象。</p><h1 id="结构化并发的使用注意事项"><a href="#结构化并发的使用注意事项" class="headerlink" title="结构化并发的使用注意事项"></a>结构化并发的使用注意事项</h1><ul><li>结构化并发是一个预览功能，默认情况下被禁用。要使用<code>StructuredTaskScope</code> API，开发人员必须启用预览功能来编译代码。</li><li>使用结构化并发时，通常不直接使用<code>StructuredTaskScope</code><br>类，而是使用实现关闭策略的两个子类之一。这些子类分别是<code>ShutdownOnFailure</code>和<code>ShutdownOnSuccess</code>，支持当第一个子任务失败或成功时关闭作用域的模式。</li><li>运行结构化并发程序时，需要使用<code>--enable-preview</code>选项启用预览功能。</li></ul><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>结构化并发是一种用于简化并发编程的API，它将相关任务组合成一个单元，从而简化错误处理和取消操作，提高可靠性，并增强可观察性。通过引入<code>StructuredTaskScope</code><br>类和相关的子类，结构化并发提供了一种更简单、更直观的方式来处理并发任务。然而，需要注意的是，结构化并发目前仍处于预览阶段，并且需要启用预览功能才能使用。</p><p>JDK 21 将是大多数供应商的长期支持 （LTS） 版本。有关自上一个 LTS 版本 JDK 17 以来集成的 JEP<br>的完整列表，请参阅 <a href="https://openjdk.org/projects/jdk/21/jeps-since-jdk-17">here</a>.</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 错误处理 </tag>
            
            <tag> JDK 21 </tag>
            
            <tag> 并发编程 </tag>
            
            <tag> 结构化并发 </tag>
            
            <tag> API </tag>
            
            <tag> 取消操作 </tag>
            
            <tag> 可靠性 </tag>
            
            <tag> 可观察性 </tag>
            
            <tag> 结构化并发模型 </tag>
            
            <tag> 线程泄漏 </tag>
            
            <tag> 取消延迟 </tag>
            
            <tag> 预览功能 </tag>
            
            <tag> 结构化并发的使用示例 </tag>
            
            <tag> 结构化并发的使用注意事项 </tag>
            
            <tag> LTS 版本 </tag>
            
            <tag> JEP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：新的密钥封装机制</title>
      <link href="/a3ae8000.html"/>
      <url>/a3ae8000.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="452-Key-Encapsulation-Mechanism-API"><a href="#452-Key-Encapsulation-Mechanism-API" class="headerlink" title="| 452: | Key Encapsulation Mechanism API |"></a>| 452: | <a href="https://openjdk.org/jeps/452">Key Encapsulation Mechanism API</a> |</h1><h2 id="1-什么是Key-Encapsulation-Mechanism-API"><a href="#1-什么是Key-Encapsulation-Mechanism-API" class="headerlink" title="1. 什么是Key Encapsulation Mechanism API?"></a>1. 什么是Key Encapsulation Mechanism API?</h2><p>Key Encapsulation Mechanism (KEM) API 是一个 Java<br>API，用于支持密钥封装机制。密钥封装是一种加密技术，它将一个对称密钥（也称为会话密钥）与公钥结合使用，以便在不直接暴露私钥的情况下安全地传输密钥。</p><p>KEM API 提供了一组方法和类，用于生成、封装和解封装密钥。它可以与现有的密码学算法和协议集成，提供更高级别的密钥管理功能。</p><h2 id="2-为什么需要Key-Encapsulation-Mechanism-API"><a href="#2-为什么需要Key-Encapsulation-Mechanism-API" class="headerlink" title="2. 为什么需要Key Encapsulation Mechanism API?"></a>2. 为什么需要Key Encapsulation Mechanism API?</h2><p>在传统的密钥交换过程中，通常需要事先共享或分发密钥。这可能存在许多安全风险，例如密钥泄露、中间人攻击等。而密钥封装机制通过使用公钥进行密钥交换，避免了这些问题。</p><p>Key Encapsulation Mechanism API 的出现使得开发者能够更方便地实现密钥封装机制，并提供了更高级别的密钥管理功能。它简化了密钥生成、封装和解封装的过程，同时保证了安全性和可靠性。</p><h2 id="3-Key-Encapsulation-Mechanism-API的实现原理"><a href="#3-Key-Encapsulation-Mechanism-API的实现原理" class="headerlink" title="3. Key Encapsulation Mechanism API的实现原理"></a>3. Key Encapsulation Mechanism API的实现原理</h2><p>Key Encapsulation Mechanism API 的实现原理基于非对称加密算法和密钥封装机制。它使用公钥进行密钥交换，并通过将会话密钥封装在一个安全的密文中，以确保密钥的安全传输。</p><p>具体实现过程如下：</p><ol><li>生成一对公私钥对。</li><li>使用公钥进行密钥封装，生成一个密文。</li><li>将密文发送给接收方。</li><li>接收方使用私钥解封装密文，得到会话密钥。</li><li>双方可以使用会话密钥进行加密通信。</li></ol><h2 id="4-Key-Encapsulation-Mechanism-API的优点"><a href="#4-Key-Encapsulation-Mechanism-API的优点" class="headerlink" title="4. Key Encapsulation Mechanism API的优点"></a>4. Key Encapsulation Mechanism API的优点</h2><ul><li><strong>安全性高</strong>：Key Encapsulation Mechanism API 使用了非对称加密算法和密钥封装机制，能够提供较高的安全性，避免了密钥泄露和中间人攻击等问题。</li><li><strong>易于使用</strong>：API 提供了简单易用的方法和类，开发者可以轻松地生成、封装和解封装密钥，无需深入了解底层算法和协议。</li><li><strong>灵活性强</strong>：API 可以与现有的密码学算法和协议集成，提供更高级别的密钥管理功能，满足不同场景的需求。</li></ul><h2 id="5-Key-Encapsulation-Mechanism-API的缺点"><a href="#5-Key-Encapsulation-Mechanism-API的缺点" class="headerlink" title="5. Key Encapsulation Mechanism API的缺点"></a>5. Key Encapsulation Mechanism API的缺点</h2><ul><li><strong>依赖于非对称加密算法</strong>：Key Encapsulation Mechanism API 的实现依赖于非对称加密算法，这些算法可能存在性能上的瓶颈和限制。</li><li><strong>需要保护私钥的安全</strong>：由于使用了非对称加密算法，私钥的安全至关重要。开发者需要采取措施来保护私钥的机密性和完整性。</li></ul><h2 id="6-Key-Encapsulation-Mechanism-API的使用示例"><a href="#6-Key-Encapsulation-Mechanism-API的使用示例" class="headerlink" title="6. Key Encapsulation Mechanism API的使用示例"></a>6. Key Encapsulation Mechanism API的使用示例</h2><p>下面是一个简单的使用示例，演示了如何使用 Key Encapsulation Mechanism API 进行密钥封装和解封装：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.security.KeyPair;</span><br><span class="line"><span class="keyword">import</span> java.security.KeyPairGenerator;</span><br><span class="line"><span class="keyword">import</span> java.security.KeyAgreement;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.Cipher;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KEMExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 生成公私钥对</span></span><br><span class="line">        <span class="type">KeyPairGenerator</span> <span class="variable">keyPairGenerator</span> <span class="operator">=</span> KeyPairGenerator.getInstance(<span class="string">&quot;RSA&quot;</span>);</span><br><span class="line">        <span class="type">KeyPair</span> <span class="variable">keyPair</span> <span class="operator">=</span> keyPairGenerator.generateKeyPair();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 创建 KeyAgreement 对象</span></span><br><span class="line">        <span class="type">KeyAgreement</span> <span class="variable">keyAgreement</span> <span class="operator">=</span> KeyAgreement.getInstance(<span class="string">&quot;DH&quot;</span>);</span><br><span class="line">        keyAgreement.init(keyPair.getPrivate());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 执行密钥协商过程</span></span><br><span class="line">        keyAgreement.doPhase(keyPair.getPublic(), <span class="literal">true</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 生成会话密钥</span></span><br><span class="line">        <span class="type">byte</span>[] sharedSecret = keyAgreement.generateSecret();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 封装会话密钥</span></span><br><span class="line">        <span class="type">Cipher</span> <span class="variable">cipher</span> <span class="operator">=</span> Cipher.getInstance(<span class="string">&quot;AES&quot;</span>);</span><br><span class="line">        cipher.init(Cipher.WRAP_MODE, keyPair.getPublic());</span><br><span class="line">        <span class="type">byte</span>[] wrappedKey = cipher.wrap(sharedSecret);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 解封装会话密钥</span></span><br><span class="line">        cipher.init(Cipher.UNWRAP_MODE, keyPair.getPrivate());</span><br><span class="line">        <span class="type">byte</span>[] unwrappedKey = cipher.unwrap(wrappedKey, <span class="string">&quot;AES&quot;</span>, Cipher.SECRET_KEY);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Shared Secret: &quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(sharedSecret));</span><br><span class="line">        System.out.println(<span class="string">&quot;Unwrapped Key: &quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(unwrappedKey));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-Key-Encapsulation-Mechanism-API的使用注意事项"><a href="#7-Key-Encapsulation-Mechanism-API的使用注意事项" class="headerlink" title="7. Key Encapsulation Mechanism API的使用注意事项"></a>7. Key Encapsulation Mechanism API的使用注意事项</h2><ul><li>开发者需要选择合适的非对称加密算法和密钥封装机制，根据具体需求进行配置。</li><li>私钥的安全至关重要，开发者应该采取措施来保护私钥的机密性和完整性。</li><li>密钥封装过程中生成的密文需要通过安全信道传输，以确保密钥的安全性。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Key Encapsulation Mechanism API 是一个用于支持密钥封装机制的 Java<br>API。它提供了一组方法和类，用于生成、封装和解封装密钥。通过使用公钥进行密钥交换，避免了传统密钥交换方式中存在的安全风险。API<br>的实现原理基于非对称加密算法和密钥封装机制，能够提供较高的安全性和灵活性。开发者可以轻松地使用 API<br>进行密钥封装和解封装操作，并与现有的密码学算法和协议集成，满足不同场景的需求。然而，API 的使用需要注意私钥的安全性和密文的传输安全。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：动态加载禁用</title>
      <link href="/35256f2e.html"/>
      <url>/35256f2e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="451-Prepare-to-Disallow-the-Dynamic-Loading-of-Agents"><a href="#451-Prepare-to-Disallow-the-Dynamic-Loading-of-Agents" class="headerlink" title="| 451: | Prepare to Disallow the Dynamic Loading of Agents |"></a>| 451: | <a href="https://openjdk.org/jeps/451">Prepare to Disallow the Dynamic Loading of Agents</a> |</h1><h2 id="1-什么是动态加载代理禁用准备（Prepare-to-Disallow-the-Dynamic-Loading-of-Agents）？"><a href="#1-什么是动态加载代理禁用准备（Prepare-to-Disallow-the-Dynamic-Loading-of-Agents）？" class="headerlink" title="1. 什么是动态加载代理禁用准备（Prepare to Disallow the Dynamic Loading of Agents）？"></a>1. 什么是动态加载代理禁用准备（Prepare to Disallow the Dynamic Loading of Agents）？</h2><p>动态加载代理禁用准备（Prepare to Disallow the Dynamic Loading of<br>Agents）是一个Java增强提案，其目标是在JVM中禁止动态加载代理。代理是一种能够修改或监视应用程序行为的机制，它可以通过字节码注入来实现。</p><h2 id="2-为什么需要动态加载代理禁用准备？"><a href="#2-为什么需要动态加载代理禁用准备？" class="headerlink" title="2. 为什么需要动态加载代理禁用准备？"></a>2. 为什么需要动态加载代理禁用准备？</h2><p>动态加载代理允许开发人员在运行时修改和监视Java应用程序的行为。虽然这对于调试和性能分析等方面非常有用，但也存在潜在的安全风险。恶意代码可能会利用动态加载代理的功能来执行恶意操作，例如窃取敏感信息、篡改数据等。</p><p>因此，为了加强Java应用程序的安全性，限制动态加载代理的使用是很有必要的。</p><h2 id="3-动态加载代理禁用准备的实现原理"><a href="#3-动态加载代理禁用准备的实现原理" class="headerlink" title="3. 动态加载代理禁用准备的实现原理"></a>3. 动态加载代理禁用准备的实现原理</h2><p>动态加载代理禁用准备的实现涉及到以下几个方面：</p><h3 id="3-1-修改ClassLoader"><a href="#3-1-修改ClassLoader" class="headerlink" title="3.1 修改ClassLoader"></a>3.1 修改ClassLoader</h3><p>该提案建议修改Java虚拟机的类加载器，以阻止动态加载代理。具体而言，将在<code>java.lang.ClassLoader</code><br>类中添加一个新的方法<code>boolean disallowDynamicAgentLoading()</code>，默认返回<code>false</code>。当该方法被调用时，将返回<code>true</code>，表示禁止动态加载代理。</p><h3 id="3-2-修改Instrumentation-API"><a href="#3-2-修改Instrumentation-API" class="headerlink" title="3.2 修改Instrumentation API"></a>3.2 修改Instrumentation API</h3><p>为了支持ClassLoader的修改，还需要对Java虚拟机的Instrumentation<br>API进行相应的更改。具体而言，将在<code>java.lang.instrument.Instrumentation</code><br>接口中添加一个新的方法<code>boolean isDynamicAgentLoadingAllowed()</code>，默认返回<code>true</code>。当该方法返回<code>false</code>时，表示禁止动态加载代理。</p><h3 id="3-3-更新安全管理器"><a href="#3-3-更新安全管理器" class="headerlink" title="3.3 更新安全管理器"></a>3.3 更新安全管理器</h3><p>此外，还建议更新Java虚拟机的安全管理器（SecurityManager），以允许检查是否允许动态加载代理。这样可以通过安全策略来控制哪些代码可以使用动态加载代理功能。</p><h2 id="4-动态加载代理禁用准备的优点"><a href="#4-动态加载代理禁用准备的优点" class="headerlink" title="4. 动态加载代理禁用准备的优点"></a>4. 动态加载代理禁用准备的优点</h2><ul><li>提高Java应用程序的安全性：禁止动态加载代理可以防止恶意代码利用其功能执行潜在的危险操作。</li><li>简化安全配置：通过更新安全管理器和类加载器，可以更方便地控制动态加载代理的使用权限，简化安全配置过程。</li></ul><h2 id="5-动态加载代理禁用准备的缺点"><a href="#5-动态加载代理禁用准备的缺点" class="headerlink" title="5. 动态加载代理禁用准备的缺点"></a>5. 动态加载代理禁用准备的缺点</h2><ul><li>可能影响现有代码：如果现有代码依赖于动态加载代理的功能，那么禁用它可能会导致这些代码无法正常工作。因此，在应用该增强提案之前，需要仔细评估现有代码的依赖关系。</li></ul><h2 id="6-动态加载代理禁用准备的使用示例"><a href="#6-动态加载代理禁用准备的使用示例" class="headerlink" title="6. 动态加载代理禁用准备的使用示例"></a>6. 动态加载代理禁用准备的使用示例</h2><p>以下是一个简单的示例，展示了如何使用动态加载代理禁用准备：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.instrument.Instrumentation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AgentLoader</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">premain</span><span class="params">(String agentArgs, Instrumentation inst)</span> &#123;</span><br><span class="line">        <span class="comment">// 禁止动态加载代理</span></span><br><span class="line">        <span class="keyword">if</span> (inst.isDynamicAgentLoadingAllowed()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SecurityException</span>(<span class="string">&quot;Dynamic loading of agents is not allowed&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 其他初始化操作...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，<code>premain</code>方法是Java代理的入口点。通过调用<code>isDynamicAgentLoadingAllowed()</code>方法，可以检查是否允许动态加载代理。如果不允许，则抛出安全异常。</p><h2 id="7-动态加载代理禁用准备的使用注意事项"><a href="#7-动态加载代理禁用准备的使用注意事项" class="headerlink" title="7. 动态加载代理禁用准备的使用注意事项"></a>7. 动态加载代理禁用准备的使用注意事项</h2><ul><li>在使用动态加载代理禁用准备之前，需要仔细评估现有代码是否依赖于动态加载代理的功能。</li><li>需要更新相关的类加载器和安全管理器来支持禁止动态加载代理的功能。</li><li>使用动态加载代理禁用准备时，需要确保应用程序的安全策略能够正确地控制动态加载代理的使用权限。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>动态加载代理禁用准备是一个Java增强提案，旨在禁止动态加载代理以提高应用程序的安全性。它通过修改类加载器、Instrumentation<br>API和安全管理器来实现禁止动态加载代理的功能。尽管这样做可以增加应用程序的安全性，但也可能影响依赖于动态加载代理的现有代码。因此，在使用该功能之前需要仔细评估现有代码的依赖关系。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：舍弃对x86架构32位系统支持</title>
      <link href="/c37a0005.html"/>
      <url>/c37a0005.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="449-Deprecate-the-Windows-32-bit-x86-Port-for-Removal"><a href="#449-Deprecate-the-Windows-32-bit-x86-Port-for-Removal" class="headerlink" title="| 449: | Deprecate the Windows 32-bit x86 Port for Removal |"></a>| 449: | <a href="https://openjdk.org/jeps/449">Deprecate the Windows 32-bit x86 Port for Removal</a> |</h1><p>名字太长了。。后面简称 449</p><h2 id="1-什么是JEP-449"><a href="#1-什么是JEP-449" class="headerlink" title="1. 什么是JEP 449?"></a>1. 什么是JEP 449?</h2><p>JEP 449（Java Enhancement Proposal 449）是一个针对OpenJDK的提案，旨在废弃并最终移除Windows 32位x86平台上的Java支持。</p><h2 id="2-为什么需要废弃Windows-32位x86平台上的Java支持？"><a href="#2-为什么需要废弃Windows-32位x86平台上的Java支持？" class="headerlink" title="2. 为什么需要废弃Windows 32位x86平台上的Java支持？"></a>2. 为什么需要废弃Windows 32位x86平台上的Java支持？</h2><p>主要有以下几个原因：</p><ul><li><strong>过时的硬件和操作系统</strong>：Windows 32位x86平台已经逐渐被淘汰，现代计算机普遍采用64位架构。同时，大多数新版本的Windows操作系统也只提供了64位版本。</li><li><strong>性能限制</strong>：32位架构限制了可寻址内存空间的大小，导致无法充分利用现代计算机的资源。而64位架构可以提供更大的内存地址空间，从而提高应用程序的性能和扩展性。</li><li><strong>安全问题</strong>：32位架构存在一些安全漏洞和限制，例如缓冲区溢出等。而64位架构通过引入更多的保护机制来增加应用程序的安全性。</li></ul><p>基于以上原因，废弃Windows 32位x86平台上的Java支持是合理且必要的。</p><h2 id="3-JEP-449的实现原理"><a href="#3-JEP-449的实现原理" class="headerlink" title="3. JEP 449的实现原理"></a>3. JEP 449的实现原理</h2><p>JEP 449的实现原理涉及到编译器、虚拟机和库等多个方面的改动。</p><ul><li><strong>编译器层面</strong>：废弃32位x86平台上的Java支持需要对编译器进行修改，禁止生成32位x86架构的目标代码。</li><li><strong>虚拟机层面</strong>：虚拟机需要对内存管理、垃圾回收等进行调整，以适应64位架构的特性。同时，还需要更新与操作系统交互的部分代码，确保在64位环境下正常运行。</li><li><strong>库层面</strong>：一些与硬件相关的库可能需要重新编写或者替换为64位版本，以充分利用64位架构的优势。</li></ul><p>具体实现细节可以参考JEP 449提案中的详细说明。</p><h2 id="4-JEP-449的优点"><a href="#4-JEP-449的优点" class="headerlink" title="4. JEP 449的优点"></a>4. JEP 449的优点</h2><ul><li><strong>性能提升</strong>：64位架构可以提供更大的内存地址空间，从而提高应用程序的性能和扩展性。</li><li><strong>安全增强</strong>：64位架构引入了更多的保护机制，提高了应用程序的安全性。</li><li><strong>与现代计算机趋势相符</strong>：Windows 32位x86平台已经逐渐被淘汰，废弃该平台上的Java支持是与时俱进的举措。</li></ul><h2 id="5-JEP-449的缺点"><a href="#5-JEP-449的缺点" class="headerlink" title="5. JEP 449的缺点"></a>5. JEP 449的缺点</h2><ul><li><strong>向后兼容性问题</strong>：废弃Windows 32位x86平台上的Java支持可能导致一些现有的应用程序无法在该平台上运行。这需要开发人员进行相应的迁移和调整。</li><li>**对于仍然使用32位硬件和操作系统的用户而言，将无法继续获得新版本的Java更新和功能改进。</li></ul><h2 id="6-JEP-449的使用示例"><a href="#6-JEP-449的使用示例" class="headerlink" title="6. JEP 449的使用示例"></a>6. JEP 449的使用示例</h2><p>JEP 449是一个OpenJDK的提案，它主要影响到OpenJDK的开发者和Windows 32位x86平台上的Java用户。对于开发者来说，他们需要根据JEP<br>449的实施情况，适时地迁移和调整自己的应用程序代码。对于Windows<br>32位x86平台上的Java用户来说，他们需要考虑升级到64位架构的计算机和操作系统，以继续获得最新的Java更新和功能改进。</p><h2 id="7-JEP-449的使用注意事项"><a href="#7-JEP-449的使用注意事项" class="headerlink" title="7. JEP 449的使用注意事项"></a>7. JEP 449的使用注意事项</h2><ul><li>开发者需要及时关注JEP 449的实施情况，并根据需要进行相应的迁移和调整。</li><li>Windows 32位x86平台上的Java用户需要考虑升级到64位架构的计算机和操作系统，以继续获得最新的Java更新和功能改进。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>JEP 449旨在废弃并最终移除Windows<br>32位x86平台上的Java支持。这是基于该平台已经逐渐被淘汰、性能限制和安全问题等原因做出的合理举措。废弃该平台上的Java支持可以提高应用程序的性能和安全性，并与现代计算机趋势相符。开发者需要及时关注JEP<br>449的实施情况，并根据需要进行相应的迁移和调整。Windows 32位x86平台上的Java用户需要考虑升级到64位架构的计算机和操作系统，以继续获得最新的Java更新和功能改进。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 虚拟机 </tag>
            
            <tag> 性能提升 </tag>
            
            <tag> 使用示例 </tag>
            
            <tag> 使用注意事项 </tag>
            
            <tag> 总结 </tag>
            
            <tag> JDK21更新内容 </tag>
            
            <tag> 舍弃对x86架构32位系统支持 </tag>
            
            <tag> JEP 449 </tag>
            
            <tag> Java Enhancement Proposal 449 </tag>
            
            <tag> Windows 32位x86平台 </tag>
            
            <tag> 过时的硬件和操作系统 </tag>
            
            <tag> 性能限制 </tag>
            
            <tag> 安全问题 </tag>
            
            <tag> 编译器 </tag>
            
            <tag> 库 </tag>
            
            <tag> 安全增强 </tag>
            
            <tag> 现代计算机趋势 </tag>
            
            <tag> 向后兼容性问题 </tag>
            
            <tag> 开发者 </tag>
            
            <tag> 用户 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：向量计算</title>
      <link href="/639c0b95.html"/>
      <url>/639c0b95.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="448-Vector-API-Sixth-Incubator"><a href="#448-Vector-API-Sixth-Incubator" class="headerlink" title="| 448: | Vector API (Sixth Incubator) |"></a>| 448: | <a href="https://openjdk.org/jeps/448">Vector API (Sixth Incubator)</a> |</h1><h2 id="1-什么是Vector-API-Sixth-Incubator"><a href="#1-什么是Vector-API-Sixth-Incubator" class="headerlink" title="1. 什么是Vector API (Sixth Incubator)?"></a>1. 什么是Vector API (Sixth Incubator)?</h2><p>Vector API (Sixth Incubator) 是 Java 平台的一个项目，旨在提供一种简单且高效的方式来执行向量化计算。它引入了新的类和接口，以支持使用<br>SIMD（Single Instruction, Multiple Data）指令集进行并行计算。</p><h2 id="2-为什么需要Vector-API-Sixth-Incubator"><a href="#2-为什么需要Vector-API-Sixth-Incubator" class="headerlink" title="2. 为什么需要Vector API (Sixth Incubator)?"></a>2. 为什么需要Vector API (Sixth Incubator)?</h2><p>在许多应用程序中，存在大量的数据并行计算任务，例如图像处理、科学计算和机器学习等领域。传统的 Java<br>编程模型无法充分利用现代硬件的并行计算能力，导致性能低下。而 Vector API (Sixth Incubator) 的目标就是通过向量化计算来提高这些应用程序的性能。</p><h2 id="3-Vector-API-Sixth-Incubator-的实现原理"><a href="#3-Vector-API-Sixth-Incubator-的实现原理" class="headerlink" title="3. Vector API (Sixth Incubator) 的实现原理?"></a>3. Vector API (Sixth Incubator) 的实现原理?</h2><p>Vector API (Sixth Incubator) 基于 SIMD 指令集，即单指令多数据流指令集。SIMD 指令集可以同时对多个数据元素执行相同的操作，从而实现并行计算。Vector<br>API (Sixth Incubator) 提供了一组新的类和接口，使开发人员能够直接编写基于 SIMD 指令集的代码。</p><p>具体来说，Vector API (Sixth Incubator) 引入了 <code>java.util.vector</code> 包，其中包含了一些新的类和接口，如 <code>Vector</code>、<code>FloatVector</code><br>和 <code>IntVector</code> 等。这些类提供了一组向量化操作方法，例如加法、减法、乘法等，以及对应的掩码操作。</p><p>在底层实现上，Vector API (Sixth Incubator) 使用了特定硬件平台的 SIMD 指令集来执行向量化计算。具体实现细节会依赖于不同的硬件架构和操作系统。</p><h2 id="4-Vector-API-Sixth-Incubator-的优点"><a href="#4-Vector-API-Sixth-Incubator-的优点" class="headerlink" title="4. Vector API (Sixth Incubator) 的优点"></a>4. Vector API (Sixth Incubator) 的优点</h2><ul><li>提高性能：通过利用 SIMD 指令集进行并行计算，可以显著提高应用程序的性能。</li><li>简化编程模型：Vector API (Sixth Incubator) 提供了一组简单易用的类和接口，使开发人员能够直接编写基于 SIMD 指令集的代码，而无需手动优化。</li></ul><h2 id="5-Vector-API-Sixth-Incubator-的缺点"><a href="#5-Vector-API-Sixth-Incubator-的缺点" class="headerlink" title="5. Vector API (Sixth Incubator) 的缺点"></a>5. Vector API (Sixth Incubator) 的缺点</h2><ul><li>平台限制：Vector API (Sixth Incubator) 的实现依赖于特定的硬件平台和操作系统，因此在不同的平台上可能存在兼容性问题。</li><li>学习成本：使用 Vector API (Sixth Incubator) 需要学习新的类和接口，并理解 SIMD 指令集的工作原理，对于一些开发人员来说可能需要花费一定的时间和精力。</li></ul><h2 id="6-Vector-API-Sixth-Incubator-的使用示例"><a href="#6-Vector-API-Sixth-Incubator-的使用示例" class="headerlink" title="6. Vector API (Sixth Incubator) 的使用示例"></a>6. Vector API (Sixth Incubator) 的使用示例</h2><p>下面是一个简单的使用 Vector API (Sixth Incubator) 进行向量化计算的示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.vector.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VectorExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">8</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 创建两个向量对象</span></span><br><span class="line">        <span class="type">FloatVector</span> <span class="variable">a</span> <span class="operator">=</span> FloatVector.broadcast(size, <span class="number">2.0f</span>);</span><br><span class="line">        <span class="type">FloatVector</span> <span class="variable">b</span> <span class="operator">=</span> FloatVector.broadcast(size, <span class="number">3.0f</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 执行向量化加法操作</span></span><br><span class="line">        <span class="type">FloatVector</span> <span class="variable">result</span> <span class="operator">=</span> a.add(b);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        <span class="type">float</span>[] array = <span class="keyword">new</span> <span class="title class_">float</span>[size];</span><br><span class="line">        result.intoArray(array, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">float</span> value : array) &#123;</span><br><span class="line">            System.out.println(value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，我们创建了两个长度为 8 的浮点数向量，并执行了向量化的加法操作。最后将结果输出到数组中并打印出来。</p><h2 id="7-Vector-API-Sixth-Incubator-的使用注意事项"><a href="#7-Vector-API-Sixth-Incubator-的使用注意事项" class="headerlink" title="7. Vector API (Sixth Incubator) 的使用注意事项"></a>7. Vector API (Sixth Incubator) 的使用注意事项</h2><ul><li>硬件兼容性：由于 Vector API (Sixth Incubator) 的实现依赖于特定的硬件平台和操作系统，因此在使用之前需要确保目标平台支持<br>SIMD 指令集。</li><li>性能优化：虽然 Vector API (Sixth Incubator) 可以提高应用程序的性能，但要获得最佳性能还需要进行适当的优化。例如，避免频繁的向量化操作和数据拷贝等。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Vector API (Sixth Incubator) 是 Java 平台的一个项目，旨在提供一种简单且高效的方式来执行向量化计算。它基于 SIMD<br>指令集，并通过引入新的类和接口来支持并行计算。使用 Vector API (Sixth Incubator) 可以提高应用程序的性能，但需要注意硬件兼容性和适当的性能优化。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 性能优化 </tag>
            
            <tag> 向量计算 </tag>
            
            <tag> SIMD指令集 </tag>
            
            <tag> 并行计算 </tag>
            
            <tag> 硬件兼容性 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：临时变量</title>
      <link href="/63437771.html"/>
      <url>/63437771.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="446-Scoped-Values-Preview"><a href="#446-Scoped-Values-Preview" class="headerlink" title="| 446: | Scoped Values (Preview) |"></a>| 446: | <a href="https://openjdk.org/jeps/446">Scoped Values (Preview)</a> |</h1><h2 id="1-什么是Scoped-Values-Preview"><a href="#1-什么是Scoped-Values-Preview" class="headerlink" title="1. 什么是Scoped Values (Preview)?"></a>1. 什么是Scoped Values (Preview)?</h2><p>Scoped Values (Preview) 是 Java 平台的一个新特性，它在 JDK 17 中引入。该特性旨在提供一种机制，用于在代码块级别上设置和使用临时变量。</p><h2 id="2-为什么需要Scoped-Values-Preview"><a href="#2-为什么需要Scoped-Values-Preview" class="headerlink" title="2. 为什么需要Scoped Values (Preview)?"></a>2. 为什么需要Scoped Values (Preview)?</h2><p>在传统的 Java 编程中，我们通常会将变量声明在方法或类的作用域内，并且这些变量的生命周期与其所在的作用域相同。然而，在某些情况下，我们可能希望在更小的范围内定义临时变量，以便更好地控制其可见性和生命周期。</p><p>Scoped Values (Preview) 提供了一种简洁、安全的方式来定义和使用临时变量，使得代码更加清晰易读，并且可以减少不必要的命名冲突和资源泄漏问题。</p><h2 id="3-Scoped-Values-Preview-的实现原理"><a href="#3-Scoped-Values-Preview-的实现原理" class="headerlink" title="3. Scoped Values (Preview) 的实现原理?"></a>3. Scoped Values (Preview) 的实现原理?</h2><p>Scoped Values (Preview) 的实现基于 Java 语言规范中的局部变量类型推断（Local Variable Type Inference）机制。通过使用 var<br>关键字，我们可以在代码块内部声明临时变量，并根据初始化表达式的类型进行类型推断。</p><p>例如，以下示例展示了如何使用 Scoped Values (Preview) 声明和使用临时变量：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">exampleMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 使用 Scoped Values (Preview) 声明临时变量</span></span><br><span class="line">    <span class="type">var</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 在代码块内部使用临时变量</span></span><br><span class="line">    <span class="keyword">if</span> (message.length() &gt; <span class="number">10</span>) &#123;</span><br><span class="line">        System.out.println(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，我们使用 Scoped Values (Preview) 声明了一个名为 message 的临时变量，并将其初始化为字符串 “Hello, World!”<br>。然后，在 if 语句的代码块内部，我们可以直接使用该临时变量。</p><h2 id="4-Scoped-Values-Preview-的优点"><a href="#4-Scoped-Values-Preview-的优点" class="headerlink" title="4. Scoped Values (Preview) 的优点"></a>4. Scoped Values (Preview) 的优点</h2><ul><li><strong>简洁性</strong>：Scoped Values (Preview) 提供了一种更简洁的方式来声明和使用临时变量，减少了冗余的代码。</li><li><strong>可读性</strong>：通过在代码块级别上定义临时变量，使得代码更加清晰易读，提高了代码的可维护性。</li><li><strong>类型安全</strong>：Scoped Values (Preview) 基于 Java 语言规范中的局部变量类型推断机制，确保了变量的类型安全性。</li></ul><h2 id="5-Scoped-Values-Preview-的缺点"><a href="#5-Scoped-Values-Preview-的缺点" class="headerlink" title="5. Scoped Values (Preview) 的缺点"></a>5. Scoped Values (Preview) 的缺点</h2><p>尽管 Scoped Values (Preview) 提供了许多优点，但也存在一些潜在的缺点：</p><ul><li><strong>兼容性问题</strong>：由于 Scoped Values (Preview) 是 JDK 17 中引入的新特性，因此在较旧版本的 Java 中无法使用。</li><li><strong>学习成本</strong>：对于不熟悉局部变量类型推断机制的开发人员来说，可能需要一些时间来适应 Scoped Values (Preview) 的使用方式。</li></ul><h2 id="6-Scoped-Values-Preview-的使用示例"><a href="#6-Scoped-Values-Preview-的使用示例" class="headerlink" title="6. Scoped Values (Preview) 的使用示例"></a>6. Scoped Values (Preview) 的使用示例</h2><p>以下是一个使用 Scoped Values (Preview) 的简单示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">printMessage</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">var</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">    System.out.println(message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，我们使用 Scoped Values (Preview) 声明了一个名为 message 的临时变量，并将其初始化为字符串 “Hello, World!”<br>。然后，我们通过调用 System.out.println 方法打印该临时变量的值。</p><h2 id="7-Scoped-Values-Preview-的使用注意事项"><a href="#7-Scoped-Values-Preview-的使用注意事项" class="headerlink" title="7. Scoped Values (Preview) 的使用注意事项"></a>7. Scoped Values (Preview) 的使用注意事项</h2><p>在使用 Scoped Values (Preview) 时，需要注意以下几点：</p><ul><li><strong>作用域限制</strong>：Scoped Values (Preview) 声明的临时变量仅在当前代码块内部可见，超出该代码块范围后将无法访问。</li><li><strong>类型推断</strong>：由于 Scoped Values (Preview) 是基于局部变量类型推断机制实现的，因此必须确保初始化表达式具有明确的类型信息，以便进行正确的类型推断。</li><li><strong>命名冲突</strong>：当在同一代码块内使用多个 Scoped Values (Preview) 声明临时变量时，需要避免命名冲突，以免引起混淆和错误。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Scoped Values (Preview) 是 Java 平台的一个新特性，它提供了一种在代码块级别上设置和使用临时变量的机制。通过使用 var<br>关键字，我们可以在代码块内部声明临时变量，并根据初始化表达式的类型进行类型推断。Scoped Values (Preview)<br>的优点包括简洁性、可读性和类型安全性，但也存在兼容性问题和学习成本。在使用 Scoped Values (Preview)<br>时，需要注意作用域限制、类型推断和命名冲突等注意事项。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 简洁性 </tag>
            
            <tag> 可读性 </tag>
            
            <tag> 临时变量 </tag>
            
            <tag> Scoped Values (Preview) </tag>
            
            <tag> JDK 21更新内容 </tag>
            
            <tag> 局部变量类型推断 </tag>
            
            <tag> 类型安全 </tag>
            
            <tag> 兼容性问题 </tag>
            
            <tag> 学习成本 </tag>
            
            <tag> 作用域限制 </tag>
            
            <tag> 类型推断 </tag>
            
            <tag> 命名冲突 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：匿名类和实例主方法</title>
      <link href="/4b00420f.html"/>
      <url>/4b00420f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="445-Unnamed-Classes-and-Instance-Main-Methods-Preview"><a href="#445-Unnamed-Classes-and-Instance-Main-Methods-Preview" class="headerlink" title="| 445: | Unnamed Classes and Instance Main Methods (Preview) |"></a>| 445: | <a href="https://openjdk.org/jeps/445">Unnamed Classes and Instance Main Methods (Preview)</a> |</h1><h2 id="1-什么是Unnamed-Classes-and-Instance-Main-Methods-Preview"><a href="#1-什么是Unnamed-Classes-and-Instance-Main-Methods-Preview" class="headerlink" title="1. 什么是Unnamed Classes and Instance Main Methods (Preview)?"></a>1. 什么是Unnamed Classes and Instance Main Methods (Preview)?</h2><p>“Unnamed Classes and Instance Main Methods” 是一个 Java 编程语言的新特性，它在 JDK 14 中引入，并在 JDK 15<br>中成为预览功能。该特性允许我们在类中定义匿名类和实例主方法。</p><p>在传统的 Java 编程中，我们只能在顶级类或静态内部类中定义 main 方法作为程序的入口点。而使用 “Unnamed Classes and Instance<br>Main Methods” 特性后，我们可以在任何类的实例中定义 main 方法，从而使得程序的入口点更加灵活。</p><h2 id="2-为什么需要Unnamed-Classes-and-Instance-Main-Methods"><a href="#2-为什么需要Unnamed-Classes-and-Instance-Main-Methods" class="headerlink" title="2. 为什么需要Unnamed Classes and Instance Main Methods?"></a>2. 为什么需要Unnamed Classes and Instance Main Methods?</h2><p>传统的 Java 程序必须将 main<br>方法定义在顶级类或静态内部类中，这限制了程序的结构和组织方式。有时候，我们可能希望将多个相关的逻辑封装在同一个类的实例中，以提高代码的可读性和可维护性。而 “<br>Unnamed Classes and Instance Main Methods” 特性正是为了满足这种需求而引入的。</p><p>通过在类的实例中定义 main 方法，我们可以更好地组织和管理程序的逻辑，减少顶级类和静态内部类的数量，使代码更加清晰和易于理解。</p><h2 id="3-Unnamed-Classes-and-Instance-Main-Methods-的实现原理"><a href="#3-Unnamed-Classes-and-Instance-Main-Methods-的实现原理" class="headerlink" title="3. Unnamed Classes and Instance Main Methods 的实现原理"></a>3. Unnamed Classes and Instance Main Methods 的实现原理</h2><p>“Unnamed Classes and Instance Main Methods” 特性的实现原理涉及到两个方面：匿名类和实例主方法。</p><h3 id="3-1-匿名类"><a href="#3-1-匿名类" class="headerlink" title="3.1 匿名类"></a>3.1 匿名类</h3><p>在 Java 中，我们可以使用匿名类来创建一个没有显式名称的类。匿名类通常用于创建临时的、只需要一次使用的类对象。它们可以继承自某个类或实现某个接口，并重写其中的方法。</p><p>匿名类的语法如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> 父类构造器(参数列表) &#123;</span><br><span class="line">    <span class="comment">// 匿名类的成员变量和方法定义</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-实例主方法"><a href="#3-2-实例主方法" class="headerlink" title="3.2 实例主方法"></a>3.2 实例主方法</h3><p>传统的 Java 程序入口点是通过静态 main 方法来定义的，而 “Unnamed Classes and Instance Main Methods” 特性允许我们在类的实例中定义<br>main 方法。</p><p>实例主方法的语法如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 主方法的代码逻辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-Unnamed-Classes-and-Instance-Main-Methods-的优点"><a href="#4-Unnamed-Classes-and-Instance-Main-Methods-的优点" class="headerlink" title="4. Unnamed Classes and Instance Main Methods 的优点"></a>4. Unnamed Classes and Instance Main Methods 的优点</h2><ul><li><strong>灵活性</strong>：通过在类的实例中定义 main 方法，程序的入口点更加灵活，可以根据需求将多个相关的逻辑封装在同一个类的实例中。</li><li><strong>可读性</strong>：将相关的逻辑组织在同一个类的实例中，使得代码更加清晰和易于理解。</li><li><strong>可维护性</strong>：减少顶级类和静态内部类的数量，简化代码结构，提高代码的可维护性。</li></ul><h2 id="5-Unnamed-Classes-and-Instance-Main-Methods-的缺点"><a href="#5-Unnamed-Classes-and-Instance-Main-Methods-的缺点" class="headerlink" title="5. Unnamed Classes and Instance Main Methods 的缺点"></a>5. Unnamed Classes and Instance Main Methods 的缺点</h2><ul><li><strong>语法复杂</strong>：匿名类和实例主方法的语法相对传统的 main 方法更加复杂，需要额外的学习成本。</li><li><strong>可读性降低</strong>：如果滥用该特性，将多个逻辑封装在同一个类的实例中可能会导致代码可读性下降。</li></ul><h2 id="6-Unnamed-Classes-and-Instance-Main-Methods-的使用示例"><a href="#6-Unnamed-Classes-and-Instance-Main-Methods-的使用示例" class="headerlink" title="6. Unnamed Classes and Instance Main Methods 的使用示例"></a>6. Unnamed Classes and Instance Main Methods 的使用示例</h2><p>下面是一个使用 “Unnamed Classes and Instance Main Methods” 特性的示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Example</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Example</span>().main(args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，我们定义了一个名为 <code>Example</code> 的类，并在其中创建了一个实例。通过调用实例的 <code>main</code><br>方法，程序的入口点被指定为该实例的 <code>main</code> 方法。</p><h2 id="7-Unnamed-Classes-and-Instance-Main-Methods-的使用注意事项"><a href="#7-Unnamed-Classes-and-Instance-Main-Methods-的使用注意事项" class="headerlink" title="7. Unnamed Classes and Instance Main Methods 的使用注意事项"></a>7. Unnamed Classes and Instance Main Methods 的使用注意事项</h2><ul><li>在使用 “Unnamed Classes and Instance Main Methods” 特性时，需要确保每个类的实例只有一个 main 方法，否则编译器将无法确定程序的入口点。</li><li>匿名类和实例主方法的语法较为复杂，需要仔细理解并遵循正确的语法规则。</li><li>虽然 “Unnamed Classes and Instance Main Methods” 特性在 JDK 15 中成为预览功能，但仍然存在一些潜在的问题和限制。在使用时需要注意这些问题，并及时反馈给开发团队。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>“Unnamed Classes and Instance Main Methods” 是 Java<br>编程语言的一个新特性，它允许我们在类的实例中定义匿名类和实例主方法。通过该特性，我们可以更灵活地组织程序的逻辑，提高代码的可读性和可维护性。然而，使用该特性需要注意语法复杂性和可读性降低的问题，并遵循正确的使用方式。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDK 21 </tag>
            
            <tag> Unnamed Classes </tag>
            
            <tag> Instance Main Methods </tag>
            
            <tag> Java programming </tag>
            
            <tag> flexibility </tag>
            
            <tag> readability </tag>
            
            <tag> maintainability </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：虚拟线程</title>
      <link href="/7fdd1ab.html"/>
      <url>/7fdd1ab.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="444-Virtual-Threads"><a href="#444-Virtual-Threads" class="headerlink" title="| 444: | Virtual Threads |"></a>| 444: | <a href="https://openjdk.org/jeps/444">Virtual Threads</a> |</h1><h2 id="1-什么是Virtual-Threads"><a href="#1-什么是Virtual-Threads" class="headerlink" title="1. 什么是Virtual Threads?"></a>1. 什么是Virtual Threads?</h2><p>Virtual Threads（虚拟线程）是Java平台的一项新功能，它旨在改进Java中的并发编程模型。传统上，Java使用基于操作系统线程的并发模型，每个线程都需要分配一个操作系统线程来执行。而Virtual<br>Threads则提供了一种更高效、更轻量级的线程模型。</p><h2 id="2-为什么需要Virtual-Threads"><a href="#2-为什么需要Virtual-Threads" class="headerlink" title="2. 为什么需要Virtual Threads?"></a>2. 为什么需要Virtual Threads?</h2><p>在传统的基于操作系统线程的并发模型中，创建和销毁线程以及在线程之间切换的开销很大。这限制了Java应用程序在处理大规模并发时的性能和扩展性。此外，由于操作系统线程的数量有限，当应用程序需要创建大量线程时，可能会导致资源耗尽或者性能下降。</p><p>Virtual<br>Threads的出现解决了这些问题。它通过引入一种轻量级的线程模型，可以在Java应用程序中创建数百万甚至数十亿个线程，而不会受到操作系统线程数量的限制。这使得Java应用程序能够更好地适应大规模并发场景，并提供更高的性能和可伸缩性。</p><h2 id="3-Virtual-Threads的实现原理"><a href="#3-Virtual-Threads的实现原理" class="headerlink" title="3. Virtual Threads的实现原理"></a>3. Virtual Threads的实现原理</h2><p>Virtual Threads的实现依赖于Java虚拟机（JVM）的协作调度器和Fork&#x2F;Join框架。它通过将多个Virtual<br>Threads映射到少量的操作系统线程上来实现高效的并发执行。</p><p>具体而言，当一个Java应用程序创建一个Virtual<br>Thread时，JVM会为其分配一个虚拟线程（也称为轻量级线程）。这些虚拟线程由协作调度器管理，并在需要时与操作系统线程进行绑定。协作调度器负责决定哪个虚拟线程可以运行以及何时切换虚拟线程。</p><p>Fork&#x2F;Join框架是Virtual Threads的另一个关键组件。它提供了一种任务并行编程模型，允许开发人员将任务分解成更小的子任务，并使用工作窃取算法来实现负载均衡。Virtual<br>Threads利用Fork&#x2F;Join框架的能力，在不同的虚拟线程之间自动地、透明地进行任务划分和调度。</p><h2 id="4-Virtual-Threads的优点"><a href="#4-Virtual-Threads的优点" class="headerlink" title="4. Virtual Threads的优点"></a>4. Virtual Threads的优点</h2><ul><li><strong>更高的性能</strong>：Virtual Threads减少了线程创建和销毁的开销，同时避免了操作系统线程数量的限制，从而提供更高的性能。</li><li><strong>更好的可伸缩性</strong>：由于Virtual Threads可以创建数百万甚至数十亿个线程，因此Java应用程序可以更好地适应大规模并发场景，并具有更好的可伸缩性。</li><li><strong>更低的资源消耗</strong>：相比于操作系统线程，Virtual Threads是轻量级的，占用更少的内存和CPU资源。</li></ul><h2 id="5-Virtual-Threads的缺点"><a href="#5-Virtual-Threads的缺点" class="headerlink" title="5. Virtual Threads的缺点"></a>5. Virtual Threads的缺点</h2><p>虽然Virtual Threads带来了许多优势，但也存在一些潜在的缺点：</p><ul><li><strong>学习成本较高</strong>：使用Virtual Threads需要对并发编程模型有一定的理解，并且需要适应新的API和开发范式。</li><li><strong>可能引入新的问题</strong>：由于Virtual Threads是一个相对较新的功能，可能会存在一些未知的问题或者不稳定性。</li></ul><h2 id="6-Virtual-Threads的使用示例"><a href="#6-Virtual-Threads的使用示例" class="headerlink" title="6. Virtual Threads的使用示例"></a>6. Virtual Threads的使用示例</h2><p>下面是一个简单的使用Virtual Threads的示例代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ThreadPoolExecutor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VirtualThreadsExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ThreadPoolExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> (ThreadPoolExecutor) Executors.newVirtualThreadExecutor();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">taskId</span> <span class="operator">=</span> i;</span><br><span class="line">            executor.execute(() -&gt; &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Task &quot;</span> + taskId + <span class="string">&quot; is running on virtual thread: &quot;</span> + Thread.currentThread().getName());</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述示例中，我们使用<code>Executors.newVirtualThreadExecutor()</code>方法创建了一个<code>ThreadPoolExecutor</code>实例，该实例可以执行Virtual<br>Threads。然后，我们通过调用<code>execute()</code>方法提交了一系列任务，每个任务都会打印当前运行的虚拟线程的名称。</p><h2 id="7-Virtual-Threads的使用注意事项"><a href="#7-Virtual-Threads的使用注意事项" class="headerlink" title="7. Virtual Threads的使用注意事项"></a>7. Virtual Threads的使用注意事项</h2><p>在使用Virtual Threads时，需要注意以下几点：</p><ul><li>虽然Virtual Threads可以创建大量线程，但过多的线程仍可能导致性能下降或资源耗尽。因此，在设计应用程序时，仍需合理控制并发度。</li><li>使用Virtual Threads时，需要遵循良好的并发编程实践，如避免共享可变状态、使用适当的同步机制等，以确保线程安全性和正确性。</li><li>在迁移现有代码到使用Virtual Threads时，需要进行一定的重构和调整，以适应新的API和开发范式。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Virtual Threads是Java平台的一项新功能，旨在改进Java中的并发编程模型。它通过引入轻量级的虚拟线程，并利用协作调度器和Fork&#x2F;Join框架来提供高效的并发执行。Virtual<br>Threads具有更高的性能、更好的可伸缩性和较低的资源消耗，但也需要学习成本较高，并且可能存在一些潜在的问题。在使用Virtual<br>Threads时，需要注意合理控制并发度、遵循并发编程实践，并进行必要的重构和调整。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：匿名模式和内容</title>
      <link href="/5699a6cc.html"/>
      <url>/5699a6cc.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="443-Unnamed-Patterns-and-Variables-Preview"><a href="#443-Unnamed-Patterns-and-Variables-Preview" class="headerlink" title="| 443: | Unnamed Patterns and Variables (Preview) |"></a>| 443: | <a href="https://openjdk.org/jeps/443">Unnamed Patterns and Variables (Preview)</a> |</h1><h2 id="1-什么是Unnamed-Patterns-and-Variables-Preview"><a href="#1-什么是Unnamed-Patterns-and-Variables-Preview" class="headerlink" title="1. 什么是Unnamed Patterns and Variables (Preview)?"></a>1. 什么是Unnamed Patterns and Variables (Preview)?</h2><p>Unnamed Patterns and Variables 是 Java 编程语言的一个新特性，它在 JDK 14 中引入，并在 JDK 15<br>中作为预览功能继续存在。该特性允许我们使用匿名模式和变量来简化代码并提高可读性。</p><h2 id="2-为什么需要Unnamed-Patterns-and-Variables"><a href="#2-为什么需要Unnamed-Patterns-and-Variables" class="headerlink" title="2. 为什么需要Unnamed Patterns and Variables?"></a>2. 为什么需要Unnamed Patterns and Variables?</h2><p>在传统的 Java 代码中，当我们需要对某个对象进行模式匹配时，通常需要创建一个临时变量来存储匹配结果。这样会导致代码冗长、可读性差，并且增加了不必要的命名负担。</p><p>而 Unnamed Patterns and Variables 的出现正是为了解决这个问题。通过使用匿名模式和变量，我们可以直接在模式匹配表达式中使用，避免了创建临时变量的麻烦，使得代码更加简洁和易于理解。</p><h2 id="3-Unnamed-Patterns-and-Variables-的实现原理"><a href="#3-Unnamed-Patterns-and-Variables-的实现原理" class="headerlink" title="3. Unnamed Patterns and Variables 的实现原理"></a>3. Unnamed Patterns and Variables 的实现原理</h2><p>Unnamed Patterns and Variables 的实现原理主要涉及两个方面：匿名模式和匿名变量。</p><h3 id="匿名模式"><a href="#匿名模式" class="headerlink" title="匿名模式"></a>匿名模式</h3><p>匿名模式是一种特殊的模式，用于表示我们只关心某个值是否满足某个条件，而不关心具体的值是什么。在匿名模式中，我们使用下划线 <code>_</code><br>来代替具体的变量名。</p><p>例如，我们可以使用匿名模式来判断一个对象是否为 null：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String _) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;obj is a non-null string&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="匿名变量"><a href="#匿名变量" class="headerlink" title="匿名变量"></a>匿名变量</h3><p>匿名变量是一种特殊的变量，用于表示我们不需要使用该变量的值。在匿名变量中，我们同样使用下划线 <code>_</code> 来代替具体的变量名。</p><p>例如，在 switch 语句中，我们可以使用匿名变量来忽略某些分支的返回值：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (dayOfWeek) &#123;</span><br><span class="line">    <span class="keyword">case</span> MONDAY, TUESDAY, WEDNESDAY, THURSDAY -&gt; System.out.println(<span class="string">&quot;Weekday&quot;</span>);</span><br><span class="line">    <span class="keyword">case</span> FRIDAY -&gt; System.out.println(<span class="string">&quot;Friday&quot;</span>);</span><br><span class="line">    <span class="keyword">case</span> SATURDAY, SUNDAY -&gt; System.out.println(<span class="string">&quot;Weekend&quot;</span>);</span><br><span class="line">    <span class="keyword">default</span> -&gt; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Invalid day of week: &quot;</span> + dayOfWeek);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-Unnamed-Patterns-and-Variables-的优点"><a href="#4-Unnamed-Patterns-and-Variables-的优点" class="headerlink" title="4. Unnamed Patterns and Variables 的优点"></a>4. Unnamed Patterns and Variables 的优点</h2><ul><li><strong>简化代码</strong>：通过使用匿名模式和变量，可以减少临时变量的创建，使得代码更加简洁。</li><li><strong>提高可读性</strong>：匿名模式和变量能够直接表达我们关心的条件，避免了命名的繁琐，使得代码更易于理解。</li></ul><h2 id="5-Unnamed-Patterns-and-Variables-的缺点"><a href="#5-Unnamed-Patterns-and-Variables-的缺点" class="headerlink" title="5. Unnamed Patterns and Variables 的缺点"></a>5. Unnamed Patterns and Variables 的缺点</h2><p>由于 Unnamed Patterns and Variables 目前仍处于预览阶段，因此存在以下一些限制和潜在问题：</p><ul><li><strong>兼容性问题</strong>：由于该特性是在 JDK 14 中引入的，并且仍处于预览阶段，因此可能存在与旧版本 Java 不兼容的问题。</li><li><strong>语法限制</strong>：匿名模式和变量只能用于某些特定的上下文中，不能在所有地方使用。例如，在 lambda 表达式、方法引用等场景中暂时还无法使用。</li></ul><h2 id="6-Unnamed-Patterns-and-Variables-的使用示例"><a href="#6-Unnamed-Patterns-and-Variables-的使用示例" class="headerlink" title="6. Unnamed Patterns and Variables 的使用示例"></a>6. Unnamed Patterns and Variables 的使用示例</h2><p>以下是一个使用匿名模式和变量的示例代码，用于判断一个对象是否为非空字符串：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String _) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;obj is a non-null string&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-Unnamed-Patterns-and-Variables-的使用注意事项"><a href="#7-Unnamed-Patterns-and-Variables-的使用注意事项" class="headerlink" title="7. Unnamed Patterns and Variables 的使用注意事项"></a>7. Unnamed Patterns and Variables 的使用注意事项</h2><p>在使用 Unnamed Patterns and Variables 时，需要注意以下几点：</p><ul><li>匿名模式和变量只能用于表示我们不关心具体值的情况，如果需要获取具体的值，则应该使用普通的命名模式和变量。</li><li>在一些特殊的上下文中，如 lambda 表达式、方法引用等，目前还无法使用匿名模式和变量。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Unnamed Patterns and Variables 是 Java<br>编程语言的一个新特性，它通过引入匿名模式和变量来简化代码并提高可读性。虽然该特性目前仍处于预览阶段，并存在一些限制和潜在问题，但它为我们编写更简洁、易读的代码提供了一种新的方式。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDK 21 </tag>
            
            <tag> 使用示例 </tag>
            
            <tag> 使用注意事项 </tag>
            
            <tag> 总结 </tag>
            
            <tag> 兼容性问题 </tag>
            
            <tag> 语法限制 </tag>
            
            <tag> Unnamed Patterns and Variables </tag>
            
            <tag> 匿名模式 </tag>
            
            <tag> 匿名变量 </tag>
            
            <tag> 简化代码 </tag>
            
            <tag> 提高可读性 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：ForeignFunctionAndMemoryApi</title>
      <link href="/d0d63d.html"/>
      <url>/d0d63d.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="442-Foreign-Function-Memory-API-Third-Preview"><a href="#442-Foreign-Function-Memory-API-Third-Preview" class="headerlink" title="| 442: | Foreign Function &amp; Memory API (Third Preview) |"></a>| 442: | <a href="https://openjdk.org/jeps/442">Foreign Function &amp; Memory API (Third Preview)</a> |</h1><h2 id="1-什么是Foreign-Function-Memory-API-Third-Preview"><a href="#1-什么是Foreign-Function-Memory-API-Third-Preview" class="headerlink" title="1. 什么是Foreign Function &amp; Memory API (Third Preview)?"></a>1. 什么是Foreign Function &amp; Memory API (Third Preview)?</h2><p>Foreign Function &amp; Memory API 是 Java 平台的一个功能，它允许开发者直接与本地代码进行交互，并且可以在 Java 中操作本地内存。这个功能最初在<br>JDK 14 的时候以 JEP 383 的形式引入了第一次预览版，然后在 JDK 15 中进一步改进并发布了第二次预览版（JEP 393），现在在 JDK 21<br>中发布了第三次预览版（JEP 442）。</p><h2 id="2-为什么需要Foreign-Function-Memory-API"><a href="#2-为什么需要Foreign-Function-Memory-API" class="headerlink" title="2. 为什么需要Foreign Function &amp; Memory API?"></a>2. 为什么需要Foreign Function &amp; Memory API?</h2><p>Foreign Function &amp; Memory API 的出现主要是为了解决以下几个问题：</p><ul><li><strong>与本地代码的无缝集成</strong>：有些场景下，我们可能需要调用本地库或者系统级别的函数，例如使用硬件加速、调用底层操作系统的特定功能等。而<br>Foreign Function &amp; Memory API 可以使得 Java 程序能够直接调用本地函数，从而实现与本地代码的无缝集成。</li><li><strong>提高性能</strong>：通过直接操作本地内存，可以避免数据拷贝和类型转换带来的性能损耗，从而提高程序的执行效率。</li><li><strong>扩展现有 Java 库的功能</strong>：Foreign Function &amp; Memory API 提供了一种机制，可以将本地库中的函数包装成 Java 接口，从而方便地扩展现有的<br>Java 库的功能。</li></ul><h2 id="3-Foreign-Function-Memory-API-的实现原理"><a href="#3-Foreign-Function-Memory-API-的实现原理" class="headerlink" title="3. Foreign Function &amp; Memory API 的实现原理"></a>3. Foreign Function &amp; Memory API 的实现原理</h2><p>Foreign Function &amp; Memory API 的实现主要依赖于以下几个关键技术：</p><ul><li><strong>JNI（Java Native Interface）</strong>：JNI 是 Java 平台提供的一种机制，用于在 Java 程序中调用本地代码。Foreign Function &amp; Memory<br>API 利用 JNI 提供的能力，使得 Java 程序可以直接调用本地函数。</li><li><strong>内存管理</strong>：Foreign Function &amp; Memory API 允许开发者直接操作本地内存，包括分配、释放和读写等操作。这需要对内存进行有效的管理，以确保安全性和可靠性。</li><li><strong>类型映射</strong>：由于 Java 和本地代码使用不同的数据类型表示数据，因此需要进行类型映射。Foreign Function &amp; Memory API<br>提供了一套规则和工具，用于将 Java 类型与本地类型进行转换。</li></ul><h2 id="4-Foreign-Function-Memory-API-的优点"><a href="#4-Foreign-Function-Memory-API-的优点" class="headerlink" title="4. Foreign Function &amp; Memory API 的优点"></a>4. Foreign Function &amp; Memory API 的优点</h2><ul><li><strong>无缝集成</strong>：Foreign Function &amp; Memory API 可以使得 Java 程序能够直接调用本地函数，从而实现与本地代码的无缝集成。</li><li><strong>高性能</strong>：通过直接操作本地内存，避免了数据拷贝和类型转换带来的性能损耗，从而提高程序的执行效率。</li><li><strong>灵活性</strong>：Foreign Function &amp; Memory API 提供了丰富的功能和灵活的接口，可以满足不同场景下的需求。</li></ul><h2 id="5-Foreign-Function-Memory-API-的缺点"><a href="#5-Foreign-Function-Memory-API-的缺点" class="headerlink" title="5. Foreign Function &amp; Memory API 的缺点"></a>5. Foreign Function &amp; Memory API 的缺点</h2><ul><li><strong>安全性风险</strong>：直接操作本地内存可能会带来一些安全风险，例如内存泄漏、访问非法内存等。因此，在使用 Foreign Function &amp;<br>Memory API 时需要谨慎处理，并遵循相关的安全规范。</li><li><strong>复杂性</strong>：Foreign Function &amp; Memory API 涉及到与本地代码的交互和内存管理等复杂的问题，对开发者的要求较高，需要具备一定的底层编程知识和经验。</li></ul><h2 id="6-Foreign-Function-Memory-API-的使用示例"><a href="#6-Foreign-Function-Memory-API-的使用示例" class="headerlink" title="6. Foreign Function &amp; Memory API 的使用示例"></a>6. Foreign Function &amp; Memory API 的使用示例</h2><p>以下是一个简单的示例，展示了如何使用 Foreign Function &amp; Memory API 调用本地函数：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jdk.incubator.foreign.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NativeFunctionExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">MemorySegment</span> <span class="variable">segment</span> <span class="operator">=</span> MemorySegment.allocateNative(<span class="number">4</span>)) &#123;</span><br><span class="line">            <span class="type">CLinker</span> <span class="variable">linker</span> <span class="operator">=</span> CLinker.getInstance();</span><br><span class="line">            <span class="type">FunctionDescriptor</span> <span class="variable">descriptor</span> <span class="operator">=</span> FunctionDescriptor.of(CLinker.C_INT, CLinker.C_POINTER);</span><br><span class="line">            <span class="type">LibraryLookup</span> <span class="variable">lookup</span> <span class="operator">=</span> LibraryLookup.ofDefault();</span><br><span class="line">            <span class="type">Symbol</span> <span class="variable">symbol</span> <span class="operator">=</span> lookup.lookup(<span class="string">&quot;printf&quot;</span>);</span><br><span class="line">            <span class="type">FunctionHandle</span> <span class="variable">handle</span> <span class="operator">=</span> linker.downcallHandle(symbol, descriptor);</span><br><span class="line">            </span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">            MemoryAccess.setCString(segment.baseAddress(), message);</span><br><span class="line">            <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> (<span class="type">int</span>) handle.invokeExact(segment.baseAddress());</span><br><span class="line">            </span><br><span class="line">            System.out.println(<span class="string">&quot;Result: &quot;</span> + result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述示例中，我们使用 Foreign Function &amp; Memory API 调用了本地的 printf 函数，并将结果打印出来。</p><h2 id="7-Foreign-Function-Memory-API-的使用注意事项"><a href="#7-Foreign-Function-Memory-API-的使用注意事项" class="headerlink" title="7. Foreign Function &amp; Memory API 的使用注意事项"></a>7. Foreign Function &amp; Memory API 的使用注意事项</h2><ul><li>在使用 Foreign Function &amp; Memory API 时，需要确保本地函数和库已经正确安装并可用。</li><li>对于直接操作本地内存的情况，需要特别注意内存管理和安全性问题，避免出现内存泄漏、访问非法内存等问题。</li><li>使用 Foreign Function &amp; Memory API 需要谨慎处理异常，以确保程序的稳定性和可靠性。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Foreign Function &amp; Memory API 是 Java 平台提供的一种机制，可以使得 Java 程序能够直接调用本地函数，并且可以在 Java<br>中操作本地内存。它通过 JNI 技术实现与本地代码的无缝集成，并提供了高性能和灵活性。然而，在使用 Foreign Function &amp; Memory API<br>时需要注意安全性和复杂性等问题，以确保程序的稳定性和可靠性。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Foreign Function &amp; Memory API </tag>
            
            <tag> JDK 21 </tag>
            
            <tag> Java Native Interface </tag>
            
            <tag> 无缝集成 </tag>
            
            <tag> 性能提升 </tag>
            
            <tag> 扩展现有Java库 </tag>
            
            <tag> 实现原理 </tag>
            
            <tag> 内存管理 </tag>
            
            <tag> 类型映射 </tag>
            
            <tag> 优点 </tag>
            
            <tag> 缺点 </tag>
            
            <tag> 使用示例 </tag>
            
            <tag> 使用注意事项 </tag>
            
            <tag> 总结 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：增强模式匹配</title>
      <link href="/8a2193f6.html"/>
      <url>/8a2193f6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="441-Pattern-Matching-for-switch"><a href="#441-Pattern-Matching-for-switch" class="headerlink" title="| 441: | Pattern Matching for switch |"></a>| 441: | <a href="https://openjdk.org/jeps/441">Pattern Matching for switch</a> |</h1><h2 id="1-什么是-Pattern-Matching-for-switch"><a href="#1-什么是-Pattern-Matching-for-switch" class="headerlink" title="1. 什么是 Pattern Matching for switch?"></a>1. 什么是 Pattern Matching for switch?</h2><p>Pattern Matching for switch 是 Java 14 中引入的一个新特性，它允许在 switch 语句中使用模式匹配。通过这个特性，我们可以更方便地对变量进行类型判断和提取。</p><h2 id="2-为什么需要-Pattern-Matching-for-switch"><a href="#2-为什么需要-Pattern-Matching-for-switch" class="headerlink" title="2. 为什么需要 Pattern Matching for switch?"></a>2. 为什么需要 Pattern Matching for switch?</h2><p>在之前的 Java 版本中，如果我们想要根据不同的类型执行不同的逻辑，通常需要使用多个 if-else 或者 switch-case<br>来进行判断。这样的代码结构比较冗长，并且容易出错。而 Pattern Matching for switch 的引入，使得我们能够更简洁、清晰地处理这种情况。</p><h2 id="3-Pattern-Matching-for-switch-的实现原理"><a href="#3-Pattern-Matching-for-switch-的实现原理" class="headerlink" title="3. Pattern Matching for switch 的实现原理"></a>3. Pattern Matching for switch 的实现原理</h2><p>Pattern Matching for switch 的实现原理主要涉及两个方面：模式匹配和类型推断。</p><h3 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h3><p>模式匹配是指将某个值与一系列模式进行比较，以确定是否匹配。在 Pattern Matching for switch 中，我们可以使用关键字 <code>case</code><br>后跟上模式来进行匹配。例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">switch</span> (obj) &#123;</span><br><span class="line">    <span class="keyword">case</span> String s -&gt; s.length();</span><br><span class="line">    <span class="keyword">case</span> Integer i -&gt; i * <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">default</span> -&gt; -<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>在上述代码中，<code>case String s</code> 和 <code>case Integer i</code> 就是模式，它们分别用于匹配字符串和整数类型的对象。</p><h3 id="类型推断"><a href="#类型推断" class="headerlink" title="类型推断"></a>类型推断</h3><p>类型推断是指根据上下文信息，自动推断出某个表达式的类型。在 Pattern Matching for switch 中，我们可以使用 <code>var</code><br>关键字来进行类型推断。例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">switch</span> (obj) &#123;</span><br><span class="line">    <span class="keyword">case</span> String s -&gt; s.length();</span><br><span class="line">    <span class="keyword">case</span> Integer i -&gt; i * <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">default</span> -&gt; -<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>在上述代码中，<code>var</code> 关键字用于推断 <code>result</code> 的类型为 <code>int</code>。</p><h2 id="4-Pattern-Matching-for-switch-的优点"><a href="#4-Pattern-Matching-for-switch-的优点" class="headerlink" title="4. Pattern Matching for switch 的优点"></a>4. Pattern Matching for switch 的优点</h2><ul><li>简化了对变量类型的判断和提取逻辑，使代码更加简洁、清晰。</li><li>减少了重复的代码，提高了开发效率。</li><li>增强了代码的可读性和可维护性。</li></ul><h2 id="5-Pattern-Matching-for-switch-的缺点"><a href="#5-Pattern-Matching-for-switch-的缺点" class="headerlink" title="5. Pattern Matching for switch 的缺点"></a>5. Pattern Matching for switch 的缺点</h2><ul><li>只能用于 switch 语句中，不能直接用于 if-else 结构。</li><li>目前只支持基本数据类型和引用类型的模式匹配，不支持其他特殊类型（如枚举、数组等）的模式匹配。</li></ul><h2 id="6-Pattern-Matching-for-switch-的使用示例"><a href="#6-Pattern-Matching-for-switch-的使用示例" class="headerlink" title="6. Pattern Matching for switch 的使用示例"></a>6. Pattern Matching for switch 的使用示例</h2><p>下面是一个使用 Pattern Matching for switch 的示例代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">process</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> (obj) &#123;</span><br><span class="line">        <span class="keyword">case</span> String s -&gt; System.out.println(<span class="string">&quot;String: &quot;</span> + s);</span><br><span class="line">        <span class="keyword">case</span> Integer i -&gt; System.out.println(<span class="string">&quot;Integer: &quot;</span> + i);</span><br><span class="line">        <span class="keyword">case</span> Double d -&gt; System.out.println(<span class="string">&quot;Double: &quot;</span> + d);</span><br><span class="line">        <span class="keyword">default</span> -&gt; System.out.println(<span class="string">&quot;Unknown type&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述代码中，根据传入的对象类型不同，会执行相应的逻辑。</p><h2 id="7-Pattern-Matching-for-switch-的使用注意事项"><a href="#7-Pattern-Matching-for-switch-的使用注意事项" class="headerlink" title="7. Pattern Matching for switch 的使用注意事项"></a>7. Pattern Matching for switch 的使用注意事项</h2><ul><li>模式匹配是按照 <code>case</code> 的顺序进行匹配的，因此需要将更具体的模式放在前面。</li><li>如果没有匹配到任何模式，则会执行 <code>default</code> 分支的逻辑。</li><li>在一个 <code>switch</code> 块内部，每个模式只能出现一次，否则会编译报错。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Pattern Matching for switch 是 Java 14 中引入的一个新特性，它允许在 switch<br>语句中使用模式匹配。通过这个特性，我们可以更方便地对变量进行类型判断和提取。它简化了对变量类型的判断和提取逻辑，使代码更加简洁、清晰，并且增强了代码的可读性和可维护性。但需要注意的是，目前只支持基本数据类型和引用类型的模式匹配，不支持其他特殊类型的模式匹配。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发效率 </tag>
            
            <tag> 缺点 </tag>
            
            <tag> 模式匹配 </tag>
            
            <tag> 可读性 </tag>
            
            <tag> 类型推断 </tag>
            
            <tag> switch语句 </tag>
            
            <tag> Java 14 </tag>
            
            <tag> 类型判断 </tag>
            
            <tag> 简洁 </tag>
            
            <tag> 清晰 </tag>
            
            <tag> 可维护性 </tag>
            
            <tag> 示例代码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：RedordPatterns</title>
      <link href="/4a9cec5e.html"/>
      <url>/4a9cec5e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h2 id="1-什么是Record-Patterns"><a href="#1-什么是Record-Patterns" class="headerlink" title="1. 什么是Record Patterns?"></a>1. 什么是Record Patterns?</h2><p>Record Patterns 是 Java 16 中引入的一个新特性，它允许我们在模式匹配中使用记录类型（record types）。记录类型是一种新的类声明形式，用于定义不可变的数据对象。而 Record Patterns 则提供了一种简洁的方式来进行模式匹配，并且可以方便地从记录类型中提取字段值。</p><h2 id="2-为什么需要Record-Patterns"><a href="#2-为什么需要Record-Patterns" class="headerlink" title="2. 为什么需要Record Patterns?"></a>2. 为什么需要Record Patterns?</h2><p>在传统的 Java 编程中，当我们需要对某个对象的属性进行判断和提取时，通常需要手动编写大量的代码来完成这些操作。而引入 Record Patterns 可以极大地简化这个过程，使得代码更加清晰、简洁，并且减少了出错的可能性。</p><h2 id="3-Record-Patterns-的实现原理"><a href="#3-Record-Patterns-的实现原理" class="headerlink" title="3. Record Patterns 的实现原理"></a>3. Record Patterns 的实现原理</h2><p>Record Patterns 的实现原理主要涉及两个方面：记录类型和模式匹配。</p><h3 id="记录类型"><a href="#记录类型" class="headerlink" title="记录类型"></a>记录类型</h3><p>记录类型是一种新的类声明形式，通过 <code>record</code> 关键字来定义。它自动提供了以下功能：</p><ul><li>自动生成私有 final 字段，并根据构造函数参数初始化这些字段。</li><li>自动生成 <code>equals()</code>、<code>hashCode()</code> 和 <code>toString()</code> 方法。</li><li>提供了一种紧凑的语法来定义字段和构造函数。</li></ul><h3 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h3><p>模式匹配是指根据给定的模式来匹配某个对象，并执行相应的操作。在 Record Patterns 中，我们可以使用 <code>instanceof</code><br>关键字和模式变量来进行模式匹配。</p><p>具体地说，当我们使用 Record Patterns<br>进行模式匹配时，编译器会自动为记录类型生成一个模式匹配方法。这个方法接受一个对象作为参数，并根据给定的模式进行匹配。如果匹配成功，则将字段值绑定到相应的模式变量中，从而可以在后续代码中使用。</p><h2 id="4-Record-Patterns-的优点"><a href="#4-Record-Patterns-的优点" class="headerlink" title="4. Record Patterns 的优点"></a>4. Record Patterns 的优点</h2><p>Record Patterns 带来了以下几个优点：</p><ul><li><strong>简洁性</strong>：使用 Record Patterns 可以大大简化对记录类型的模式匹配操作，减少冗余代码。</li><li><strong>可读性</strong>：Record Patterns 提供了一种直观、清晰的语法，使得代码更易于理解和维护。</li><li><strong>安全性</strong>：由于 Record Patterns 自动生成了 equals() 和 hashCode() 方法，可以避免手动实现这些方法时可能出现的错误。</li><li><strong>提高开发效率</strong>：Record Patterns 可以减少重复劳动，提高开发效率。</li></ul><h2 id="5-Record-Patterns-的缺点"><a href="#5-Record-Patterns-的缺点" class="headerlink" title="5. Record Patterns 的缺点"></a>5. Record Patterns 的缺点</h2><p>尽管 Record Patterns 带来了很多好处，但也存在一些限制和缺点：</p><ul><li><strong>不可变性</strong>：记录类型是不可变的，即字段值不能被修改。这意味着如果需要修改某个字段的值，就必须创建一个新的记录对象。</li><li><strong>局限性</strong>：Record Patterns 目前只能用于记录类型，不能用于其他类。</li><li><strong>兼容性</strong>：由于 Record Patterns 是在 Java 16 中引入的新特性，因此需要使用 Java 16 或更高版本才能使用。</li></ul><h2 id="6-Record-Patterns-的使用示例"><a href="#6-Record-Patterns-的使用示例" class="headerlink" title="6. Record Patterns 的使用示例"></a>6. Record Patterns 的使用示例</h2><p>下面是一个简单的示例，展示了如何使用 Record Patterns 进行模式匹配：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Alice&quot;</span>, <span class="number">25</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (person <span class="keyword">instanceof</span> Person p) &#123;</span><br><span class="line">            System.out.println(p.name()); <span class="comment">// 输出 &quot;Alice&quot;</span></span><br><span class="line">            System.out.println(p.age()); <span class="comment">// 输出 25</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，我们定义了一个名为 <code>Person</code> 的记录类型，并创建了一个 <code>Person</code> 对象。然后，我们使用 Record Patterns<br>进行模式匹配，将字段值绑定到模式变量 <code>p</code> 中，并输出字段值。</p><h2 id="7-Record-Patterns-的使用注意事项"><a href="#7-Record-Patterns-的使用注意事项" class="headerlink" title="7. Record Patterns 的使用注意事项"></a>7. Record Patterns 的使用注意事项</h2><p>在使用 Record Patterns 时，需要注意以下几点：</p><ul><li>记录类型的字段默认是 final 的，即不能被修改。如果需要修改某个字段的值，就必须创建一个新的记录对象。</li><li>记录类型的构造函数参数和字段名称要一致，否则会导致编译错误。</li><li>模式匹配方法的命名规则是 <code>match&lt;RecordTypeName&gt;</code>，例如 <code>matchPerson()</code>。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Record Patterns 是 Java 16 引入的一个新特性，它提供了一种简洁、清晰的方式来进行模式匹配，并且可以方便地从记录类型中提取字段值。使用<br>Record Patterns 可以使代码更加简洁、可读，并提高开发效率。然而，由于记录类型是不可变的，因此在修改字段值时需要创建新的对象。同时，Record<br>Patterns 目前只能用于记录类型，不能用于其他类。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发效率 </tag>
            
            <tag> 总结 </tag>
            
            <tag> Record Patterns </tag>
            
            <tag> Java 16 </tag>
            
            <tag> 模式匹配 </tag>
            
            <tag> 记录类型 </tag>
            
            <tag> 简洁性 </tag>
            
            <tag> 可读性 </tag>
            
            <tag> 安全性 </tag>
            
            <tag> 不可变性 </tag>
            
            <tag> 局限性 </tag>
            
            <tag> 兼容性 </tag>
            
            <tag> 示例 </tag>
            
            <tag> 注意事项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：ZGC</title>
      <link href="/22a0c719.html"/>
      <url>/22a0c719.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="439-Generational-ZGC"><a href="#439-Generational-ZGC" class="headerlink" title="| 439: | Generational ZGC |"></a>| 439: | <a href="https://openjdk.org/jeps/439">Generational ZGC</a> |</h1><h2 id="1-什么是Generational-ZGC"><a href="#1-什么是Generational-ZGC" class="headerlink" title="1. 什么是Generational ZGC?"></a>1. 什么是Generational ZGC?</h2><p>Generational ZGC（Z Garbage Collector）是一种用于Java虚拟机（JVM）的垃圾回收器。它是OpenJDK项目中的一个特性，旨在提供低延迟和高吞吐量的垃圾回收解决方案。</p><h2 id="2-为什么需要Generational-ZGC"><a href="#2-为什么需要Generational-ZGC" class="headerlink" title="2. 为什么需要Generational ZGC?"></a>2. 为什么需要Generational ZGC?</h2><p>传统的垃圾回收器在处理大型堆内存时可能会导致长时间的停顿，这对于需要快速响应和低延迟的应用程序来说是不可接受的。Generational<br>ZGC的目标是减少这些停顿时间，并且能够处理非常大的堆内存。</p><h2 id="3-Generational-ZGC的实现原理"><a href="#3-Generational-ZGC的实现原理" class="headerlink" title="3. Generational ZGC的实现原理"></a>3. Generational ZGC的实现原理</h2><p>Generational ZGC基于分代垃圾回收的概念，将堆内存划分为多个代。其中包括Young Generation（年轻代）和Old<br>Generation（老年代）。具体的实现原理如下：</p><h3 id="年轻代（Young-Generation）"><a href="#年轻代（Young-Generation）" class="headerlink" title="年轻代（Young Generation）"></a>年轻代（Young Generation）</h3><ul><li>年轻代使用了Region的概念，将整个年轻代划分为多个大小相等的区域。</li><li>每个区域都有一个指针指向下一个可用的区域，形成一个链表结构。</li><li>当对象被创建时，它们首先被分配到年轻代的某个区域中。</li><li>当一个区域被填满时，会触发一次年轻代垃圾回收（Minor GC）。</li><li>Minor GC使用了并行和压缩算法来回收不再使用的对象。</li></ul><h3 id="老年代（Old-Generation）"><a href="#老年代（Old-Generation）" class="headerlink" title="老年代（Old Generation）"></a>老年代（Old Generation）</h3><ul><li>老年代是存放生命周期较长的对象的区域。</li><li>当一个对象在年轻代经历了多次垃圾回收后仍然存活，它将被晋升到老年代。</li><li>当老年代空间不足时，会触发一次老年代垃圾回收（Major GC）。</li><li>Major GC使用了并发标记和并行清理算法来回收不再使用的对象。</li></ul><h3 id="并发处理"><a href="#并发处理" class="headerlink" title="并发处理"></a>并发处理</h3><p>Generational ZGC采用了并发处理的方式来减少停顿时间。具体包括：</p><ul><li>年轻代垃圾回收过程中，应用程序可以继续执行。</li><li>在老年代垃圾回收过程中，应用程序也可以继续执行，只有在最后的清理阶段才会产生短暂的停顿。</li></ul><h2 id="4-Generational-ZGC的优点"><a href="#4-Generational-ZGC的优点" class="headerlink" title="4. Generational ZGC的优点"></a>4. Generational ZGC的优点</h2><ul><li><strong>低延迟</strong>：Generational ZGC通过并发处理和分代回收的策略，实现了非常低的停顿时间，适合对响应时间要求高的应用场景。</li><li><strong>高吞吐量</strong>：Generational ZGC在尽可能减少停顿时间的同时，也能保持较高的垃圾回收吞吐量。</li><li><strong>大堆支持</strong>：Generational ZGC可以处理非常大的堆内存，适用于需要大内存容量的应用程序。</li></ul><h2 id="5-Generational-ZGC的缺点"><a href="#5-Generational-ZGC的缺点" class="headerlink" title="5. Generational ZGC的缺点"></a>5. Generational ZGC的缺点</h2><ul><li><strong>性能开销</strong>：由于并发处理和分代回收的策略，Generational ZGC会带来一定的性能开销。这主要体现在CPU和内存的使用上。</li><li><strong>配置复杂</strong>：Generational ZGC有一些与性能相关的配置参数，需要根据具体场景进行调整，对于不熟悉的用户来说可能比较复杂。</li></ul><h2 id="6-Generational-ZGC的使用示例"><a href="#6-Generational-ZGC的使用示例" class="headerlink" title="6. Generational ZGC的使用示例"></a>6. Generational ZGC的使用示例</h2><p>以下是一个简单的Java代码示例，展示了如何启用Generational ZGC：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -XX:+UnlockExperimentalVMOptions -XX:+UseZGC YourApplication</span><br></pre></td></tr></table></figure><h2 id="7-Generational-ZGC的使用注意事项"><a href="#7-Generational-ZGC的使用注意事项" class="headerlink" title="7. Generational ZGC的使用注意事项"></a>7. Generational ZGC的使用注意事项</h2><ul><li>Generational ZGC是OpenJDK项目中的新特性，虽然已经相当稳定，但仍然建议在生产环境中进行充分测试。</li><li>在使用Generational ZGC时，建议监控系统资源使用情况，以便及时调整配置参数或采取其他措施来优化性能。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Generational ZGC是一种用于Java虚拟机的垃圾回收器，旨在提供低延迟和高吞吐量的垃圾回收解决方案。它通过并发处理和分代回收的策略，实现了非常低的停顿时间，并且能够处理非常大的堆内存。然而，使用Generational<br>ZGC需要注意性能开销和配置复杂性。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 垃圾回收器 </tag>
            
            <tag> 低延迟 </tag>
            
            <tag> 使用示例 </tag>
            
            <tag> 使用注意事项 </tag>
            
            <tag> Generational ZGC </tag>
            
            <tag> Java虚拟机 </tag>
            
            <tag> 高吞吐量 </tag>
            
            <tag> 堆内存 </tag>
            
            <tag> 年轻代 </tag>
            
            <tag> 老年代 </tag>
            
            <tag> 并发处理 </tag>
            
            <tag> 性能开销 </tag>
            
            <tag> 配置复杂 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：SequenceCollection</title>
      <link href="/369b115a.html"/>
      <url>/369b115a.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="431-Sequenced-Collections"><a href="#431-Sequenced-Collections" class="headerlink" title="| 431: | Sequenced Collections |"></a>| 431: | <a href="https://openjdk.org/jeps/431">Sequenced Collections</a> |</h1><h1 id="Sequenced-Collections"><a href="#Sequenced-Collections" class="headerlink" title="Sequenced Collections"></a>Sequenced Collections</h1><h2 id="1-什么是Sequenced-Collections？"><a href="#1-什么是Sequenced-Collections？" class="headerlink" title="1. 什么是Sequenced Collections？"></a>1. 什么是Sequenced Collections？</h2><p>Sequenced Collections是Java中的一个新特性，它是通过JEP 431引入的。Sequenced<br>Collections是一种新的集合类型，它提供了一种有序的、线程安全的集合实现。它的目标是提供一种高效的、可扩展的有序集合，以满足在多线程环境下处理大量数据的需求。</p><h2 id="2-为什么需要Sequenced-Collections？"><a href="#2-为什么需要Sequenced-Collections？" class="headerlink" title="2. 为什么需要Sequenced Collections？"></a>2. 为什么需要Sequenced Collections？</h2><p>在并发编程中，处理大量数据时，有序集合是非常常见的需求。然而，Java标准库中的集合类（如ArrayList、LinkedList等）并不是线程安全的，因此在多线程环境下使用它们可能会导致数据不一致的问题。为了解决这个问题，开发人员通常需要使用同步机制（如synchronized关键字或Lock对象）来保证集合的线程安全性，但这会带来额外的开销和复杂性。</p><p>Sequenced Collections的目标就是提供一种高效的、可扩展的有序集合，以解决在多线程环境下处理大量数据时的线程安全问题。</p><h2 id="3-Sequenced-Collections的实现原理"><a href="#3-Sequenced-Collections的实现原理" class="headerlink" title="3. Sequenced Collections的实现原理"></a>3. Sequenced Collections的实现原理</h2><p>Sequenced Collections的实现基于一种称为”Sequenced Locks”的机制。Sequenced<br>Locks是一种特殊的锁机制，它允许多个线程同时读取集合中的数据，但只允许一个线程进行写操作。这种机制可以提高并发性能，同时保证数据的一致性。</p><p>在Sequenced<br>Collections中，每个元素都有一个唯一的序列号，用于标识元素的顺序。读操作可以并发进行，而写操作则需要获取锁来保证原子性。当一个线程进行写操作时，其他线程可以继续读取集合中的数据，但不能进行写操作，直到写操作完成。</p><h2 id="4-Sequenced-Collections的优点"><a href="#4-Sequenced-Collections的优点" class="headerlink" title="4. Sequenced Collections的优点"></a>4. Sequenced Collections的优点</h2><ul><li><strong>线程安全</strong>：Sequenced Collections提供了线程安全的集合实现，可以在多线程环境下安全地访问和修改集合中的数据。</li><li><strong>高效性能</strong>：Sequenced Collections使用了Sequenced Locks机制，可以提高并发性能，同时保证数据的一致性。</li><li><strong>可扩展性</strong>：Sequenced Collections的设计考虑了可扩展性，可以处理大量数据的并发访问。</li></ul><h2 id="5-Sequenced-Collections的缺点"><a href="#5-Sequenced-Collections的缺点" class="headerlink" title="5. Sequenced Collections的缺点"></a>5. Sequenced Collections的缺点</h2><ul><li><strong>额外开销</strong>：Sequenced Collections的实现需要维护元素的序列号和锁机制，这会带来一定的额外开销。</li><li><strong>写操作的延迟</strong>：由于写操作需要获取锁来保证原子性，可能会导致其他线程在写操作完成之前无法进行写操作。</li></ul><h2 id="6-Sequenced-Collections的使用示例"><a href="#6-Sequenced-Collections的使用示例" class="headerlink" title="6. Sequenced Collections的使用示例"></a>6. Sequenced Collections的使用示例</h2><p>下面是一个使用Sequenced Collections的简单示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.SequencedHashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SequencedCollectionsExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SequencedHashMap&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">SequencedHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 添加元素</span></span><br><span class="line">        map.put(<span class="number">1</span>, <span class="string">&quot;Apple&quot;</span>);</span><br><span class="line">        map.put(<span class="number">2</span>, <span class="string">&quot;Banana&quot;</span>);</span><br><span class="line">        map.put(<span class="number">3</span>, <span class="string">&quot;Orange&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取元素</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fruit</span> <span class="operator">=</span> map.get(<span class="number">2</span>);</span><br><span class="line">        System.out.println(fruit); <span class="comment">// 输出: Banana</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 遍历元素</span></span><br><span class="line">        map.forEach((key, value) -&gt; System.out.println(key + <span class="string">&quot;: &quot;</span> + value));</span><br><span class="line">        <span class="comment">// 输出:</span></span><br><span class="line">        <span class="comment">// 1: Apple</span></span><br><span class="line">        <span class="comment">// 2: Banana</span></span><br><span class="line">        <span class="comment">// 3: Orange</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的示例中，我们使用了SequencedHashMap来创建一个有序的、线程安全的集合。我们可以使用put方法添加元素，使用get方法获取元素，使用forEach方法遍历元素。</p><h2 id="7-Sequenced-Collections的其他注意事项"><a href="#7-Sequenced-Collections的其他注意事项" class="headerlink" title="7. Sequenced Collections的其他注意事项"></a>7. Sequenced Collections的其他注意事项</h2><ul><li>Sequenced Collections是Java标准库的一部分，从Java 17开始引入。</li><li>Sequenced Collections提供了多种集合类型，如SequencedHashMap、SequencedArrayList等。</li><li>Sequenced Collections可以与其他Java集合类（如ArrayList、LinkedList等）一起使用，以满足不同的需求。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Sequenced Collections是Java中的一个新特性，它提供了一种有序的、线程安全的集合实现。它通过使用Sequenced<br>Locks机制来保证线程安全性和并发性能。Sequenced Collections具有高效性能、可扩展性等优点，但也存在额外开销和写操作延迟的缺点。在使用Sequenced<br>Collections时，我们可以创建SequencedHashMap、SequencedArrayList等集合类型，并使用put、get、forEach等方法来操作集合中的数据。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 有序集合 </tag>
            
            <tag> Sequenced Collections </tag>
            
            <tag> JEP 431 </tag>
            
            <tag> 线程安全 </tag>
            
            <tag> 并发编程 </tag>
            
            <tag> 集合类型 </tag>
            
            <tag> Sequenced Locks </tag>
            
            <tag> 并发性能 </tag>
            
            <tag> 可扩展性 </tag>
            
            <tag> 额外开销 </tag>
            
            <tag> 写操作延迟 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新内容：字符串模板</title>
      <link href="/f40d87a0.html"/>
      <url>/f40d87a0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="430-String-Templates-Preview"><a href="#430-String-Templates-Preview" class="headerlink" title="| 430: | String Templates (Preview) |"></a>| 430: | <a href="https://openjdk.org/jeps/430">String Templates (Preview)</a> |</h1><h2 id="1-什么是String-Templates"><a href="#1-什么是String-Templates" class="headerlink" title="1. 什么是String Templates?"></a>1. 什么是String Templates?</h2><p>String Templates是Java 15中引入的一个新特性，它允许我们在字符串中使用占位符来动态替换变量的值。它提供了一种更简洁、更直观的方式来构建字符串，而不需要使用传统的字符串拼接或格式化方法。</p><h2 id="2-为什么需要String-Templates"><a href="#2-为什么需要String-Templates" class="headerlink" title="2. 为什么需要String Templates?"></a>2. 为什么需要String Templates?</h2><p>在传统的Java中，我们通常使用字符串拼接或格式化方法来构建动态字符串。这种方式需要手动处理变量的值，并且容易出错。而且，当字符串中包含大量变量时，代码会变得冗长且难以维护。</p><p>String Templates的引入解决了这个问题，它提供了一种更简洁、更易读的方式来构建动态字符串。通过使用占位符，我们可以将变量的值直接嵌入到字符串中，而不需要手动处理。</p><h2 id="3-String-Templates的实现原理"><a href="#3-String-Templates的实现原理" class="headerlink" title="3. String Templates的实现原理?"></a>3. String Templates的实现原理?</h2><p>String Templates的实现原理是通过在字符串中使用占位符<code>$&#123;&#125;</code>来表示变量。在运行时，Java编译器会将这些占位符替换为实际的变量值。</p><p>具体来说，当我们使用String Templates时，编译器会将字符串中的占位符<code>$&#123;&#125;</code><br>解析为一个特殊的表达式，并将其转换为对应的变量值。这个过程是在编译时完成的，所以在运行时不会有额外的性能开销。</p><h2 id="4-String-Templates的优点"><a href="#4-String-Templates的优点" class="headerlink" title="4. String Templates的优点"></a>4. String Templates的优点</h2><ul><li><strong>简洁易读</strong>：使用占位符<code>$&#123;&#125;</code>来表示变量，使得代码更加简洁、易读。</li><li><strong>类型安全</strong>：String Templates在编译时会进行类型检查，确保变量的类型与占位符的类型匹配，避免了运行时的类型错误。</li><li><strong>性能优化</strong>：String Templates的解析过程是在编译时完成的，所以在运行时不会有额外的性能开销。</li><li><strong>可扩展性</strong>：String Templates支持自定义的格式化函数，可以根据需求进行扩展。</li></ul><h2 id="5-String-Templates的缺点"><a href="#5-String-Templates的缺点" class="headerlink" title="5. String Templates的缺点"></a>5. String Templates的缺点</h2><ul><li><strong>兼容性</strong>：String Templates是Java 15中引入的新特性，需要使用Java 15或更高版本的JDK才能使用。</li><li><strong>语法限制</strong>：String Templates的占位符<code>$&#123;&#125;</code>只能用于表示变量，不能用于执行任意的表达式。</li><li><strong>可读性</strong>：当字符串中包含大量的占位符时，可能会降低代码的可读性。</li></ul><h2 id="6-String-Templates的使用示例"><a href="#6-String-Templates的使用示例" class="headerlink" title="6. String Templates的使用示例"></a>6. String Templates的使用示例</h2><p>下面是一个使用String Templates的简单示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;Alice&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">25</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;My name is $&#123;name&#125; and I&#x27;m $&#123;age&#125; years old.&quot;</span>;</span><br><span class="line">System.out.println(message);</span><br></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">My name is Alice and I&#x27;m 25 years old.</span><br></pre></td></tr></table></figure><h2 id="7-String-Templates的使用注意事项"><a href="#7-String-Templates的使用注意事项" class="headerlink" title="7. String Templates的使用注意事项"></a>7. String Templates的使用注意事项</h2><ul><li>占位符<code>$&#123;&#125;</code>中的变量名必须是有效的Java标识符。</li><li>占位符<code>$&#123;&#125;</code>中的变量值可以是任意类型，编译器会自动进行类型转换。</li><li>如果变量值为null，占位符<code>$&#123;&#125;</code>会被替换为字符串”null”。</li><li>String Templates支持嵌套使用，可以在占位符<code>$&#123;&#125;</code>中使用其他占位符。</li></ul><p>特别容易卡住。。然后就喊我。。</p><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>String Templates是Java 15中引入的一个新特性，它提供了一种更简洁、更直观的方式来构建动态字符串。通过使用占位符<code>$&#123;&#125;</code><br>，我们可以将变量的值直接嵌入到字符串中，而不需要手动处理。String<br>Templates具有简洁易读、类型安全、性能优化和可扩展性等优点，但也存在兼容性、语法限制和可读性等缺点。在使用String<br>Templates时，需要注意占位符的命名规则和变量值的类型。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 性能优化 </tag>
            
            <tag> 可读性 </tag>
            
            <tag> 兼容性 </tag>
            
            <tag> 可扩展性 </tag>
            
            <tag> 类型安全 </tag>
            
            <tag> 字符串模板 </tag>
            
            <tag> Java 15 </tag>
            
            <tag> 动态字符串 </tag>
            
            <tag> 字符串拼接 </tag>
            
            <tag> 字符串格式化 </tag>
            
            <tag> 占位符 </tag>
            
            <tag> 编译时 </tag>
            
            <tag> 语法限制 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】SpringTemplate使用</title>
      <link href="/21b95ef5.html"/>
      <url>/21b95ef5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是SpringTemplate"><a href="#1-什么是SpringTemplate" class="headerlink" title="1. 什么是SpringTemplate?"></a>1. 什么是SpringTemplate?</h2><p>SpringTemplate是Spring框架提供的一个用于简化数据库操作的工具类。它封装了JDBC的底层细节，提供了一种更加方便和易用的方式来执行SQL语句，并处理结果集。</p><h2 id="2-为什么需要SpringTemplate"><a href="#2-为什么需要SpringTemplate" class="headerlink" title="2. 为什么需要SpringTemplate?"></a>2. 为什么需要SpringTemplate?</h2><p>在传统的JDBC开发中，我们需要手动编写大量的重复代码来完成数据库的连接、关闭、事务管理等操作。而且，使用原生的JDBC API进行数据库操作也比较繁琐，容易出错。SpringTemplate的出现就是为了解决这些问题，它可以帮助我们简化数据库操作的流程，提高开发效率。</p><h2 id="3-SpringTemplate的实现原理"><a href="#3-SpringTemplate的实现原理" class="headerlink" title="3. SpringTemplate的实现原理?"></a>3. SpringTemplate的实现原理?</h2><p>SpringTemplate基于JdbcTemplate实现，它通过封装JdbcTemplate的API，提供了更加简洁的方法来执行SQL语句。SpringTemplate内部使用了回调函数机制，将数据库操作的细节交给用户自定义的回调函数来处理，从而达到解耦的目的。</p><h2 id="4-SpringTemplate的优点"><a href="#4-SpringTemplate的优点" class="headerlink" title="4. SpringTemplate的优点"></a>4. SpringTemplate的优点</h2><ul><li><strong>简化数据库操作</strong>：SpringTemplate封装了JDBC的底层细节，提供了一种更加简单和易用的方式来执行SQL语句。</li><li><strong>提高开发效率</strong>：使用SpringTemplate可以减少编写重复代码的工作量，同时还能够降低出错的概率。</li><li><strong>支持事务管理</strong>：SpringTemplate提供了对事务的支持，可以方便地进行事务控制。</li></ul><h2 id="5-SpringTemplate的缺点"><a href="#5-SpringTemplate的缺点" class="headerlink" title="5. SpringTemplate的缺点"></a>5. SpringTemplate的缺点</h2><ul><li><strong>学习成本较高</strong>：使用SpringTemplate需要熟悉Spring框架的相关知识，对于初学者来说可能需要一定的学习成本。</li><li><strong>灵活性相对较低</strong>：由于SpringTemplate是基于JdbcTemplate实现的，因此在某些特殊场景下可能无法满足需求，需要自己编写原生的JDBC代码。</li></ul><h2 id="6-SpringTemplate的使用示例"><a href="#6-SpringTemplate的使用示例" class="headerlink" title="6. SpringTemplate的使用示例"></a>6. SpringTemplate的使用示例</h2><p>首先，在Spring配置文件中配置数据源和SpringTemplate：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后，在Java代码中使用SpringTemplate执行SQL语句：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">queryData</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM user&quot;</span>;</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; result = jdbcTemplate.queryForList(sql);</span><br><span class="line">    <span class="keyword">for</span> (Map&lt;String, Object&gt; row : result) &#123;</span><br><span class="line">        System.out.println(row.get(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述代码中，我们通过注入JdbcTemplate对象来使用SpringTemplate执行SQL查询操作。<code>queryForList()</code>方法可以执行查询语句，并将结果封装为一个List&lt;Map&lt;String, Object&gt;&gt;，每个Map表示一行数据。</p><h2 id="7-SpringTemplate的使用注意事项"><a href="#7-SpringTemplate的使用注意事项" class="headerlink" title="7. SpringTemplate的使用注意事项"></a>7. SpringTemplate的使用注意事项</h2><ul><li>在使用SpringTemplate之前，需要先配置好数据源和SpringTemplate对象。</li><li>使用SpringTemplate执行数据库操作时，应该遵循良好的编程习惯，比如合理地处理异常、关闭资源等。</li><li>如果需要进行事务管理，可以通过在方法上添加@Transactional注解来实现。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>SpringTemplate是Spring框架提供的一个简化数据库操作的工具类，它封装了JDBC的底层细节，提供了一种更加方便和易用的方式来执行SQL语句。使用SpringTemplate可以减少重复代码的编写，提高开发效率。同时，它还支持事务管理，能够帮助我们更好地控制事务。然而，使用SpringTemplate也有一些缺点，比如学习成本较高，灵活性相对较低。因此，在选择是否使用SpringTemplate时，需要根据具体的项目需求来决定。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发效率 </tag>
            
            <tag> 事务管理 </tag>
            
            <tag> 总结 </tag>
            
            <tag> 注意事项 </tag>
            
            <tag> 学习成本 </tag>
            
            <tag> SpringTemplate </tag>
            
            <tag> 数据库操作 </tag>
            
            <tag> JDBC </tag>
            
            <tag> JdbcTemplate </tag>
            
            <tag> 灵活性 </tag>
            
            <tag> 配置数据源 </tag>
            
            <tag> 查询数据 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>工作五年多，idea插件推荐（未完）</title>
      <link href="/4650d5de.html"/>
      <url>/4650d5de.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><p>本来打算一次更新完的。。感觉还是太多了，后面再分享吧，先分享一部分</p><h1 id="EasyCode-MybatisCodeHelper"><a href="#EasyCode-MybatisCodeHelper" class="headerlink" title="EasyCode MybatisCodeHelper"></a>EasyCode MybatisCodeHelper</h1><p>这玩意功能太离谱了，随便举几个</p><p>官网地址：<a href="https://brucege.com/pay/view?code=dxAMx71">https://brucege.com/pay/view?code=dxAMx71</a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/59355969033300.png" title="数据库生成CRUD" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/59355969033300.png" alt="数据库生成CRUD"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/59191925967100.png" title="功能清单" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/59191925967100.png" alt="功能清单"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/59210338861400.png" title="方法名生成sql" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/59210338861400.png" alt="方法名生成sql"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/59257523947000.png" title="生成mybatisplus query wrapper" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/59257523947000.png" alt="生成mybatisplus query wrapper"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/59282602326400.png" title="自动补全" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/59282602326400.png" alt="自动补全"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/59297174924000.png" title="OGNL支持" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/59297174924000.png" alt="OGNL支持"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/59329484236300.png" title="生成建表语句" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/59329484236300.png" alt="生成建表语句"></a></p><h1 id="Easy-Javadoc"><a href="#Easy-Javadoc" class="headerlink" title="Easy Javadoc"></a>Easy Javadoc</h1><p>Easy Javadoc是一个IntelliJ IDEA的插件，它能够帮助Java和Kotlin开发者自动生成Javadoc和Kdoc文档注释。该插件支持多种翻译服务，可以根据方法名自动翻译注释内容，并支持自定义映射。同时，Easy<br>Javadoc还支持选中中文进行翻译，无需切换到其他工具。</p><p>安装Easy Javadoc插件非常简单，只需要在IntelliJ IDEA的插件页面搜索”Easy Javadoc”，然后点击安装并重启IDEA即可。</p><p>使用Easy Javadoc插件也非常方便。你可以将光标放置在想要生成注释的类、方法或属性上，然后按下快捷键”ctrl &quot;（Windows）或”command<br>&quot;（Mac）即可生成注释。插件会根据方法名自动生成注释，你只需要补充具体的描述即可。此外，你还可以选中中文进行翻译，或者自定义映射来提高翻译的准确性。</p><p>Easy Javadoc插件还支持批量生成文档注释和自定义模板，方便快捷地生成多个类的注释。你可以在插件的配置页面进行相关设置，包括选择翻译服务、自定义映射、配置快捷键等。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/57318343465500.gif" title="方法注释" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/57318343465500.gif" alt="方法注释"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/57778844861000.gif" title="属性注释" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/57778844861000.gif" alt="属性注释"></a></p><h1 id="Transaction"><a href="#Transaction" class="headerlink" title="Transaction"></a>Transaction</h1><p>Translation是一个IntelliJ IDEA的插件，它可以帮助开发者进行翻译和替换文本。该插件支持多种翻译引擎，包括Microsoft<br>Translator、Google Translate、DeepL Translator等。你可以选择要翻译的文本，然后使用快捷键或右键菜单进行翻译。此外，插件还支持翻译文档、自动识别单词和自动断词等功能。</p><p>要安装Translation插件，你可以在IntelliJ IDEA的插件页面搜索”Translation”并进行安装。安装完成后，你可以在IDEA的工具栏或右键菜单中找到Translation插件的功能。</p><p>使用Translation插件非常简单。你可以选中要翻译的文本，然后使用快捷键或右键菜单进行翻译。插件会根据你的设置选择合适的翻译引擎，并显示翻译结果。你还可以使用插件的其他功能，如替换文本、翻译文档等。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/57623950835200.gif" title="简单的翻译操作" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/57623950835200.gif" alt="简单的翻译操作"></a></p><h1 id="ignore"><a href="#ignore" class="headerlink" title=".ignore"></a>.ignore</h1><p>.ignore插件是一个用于生成.gitignore文件的IntelliJ IDEA插件。.gitignore文件用于指定要忽略的文件和文件夹，这些文件和文件夹在使用Git进行版本控制时不会被跟踪和提交。</p><p>使用.ignore插件非常简单。你可以右键单击项目文件夹，选择”New”，然后选择”.ignore file”<br>，即可生成一个新的.gitignore文件。你可以在生成的文件中添加要忽略的文件和文件夹的规则，插件会根据你的选择自动生成相应的规则。</p><p>此外，.ignore插件还支持从模板中选择常见的.gitignore规则，以便快速生成.gitignore文件。</p><p>安装.ignore插件的方法与安装其他IntelliJ IDEA插件相同。你可以在IDEA的插件页面搜索”.ignore”<br>并进行安装。安装完成后，你可以在IDEA的菜单栏或右键菜单中找到.ignore插件的功能。</p><p>.ignore插件可以帮助你更方便地管理.gitignore文件，使你的代码库更加整洁和可维护。如果你经常使用Git进行版本控制，这个插件会对你的工作流程非常有帮助。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/57928871693400.png" title="右键指定目录生成即可" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/57928871693400.png" alt="右键指定目录生成即可"></a></p><h1 id="Atom-Material-Icons"><a href="#Atom-Material-Icons" class="headerlink" title="Atom Material Icons"></a>Atom Material Icons</h1><p>Atom Material Icons是一个为Atom编辑器设计的图标主题。它为编辑器的文件树、侧边栏和标签栏等部分提供了美观的图标，使用户能够更直观地识别和区分不同类型的文件和目录。</p><p>Atom Material Icons的设计灵感来自于Google Material<br>Design，它采用了简洁、扁平的风格，图标清晰易辨。这个图标主题提供了丰富的图标，包括常见文件类型、文件夹、操作按钮等等，可以根据用户的需要进行自定义和配置。</p><p>要安装Atom Material Icons主题，你可以打开Atom编辑器的设置界面，点击”Install”选项卡，然后在搜索框中输入”atom-material-icons”<br>。在搜索结果中找到对应的主题，点击”Install”按钮进行安装。安装完成后，你可以在编辑器的设置中选择这个主题，并根据需要进行个性化配置。</p><p>使用Atom Material Icons主题可以为你的Atom编辑器增添一些视觉上的美感，并且提供更好的文件和目录识别体验。如果你喜欢Google<br>Material Design的风格，这个主题可能会成为你的首选。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/58003805426000.png" title="观察左边目录图标" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/58003805426000.png" alt="观察左边目录图标"></a></p><h1 id="Batch-Scripts-support"><a href="#Batch-Scripts-support" class="headerlink" title="Batch Scripts support"></a>Batch Scripts support</h1><p>Batch Scripts support是一个用于支持Windows批处理脚本（.bat或.cmd文件）的IntelliJ IDEA插件。使用这个插件，你可以在IDEA中编辑和运行批处理脚本，提高开发效率。</p><p>安装Batch Scripts support插件非常简单。你可以打开IntelliJ IDEA的插件页面，搜索”Batch Scripts support”<br>并进行安装。安装完成后，你可以在IDEA的设置中启用该插件，并进行相关配置。</p><p>使用Batch Scripts<br>support插件，你可以在IDEA中创建和编辑批处理脚本文件。插件提供了语法高亮、代码提示、代码格式化等功能，使你能够更方便地编写和维护批处理脚本。此外，插件还提供了运行和调试批处理脚本的功能，你可以在IDEA中直接运行脚本，并查看输出结果和调试信息。</p><p>Batch Scripts support插件还支持在IDEA的终端中运行批处理脚本，你可以方便地执行脚本命令，并查看执行结果。</p><p>比如我现在写博客就可以方便执行Hexo相关命令</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/58118981420300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/58118981420300.png"></a></p><h1 id="Camel-Case"><a href="#Camel-Case" class="headerlink" title="Camel Case"></a>Camel Case</h1><h1 id="Chinese-Language-Pack"><a href="#Chinese-Language-Pack" class="headerlink" title="Chinese Language Pack"></a>Chinese Language Pack</h1><p>不多说了。。这个就是官方中文插件</p><h1 id="code-glance-pro"><a href="#code-glance-pro" class="headerlink" title="code glance pro"></a>code glance pro</h1><p>Code Glance Pro是一个用于IntelliJ IDEA的插件，它在编辑器窗格中显示一个类似于Sublime中的缩略图或总览视图。这个插件可以让你快速滚动代码，跳转到代码的不同部分。Code<br>Glance Pro在CodeGlance的基础上进行了改进，支持更多功能。</p><p>Code Glance Pro插件的主要功能包括：</p><ul><li>隐藏原始滚动条。</li><li>右键快速配置。</li><li>支持标记高亮。</li><li>支持错误条纹高亮。</li><li>支持Vcs行高亮。</li><li>支持光标行高亮。</li><li>支持语言配色方案。</li><li>在Glance上快速查看代码。</li><li>在分割模式下自动计算宽度。</li><li>使用Ctrl-Shift-G快捷键切换Glance视图。</li></ul><p>使用Code Glance Pro插件可以提供更好的代码浏览和导航体验。它可以让你更方便地浏览和编辑代码，快速定位到感兴趣的部分。如果你经常需要处理大型代码文件或项目，这个插件可能会对你的开发效率有所帮助。</p><p>你可以在IntelliJ IDEA的插件页面搜索”Code Glance Pro”并进行安装。安装完成后，你可以在IDEA的设置中找到该插件，并进行相关配置。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/58313056505900.gif" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/58313056505900.gif"></a></p><h1 id="Dto-Generator"><a href="#Dto-Generator" class="headerlink" title="Dto Generator"></a>Dto Generator</h1><p>一键根据JSON生成DTO插件</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/58863477700200.gif" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-24/58863477700200.gif"></a></p><h1 id="GenerateAllSetter"><a href="#GenerateAllSetter" class="headerlink" title="GenerateAllSetter"></a>GenerateAllSetter</h1><p><a href="https://raw.githubusercontent.com/gejun123456/intellij-generateAllSetMethod/master/screenshot/generateSetterPlugin.gif" class="gallery-item"><img src="https://raw.githubusercontent.com/gejun123456/intellij-generateAllSetMethod/master/screenshot/generateSetterPlugin.gif"></a></p><p><a href="https://raw.githubusercontent.com/gejun123456/intellij-generateAllSetMethod/master/screenshot/generate_the_conveter.gif" class="gallery-item"><img src="https://raw.githubusercontent.com/gejun123456/intellij-generateAllSetMethod/master/screenshot/generate_the_conveter.gif"></a></p><p><a href="https://raw.githubusercontent.com/gejun123456/intellij-generateAllSetMethod/master/screenshot/generate_list_default_value.gif" class="gallery-item"><img src="https://raw.githubusercontent.com/gejun123456/intellij-generateAllSetMethod/master/screenshot/generate_list_default_value.gif"></a></p><p>。。。好用的插件太多了，下回再聊。。。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> idea插件 </tag>
            
            <tag> Easy Javadoc </tag>
            
            <tag> Transaction </tag>
            
            <tag> .ignore </tag>
            
            <tag> Atom Material Icons </tag>
            
            <tag> Batch Scripts support </tag>
            
            <tag> Camel Case </tag>
            
            <tag> Chinese Language Pack </tag>
            
            <tag> code glance pro </tag>
            
            <tag> Dto Generator </tag>
            
            <tag> EasyCode MybatisCodeHelper </tag>
            
            <tag> GenerateAllSetter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Springboot应用异常处理</title>
      <link href="/e4b87107.html"/>
      <url>/e4b87107.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h2 id="1-什么是Spring-Boot应用异常处理"><a href="#1-什么是Spring-Boot应用异常处理" class="headerlink" title="1. 什么是Spring Boot应用异常处理?"></a>1. 什么是Spring Boot应用异常处理?</h2><p>Spring Boot应用异常处理是指在Spring Boot应用中对异常进行捕获和处理的机制。当应用发生异常时，可以通过异常处理机制来捕获异常并进行相应的处理，例如返回友好的错误信息给用户，记录异常日志等。</p><h2 id="2-为什么需要Spring-Boot应用异常处理"><a href="#2-为什么需要Spring-Boot应用异常处理" class="headerlink" title="2. 为什么需要Spring Boot应用异常处理?"></a>2. 为什么需要Spring Boot应用异常处理?</h2><p>异常是在应用运行过程中不可避免的情况，可能是由于程序错误、外部依赖故障或者其他不可预知的原因导致。如果不进行异常处理，应用可能会直接崩溃或者给用户展示不友好的错误信息，影响用户体验和应用的稳定性。</p><p>通过Spring Boot应用异常处理，可以对异常进行统一的处理，提供更好的用户体验和应用的稳定性。同时，异常处理还可以帮助开发人员快速定位和解决问题，提高开发效率。</p><h2 id="3-Spring-Boot应用异常处理的实现原理"><a href="#3-Spring-Boot应用异常处理的实现原理" class="headerlink" title="3. Spring Boot应用异常处理的实现原理?"></a>3. Spring Boot应用异常处理的实现原理?</h2><p>Spring Boot应用异常处理的实现原理主要依赖于Spring框架提供的异常处理机制。在Spring Boot应用中，可以通过自定义异常处理器来捕获和处理异常。</p><p>具体实现步骤如下：</p><ul><li>创建一个自定义的异常类，继承自Exception或RuntimeException，用于表示应用中的特定异常情况。</li><li>创建一个全局异常处理器，使用@ControllerAdvice注解标记，并在类中定义异常处理方法，使用@ExceptionHandler注解标记该方法可以处理的异常类型。</li><li>在异常处理方法中，可以根据具体的异常类型进行相应的处理，例如返回友好的错误信息给用户、记录异常日志等。</li><li>在Spring Boot应用中，可以通过配置文件或者注解的方式将自定义的异常处理器注册到应用中。</li></ul><h2 id="4-Spring-Boot应用异常处理的优点"><a href="#4-Spring-Boot应用异常处理的优点" class="headerlink" title="4. Spring Boot应用异常处理的优点"></a>4. Spring Boot应用异常处理的优点</h2><ul><li>统一异常处理：通过自定义异常处理器，可以统一处理应用中的异常，提供统一的错误信息给用户，提高用户体验。</li><li>异常日志记录：可以在异常处理器中记录异常日志，方便开发人员定位和解决问题。</li><li>可扩展性：可以根据具体的业务需求，自定义异常处理器，实现特定的异常处理逻辑。</li></ul><h2 id="5-Spring-Boot应用异常处理的缺点"><a href="#5-Spring-Boot应用异常处理的缺点" class="headerlink" title="5. Spring Boot应用异常处理的缺点"></a>5. Spring Boot应用异常处理的缺点</h2><ul><li>异常处理逻辑可能会增加代码复杂性，需要谨慎设计和实现。</li><li>如果异常处理不当，可能会导致应用出现安全漏洞或者信息泄露的风险。</li></ul><h2 id="6-Spring-Boot应用异常处理的使用示例"><a href="#6-Spring-Boot应用异常处理的使用示例" class="headerlink" title="6. Spring Boot应用异常处理的使用示例"></a>6. Spring Boot应用异常处理的使用示例</h2><p>下面是一个简单的Spring Boot应用异常处理的示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title function_">handleException</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">        <span class="comment">// 处理异常逻辑</span></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(<span class="string">&quot;Internal Server Error&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(UserNotFoundException.class)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title function_">handleUserNotFoundException</span><span class="params">(UserNotFoundException e)</span> &#123;</span><br><span class="line">        <span class="comment">// 处理用户不存在异常逻辑</span></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(HttpStatus.NOT_FOUND).body(<span class="string">&quot;User Not Found&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/users/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;User&gt; <span class="title function_">getUser</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getUserById(id);</span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UserNotFoundException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserNotFoundException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="comment">// 自定义用户不存在异常类</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的示例中，<code>GlobalExceptionHandler</code>是全局异常处理器，通过<code>@ExceptionHandler</code>注解标记了两个异常处理方法，分别处理<code>Exception</code>和<code>UserNotFoundException</code>异常。在<code>UserController</code>中，当用户不存在时，抛出<code>UserNotFoundException</code>异常，全局异常处理器会捕获该异常并进行处理。</p><h2 id="7-Spring-Boot应用异常处理的使用注意事项"><a href="#7-Spring-Boot应用异常处理的使用注意事项" class="headerlink" title="7. Spring Boot应用异常处理的使用注意事项"></a>7. Spring Boot应用异常处理的使用注意事项</h2><ul><li>异常处理器的顺序：如果有多个异常处理器，Spring Boot会按照异常处理器的顺序依次匹配处理异常。因此，需要注意异常处理器的顺序，确保异常能够被正确处理。</li><li>异常处理器的范围：异常处理器可以定义在全局范围，也可以定义在具体的Controller或者方法中。需要根据具体的业务需求和异常情况选择合适的范围。</li><li>异常处理器的返回类型：异常处理器可以返回不同类型的结果，例如字符串、JSON对象、HTTP状态码等。需要根据具体的业务需求选择合适的返回类型。</li></ul><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Spring Boot应用异常处理是对应用中异常进行捕获和处理的机制，通过自定义异常处理器可以统一处理异常，提供友好的错误信息给用户，提高用户体验和应用的稳定性。在使用异常处理器时，需要注意异常处理器的顺序、范围和返回类型，确保异常能够被正确处理。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 使用示例 </tag>
            
            <tag> 使用注意事项 </tag>
            
            <tag> 总结 </tag>
            
            <tag> 可扩展性 </tag>
            
            <tag> Spring Boot应用异常处理 </tag>
            
            <tag> 异常处理机制 </tag>
            
            <tag> 异常处理原理 </tag>
            
            <tag> 统一异常处理 </tag>
            
            <tag> 异常日志记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK21更新特性详解</title>
      <link href="/752ac5dd.html"/>
      <url>/752ac5dd.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><blockquote><p>新特性</p></blockquote><h1 id="430-String-Templates-Preview"><a href="#430-String-Templates-Preview" class="headerlink" title="| 430: | String Templates (Preview) |"></a>| 430: | <a href="https://openjdk.org/jeps/430">String Templates (Preview)</a> |</h1><h2 id="1-什么是String-Templates"><a href="#1-什么是String-Templates" class="headerlink" title="1. 什么是String Templates?"></a>1. 什么是String Templates?</h2><p>String Templates是Java 15中引入的一个新特性，它允许我们在字符串中使用占位符来动态替换变量的值。它提供了一种更简洁、更直观的方式来构建字符串，而不需要使用传统的字符串拼接或格式化方法。</p><h2 id="2-为什么需要String-Templates"><a href="#2-为什么需要String-Templates" class="headerlink" title="2. 为什么需要String Templates?"></a>2. 为什么需要String Templates?</h2><p>在传统的Java中，我们通常使用字符串拼接或格式化方法来构建动态字符串。这种方式需要手动处理变量的值，并且容易出错。而且，当字符串中包含大量变量时，代码会变得冗长且难以维护。</p><p>String Templates的引入解决了这个问题，它提供了一种更简洁、更易读的方式来构建动态字符串。通过使用占位符，我们可以将变量的值直接嵌入到字符串中，而不需要手动处理。</p><h2 id="3-String-Templates的实现原理"><a href="#3-String-Templates的实现原理" class="headerlink" title="3. String Templates的实现原理?"></a>3. String Templates的实现原理?</h2><p>String Templates的实现原理是通过在字符串中使用占位符<code>$&#123;&#125;</code>来表示变量。在运行时，Java编译器会将这些占位符替换为实际的变量值。</p><p>具体来说，当我们使用String Templates时，编译器会将字符串中的占位符<code>$&#123;&#125;</code><br>解析为一个特殊的表达式，并将其转换为对应的变量值。这个过程是在编译时完成的，所以在运行时不会有额外的性能开销。</p><h2 id="4-String-Templates的优点"><a href="#4-String-Templates的优点" class="headerlink" title="4. String Templates的优点"></a>4. String Templates的优点</h2><ul><li><strong>简洁易读</strong>：使用占位符<code>$&#123;&#125;</code>来表示变量，使得代码更加简洁、易读。</li><li><strong>类型安全</strong>：String Templates在编译时会进行类型检查，确保变量的类型与占位符的类型匹配，避免了运行时的类型错误。</li><li><strong>性能优化</strong>：String Templates的解析过程是在编译时完成的，所以在运行时不会有额外的性能开销。</li><li><strong>可扩展性</strong>：String Templates支持自定义的格式化函数，可以根据需求进行扩展。</li></ul><h2 id="5-String-Templates的缺点"><a href="#5-String-Templates的缺点" class="headerlink" title="5. String Templates的缺点"></a>5. String Templates的缺点</h2><ul><li><strong>兼容性</strong>：String Templates是Java 15中引入的新特性，需要使用Java 15或更高版本的JDK才能使用。</li><li><strong>语法限制</strong>：String Templates的占位符<code>$&#123;&#125;</code>只能用于表示变量，不能用于执行任意的表达式。</li><li><strong>可读性</strong>：当字符串中包含大量的占位符时，可能会降低代码的可读性。</li></ul><h2 id="6-String-Templates的使用示例"><a href="#6-String-Templates的使用示例" class="headerlink" title="6. String Templates的使用示例"></a>6. String Templates的使用示例</h2><p>下面是一个使用String Templates的简单示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;Alice&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">25</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;My name is $&#123;name&#125; and I&#x27;m $&#123;age&#125; years old.&quot;</span>;</span><br><span class="line">System.out.println(message);</span><br></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">My name is Alice and I&#x27;m 25 years old.</span><br></pre></td></tr></table></figure><h2 id="7-String-Templates的使用注意事项"><a href="#7-String-Templates的使用注意事项" class="headerlink" title="7. String Templates的使用注意事项"></a>7. String Templates的使用注意事项</h2><ul><li>占位符<code>$&#123;&#125;</code>中的变量名必须是有效的Java标识符。</li><li>占位符<code>$&#123;&#125;</code>中的变量值可以是任意类型，编译器会自动进行类型转换。</li><li>如果变量值为null，占位符<code>$&#123;&#125;</code>会被替换为字符串”null”。</li><li>String Templates支持嵌套使用，可以在占位符<code>$&#123;&#125;</code>中使用其他占位符。</li></ul><p>特别容易卡住。。然后就喊我。。</p><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>String Templates是Java 15中引入的一个新特性，它提供了一种更简洁、更直观的方式来构建动态字符串。通过使用占位符<code>$&#123;&#125;</code><br>，我们可以将变量的值直接嵌入到字符串中，而不需要手动处理。String<br>Templates具有简洁易读、类型安全、性能优化和可扩展性等优点，但也存在兼容性、语法限制和可读性等缺点。在使用String<br>Templates时，需要注意占位符的命名规则和变量值的类型。</p><h1 id="431-Sequenced-Collections"><a href="#431-Sequenced-Collections" class="headerlink" title="| 431: | Sequenced Collections |"></a>| 431: | <a href="https://openjdk.org/jeps/431">Sequenced Collections</a> |</h1><h1 id="Sequenced-Collections"><a href="#Sequenced-Collections" class="headerlink" title="Sequenced Collections"></a>Sequenced Collections</h1><h2 id="1-什么是Sequenced-Collections？"><a href="#1-什么是Sequenced-Collections？" class="headerlink" title="1. 什么是Sequenced Collections？"></a>1. 什么是Sequenced Collections？</h2><p>Sequenced Collections是Java中的一个新特性，它是通过JEP 431引入的。Sequenced<br>Collections是一种新的集合类型，它提供了一种有序的、线程安全的集合实现。它的目标是提供一种高效的、可扩展的有序集合，以满足在多线程环境下处理大量数据的需求。</p><h2 id="2-为什么需要Sequenced-Collections？"><a href="#2-为什么需要Sequenced-Collections？" class="headerlink" title="2. 为什么需要Sequenced Collections？"></a>2. 为什么需要Sequenced Collections？</h2><p>在并发编程中，处理大量数据时，有序集合是非常常见的需求。然而，Java标准库中的集合类（如ArrayList、LinkedList等）并不是线程安全的，因此在多线程环境下使用它们可能会导致数据不一致的问题。为了解决这个问题，开发人员通常需要使用同步机制（如synchronized关键字或Lock对象）来保证集合的线程安全性，但这会带来额外的开销和复杂性。</p><p>Sequenced Collections的目标就是提供一种高效的、可扩展的有序集合，以解决在多线程环境下处理大量数据时的线程安全问题。</p><h2 id="3-Sequenced-Collections的实现原理"><a href="#3-Sequenced-Collections的实现原理" class="headerlink" title="3. Sequenced Collections的实现原理"></a>3. Sequenced Collections的实现原理</h2><p>Sequenced Collections的实现基于一种称为”Sequenced Locks”的机制。Sequenced<br>Locks是一种特殊的锁机制，它允许多个线程同时读取集合中的数据，但只允许一个线程进行写操作。这种机制可以提高并发性能，同时保证数据的一致性。</p><p>在Sequenced<br>Collections中，每个元素都有一个唯一的序列号，用于标识元素的顺序。读操作可以并发进行，而写操作则需要获取锁来保证原子性。当一个线程进行写操作时，其他线程可以继续读取集合中的数据，但不能进行写操作，直到写操作完成。</p><h2 id="4-Sequenced-Collections的优点"><a href="#4-Sequenced-Collections的优点" class="headerlink" title="4. Sequenced Collections的优点"></a>4. Sequenced Collections的优点</h2><ul><li><strong>线程安全</strong>：Sequenced Collections提供了线程安全的集合实现，可以在多线程环境下安全地访问和修改集合中的数据。</li><li><strong>高效性能</strong>：Sequenced Collections使用了Sequenced Locks机制，可以提高并发性能，同时保证数据的一致性。</li><li><strong>可扩展性</strong>：Sequenced Collections的设计考虑了可扩展性，可以处理大量数据的并发访问。</li></ul><h2 id="5-Sequenced-Collections的缺点"><a href="#5-Sequenced-Collections的缺点" class="headerlink" title="5. Sequenced Collections的缺点"></a>5. Sequenced Collections的缺点</h2><ul><li><strong>额外开销</strong>：Sequenced Collections的实现需要维护元素的序列号和锁机制，这会带来一定的额外开销。</li><li><strong>写操作的延迟</strong>：由于写操作需要获取锁来保证原子性，可能会导致其他线程在写操作完成之前无法进行写操作。</li></ul><h2 id="6-Sequenced-Collections的使用示例"><a href="#6-Sequenced-Collections的使用示例" class="headerlink" title="6. Sequenced Collections的使用示例"></a>6. Sequenced Collections的使用示例</h2><p>下面是一个使用Sequenced Collections的简单示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.SequencedHashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SequencedCollectionsExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SequencedHashMap&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">SequencedHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 添加元素</span></span><br><span class="line">        map.put(<span class="number">1</span>, <span class="string">&quot;Apple&quot;</span>);</span><br><span class="line">        map.put(<span class="number">2</span>, <span class="string">&quot;Banana&quot;</span>);</span><br><span class="line">        map.put(<span class="number">3</span>, <span class="string">&quot;Orange&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取元素</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fruit</span> <span class="operator">=</span> map.get(<span class="number">2</span>);</span><br><span class="line">        System.out.println(fruit); <span class="comment">// 输出: Banana</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 遍历元素</span></span><br><span class="line">        map.forEach((key, value) -&gt; System.out.println(key + <span class="string">&quot;: &quot;</span> + value));</span><br><span class="line">        <span class="comment">// 输出:</span></span><br><span class="line">        <span class="comment">// 1: Apple</span></span><br><span class="line">        <span class="comment">// 2: Banana</span></span><br><span class="line">        <span class="comment">// 3: Orange</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的示例中，我们使用了SequencedHashMap来创建一个有序的、线程安全的集合。我们可以使用put方法添加元素，使用get方法获取元素，使用forEach方法遍历元素。</p><h2 id="7-Sequenced-Collections的其他注意事项"><a href="#7-Sequenced-Collections的其他注意事项" class="headerlink" title="7. Sequenced Collections的其他注意事项"></a>7. Sequenced Collections的其他注意事项</h2><ul><li>Sequenced Collections是Java标准库的一部分，从Java 17开始引入。</li><li>Sequenced Collections提供了多种集合类型，如SequencedHashMap、SequencedArrayList等。</li><li>Sequenced Collections可以与其他Java集合类（如ArrayList、LinkedList等）一起使用，以满足不同的需求。</li></ul><h2 id="8-总结-1"><a href="#8-总结-1" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Sequenced Collections是Java中的一个新特性，它提供了一种有序的、线程安全的集合实现。它通过使用Sequenced<br>Locks机制来保证线程安全性和并发性能。Sequenced Collections具有高效性能、可扩展性等优点，但也存在额外开销和写操作延迟的缺点。在使用Sequenced<br>Collections时，我们可以创建SequencedHashMap、SequencedArrayList等集合类型，并使用put、get、forEach等方法来操作集合中的数据。</p><h1 id="439-Generational-ZGC"><a href="#439-Generational-ZGC" class="headerlink" title="| 439: | Generational ZGC |"></a>| 439: | <a href="https://openjdk.org/jeps/439">Generational ZGC</a> |</h1><h2 id="1-什么是Generational-ZGC"><a href="#1-什么是Generational-ZGC" class="headerlink" title="1. 什么是Generational ZGC?"></a>1. 什么是Generational ZGC?</h2><p>Generational ZGC（Z Garbage Collector）是一种用于Java虚拟机（JVM）的垃圾回收器。它是OpenJDK项目中的一个特性，旨在提供低延迟和高吞吐量的垃圾回收解决方案。</p><h2 id="2-为什么需要Generational-ZGC"><a href="#2-为什么需要Generational-ZGC" class="headerlink" title="2. 为什么需要Generational ZGC?"></a>2. 为什么需要Generational ZGC?</h2><p>传统的垃圾回收器在处理大型堆内存时可能会导致长时间的停顿，这对于需要快速响应和低延迟的应用程序来说是不可接受的。Generational<br>ZGC的目标是减少这些停顿时间，并且能够处理非常大的堆内存。</p><h2 id="3-Generational-ZGC的实现原理"><a href="#3-Generational-ZGC的实现原理" class="headerlink" title="3. Generational ZGC的实现原理"></a>3. Generational ZGC的实现原理</h2><p>Generational ZGC基于分代垃圾回收的概念，将堆内存划分为多个代。其中包括Young Generation（年轻代）和Old<br>Generation（老年代）。具体的实现原理如下：</p><h3 id="年轻代（Young-Generation）"><a href="#年轻代（Young-Generation）" class="headerlink" title="年轻代（Young Generation）"></a>年轻代（Young Generation）</h3><ul><li>年轻代使用了Region的概念，将整个年轻代划分为多个大小相等的区域。</li><li>每个区域都有一个指针指向下一个可用的区域，形成一个链表结构。</li><li>当对象被创建时，它们首先被分配到年轻代的某个区域中。</li><li>当一个区域被填满时，会触发一次年轻代垃圾回收（Minor GC）。</li><li>Minor GC使用了并行和压缩算法来回收不再使用的对象。</li></ul><h3 id="老年代（Old-Generation）"><a href="#老年代（Old-Generation）" class="headerlink" title="老年代（Old Generation）"></a>老年代（Old Generation）</h3><ul><li>老年代是存放生命周期较长的对象的区域。</li><li>当一个对象在年轻代经历了多次垃圾回收后仍然存活，它将被晋升到老年代。</li><li>当老年代空间不足时，会触发一次老年代垃圾回收（Major GC）。</li><li>Major GC使用了并发标记和并行清理算法来回收不再使用的对象。</li></ul><h3 id="并发处理"><a href="#并发处理" class="headerlink" title="并发处理"></a>并发处理</h3><p>Generational ZGC采用了并发处理的方式来减少停顿时间。具体包括：</p><ul><li>年轻代垃圾回收过程中，应用程序可以继续执行。</li><li>在老年代垃圾回收过程中，应用程序也可以继续执行，只有在最后的清理阶段才会产生短暂的停顿。</li></ul><h2 id="4-Generational-ZGC的优点"><a href="#4-Generational-ZGC的优点" class="headerlink" title="4. Generational ZGC的优点"></a>4. Generational ZGC的优点</h2><ul><li><strong>低延迟</strong>：Generational ZGC通过并发处理和分代回收的策略，实现了非常低的停顿时间，适合对响应时间要求高的应用场景。</li><li><strong>高吞吐量</strong>：Generational ZGC在尽可能减少停顿时间的同时，也能保持较高的垃圾回收吞吐量。</li><li><strong>大堆支持</strong>：Generational ZGC可以处理非常大的堆内存，适用于需要大内存容量的应用程序。</li></ul><h2 id="5-Generational-ZGC的缺点"><a href="#5-Generational-ZGC的缺点" class="headerlink" title="5. Generational ZGC的缺点"></a>5. Generational ZGC的缺点</h2><ul><li><strong>性能开销</strong>：由于并发处理和分代回收的策略，Generational ZGC会带来一定的性能开销。这主要体现在CPU和内存的使用上。</li><li><strong>配置复杂</strong>：Generational ZGC有一些与性能相关的配置参数，需要根据具体场景进行调整，对于不熟悉的用户来说可能比较复杂。</li></ul><h2 id="6-Generational-ZGC的使用示例"><a href="#6-Generational-ZGC的使用示例" class="headerlink" title="6. Generational ZGC的使用示例"></a>6. Generational ZGC的使用示例</h2><p>以下是一个简单的Java代码示例，展示了如何启用Generational ZGC：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -XX:+UnlockExperimentalVMOptions -XX:+UseZGC YourApplication</span><br></pre></td></tr></table></figure><h2 id="7-Generational-ZGC的使用注意事项"><a href="#7-Generational-ZGC的使用注意事项" class="headerlink" title="7. Generational ZGC的使用注意事项"></a>7. Generational ZGC的使用注意事项</h2><ul><li>Generational ZGC是OpenJDK项目中的新特性，虽然已经相当稳定，但仍然建议在生产环境中进行充分测试。</li><li>在使用Generational ZGC时，建议监控系统资源使用情况，以便及时调整配置参数或采取其他措施来优化性能。</li></ul><h2 id="8-总结-2"><a href="#8-总结-2" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Generational ZGC是一种用于Java虚拟机的垃圾回收器，旨在提供低延迟和高吞吐量的垃圾回收解决方案。它通过并发处理和分代回收的策略，实现了非常低的停顿时间，并且能够处理非常大的堆内存。然而，使用Generational<br>ZGC需要注意性能开销和配置复杂性。</p><h1 id="440-Record-Patterns"><a href="#440-Record-Patterns" class="headerlink" title="| 440: | Record Patterns |"></a>| 440: | <a href="https://openjdk.org/jeps/440">Record Patterns</a> |</h1><h2 id="1-什么是Record-Patterns"><a href="#1-什么是Record-Patterns" class="headerlink" title="1. 什么是Record Patterns?"></a>1. 什么是Record Patterns?</h2><p>Record Patterns 是 Java 16 中引入的一个新特性，它允许我们在模式匹配中使用记录类型（record types）。记录类型是一种新的类声明形式，用于定义不可变的数据对象。而 Record Patterns 则提供了一种简洁的方式来进行模式匹配，并且可以方便地从记录类型中提取字段值。</p><h2 id="2-为什么需要Record-Patterns"><a href="#2-为什么需要Record-Patterns" class="headerlink" title="2. 为什么需要Record Patterns?"></a>2. 为什么需要Record Patterns?</h2><p>在传统的 Java 编程中，当我们需要对某个对象的属性进行判断和提取时，通常需要手动编写大量的代码来完成这些操作。而引入 Record Patterns 可以极大地简化这个过程，使得代码更加清晰、简洁，并且减少了出错的可能性。</p><h2 id="3-Record-Patterns-的实现原理"><a href="#3-Record-Patterns-的实现原理" class="headerlink" title="3. Record Patterns 的实现原理"></a>3. Record Patterns 的实现原理</h2><p>Record Patterns 的实现原理主要涉及两个方面：记录类型和模式匹配。</p><h3 id="记录类型"><a href="#记录类型" class="headerlink" title="记录类型"></a>记录类型</h3><p>记录类型是一种新的类声明形式，通过 <code>record</code> 关键字来定义。它自动提供了以下功能：</p><ul><li>自动生成私有 final 字段，并根据构造函数参数初始化这些字段。</li><li>自动生成 <code>equals()</code>、<code>hashCode()</code> 和 <code>toString()</code> 方法。</li><li>提供了一种紧凑的语法来定义字段和构造函数。</li></ul><h3 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h3><p>模式匹配是指根据给定的模式来匹配某个对象，并执行相应的操作。在 Record Patterns 中，我们可以使用 <code>instanceof</code><br>关键字和模式变量来进行模式匹配。</p><p>具体地说，当我们使用 Record Patterns<br>进行模式匹配时，编译器会自动为记录类型生成一个模式匹配方法。这个方法接受一个对象作为参数，并根据给定的模式进行匹配。如果匹配成功，则将字段值绑定到相应的模式变量中，从而可以在后续代码中使用。</p><h2 id="4-Record-Patterns-的优点"><a href="#4-Record-Patterns-的优点" class="headerlink" title="4. Record Patterns 的优点"></a>4. Record Patterns 的优点</h2><p>Record Patterns 带来了以下几个优点：</p><ul><li><strong>简洁性</strong>：使用 Record Patterns 可以大大简化对记录类型的模式匹配操作，减少冗余代码。</li><li><strong>可读性</strong>：Record Patterns 提供了一种直观、清晰的语法，使得代码更易于理解和维护。</li><li><strong>安全性</strong>：由于 Record Patterns 自动生成了 equals() 和 hashCode() 方法，可以避免手动实现这些方法时可能出现的错误。</li><li><strong>提高开发效率</strong>：Record Patterns 可以减少重复劳动，提高开发效率。</li></ul><h2 id="5-Record-Patterns-的缺点"><a href="#5-Record-Patterns-的缺点" class="headerlink" title="5. Record Patterns 的缺点"></a>5. Record Patterns 的缺点</h2><p>尽管 Record Patterns 带来了很多好处，但也存在一些限制和缺点：</p><ul><li><strong>不可变性</strong>：记录类型是不可变的，即字段值不能被修改。这意味着如果需要修改某个字段的值，就必须创建一个新的记录对象。</li><li><strong>局限性</strong>：Record Patterns 目前只能用于记录类型，不能用于其他类。</li><li><strong>兼容性</strong>：由于 Record Patterns 是在 Java 16 中引入的新特性，因此需要使用 Java 16 或更高版本才能使用。</li></ul><h2 id="6-Record-Patterns-的使用示例"><a href="#6-Record-Patterns-的使用示例" class="headerlink" title="6. Record Patterns 的使用示例"></a>6. Record Patterns 的使用示例</h2><p>下面是一个简单的示例，展示了如何使用 Record Patterns 进行模式匹配：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Alice&quot;</span>, <span class="number">25</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (person <span class="keyword">instanceof</span> Person p) &#123;</span><br><span class="line">            System.out.println(p.name()); <span class="comment">// 输出 &quot;Alice&quot;</span></span><br><span class="line">            System.out.println(p.age()); <span class="comment">// 输出 25</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，我们定义了一个名为 <code>Person</code> 的记录类型，并创建了一个 <code>Person</code> 对象。然后，我们使用 Record Patterns<br>进行模式匹配，将字段值绑定到模式变量 <code>p</code> 中，并输出字段值。</p><h2 id="7-Record-Patterns-的使用注意事项"><a href="#7-Record-Patterns-的使用注意事项" class="headerlink" title="7. Record Patterns 的使用注意事项"></a>7. Record Patterns 的使用注意事项</h2><p>在使用 Record Patterns 时，需要注意以下几点：</p><ul><li>记录类型的字段默认是 final 的，即不能被修改。如果需要修改某个字段的值，就必须创建一个新的记录对象。</li><li>记录类型的构造函数参数和字段名称要一致，否则会导致编译错误。</li><li>模式匹配方法的命名规则是 <code>match&lt;RecordTypeName&gt;</code>，例如 <code>matchPerson()</code>。</li></ul><h2 id="8-总结-3"><a href="#8-总结-3" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Record Patterns 是 Java 16 引入的一个新特性，它提供了一种简洁、清晰的方式来进行模式匹配，并且可以方便地从记录类型中提取字段值。使用<br>Record Patterns 可以使代码更加简洁、可读，并提高开发效率。然而，由于记录类型是不可变的，因此在修改字段值时需要创建新的对象。同时，Record<br>Patterns 目前只能用于记录类型，不能用于其他类。</p><h1 id="441-Pattern-Matching-for-switch"><a href="#441-Pattern-Matching-for-switch" class="headerlink" title="| 441: | Pattern Matching for switch |"></a>| 441: | <a href="https://openjdk.org/jeps/441">Pattern Matching for switch</a> |</h1><h2 id="1-什么是-Pattern-Matching-for-switch"><a href="#1-什么是-Pattern-Matching-for-switch" class="headerlink" title="1. 什么是 Pattern Matching for switch?"></a>1. 什么是 Pattern Matching for switch?</h2><p>Pattern Matching for switch 是 Java 14 中引入的一个新特性，它允许在 switch 语句中使用模式匹配。通过这个特性，我们可以更方便地对变量进行类型判断和提取。</p><h2 id="2-为什么需要-Pattern-Matching-for-switch"><a href="#2-为什么需要-Pattern-Matching-for-switch" class="headerlink" title="2. 为什么需要 Pattern Matching for switch?"></a>2. 为什么需要 Pattern Matching for switch?</h2><p>在之前的 Java 版本中，如果我们想要根据不同的类型执行不同的逻辑，通常需要使用多个 if-else 或者 switch-case<br>来进行判断。这样的代码结构比较冗长，并且容易出错。而 Pattern Matching for switch 的引入，使得我们能够更简洁、清晰地处理这种情况。</p><h2 id="3-Pattern-Matching-for-switch-的实现原理"><a href="#3-Pattern-Matching-for-switch-的实现原理" class="headerlink" title="3. Pattern Matching for switch 的实现原理"></a>3. Pattern Matching for switch 的实现原理</h2><p>Pattern Matching for switch 的实现原理主要涉及两个方面：模式匹配和类型推断。</p><h3 id="模式匹配-1"><a href="#模式匹配-1" class="headerlink" title="模式匹配"></a>模式匹配</h3><p>模式匹配是指将某个值与一系列模式进行比较，以确定是否匹配。在 Pattern Matching for switch 中，我们可以使用关键字 <code>case</code><br>后跟上模式来进行匹配。例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">switch</span> (obj) &#123;</span><br><span class="line">    <span class="keyword">case</span> String s -&gt; s.length();</span><br><span class="line">    <span class="keyword">case</span> Integer i -&gt; i * <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">default</span> -&gt; -<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>在上述代码中，<code>case String s</code> 和 <code>case Integer i</code> 就是模式，它们分别用于匹配字符串和整数类型的对象。</p><h3 id="类型推断"><a href="#类型推断" class="headerlink" title="类型推断"></a>类型推断</h3><p>类型推断是指根据上下文信息，自动推断出某个表达式的类型。在 Pattern Matching for switch 中，我们可以使用 <code>var</code><br>关键字来进行类型推断。例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">switch</span> (obj) &#123;</span><br><span class="line">    <span class="keyword">case</span> String s -&gt; s.length();</span><br><span class="line">    <span class="keyword">case</span> Integer i -&gt; i * <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">default</span> -&gt; -<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>在上述代码中，<code>var</code> 关键字用于推断 <code>result</code> 的类型为 <code>int</code>。</p><h2 id="4-Pattern-Matching-for-switch-的优点"><a href="#4-Pattern-Matching-for-switch-的优点" class="headerlink" title="4. Pattern Matching for switch 的优点"></a>4. Pattern Matching for switch 的优点</h2><ul><li>简化了对变量类型的判断和提取逻辑，使代码更加简洁、清晰。</li><li>减少了重复的代码，提高了开发效率。</li><li>增强了代码的可读性和可维护性。</li></ul><h2 id="5-Pattern-Matching-for-switch-的缺点"><a href="#5-Pattern-Matching-for-switch-的缺点" class="headerlink" title="5. Pattern Matching for switch 的缺点"></a>5. Pattern Matching for switch 的缺点</h2><ul><li>只能用于 switch 语句中，不能直接用于 if-else 结构。</li><li>目前只支持基本数据类型和引用类型的模式匹配，不支持其他特殊类型（如枚举、数组等）的模式匹配。</li></ul><h2 id="6-Pattern-Matching-for-switch-的使用示例"><a href="#6-Pattern-Matching-for-switch-的使用示例" class="headerlink" title="6. Pattern Matching for switch 的使用示例"></a>6. Pattern Matching for switch 的使用示例</h2><p>下面是一个使用 Pattern Matching for switch 的示例代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">process</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> (obj) &#123;</span><br><span class="line">        <span class="keyword">case</span> String s -&gt; System.out.println(<span class="string">&quot;String: &quot;</span> + s);</span><br><span class="line">        <span class="keyword">case</span> Integer i -&gt; System.out.println(<span class="string">&quot;Integer: &quot;</span> + i);</span><br><span class="line">        <span class="keyword">case</span> Double d -&gt; System.out.println(<span class="string">&quot;Double: &quot;</span> + d);</span><br><span class="line">        <span class="keyword">default</span> -&gt; System.out.println(<span class="string">&quot;Unknown type&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述代码中，根据传入的对象类型不同，会执行相应的逻辑。</p><h2 id="7-Pattern-Matching-for-switch-的使用注意事项"><a href="#7-Pattern-Matching-for-switch-的使用注意事项" class="headerlink" title="7. Pattern Matching for switch 的使用注意事项"></a>7. Pattern Matching for switch 的使用注意事项</h2><ul><li>模式匹配是按照 <code>case</code> 的顺序进行匹配的，因此需要将更具体的模式放在前面。</li><li>如果没有匹配到任何模式，则会执行 <code>default</code> 分支的逻辑。</li><li>在一个 <code>switch</code> 块内部，每个模式只能出现一次，否则会编译报错。</li></ul><h2 id="8-总结-4"><a href="#8-总结-4" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Pattern Matching for switch 是 Java 14 中引入的一个新特性，它允许在 switch<br>语句中使用模式匹配。通过这个特性，我们可以更方便地对变量进行类型判断和提取。它简化了对变量类型的判断和提取逻辑，使代码更加简洁、清晰，并且增强了代码的可读性和可维护性。但需要注意的是，目前只支持基本数据类型和引用类型的模式匹配，不支持其他特殊类型的模式匹配。</p><h1 id="442-Foreign-Function-Memory-API-Third-Preview"><a href="#442-Foreign-Function-Memory-API-Third-Preview" class="headerlink" title="| 442: | Foreign Function &amp; Memory API (Third Preview) |"></a>| 442: | <a href="https://openjdk.org/jeps/442">Foreign Function &amp; Memory API (Third Preview)</a> |</h1><h2 id="1-什么是Foreign-Function-Memory-API-Third-Preview"><a href="#1-什么是Foreign-Function-Memory-API-Third-Preview" class="headerlink" title="1. 什么是Foreign Function &amp; Memory API (Third Preview)?"></a>1. 什么是Foreign Function &amp; Memory API (Third Preview)?</h2><p>Foreign Function &amp; Memory API 是 Java 平台的一个功能，它允许开发者直接与本地代码进行交互，并且可以在 Java 中操作本地内存。这个功能最初在<br>JDK 14 的时候以 JEP 383 的形式引入了第一次预览版，然后在 JDK 15 中进一步改进并发布了第二次预览版（JEP 393），现在在 JDK 21<br>中发布了第三次预览版（JEP 442）。</p><h2 id="2-为什么需要Foreign-Function-Memory-API"><a href="#2-为什么需要Foreign-Function-Memory-API" class="headerlink" title="2. 为什么需要Foreign Function &amp; Memory API?"></a>2. 为什么需要Foreign Function &amp; Memory API?</h2><p>Foreign Function &amp; Memory API 的出现主要是为了解决以下几个问题：</p><ul><li><strong>与本地代码的无缝集成</strong>：有些场景下，我们可能需要调用本地库或者系统级别的函数，例如使用硬件加速、调用底层操作系统的特定功能等。而<br>Foreign Function &amp; Memory API 可以使得 Java 程序能够直接调用本地函数，从而实现与本地代码的无缝集成。</li><li><strong>提高性能</strong>：通过直接操作本地内存，可以避免数据拷贝和类型转换带来的性能损耗，从而提高程序的执行效率。</li><li><strong>扩展现有 Java 库的功能</strong>：Foreign Function &amp; Memory API 提供了一种机制，可以将本地库中的函数包装成 Java 接口，从而方便地扩展现有的<br>Java 库的功能。</li></ul><h2 id="3-Foreign-Function-Memory-API-的实现原理"><a href="#3-Foreign-Function-Memory-API-的实现原理" class="headerlink" title="3. Foreign Function &amp; Memory API 的实现原理"></a>3. Foreign Function &amp; Memory API 的实现原理</h2><p>Foreign Function &amp; Memory API 的实现主要依赖于以下几个关键技术：</p><ul><li><strong>JNI（Java Native Interface）</strong>：JNI 是 Java 平台提供的一种机制，用于在 Java 程序中调用本地代码。Foreign Function &amp; Memory<br>API 利用 JNI 提供的能力，使得 Java 程序可以直接调用本地函数。</li><li><strong>内存管理</strong>：Foreign Function &amp; Memory API 允许开发者直接操作本地内存，包括分配、释放和读写等操作。这需要对内存进行有效的管理，以确保安全性和可靠性。</li><li><strong>类型映射</strong>：由于 Java 和本地代码使用不同的数据类型表示数据，因此需要进行类型映射。Foreign Function &amp; Memory API<br>提供了一套规则和工具，用于将 Java 类型与本地类型进行转换。</li></ul><h2 id="4-Foreign-Function-Memory-API-的优点"><a href="#4-Foreign-Function-Memory-API-的优点" class="headerlink" title="4. Foreign Function &amp; Memory API 的优点"></a>4. Foreign Function &amp; Memory API 的优点</h2><ul><li><strong>无缝集成</strong>：Foreign Function &amp; Memory API 可以使得 Java 程序能够直接调用本地函数，从而实现与本地代码的无缝集成。</li><li><strong>高性能</strong>：通过直接操作本地内存，避免了数据拷贝和类型转换带来的性能损耗，从而提高程序的执行效率。</li><li><strong>灵活性</strong>：Foreign Function &amp; Memory API 提供了丰富的功能和灵活的接口，可以满足不同场景下的需求。</li></ul><h2 id="5-Foreign-Function-Memory-API-的缺点"><a href="#5-Foreign-Function-Memory-API-的缺点" class="headerlink" title="5. Foreign Function &amp; Memory API 的缺点"></a>5. Foreign Function &amp; Memory API 的缺点</h2><ul><li><strong>安全性风险</strong>：直接操作本地内存可能会带来一些安全风险，例如内存泄漏、访问非法内存等。因此，在使用 Foreign Function &amp;<br>Memory API 时需要谨慎处理，并遵循相关的安全规范。</li><li><strong>复杂性</strong>：Foreign Function &amp; Memory API 涉及到与本地代码的交互和内存管理等复杂的问题，对开发者的要求较高，需要具备一定的底层编程知识和经验。</li></ul><h2 id="6-Foreign-Function-Memory-API-的使用示例"><a href="#6-Foreign-Function-Memory-API-的使用示例" class="headerlink" title="6. Foreign Function &amp; Memory API 的使用示例"></a>6. Foreign Function &amp; Memory API 的使用示例</h2><p>以下是一个简单的示例，展示了如何使用 Foreign Function &amp; Memory API 调用本地函数：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jdk.incubator.foreign.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NativeFunctionExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">MemorySegment</span> <span class="variable">segment</span> <span class="operator">=</span> MemorySegment.allocateNative(<span class="number">4</span>)) &#123;</span><br><span class="line">            <span class="type">CLinker</span> <span class="variable">linker</span> <span class="operator">=</span> CLinker.getInstance();</span><br><span class="line">            <span class="type">FunctionDescriptor</span> <span class="variable">descriptor</span> <span class="operator">=</span> FunctionDescriptor.of(CLinker.C_INT, CLinker.C_POINTER);</span><br><span class="line">            <span class="type">LibraryLookup</span> <span class="variable">lookup</span> <span class="operator">=</span> LibraryLookup.ofDefault();</span><br><span class="line">            <span class="type">Symbol</span> <span class="variable">symbol</span> <span class="operator">=</span> lookup.lookup(<span class="string">&quot;printf&quot;</span>);</span><br><span class="line">            <span class="type">FunctionHandle</span> <span class="variable">handle</span> <span class="operator">=</span> linker.downcallHandle(symbol, descriptor);</span><br><span class="line">            </span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">            MemoryAccess.setCString(segment.baseAddress(), message);</span><br><span class="line">            <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> (<span class="type">int</span>) handle.invokeExact(segment.baseAddress());</span><br><span class="line">            </span><br><span class="line">            System.out.println(<span class="string">&quot;Result: &quot;</span> + result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述示例中，我们使用 Foreign Function &amp; Memory API 调用了本地的 printf 函数，并将结果打印出来。</p><h2 id="7-Foreign-Function-Memory-API-的使用注意事项"><a href="#7-Foreign-Function-Memory-API-的使用注意事项" class="headerlink" title="7. Foreign Function &amp; Memory API 的使用注意事项"></a>7. Foreign Function &amp; Memory API 的使用注意事项</h2><ul><li>在使用 Foreign Function &amp; Memory API 时，需要确保本地函数和库已经正确安装并可用。</li><li>对于直接操作本地内存的情况，需要特别注意内存管理和安全性问题，避免出现内存泄漏、访问非法内存等问题。</li><li>使用 Foreign Function &amp; Memory API 需要谨慎处理异常，以确保程序的稳定性和可靠性。</li></ul><h2 id="8-总结-5"><a href="#8-总结-5" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Foreign Function &amp; Memory API 是 Java 平台提供的一种机制，可以使得 Java 程序能够直接调用本地函数，并且可以在 Java<br>中操作本地内存。它通过 JNI 技术实现与本地代码的无缝集成，并提供了高性能和灵活性。然而，在使用 Foreign Function &amp; Memory API<br>时需要注意安全性和复杂性等问题，以确保程序的稳定性和可靠性。</p><h1 id="443-Unnamed-Patterns-and-Variables-Preview"><a href="#443-Unnamed-Patterns-and-Variables-Preview" class="headerlink" title="| 443: | Unnamed Patterns and Variables (Preview) |"></a>| 443: | <a href="https://openjdk.org/jeps/443">Unnamed Patterns and Variables (Preview)</a> |</h1><h2 id="1-什么是Unnamed-Patterns-and-Variables-Preview"><a href="#1-什么是Unnamed-Patterns-and-Variables-Preview" class="headerlink" title="1. 什么是Unnamed Patterns and Variables (Preview)?"></a>1. 什么是Unnamed Patterns and Variables (Preview)?</h2><p>Unnamed Patterns and Variables 是 Java 编程语言的一个新特性，它在 JDK 14 中引入，并在 JDK 15<br>中作为预览功能继续存在。该特性允许我们使用匿名模式和变量来简化代码并提高可读性。</p><h2 id="2-为什么需要Unnamed-Patterns-and-Variables"><a href="#2-为什么需要Unnamed-Patterns-and-Variables" class="headerlink" title="2. 为什么需要Unnamed Patterns and Variables?"></a>2. 为什么需要Unnamed Patterns and Variables?</h2><p>在传统的 Java 代码中，当我们需要对某个对象进行模式匹配时，通常需要创建一个临时变量来存储匹配结果。这样会导致代码冗长、可读性差，并且增加了不必要的命名负担。</p><p>而 Unnamed Patterns and Variables 的出现正是为了解决这个问题。通过使用匿名模式和变量，我们可以直接在模式匹配表达式中使用，避免了创建临时变量的麻烦，使得代码更加简洁和易于理解。</p><h2 id="3-Unnamed-Patterns-and-Variables-的实现原理"><a href="#3-Unnamed-Patterns-and-Variables-的实现原理" class="headerlink" title="3. Unnamed Patterns and Variables 的实现原理"></a>3. Unnamed Patterns and Variables 的实现原理</h2><p>Unnamed Patterns and Variables 的实现原理主要涉及两个方面：匿名模式和匿名变量。</p><h3 id="匿名模式"><a href="#匿名模式" class="headerlink" title="匿名模式"></a>匿名模式</h3><p>匿名模式是一种特殊的模式，用于表示我们只关心某个值是否满足某个条件，而不关心具体的值是什么。在匿名模式中，我们使用下划线 <code>_</code><br>来代替具体的变量名。</p><p>例如，我们可以使用匿名模式来判断一个对象是否为 null：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String _) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;obj is a non-null string&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="匿名变量"><a href="#匿名变量" class="headerlink" title="匿名变量"></a>匿名变量</h3><p>匿名变量是一种特殊的变量，用于表示我们不需要使用该变量的值。在匿名变量中，我们同样使用下划线 <code>_</code> 来代替具体的变量名。</p><p>例如，在 switch 语句中，我们可以使用匿名变量来忽略某些分支的返回值：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (dayOfWeek) &#123;</span><br><span class="line">    <span class="keyword">case</span> MONDAY, TUESDAY, WEDNESDAY, THURSDAY -&gt; System.out.println(<span class="string">&quot;Weekday&quot;</span>);</span><br><span class="line">    <span class="keyword">case</span> FRIDAY -&gt; System.out.println(<span class="string">&quot;Friday&quot;</span>);</span><br><span class="line">    <span class="keyword">case</span> SATURDAY, SUNDAY -&gt; System.out.println(<span class="string">&quot;Weekend&quot;</span>);</span><br><span class="line">    <span class="keyword">default</span> -&gt; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Invalid day of week: &quot;</span> + dayOfWeek);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-Unnamed-Patterns-and-Variables-的优点"><a href="#4-Unnamed-Patterns-and-Variables-的优点" class="headerlink" title="4. Unnamed Patterns and Variables 的优点"></a>4. Unnamed Patterns and Variables 的优点</h2><ul><li><strong>简化代码</strong>：通过使用匿名模式和变量，可以减少临时变量的创建，使得代码更加简洁。</li><li><strong>提高可读性</strong>：匿名模式和变量能够直接表达我们关心的条件，避免了命名的繁琐，使得代码更易于理解。</li></ul><h2 id="5-Unnamed-Patterns-and-Variables-的缺点"><a href="#5-Unnamed-Patterns-and-Variables-的缺点" class="headerlink" title="5. Unnamed Patterns and Variables 的缺点"></a>5. Unnamed Patterns and Variables 的缺点</h2><p>由于 Unnamed Patterns and Variables 目前仍处于预览阶段，因此存在以下一些限制和潜在问题：</p><ul><li><strong>兼容性问题</strong>：由于该特性是在 JDK 14 中引入的，并且仍处于预览阶段，因此可能存在与旧版本 Java 不兼容的问题。</li><li><strong>语法限制</strong>：匿名模式和变量只能用于某些特定的上下文中，不能在所有地方使用。例如，在 lambda 表达式、方法引用等场景中暂时还无法使用。</li></ul><h2 id="6-Unnamed-Patterns-and-Variables-的使用示例"><a href="#6-Unnamed-Patterns-and-Variables-的使用示例" class="headerlink" title="6. Unnamed Patterns and Variables 的使用示例"></a>6. Unnamed Patterns and Variables 的使用示例</h2><p>以下是一个使用匿名模式和变量的示例代码，用于判断一个对象是否为非空字符串：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String _) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;obj is a non-null string&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-Unnamed-Patterns-and-Variables-的使用注意事项"><a href="#7-Unnamed-Patterns-and-Variables-的使用注意事项" class="headerlink" title="7. Unnamed Patterns and Variables 的使用注意事项"></a>7. Unnamed Patterns and Variables 的使用注意事项</h2><p>在使用 Unnamed Patterns and Variables 时，需要注意以下几点：</p><ul><li>匿名模式和变量只能用于表示我们不关心具体值的情况，如果需要获取具体的值，则应该使用普通的命名模式和变量。</li><li>在一些特殊的上下文中，如 lambda 表达式、方法引用等，目前还无法使用匿名模式和变量。</li></ul><h2 id="8-总结-6"><a href="#8-总结-6" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Unnamed Patterns and Variables 是 Java<br>编程语言的一个新特性，它通过引入匿名模式和变量来简化代码并提高可读性。虽然该特性目前仍处于预览阶段，并存在一些限制和潜在问题，但它为我们编写更简洁、易读的代码提供了一种新的方式。</p><h1 id="444-Virtual-Threads"><a href="#444-Virtual-Threads" class="headerlink" title="| 444: | Virtual Threads |"></a>| 444: | <a href="https://openjdk.org/jeps/444">Virtual Threads</a> |</h1><h2 id="1-什么是Virtual-Threads"><a href="#1-什么是Virtual-Threads" class="headerlink" title="1. 什么是Virtual Threads?"></a>1. 什么是Virtual Threads?</h2><p>Virtual Threads（虚拟线程）是Java平台的一项新功能，它旨在改进Java中的并发编程模型。传统上，Java使用基于操作系统线程的并发模型，每个线程都需要分配一个操作系统线程来执行。而Virtual<br>Threads则提供了一种更高效、更轻量级的线程模型。</p><h2 id="2-为什么需要Virtual-Threads"><a href="#2-为什么需要Virtual-Threads" class="headerlink" title="2. 为什么需要Virtual Threads?"></a>2. 为什么需要Virtual Threads?</h2><p>在传统的基于操作系统线程的并发模型中，创建和销毁线程以及在线程之间切换的开销很大。这限制了Java应用程序在处理大规模并发时的性能和扩展性。此外，由于操作系统线程的数量有限，当应用程序需要创建大量线程时，可能会导致资源耗尽或者性能下降。</p><p>Virtual<br>Threads的出现解决了这些问题。它通过引入一种轻量级的线程模型，可以在Java应用程序中创建数百万甚至数十亿个线程，而不会受到操作系统线程数量的限制。这使得Java应用程序能够更好地适应大规模并发场景，并提供更高的性能和可伸缩性。</p><h2 id="3-Virtual-Threads的实现原理"><a href="#3-Virtual-Threads的实现原理" class="headerlink" title="3. Virtual Threads的实现原理"></a>3. Virtual Threads的实现原理</h2><p>Virtual Threads的实现依赖于Java虚拟机（JVM）的协作调度器和Fork&#x2F;Join框架。它通过将多个Virtual<br>Threads映射到少量的操作系统线程上来实现高效的并发执行。</p><p>具体而言，当一个Java应用程序创建一个Virtual<br>Thread时，JVM会为其分配一个虚拟线程（也称为轻量级线程）。这些虚拟线程由协作调度器管理，并在需要时与操作系统线程进行绑定。协作调度器负责决定哪个虚拟线程可以运行以及何时切换虚拟线程。</p><p>Fork&#x2F;Join框架是Virtual Threads的另一个关键组件。它提供了一种任务并行编程模型，允许开发人员将任务分解成更小的子任务，并使用工作窃取算法来实现负载均衡。Virtual<br>Threads利用Fork&#x2F;Join框架的能力，在不同的虚拟线程之间自动地、透明地进行任务划分和调度。</p><h2 id="4-Virtual-Threads的优点"><a href="#4-Virtual-Threads的优点" class="headerlink" title="4. Virtual Threads的优点"></a>4. Virtual Threads的优点</h2><ul><li><strong>更高的性能</strong>：Virtual Threads减少了线程创建和销毁的开销，同时避免了操作系统线程数量的限制，从而提供更高的性能。</li><li><strong>更好的可伸缩性</strong>：由于Virtual Threads可以创建数百万甚至数十亿个线程，因此Java应用程序可以更好地适应大规模并发场景，并具有更好的可伸缩性。</li><li><strong>更低的资源消耗</strong>：相比于操作系统线程，Virtual Threads是轻量级的，占用更少的内存和CPU资源。</li></ul><h2 id="5-Virtual-Threads的缺点"><a href="#5-Virtual-Threads的缺点" class="headerlink" title="5. Virtual Threads的缺点"></a>5. Virtual Threads的缺点</h2><p>虽然Virtual Threads带来了许多优势，但也存在一些潜在的缺点：</p><ul><li><strong>学习成本较高</strong>：使用Virtual Threads需要对并发编程模型有一定的理解，并且需要适应新的API和开发范式。</li><li><strong>可能引入新的问题</strong>：由于Virtual Threads是一个相对较新的功能，可能会存在一些未知的问题或者不稳定性。</li></ul><h2 id="6-Virtual-Threads的使用示例"><a href="#6-Virtual-Threads的使用示例" class="headerlink" title="6. Virtual Threads的使用示例"></a>6. Virtual Threads的使用示例</h2><p>下面是一个简单的使用Virtual Threads的示例代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ThreadPoolExecutor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VirtualThreadsExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ThreadPoolExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> (ThreadPoolExecutor) Executors.newVirtualThreadExecutor();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">taskId</span> <span class="operator">=</span> i;</span><br><span class="line">            executor.execute(() -&gt; &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Task &quot;</span> + taskId + <span class="string">&quot; is running on virtual thread: &quot;</span> + Thread.currentThread().getName());</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述示例中，我们使用<code>Executors.newVirtualThreadExecutor()</code>方法创建了一个<code>ThreadPoolExecutor</code>实例，该实例可以执行Virtual<br>Threads。然后，我们通过调用<code>execute()</code>方法提交了一系列任务，每个任务都会打印当前运行的虚拟线程的名称。</p><h2 id="7-Virtual-Threads的使用注意事项"><a href="#7-Virtual-Threads的使用注意事项" class="headerlink" title="7. Virtual Threads的使用注意事项"></a>7. Virtual Threads的使用注意事项</h2><p>在使用Virtual Threads时，需要注意以下几点：</p><ul><li>虽然Virtual Threads可以创建大量线程，但过多的线程仍可能导致性能下降或资源耗尽。因此，在设计应用程序时，仍需合理控制并发度。</li><li>使用Virtual Threads时，需要遵循良好的并发编程实践，如避免共享可变状态、使用适当的同步机制等，以确保线程安全性和正确性。</li><li>在迁移现有代码到使用Virtual Threads时，需要进行一定的重构和调整，以适应新的API和开发范式。</li></ul><h2 id="8-总结-7"><a href="#8-总结-7" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Virtual Threads是Java平台的一项新功能，旨在改进Java中的并发编程模型。它通过引入轻量级的虚拟线程，并利用协作调度器和Fork&#x2F;Join框架来提供高效的并发执行。Virtual<br>Threads具有更高的性能、更好的可伸缩性和较低的资源消耗，但也需要学习成本较高，并且可能存在一些潜在的问题。在使用Virtual<br>Threads时，需要注意合理控制并发度、遵循并发编程实践，并进行必要的重构和调整。</p><h1 id="445-Unnamed-Classes-and-Instance-Main-Methods-Preview"><a href="#445-Unnamed-Classes-and-Instance-Main-Methods-Preview" class="headerlink" title="| 445: | Unnamed Classes and Instance Main Methods (Preview) |"></a>| 445: | <a href="https://openjdk.org/jeps/445">Unnamed Classes and Instance Main Methods (Preview)</a> |</h1><h2 id="1-什么是Unnamed-Classes-and-Instance-Main-Methods-Preview"><a href="#1-什么是Unnamed-Classes-and-Instance-Main-Methods-Preview" class="headerlink" title="1. 什么是Unnamed Classes and Instance Main Methods (Preview)?"></a>1. 什么是Unnamed Classes and Instance Main Methods (Preview)?</h2><p>“Unnamed Classes and Instance Main Methods” 是一个 Java 编程语言的新特性，它在 JDK 14 中引入，并在 JDK 15<br>中成为预览功能。该特性允许我们在类中定义匿名类和实例主方法。</p><p>在传统的 Java 编程中，我们只能在顶级类或静态内部类中定义 main 方法作为程序的入口点。而使用 “Unnamed Classes and Instance<br>Main Methods” 特性后，我们可以在任何类的实例中定义 main 方法，从而使得程序的入口点更加灵活。</p><h2 id="2-为什么需要Unnamed-Classes-and-Instance-Main-Methods"><a href="#2-为什么需要Unnamed-Classes-and-Instance-Main-Methods" class="headerlink" title="2. 为什么需要Unnamed Classes and Instance Main Methods?"></a>2. 为什么需要Unnamed Classes and Instance Main Methods?</h2><p>传统的 Java 程序必须将 main<br>方法定义在顶级类或静态内部类中，这限制了程序的结构和组织方式。有时候，我们可能希望将多个相关的逻辑封装在同一个类的实例中，以提高代码的可读性和可维护性。而 “<br>Unnamed Classes and Instance Main Methods” 特性正是为了满足这种需求而引入的。</p><p>通过在类的实例中定义 main 方法，我们可以更好地组织和管理程序的逻辑，减少顶级类和静态内部类的数量，使代码更加清晰和易于理解。</p><h2 id="3-Unnamed-Classes-and-Instance-Main-Methods-的实现原理"><a href="#3-Unnamed-Classes-and-Instance-Main-Methods-的实现原理" class="headerlink" title="3. Unnamed Classes and Instance Main Methods 的实现原理"></a>3. Unnamed Classes and Instance Main Methods 的实现原理</h2><p>“Unnamed Classes and Instance Main Methods” 特性的实现原理涉及到两个方面：匿名类和实例主方法。</p><h3 id="3-1-匿名类"><a href="#3-1-匿名类" class="headerlink" title="3.1 匿名类"></a>3.1 匿名类</h3><p>在 Java 中，我们可以使用匿名类来创建一个没有显式名称的类。匿名类通常用于创建临时的、只需要一次使用的类对象。它们可以继承自某个类或实现某个接口，并重写其中的方法。</p><p>匿名类的语法如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> 父类构造器(参数列表) &#123;</span><br><span class="line">    <span class="comment">// 匿名类的成员变量和方法定义</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-实例主方法"><a href="#3-2-实例主方法" class="headerlink" title="3.2 实例主方法"></a>3.2 实例主方法</h3><p>传统的 Java 程序入口点是通过静态 main 方法来定义的，而 “Unnamed Classes and Instance Main Methods” 特性允许我们在类的实例中定义<br>main 方法。</p><p>实例主方法的语法如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 主方法的代码逻辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-Unnamed-Classes-and-Instance-Main-Methods-的优点"><a href="#4-Unnamed-Classes-and-Instance-Main-Methods-的优点" class="headerlink" title="4. Unnamed Classes and Instance Main Methods 的优点"></a>4. Unnamed Classes and Instance Main Methods 的优点</h2><ul><li><strong>灵活性</strong>：通过在类的实例中定义 main 方法，程序的入口点更加灵活，可以根据需求将多个相关的逻辑封装在同一个类的实例中。</li><li><strong>可读性</strong>：将相关的逻辑组织在同一个类的实例中，使得代码更加清晰和易于理解。</li><li><strong>可维护性</strong>：减少顶级类和静态内部类的数量，简化代码结构，提高代码的可维护性。</li></ul><h2 id="5-Unnamed-Classes-and-Instance-Main-Methods-的缺点"><a href="#5-Unnamed-Classes-and-Instance-Main-Methods-的缺点" class="headerlink" title="5. Unnamed Classes and Instance Main Methods 的缺点"></a>5. Unnamed Classes and Instance Main Methods 的缺点</h2><ul><li><strong>语法复杂</strong>：匿名类和实例主方法的语法相对传统的 main 方法更加复杂，需要额外的学习成本。</li><li><strong>可读性降低</strong>：如果滥用该特性，将多个逻辑封装在同一个类的实例中可能会导致代码可读性下降。</li></ul><h2 id="6-Unnamed-Classes-and-Instance-Main-Methods-的使用示例"><a href="#6-Unnamed-Classes-and-Instance-Main-Methods-的使用示例" class="headerlink" title="6. Unnamed Classes and Instance Main Methods 的使用示例"></a>6. Unnamed Classes and Instance Main Methods 的使用示例</h2><p>下面是一个使用 “Unnamed Classes and Instance Main Methods” 特性的示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Example</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Example</span>().main(args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，我们定义了一个名为 <code>Example</code> 的类，并在其中创建了一个实例。通过调用实例的 <code>main</code><br>方法，程序的入口点被指定为该实例的 <code>main</code> 方法。</p><h2 id="7-Unnamed-Classes-and-Instance-Main-Methods-的使用注意事项"><a href="#7-Unnamed-Classes-and-Instance-Main-Methods-的使用注意事项" class="headerlink" title="7. Unnamed Classes and Instance Main Methods 的使用注意事项"></a>7. Unnamed Classes and Instance Main Methods 的使用注意事项</h2><ul><li>在使用 “Unnamed Classes and Instance Main Methods” 特性时，需要确保每个类的实例只有一个 main 方法，否则编译器将无法确定程序的入口点。</li><li>匿名类和实例主方法的语法较为复杂，需要仔细理解并遵循正确的语法规则。</li><li>虽然 “Unnamed Classes and Instance Main Methods” 特性在 JDK 15 中成为预览功能，但仍然存在一些潜在的问题和限制。在使用时需要注意这些问题，并及时反馈给开发团队。</li></ul><h2 id="8-总结-8"><a href="#8-总结-8" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>“Unnamed Classes and Instance Main Methods” 是 Java<br>编程语言的一个新特性，它允许我们在类的实例中定义匿名类和实例主方法。通过该特性，我们可以更灵活地组织程序的逻辑，提高代码的可读性和可维护性。然而，使用该特性需要注意语法复杂性和可读性降低的问题，并遵循正确的使用方式。</p><h1 id="446-Scoped-Values-Preview"><a href="#446-Scoped-Values-Preview" class="headerlink" title="| 446: | Scoped Values (Preview) |"></a>| 446: | <a href="https://openjdk.org/jeps/446">Scoped Values (Preview)</a> |</h1><h2 id="1-什么是Scoped-Values-Preview"><a href="#1-什么是Scoped-Values-Preview" class="headerlink" title="1. 什么是Scoped Values (Preview)?"></a>1. 什么是Scoped Values (Preview)?</h2><p>Scoped Values (Preview) 是 Java 平台的一个新特性，它在 JDK 17 中引入。该特性旨在提供一种机制，用于在代码块级别上设置和使用临时变量。</p><h2 id="2-为什么需要Scoped-Values-Preview"><a href="#2-为什么需要Scoped-Values-Preview" class="headerlink" title="2. 为什么需要Scoped Values (Preview)?"></a>2. 为什么需要Scoped Values (Preview)?</h2><p>在传统的 Java 编程中，我们通常会将变量声明在方法或类的作用域内，并且这些变量的生命周期与其所在的作用域相同。然而，在某些情况下，我们可能希望在更小的范围内定义临时变量，以便更好地控制其可见性和生命周期。</p><p>Scoped Values (Preview) 提供了一种简洁、安全的方式来定义和使用临时变量，使得代码更加清晰易读，并且可以减少不必要的命名冲突和资源泄漏问题。</p><h2 id="3-Scoped-Values-Preview-的实现原理"><a href="#3-Scoped-Values-Preview-的实现原理" class="headerlink" title="3. Scoped Values (Preview) 的实现原理?"></a>3. Scoped Values (Preview) 的实现原理?</h2><p>Scoped Values (Preview) 的实现基于 Java 语言规范中的局部变量类型推断（Local Variable Type Inference）机制。通过使用 var<br>关键字，我们可以在代码块内部声明临时变量，并根据初始化表达式的类型进行类型推断。</p><p>例如，以下示例展示了如何使用 Scoped Values (Preview) 声明和使用临时变量：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">exampleMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 使用 Scoped Values (Preview) 声明临时变量</span></span><br><span class="line">    <span class="type">var</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 在代码块内部使用临时变量</span></span><br><span class="line">    <span class="keyword">if</span> (message.length() &gt; <span class="number">10</span>) &#123;</span><br><span class="line">        System.out.println(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，我们使用 Scoped Values (Preview) 声明了一个名为 message 的临时变量，并将其初始化为字符串 “Hello, World!”<br>。然后，在 if 语句的代码块内部，我们可以直接使用该临时变量。</p><h2 id="4-Scoped-Values-Preview-的优点"><a href="#4-Scoped-Values-Preview-的优点" class="headerlink" title="4. Scoped Values (Preview) 的优点"></a>4. Scoped Values (Preview) 的优点</h2><ul><li><strong>简洁性</strong>：Scoped Values (Preview) 提供了一种更简洁的方式来声明和使用临时变量，减少了冗余的代码。</li><li><strong>可读性</strong>：通过在代码块级别上定义临时变量，使得代码更加清晰易读，提高了代码的可维护性。</li><li><strong>类型安全</strong>：Scoped Values (Preview) 基于 Java 语言规范中的局部变量类型推断机制，确保了变量的类型安全性。</li></ul><h2 id="5-Scoped-Values-Preview-的缺点"><a href="#5-Scoped-Values-Preview-的缺点" class="headerlink" title="5. Scoped Values (Preview) 的缺点"></a>5. Scoped Values (Preview) 的缺点</h2><p>尽管 Scoped Values (Preview) 提供了许多优点，但也存在一些潜在的缺点：</p><ul><li><strong>兼容性问题</strong>：由于 Scoped Values (Preview) 是 JDK 17 中引入的新特性，因此在较旧版本的 Java 中无法使用。</li><li><strong>学习成本</strong>：对于不熟悉局部变量类型推断机制的开发人员来说，可能需要一些时间来适应 Scoped Values (Preview) 的使用方式。</li></ul><h2 id="6-Scoped-Values-Preview-的使用示例"><a href="#6-Scoped-Values-Preview-的使用示例" class="headerlink" title="6. Scoped Values (Preview) 的使用示例"></a>6. Scoped Values (Preview) 的使用示例</h2><p>以下是一个使用 Scoped Values (Preview) 的简单示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">printMessage</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">var</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">    System.out.println(message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，我们使用 Scoped Values (Preview) 声明了一个名为 message 的临时变量，并将其初始化为字符串 “Hello, World!”<br>。然后，我们通过调用 System.out.println 方法打印该临时变量的值。</p><h2 id="7-Scoped-Values-Preview-的使用注意事项"><a href="#7-Scoped-Values-Preview-的使用注意事项" class="headerlink" title="7. Scoped Values (Preview) 的使用注意事项"></a>7. Scoped Values (Preview) 的使用注意事项</h2><p>在使用 Scoped Values (Preview) 时，需要注意以下几点：</p><ul><li><strong>作用域限制</strong>：Scoped Values (Preview) 声明的临时变量仅在当前代码块内部可见，超出该代码块范围后将无法访问。</li><li><strong>类型推断</strong>：由于 Scoped Values (Preview) 是基于局部变量类型推断机制实现的，因此必须确保初始化表达式具有明确的类型信息，以便进行正确的类型推断。</li><li><strong>命名冲突</strong>：当在同一代码块内使用多个 Scoped Values (Preview) 声明临时变量时，需要避免命名冲突，以免引起混淆和错误。</li></ul><h2 id="8-总结-9"><a href="#8-总结-9" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Scoped Values (Preview) 是 Java 平台的一个新特性，它提供了一种在代码块级别上设置和使用临时变量的机制。通过使用 var<br>关键字，我们可以在代码块内部声明临时变量，并根据初始化表达式的类型进行类型推断。Scoped Values (Preview)<br>的优点包括简洁性、可读性和类型安全性，但也存在兼容性问题和学习成本。在使用 Scoped Values (Preview)<br>时，需要注意作用域限制、类型推断和命名冲突等注意事项。</p><h1 id="448-Vector-API-Sixth-Incubator"><a href="#448-Vector-API-Sixth-Incubator" class="headerlink" title="| 448: | Vector API (Sixth Incubator) |"></a>| 448: | <a href="https://openjdk.org/jeps/448">Vector API (Sixth Incubator)</a> |</h1><h2 id="1-什么是Vector-API-Sixth-Incubator"><a href="#1-什么是Vector-API-Sixth-Incubator" class="headerlink" title="1. 什么是Vector API (Sixth Incubator)?"></a>1. 什么是Vector API (Sixth Incubator)?</h2><p>Vector API (Sixth Incubator) 是 Java 平台的一个项目，旨在提供一种简单且高效的方式来执行向量化计算。它引入了新的类和接口，以支持使用<br>SIMD（Single Instruction, Multiple Data）指令集进行并行计算。</p><h2 id="2-为什么需要Vector-API-Sixth-Incubator"><a href="#2-为什么需要Vector-API-Sixth-Incubator" class="headerlink" title="2. 为什么需要Vector API (Sixth Incubator)?"></a>2. 为什么需要Vector API (Sixth Incubator)?</h2><p>在许多应用程序中，存在大量的数据并行计算任务，例如图像处理、科学计算和机器学习等领域。传统的 Java<br>编程模型无法充分利用现代硬件的并行计算能力，导致性能低下。而 Vector API (Sixth Incubator) 的目标就是通过向量化计算来提高这些应用程序的性能。</p><h2 id="3-Vector-API-Sixth-Incubator-的实现原理"><a href="#3-Vector-API-Sixth-Incubator-的实现原理" class="headerlink" title="3. Vector API (Sixth Incubator) 的实现原理?"></a>3. Vector API (Sixth Incubator) 的实现原理?</h2><p>Vector API (Sixth Incubator) 基于 SIMD 指令集，即单指令多数据流指令集。SIMD 指令集可以同时对多个数据元素执行相同的操作，从而实现并行计算。Vector<br>API (Sixth Incubator) 提供了一组新的类和接口，使开发人员能够直接编写基于 SIMD 指令集的代码。</p><p>具体来说，Vector API (Sixth Incubator) 引入了 <code>java.util.vector</code> 包，其中包含了一些新的类和接口，如 <code>Vector</code>、<code>FloatVector</code><br>和 <code>IntVector</code> 等。这些类提供了一组向量化操作方法，例如加法、减法、乘法等，以及对应的掩码操作。</p><p>在底层实现上，Vector API (Sixth Incubator) 使用了特定硬件平台的 SIMD 指令集来执行向量化计算。具体实现细节会依赖于不同的硬件架构和操作系统。</p><h2 id="4-Vector-API-Sixth-Incubator-的优点"><a href="#4-Vector-API-Sixth-Incubator-的优点" class="headerlink" title="4. Vector API (Sixth Incubator) 的优点"></a>4. Vector API (Sixth Incubator) 的优点</h2><ul><li>提高性能：通过利用 SIMD 指令集进行并行计算，可以显著提高应用程序的性能。</li><li>简化编程模型：Vector API (Sixth Incubator) 提供了一组简单易用的类和接口，使开发人员能够直接编写基于 SIMD 指令集的代码，而无需手动优化。</li></ul><h2 id="5-Vector-API-Sixth-Incubator-的缺点"><a href="#5-Vector-API-Sixth-Incubator-的缺点" class="headerlink" title="5. Vector API (Sixth Incubator) 的缺点"></a>5. Vector API (Sixth Incubator) 的缺点</h2><ul><li>平台限制：Vector API (Sixth Incubator) 的实现依赖于特定的硬件平台和操作系统，因此在不同的平台上可能存在兼容性问题。</li><li>学习成本：使用 Vector API (Sixth Incubator) 需要学习新的类和接口，并理解 SIMD 指令集的工作原理，对于一些开发人员来说可能需要花费一定的时间和精力。</li></ul><h2 id="6-Vector-API-Sixth-Incubator-的使用示例"><a href="#6-Vector-API-Sixth-Incubator-的使用示例" class="headerlink" title="6. Vector API (Sixth Incubator) 的使用示例"></a>6. Vector API (Sixth Incubator) 的使用示例</h2><p>下面是一个简单的使用 Vector API (Sixth Incubator) 进行向量化计算的示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.vector.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VectorExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">8</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 创建两个向量对象</span></span><br><span class="line">        <span class="type">FloatVector</span> <span class="variable">a</span> <span class="operator">=</span> FloatVector.broadcast(size, <span class="number">2.0f</span>);</span><br><span class="line">        <span class="type">FloatVector</span> <span class="variable">b</span> <span class="operator">=</span> FloatVector.broadcast(size, <span class="number">3.0f</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 执行向量化加法操作</span></span><br><span class="line">        <span class="type">FloatVector</span> <span class="variable">result</span> <span class="operator">=</span> a.add(b);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        <span class="type">float</span>[] array = <span class="keyword">new</span> <span class="title class_">float</span>[size];</span><br><span class="line">        result.intoArray(array, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">float</span> value : array) &#123;</span><br><span class="line">            System.out.println(value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，我们创建了两个长度为 8 的浮点数向量，并执行了向量化的加法操作。最后将结果输出到数组中并打印出来。</p><h2 id="7-Vector-API-Sixth-Incubator-的使用注意事项"><a href="#7-Vector-API-Sixth-Incubator-的使用注意事项" class="headerlink" title="7. Vector API (Sixth Incubator) 的使用注意事项"></a>7. Vector API (Sixth Incubator) 的使用注意事项</h2><ul><li>硬件兼容性：由于 Vector API (Sixth Incubator) 的实现依赖于特定的硬件平台和操作系统，因此在使用之前需要确保目标平台支持<br>SIMD 指令集。</li><li>性能优化：虽然 Vector API (Sixth Incubator) 可以提高应用程序的性能，但要获得最佳性能还需要进行适当的优化。例如，避免频繁的向量化操作和数据拷贝等。</li></ul><h2 id="8-总结-10"><a href="#8-总结-10" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Vector API (Sixth Incubator) 是 Java 平台的一个项目，旨在提供一种简单且高效的方式来执行向量化计算。它基于 SIMD<br>指令集，并通过引入新的类和接口来支持并行计算。使用 Vector API (Sixth Incubator) 可以提高应用程序的性能，但需要注意硬件兼容性和适当的性能优化。</p><h1 id="449-Deprecate-the-Windows-32-bit-x86-Port-for-Removal"><a href="#449-Deprecate-the-Windows-32-bit-x86-Port-for-Removal" class="headerlink" title="| 449: | Deprecate the Windows 32-bit x86 Port for Removal |"></a>| 449: | <a href="https://openjdk.org/jeps/449">Deprecate the Windows 32-bit x86 Port for Removal</a> |</h1><p>名字太长了。。后面简称 449</p><h2 id="1-什么是JEP-449"><a href="#1-什么是JEP-449" class="headerlink" title="1. 什么是JEP 449?"></a>1. 什么是JEP 449?</h2><p>JEP 449（Java Enhancement Proposal 449）是一个针对OpenJDK的提案，旨在废弃并最终移除Windows 32位x86平台上的Java支持。</p><h2 id="2-为什么需要废弃Windows-32位x86平台上的Java支持？"><a href="#2-为什么需要废弃Windows-32位x86平台上的Java支持？" class="headerlink" title="2. 为什么需要废弃Windows 32位x86平台上的Java支持？"></a>2. 为什么需要废弃Windows 32位x86平台上的Java支持？</h2><p>主要有以下几个原因：</p><ul><li><strong>过时的硬件和操作系统</strong>：Windows 32位x86平台已经逐渐被淘汰，现代计算机普遍采用64位架构。同时，大多数新版本的Windows操作系统也只提供了64位版本。</li><li><strong>性能限制</strong>：32位架构限制了可寻址内存空间的大小，导致无法充分利用现代计算机的资源。而64位架构可以提供更大的内存地址空间，从而提高应用程序的性能和扩展性。</li><li><strong>安全问题</strong>：32位架构存在一些安全漏洞和限制，例如缓冲区溢出等。而64位架构通过引入更多的保护机制来增加应用程序的安全性。</li></ul><p>基于以上原因，废弃Windows 32位x86平台上的Java支持是合理且必要的。</p><h2 id="3-JEP-449的实现原理"><a href="#3-JEP-449的实现原理" class="headerlink" title="3. JEP 449的实现原理"></a>3. JEP 449的实现原理</h2><p>JEP 449的实现原理涉及到编译器、虚拟机和库等多个方面的改动。</p><ul><li><strong>编译器层面</strong>：废弃32位x86平台上的Java支持需要对编译器进行修改，禁止生成32位x86架构的目标代码。</li><li><strong>虚拟机层面</strong>：虚拟机需要对内存管理、垃圾回收等进行调整，以适应64位架构的特性。同时，还需要更新与操作系统交互的部分代码，确保在64位环境下正常运行。</li><li><strong>库层面</strong>：一些与硬件相关的库可能需要重新编写或者替换为64位版本，以充分利用64位架构的优势。</li></ul><p>具体实现细节可以参考JEP 449提案中的详细说明。</p><h2 id="4-JEP-449的优点"><a href="#4-JEP-449的优点" class="headerlink" title="4. JEP 449的优点"></a>4. JEP 449的优点</h2><ul><li><strong>性能提升</strong>：64位架构可以提供更大的内存地址空间，从而提高应用程序的性能和扩展性。</li><li><strong>安全增强</strong>：64位架构引入了更多的保护机制，提高了应用程序的安全性。</li><li><strong>与现代计算机趋势相符</strong>：Windows 32位x86平台已经逐渐被淘汰，废弃该平台上的Java支持是与时俱进的举措。</li></ul><h2 id="5-JEP-449的缺点"><a href="#5-JEP-449的缺点" class="headerlink" title="5. JEP 449的缺点"></a>5. JEP 449的缺点</h2><ul><li><strong>向后兼容性问题</strong>：废弃Windows 32位x86平台上的Java支持可能导致一些现有的应用程序无法在该平台上运行。这需要开发人员进行相应的迁移和调整。</li><li>**对于仍然使用32位硬件和操作系统的用户而言，将无法继续获得新版本的Java更新和功能改进。</li></ul><h2 id="6-JEP-449的使用示例"><a href="#6-JEP-449的使用示例" class="headerlink" title="6. JEP 449的使用示例"></a>6. JEP 449的使用示例</h2><p>JEP 449是一个OpenJDK的提案，它主要影响到OpenJDK的开发者和Windows 32位x86平台上的Java用户。对于开发者来说，他们需要根据JEP<br>449的实施情况，适时地迁移和调整自己的应用程序代码。对于Windows<br>32位x86平台上的Java用户来说，他们需要考虑升级到64位架构的计算机和操作系统，以继续获得最新的Java更新和功能改进。</p><h2 id="7-JEP-449的使用注意事项"><a href="#7-JEP-449的使用注意事项" class="headerlink" title="7. JEP 449的使用注意事项"></a>7. JEP 449的使用注意事项</h2><ul><li>开发者需要及时关注JEP 449的实施情况，并根据需要进行相应的迁移和调整。</li><li>Windows 32位x86平台上的Java用户需要考虑升级到64位架构的计算机和操作系统，以继续获得最新的Java更新和功能改进。</li></ul><h2 id="8-总结-11"><a href="#8-总结-11" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>JEP 449旨在废弃并最终移除Windows<br>32位x86平台上的Java支持。这是基于该平台已经逐渐被淘汰、性能限制和安全问题等原因做出的合理举措。废弃该平台上的Java支持可以提高应用程序的性能和安全性，并与现代计算机趋势相符。开发者需要及时关注JEP<br>449的实施情况，并根据需要进行相应的迁移和调整。Windows 32位x86平台上的Java用户需要考虑升级到64位架构的计算机和操作系统，以继续获得最新的Java更新和功能改进。</p><h1 id="451-Prepare-to-Disallow-the-Dynamic-Loading-of-Agents"><a href="#451-Prepare-to-Disallow-the-Dynamic-Loading-of-Agents" class="headerlink" title="| 451: | Prepare to Disallow the Dynamic Loading of Agents |"></a>| 451: | <a href="https://openjdk.org/jeps/451">Prepare to Disallow the Dynamic Loading of Agents</a> |</h1><h2 id="1-什么是动态加载代理禁用准备（Prepare-to-Disallow-the-Dynamic-Loading-of-Agents）？"><a href="#1-什么是动态加载代理禁用准备（Prepare-to-Disallow-the-Dynamic-Loading-of-Agents）？" class="headerlink" title="1. 什么是动态加载代理禁用准备（Prepare to Disallow the Dynamic Loading of Agents）？"></a>1. 什么是动态加载代理禁用准备（Prepare to Disallow the Dynamic Loading of Agents）？</h2><p>动态加载代理禁用准备（Prepare to Disallow the Dynamic Loading of<br>Agents）是一个Java增强提案，其目标是在JVM中禁止动态加载代理。代理是一种能够修改或监视应用程序行为的机制，它可以通过字节码注入来实现。</p><h2 id="2-为什么需要动态加载代理禁用准备？"><a href="#2-为什么需要动态加载代理禁用准备？" class="headerlink" title="2. 为什么需要动态加载代理禁用准备？"></a>2. 为什么需要动态加载代理禁用准备？</h2><p>动态加载代理允许开发人员在运行时修改和监视Java应用程序的行为。虽然这对于调试和性能分析等方面非常有用，但也存在潜在的安全风险。恶意代码可能会利用动态加载代理的功能来执行恶意操作，例如窃取敏感信息、篡改数据等。</p><p>因此，为了加强Java应用程序的安全性，限制动态加载代理的使用是很有必要的。</p><h2 id="3-动态加载代理禁用准备的实现原理"><a href="#3-动态加载代理禁用准备的实现原理" class="headerlink" title="3. 动态加载代理禁用准备的实现原理"></a>3. 动态加载代理禁用准备的实现原理</h2><p>动态加载代理禁用准备的实现涉及到以下几个方面：</p><h3 id="3-1-修改ClassLoader"><a href="#3-1-修改ClassLoader" class="headerlink" title="3.1 修改ClassLoader"></a>3.1 修改ClassLoader</h3><p>该提案建议修改Java虚拟机的类加载器，以阻止动态加载代理。具体而言，将在<code>java.lang.ClassLoader</code><br>类中添加一个新的方法<code>boolean disallowDynamicAgentLoading()</code>，默认返回<code>false</code>。当该方法被调用时，将返回<code>true</code>，表示禁止动态加载代理。</p><h3 id="3-2-修改Instrumentation-API"><a href="#3-2-修改Instrumentation-API" class="headerlink" title="3.2 修改Instrumentation API"></a>3.2 修改Instrumentation API</h3><p>为了支持ClassLoader的修改，还需要对Java虚拟机的Instrumentation<br>API进行相应的更改。具体而言，将在<code>java.lang.instrument.Instrumentation</code><br>接口中添加一个新的方法<code>boolean isDynamicAgentLoadingAllowed()</code>，默认返回<code>true</code>。当该方法返回<code>false</code>时，表示禁止动态加载代理。</p><h3 id="3-3-更新安全管理器"><a href="#3-3-更新安全管理器" class="headerlink" title="3.3 更新安全管理器"></a>3.3 更新安全管理器</h3><p>此外，还建议更新Java虚拟机的安全管理器（SecurityManager），以允许检查是否允许动态加载代理。这样可以通过安全策略来控制哪些代码可以使用动态加载代理功能。</p><h2 id="4-动态加载代理禁用准备的优点"><a href="#4-动态加载代理禁用准备的优点" class="headerlink" title="4. 动态加载代理禁用准备的优点"></a>4. 动态加载代理禁用准备的优点</h2><ul><li>提高Java应用程序的安全性：禁止动态加载代理可以防止恶意代码利用其功能执行潜在的危险操作。</li><li>简化安全配置：通过更新安全管理器和类加载器，可以更方便地控制动态加载代理的使用权限，简化安全配置过程。</li></ul><h2 id="5-动态加载代理禁用准备的缺点"><a href="#5-动态加载代理禁用准备的缺点" class="headerlink" title="5. 动态加载代理禁用准备的缺点"></a>5. 动态加载代理禁用准备的缺点</h2><ul><li>可能影响现有代码：如果现有代码依赖于动态加载代理的功能，那么禁用它可能会导致这些代码无法正常工作。因此，在应用该增强提案之前，需要仔细评估现有代码的依赖关系。</li></ul><h2 id="6-动态加载代理禁用准备的使用示例"><a href="#6-动态加载代理禁用准备的使用示例" class="headerlink" title="6. 动态加载代理禁用准备的使用示例"></a>6. 动态加载代理禁用准备的使用示例</h2><p>以下是一个简单的示例，展示了如何使用动态加载代理禁用准备：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.instrument.Instrumentation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AgentLoader</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">premain</span><span class="params">(String agentArgs, Instrumentation inst)</span> &#123;</span><br><span class="line">        <span class="comment">// 禁止动态加载代理</span></span><br><span class="line">        <span class="keyword">if</span> (inst.isDynamicAgentLoadingAllowed()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SecurityException</span>(<span class="string">&quot;Dynamic loading of agents is not allowed&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 其他初始化操作...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，<code>premain</code>方法是Java代理的入口点。通过调用<code>isDynamicAgentLoadingAllowed()</code>方法，可以检查是否允许动态加载代理。如果不允许，则抛出安全异常。</p><h2 id="7-动态加载代理禁用准备的使用注意事项"><a href="#7-动态加载代理禁用准备的使用注意事项" class="headerlink" title="7. 动态加载代理禁用准备的使用注意事项"></a>7. 动态加载代理禁用准备的使用注意事项</h2><ul><li>在使用动态加载代理禁用准备之前，需要仔细评估现有代码是否依赖于动态加载代理的功能。</li><li>需要更新相关的类加载器和安全管理器来支持禁止动态加载代理的功能。</li><li>使用动态加载代理禁用准备时，需要确保应用程序的安全策略能够正确地控制动态加载代理的使用权限。</li></ul><h2 id="8-总结-12"><a href="#8-总结-12" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>动态加载代理禁用准备是一个Java增强提案，旨在禁止动态加载代理以提高应用程序的安全性。它通过修改类加载器、Instrumentation<br>API和安全管理器来实现禁止动态加载代理的功能。尽管这样做可以增加应用程序的安全性，但也可能影响依赖于动态加载代理的现有代码。因此，在使用该功能之前需要仔细评估现有代码的依赖关系。</p><h1 id="452-Key-Encapsulation-Mechanism-API"><a href="#452-Key-Encapsulation-Mechanism-API" class="headerlink" title="| 452: | Key Encapsulation Mechanism API |"></a>| 452: | <a href="https://openjdk.org/jeps/452">Key Encapsulation Mechanism API</a> |</h1><h2 id="1-什么是Key-Encapsulation-Mechanism-API"><a href="#1-什么是Key-Encapsulation-Mechanism-API" class="headerlink" title="1. 什么是Key Encapsulation Mechanism API?"></a>1. 什么是Key Encapsulation Mechanism API?</h2><p>Key Encapsulation Mechanism (KEM) API 是一个 Java<br>API，用于支持密钥封装机制。密钥封装是一种加密技术，它将一个对称密钥（也称为会话密钥）与公钥结合使用，以便在不直接暴露私钥的情况下安全地传输密钥。</p><p>KEM API 提供了一组方法和类，用于生成、封装和解封装密钥。它可以与现有的密码学算法和协议集成，提供更高级别的密钥管理功能。</p><h2 id="2-为什么需要Key-Encapsulation-Mechanism-API"><a href="#2-为什么需要Key-Encapsulation-Mechanism-API" class="headerlink" title="2. 为什么需要Key Encapsulation Mechanism API?"></a>2. 为什么需要Key Encapsulation Mechanism API?</h2><p>在传统的密钥交换过程中，通常需要事先共享或分发密钥。这可能存在许多安全风险，例如密钥泄露、中间人攻击等。而密钥封装机制通过使用公钥进行密钥交换，避免了这些问题。</p><p>Key Encapsulation Mechanism API 的出现使得开发者能够更方便地实现密钥封装机制，并提供了更高级别的密钥管理功能。它简化了密钥生成、封装和解封装的过程，同时保证了安全性和可靠性。</p><h2 id="3-Key-Encapsulation-Mechanism-API的实现原理"><a href="#3-Key-Encapsulation-Mechanism-API的实现原理" class="headerlink" title="3. Key Encapsulation Mechanism API的实现原理"></a>3. Key Encapsulation Mechanism API的实现原理</h2><p>Key Encapsulation Mechanism API 的实现原理基于非对称加密算法和密钥封装机制。它使用公钥进行密钥交换，并通过将会话密钥封装在一个安全的密文中，以确保密钥的安全传输。</p><p>具体实现过程如下：</p><ol><li>生成一对公私钥对。</li><li>使用公钥进行密钥封装，生成一个密文。</li><li>将密文发送给接收方。</li><li>接收方使用私钥解封装密文，得到会话密钥。</li><li>双方可以使用会话密钥进行加密通信。</li></ol><h2 id="4-Key-Encapsulation-Mechanism-API的优点"><a href="#4-Key-Encapsulation-Mechanism-API的优点" class="headerlink" title="4. Key Encapsulation Mechanism API的优点"></a>4. Key Encapsulation Mechanism API的优点</h2><ul><li><strong>安全性高</strong>：Key Encapsulation Mechanism API 使用了非对称加密算法和密钥封装机制，能够提供较高的安全性，避免了密钥泄露和中间人攻击等问题。</li><li><strong>易于使用</strong>：API 提供了简单易用的方法和类，开发者可以轻松地生成、封装和解封装密钥，无需深入了解底层算法和协议。</li><li><strong>灵活性强</strong>：API 可以与现有的密码学算法和协议集成，提供更高级别的密钥管理功能，满足不同场景的需求。</li></ul><h2 id="5-Key-Encapsulation-Mechanism-API的缺点"><a href="#5-Key-Encapsulation-Mechanism-API的缺点" class="headerlink" title="5. Key Encapsulation Mechanism API的缺点"></a>5. Key Encapsulation Mechanism API的缺点</h2><ul><li><strong>依赖于非对称加密算法</strong>：Key Encapsulation Mechanism API 的实现依赖于非对称加密算法，这些算法可能存在性能上的瓶颈和限制。</li><li><strong>需要保护私钥的安全</strong>：由于使用了非对称加密算法，私钥的安全至关重要。开发者需要采取措施来保护私钥的机密性和完整性。</li></ul><h2 id="6-Key-Encapsulation-Mechanism-API的使用示例"><a href="#6-Key-Encapsulation-Mechanism-API的使用示例" class="headerlink" title="6. Key Encapsulation Mechanism API的使用示例"></a>6. Key Encapsulation Mechanism API的使用示例</h2><p>下面是一个简单的使用示例，演示了如何使用 Key Encapsulation Mechanism API 进行密钥封装和解封装：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.security.KeyPair;</span><br><span class="line"><span class="keyword">import</span> java.security.KeyPairGenerator;</span><br><span class="line"><span class="keyword">import</span> java.security.KeyAgreement;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.Cipher;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KEMExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 生成公私钥对</span></span><br><span class="line">        <span class="type">KeyPairGenerator</span> <span class="variable">keyPairGenerator</span> <span class="operator">=</span> KeyPairGenerator.getInstance(<span class="string">&quot;RSA&quot;</span>);</span><br><span class="line">        <span class="type">KeyPair</span> <span class="variable">keyPair</span> <span class="operator">=</span> keyPairGenerator.generateKeyPair();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 创建 KeyAgreement 对象</span></span><br><span class="line">        <span class="type">KeyAgreement</span> <span class="variable">keyAgreement</span> <span class="operator">=</span> KeyAgreement.getInstance(<span class="string">&quot;DH&quot;</span>);</span><br><span class="line">        keyAgreement.init(keyPair.getPrivate());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 执行密钥协商过程</span></span><br><span class="line">        keyAgreement.doPhase(keyPair.getPublic(), <span class="literal">true</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 生成会话密钥</span></span><br><span class="line">        <span class="type">byte</span>[] sharedSecret = keyAgreement.generateSecret();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 封装会话密钥</span></span><br><span class="line">        <span class="type">Cipher</span> <span class="variable">cipher</span> <span class="operator">=</span> Cipher.getInstance(<span class="string">&quot;AES&quot;</span>);</span><br><span class="line">        cipher.init(Cipher.WRAP_MODE, keyPair.getPublic());</span><br><span class="line">        <span class="type">byte</span>[] wrappedKey = cipher.wrap(sharedSecret);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 解封装会话密钥</span></span><br><span class="line">        cipher.init(Cipher.UNWRAP_MODE, keyPair.getPrivate());</span><br><span class="line">        <span class="type">byte</span>[] unwrappedKey = cipher.unwrap(wrappedKey, <span class="string">&quot;AES&quot;</span>, Cipher.SECRET_KEY);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Shared Secret: &quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(sharedSecret));</span><br><span class="line">        System.out.println(<span class="string">&quot;Unwrapped Key: &quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(unwrappedKey));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-Key-Encapsulation-Mechanism-API的使用注意事项"><a href="#7-Key-Encapsulation-Mechanism-API的使用注意事项" class="headerlink" title="7. Key Encapsulation Mechanism API的使用注意事项"></a>7. Key Encapsulation Mechanism API的使用注意事项</h2><ul><li>开发者需要选择合适的非对称加密算法和密钥封装机制，根据具体需求进行配置。</li><li>私钥的安全至关重要，开发者应该采取措施来保护私钥的机密性和完整性。</li><li>密钥封装过程中生成的密文需要通过安全信道传输，以确保密钥的安全性。</li></ul><h2 id="8-总结-13"><a href="#8-总结-13" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>Key Encapsulation Mechanism API 是一个用于支持密钥封装机制的 Java<br>API。它提供了一组方法和类，用于生成、封装和解封装密钥。通过使用公钥进行密钥交换，避免了传统密钥交换方式中存在的安全风险。API<br>的实现原理基于非对称加密算法和密钥封装机制，能够提供较高的安全性和灵活性。开发者可以轻松地使用 API<br>进行密钥封装和解封装操作，并与现有的密码学算法和协议集成，满足不同场景的需求。然而，API 的使用需要注意私钥的安全性和密文的传输安全。</p><h1 id="453-Structured-Concurrency-Preview"><a href="#453-Structured-Concurrency-Preview" class="headerlink" title="| 453: | Structured Concurrency (Preview) |"></a>| 453: | <a href="https://openjdk.org/jeps/453">Structured Concurrency (Preview)</a> |</h1><h1 id="什么是结构化并发（Structured-Concurrency）？"><a href="#什么是结构化并发（Structured-Concurrency）？" class="headerlink" title="什么是结构化并发（Structured Concurrency）？"></a>什么是结构化并发（Structured Concurrency）？</h1><p>结构化并发是一种用于简化并发编程的API。它将在不同线程中运行的相关任务组视为一个单独的工作单元，从而简化错误处理和取消操作，提高可靠性，并增强可观察性。</p><h1 id="为什么需要结构化并发？"><a href="#为什么需要结构化并发？" class="headerlink" title="为什么需要结构化并发？"></a>为什么需要结构化并发？</h1><p>传统的并发编程模型，如<code>ExecutorService</code><br>API，由于其无限制的并发模式，引入了复杂性和风险。这些模型没有强制执行或跟踪任务和子任务之间的关系，使得管理和观察并发任务变得困难。结构化并发模型认为任务结构应该反映代码结构，在单线程代码中，执行总是强制实施任务和子任务的层次结构，每个子任务的生命周期相对于其他子任务受到代码的语法块结构的控制。</p><p>结构化并发旨在消除与并发编程相关的常见风险，例如线程泄漏和取消延迟，并增强并发代码的可观察性。</p><h1 id="结构化并发的实现原理"><a href="#结构化并发的实现原理" class="headerlink" title="结构化并发的实现原理"></a>结构化并发的实现原理</h1><p>结构化并发通过引入新的API来实现，其中最重要的类是<code>StructuredTaskScope</code>。<code>StructuredTaskScope</code><br>封装了一组相关的任务，这些任务应该一起完成，如果任何子任务失败，则会取消剩余的子任务。</p><p>在结构化并发中，使用<code>StructuredTaskScope</code><br>创建一个作用域，在该作用域内可以派生出多个子任务。这些子任务将被视为整体，并且它们之间存在依赖关系。当所有子任务完成后，可以对它们进行处理，例如获取结果或抛出异常。</p><h1 id="结构化并发的优点"><a href="#结构化并发的优点" class="headerlink" title="结构化并发的优点"></a>结构化并发的优点</h1><ul><li>简化并发编程：结构化并发提供了一种更简单、更直观的方式来处理并发任务。</li><li>错误处理和取消操作：通过将相关任务组合成一个单元，结构化并发使错误处理和取消操作更加容易和可靠。</li><li>提高可靠性：结构化并发模型消除了常见的风险，如线程泄漏和取消延迟，从而提高了并发代码的可靠性。</li><li>增强可观察性：结构化并发模型使得观察并发任务的执行状态变得更加方便。</li></ul><h1 id="结构化并发的缺点"><a href="#结构化并发的缺点" class="headerlink" title="结构化并发的缺点"></a>结构化并发的缺点</h1><ul><li>预览功能：目前，结构化并发仍处于预览阶段，需要启用预览功能才能使用。</li></ul><h1 id="结构化并发的使用示例"><a href="#结构化并发的使用示例" class="headerlink" title="结构化并发的使用示例"></a>结构化并发的使用示例</h1><p>下面是一个使用结构化并发的示例代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Response <span class="title function_">handle</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">    <span class="keyword">try</span> (<span class="type">var</span> <span class="variable">scope</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StructuredTaskScope</span>.ShutdownOnFailure()) &#123;</span><br><span class="line">        Supplier&lt;String&gt;  user  = scope.fork(() -&gt; findUser());</span><br><span class="line">        Supplier&lt;Integer&gt; order = scope.fork(() -&gt; fetchOrder());</span><br><span class="line"></span><br><span class="line">        scope.join()            </span><br><span class="line">             .throwIfFailed();  </span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(user.get(), order.get());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个示例中，我们创建了一个新的<code>StructuredTaskScope</code>作用域，并使用它派生了两个子任务：一个执行<code>findUser()</code><br>方法，另一个执行<code>fetchOrder()</code>方法。一旦两个子任务都完成，就可以使用它们的结果创建一个新的<code>Response</code>对象。</p><h1 id="结构化并发的使用注意事项"><a href="#结构化并发的使用注意事项" class="headerlink" title="结构化并发的使用注意事项"></a>结构化并发的使用注意事项</h1><ul><li>结构化并发是一个预览功能，默认情况下被禁用。要使用<code>StructuredTaskScope</code> API，开发人员必须启用预览功能来编译代码。</li><li>使用结构化并发时，通常不直接使用<code>StructuredTaskScope</code><br>类，而是使用实现关闭策略的两个子类之一。这些子类分别是<code>ShutdownOnFailure</code>和<code>ShutdownOnSuccess</code>，支持当第一个子任务失败或成功时关闭作用域的模式。</li><li>运行结构化并发程序时，需要使用<code>--enable-preview</code>选项启用预览功能。</li></ul><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>结构化并发是一种用于简化并发编程的API，它将相关任务组合成一个单元，从而简化错误处理和取消操作，提高可靠性，并增强可观察性。通过引入<code>StructuredTaskScope</code><br>类和相关的子类，结构化并发提供了一种更简单、更直观的方式来处理并发任务。然而，需要注意的是，结构化并发目前仍处于预览阶段，并且需要启用预览功能才能使用。</p><p>JDK 21 将是大多数供应商的长期支持 （LTS） 版本。有关自上一个 LTS 版本 JDK 17 以来集成的 JEP<br>的完整列表，请参阅 <a href="https://openjdk.org/projects/jdk/21/jeps-since-jdk-17">here</a>.</p><h2 id="Schedule"><a href="#Schedule" class="headerlink" title="Schedule"></a>Schedule</h2><blockquote><p>| 2023&#x2F;06&#x2F;08 | | <a href="https://openjdk.org/jeps/3#rdp-1">第一阶段缓慢降级</a>（从主分支派生）|<br>| 2023&#x2F;07&#x2F;20 | | <a href="https://openjdk.org/jeps/3#rdp-2">第二阶段缓慢降级</a>|<br>| 2023&#x2F;08&#x2F;10 | | <a href="https://openjdk.org/jeps/3#rc">初始候选发行版</a>|<br>| 2023&#x2F;08&#x2F;24 | | <a href="https://openjdk.org/jeps/3#rc">最终候选发行版</a>|<br>| 2023&#x2F;09&#x2F;19 | | 正式发布 |</p></blockquote><p>最后更新时间：2023年9月19日 10:53 UTC</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Windows </tag>
            
            <tag> Foreign Function &amp; Memory API </tag>
            
            <tag> Generational ZGC </tag>
            
            <tag> Record Patterns </tag>
            
            <tag> 安全性 </tag>
            
            <tag> Sequenced Collections </tag>
            
            <tag> 并发编程 </tag>
            
            <tag> 结构化并发 </tag>
            
            <tag> 结构化并发的使用示例 </tag>
            
            <tag> 结构化并发的使用注意事项 </tag>
            
            <tag> String Templates </tag>
            
            <tag> Pattern Matching for switch </tag>
            
            <tag> 废弃 </tag>
            
            <tag> 32位 </tag>
            
            <tag> x86 </tag>
            
            <tag> 支持 </tag>
            
            <tag> 动态加载代理 </tag>
            
            <tag> 类加载器 </tag>
            
            <tag> Instrumentation API </tag>
            
            <tag> 安全管理器 </tag>
            
            <tag> 动态加载代理禁用准备 </tag>
            
            <tag> Java增强提案 </tag>
            
            <tag> 密钥封装机制 </tag>
            
            <tag> 密钥封装 </tag>
            
            <tag> 密钥管理 </tag>
            
            <tag> 密钥交换 </tag>
            
            <tag> 密钥封装机制API </tag>
            
            <tag> 密钥封装机制API的优点 </tag>
            
            <tag> 密钥封装机制API的缺点 </tag>
            
            <tag> 结构化并发的实现原理 </tag>
            
            <tag> 结构化并发的优点 </tag>
            
            <tag> 结构化并发的缺点 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Today For 2023年9月</title>
      <link href="/today_2023_09.html"/>
      <url>/today_2023_09.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="2023年9月27日"><a href="#2023年9月27日" class="headerlink" title="2023年9月27日"></a>2023年9月27日</h1><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">工作</button></li><li class="tab"><button type="button" data-href="#test1-2">博客</button></li><li class="tab"><button type="button" data-href="#test1-3">足迹</button></li><li class="tab"><button type="button" data-href="#test1-4">花销</button></li><li class="tab"><button type="button" data-href="#test1-5">体重</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><h2 id="审批进度没跟着审批流程的情况进行"><a href="#审批进度没跟着审批流程的情况进行" class="headerlink" title="审批进度没跟着审批流程的情况进行"></a>审批进度没跟着审批流程的情况进行</h2><h2 id="对于审批状态是“待提交”的，双击进去的页面是申请页面"><a href="#对于审批状态是“待提交”的，双击进去的页面是申请页面" class="headerlink" title="对于审批状态是“待提交”的，双击进去的页面是申请页面"></a>对于审批状态是“待提交”的，双击进去的页面是申请页面</h2><h2 id="对于审批状态是“待提交”的，双击进去前填写的内容都没有保存"><a href="#对于审批状态是“待提交”的，双击进去前填写的内容都没有保存" class="headerlink" title="对于审批状态是“待提交”的，双击进去前填写的内容都没有保存"></a>对于审批状态是“待提交”的，双击进去前填写的内容都没有保存</h2><h2 id="待提交页面点击失败"><a href="#待提交页面点击失败" class="headerlink" title="待提交页面点击失败"></a>待提交页面点击失败</h2><h2 id="把审批项目页面中查询条件下的通过和博会给隐藏起来，只支持双击进去审批"><a href="#把审批项目页面中查询条件下的通过和博会给隐藏起来，只支持双击进去审批" class="headerlink" title="把审批项目页面中查询条件下的通过和博会给隐藏起来，只支持双击进去审批"></a>把审批项目页面中查询条件下的通过和博会给隐藏起来，只支持双击进去审批</h2><h2 id="证照库级别未正确转换"><a href="#证照库级别未正确转换" class="headerlink" title="证照库级别未正确转换"></a>证照库级别未正确转换</h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-27/41713029899100.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-27/41713029899100.jpg"></a></p><h2 id="对于Superman的账号，审批状态不是办理中的不应该有下面的通过和驳回权限"><a href="#对于Superman的账号，审批状态不是办理中的不应该有下面的通过和驳回权限" class="headerlink" title="对于Superman的账号，审批状态不是办理中的不应该有下面的通过和驳回权限"></a>对于Superman的账号，审批状态不是办理中的不应该有下面的通过和驳回权限</h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-27/41732704724000.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-27/41732704724000.jpg"></a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><ul><li>基本语法<ul><li><del>注释有哪几种形式</del>？</li><li><del>标识符和关键字的区别是什么</del>？</li><li><del>Java语言关键字有哪些</del>？</li><li><del>移位运算符</del></li><li><del>自增自减运算符</del></li><li><del>continue、break 和 return 的区别是什么？</del></li></ul></li><li>基本数据类型<ul><li><del>Java中有哪些基础类型</del></li><li><del>包装类与自动拆箱装箱</del></li><li><del>包装类缓存机制</del></li><li><del>浮点运算为什么不精确</del></li><li><del>如何解决浮点数计算不精确问题</del></li><li><del>超过long类型的数据如何表示</del></li></ul></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>00:00~7:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'><p>家</p></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>7:00~11:30</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'><p>公司</p></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>11:30~14:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>14:00~18:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>18:00~24:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-4"><table><thead><tr><th>店名</th><th>地址</th><th>价格</th><th>评价</th><th>备注</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="2023年9月26日"><a href="#2023年9月26日" class="headerlink" title="2023年9月26日"></a>2023年9月26日</h1><h2 id="新提拔领导人员民主评议表中原任职务和任现职时间格式都改为“-”；"><a href="#新提拔领导人员民主评议表中原任职务和任现职时间格式都改为“-”；" class="headerlink" title="新提拔领导人员民主评议表中原任职务和任现职时间格式都改为“.”；"></a><del>新提拔领导人员民主评议表中原任职务和任现职时间格式都改为“.”；</del></h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/204308506376100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/204308506376100.png"></a></p><h2 id="董事明细查询列表需添加序号列，且得分列出现“missing”标识，见图；"><a href="#董事明细查询列表需添加序号列，且得分列出现“missing”标识，见图；" class="headerlink" title="董事明细查询列表需添加序号列，且得分列出现“missing”标识，见图；"></a><del>董事明细查询列表需添加序号列，且得分列出现“missing”标识，见图；</del></h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/204320241798200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/204320241798200.png"></a></p><h2 id="整体汇总表-导出班子对比汇总数据，缺少当前考核年度对比数据列，见图；"><a href="#整体汇总表-导出班子对比汇总数据，缺少当前考核年度对比数据列，见图；" class="headerlink" title="整体汇总表-导出班子对比汇总数据，缺少当前考核年度对比数据列，见图；"></a><del>整体汇总表-导出班子对比汇总数据，缺少当前考核年度对比数据列，见图；</del></h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/204333508278200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/204333508278200.png"></a></p><h2 id="班子综合评分-导出-项目指标项分数与导出文件不一致，正确为：政治素质（15分）-整体功能（15分）-工作业绩（15分）-作风形象（15分）-60；业绩考核结果（40分）；导出文件前四项25和变成100，业绩考核结果变成了0分，需要更正，见图；"><a href="#班子综合评分-导出-项目指标项分数与导出文件不一致，正确为：政治素质（15分）-整体功能（15分）-工作业绩（15分）-作风形象（15分）-60；业绩考核结果（40分）；导出文件前四项25和变成100，业绩考核结果变成了0分，需要更正，见图；" class="headerlink" title="班子综合评分-导出-项目指标项分数与导出文件不一致，正确为：政治素质（15分）+整体功能（15分）+工作业绩（15分）+作风形象（15分）&#x3D;60；业绩考核结果（40分）；导出文件前四项25和变成100，业绩考核结果变成了0分，需要更正，见图；"></a><del>班子综合评分-导出-项目指标项分数与导出文件不一致，正确为：政治素质（15分）+整体功能（15分）+工作业绩（15分）+作风形象（15分）&#x3D;60；业绩考核结果（40分）；导出文件前四项25和变成100，业绩考核结果变成了0分，需要更正，见图；</del></h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/204346029761300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/204346029761300.png"></a></p><h2 id="领导人员-领导人员副职明细查询列表添加序号功能；"><a href="#领导人员-领导人员副职明细查询列表添加序号功能；" class="headerlink" title="领导人员-领导人员副职明细查询列表添加序号功能；"></a><del>领导人员-领导人员副职明细查询列表添加序号功能；</del></h2><h2 id="选人用人-选人用人明细查询-列表排序错乱，见图；"><a href="#选人用人-选人用人明细查询-列表排序错乱，见图；" class="headerlink" title="选人用人-选人用人明细查询-列表排序错乱，见图；"></a><del>选人用人-选人用人明细查询-列表排序错乱，见图；</del></h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/204391970448000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/204391970448000.png"></a></p><h2 id="一报告两评议统计查询-选人用人工作民主评议统计，面板高度需增加至左侧面板对齐高度，页面宽度也有，但是显示过短，所有列表面板高度要与左侧菜单树面板高度一致；"><a href="#一报告两评议统计查询-选人用人工作民主评议统计，面板高度需增加至左侧面板对齐高度，页面宽度也有，但是显示过短，所有列表面板高度要与左侧菜单树面板高度一致；" class="headerlink" title="一报告两评议统计查询-选人用人工作民主评议统计，面板高度需增加至左侧面板对齐高度，页面宽度也有，但是显示过短，所有列表面板高度要与左侧菜单树面板高度一致；"></a>一报告两评议统计查询-选人用人工作民主评议统计，面板高度需增加至左侧面板对齐高度，页面宽度也有，但是显示过短，所有列表面板高度要与左侧菜单树面板高度一致；</h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/204401806200200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/204401806200200.png"></a></p><h2 id="新提拔中层统表统计结果-新提拔人员认同率情况统计列表需添加分页，页面高度需与左侧菜单树高度对齐；"><a href="#新提拔中层统表统计结果-新提拔人员认同率情况统计列表需添加分页，页面高度需与左侧菜单树高度对齐；" class="headerlink" title="新提拔中层统表统计结果-新提拔人员认同率情况统计列表需添加分页，页面高度需与左侧菜单树高度对齐；"></a>新提拔中层统表统计结果-新提拔人员认同率情况统计列表需添加分页，页面高度需与左侧菜单树高度对齐；</h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/204412503515500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/204412503515500.png"></a></p><h2 id="首页单位重复问题"><a href="#首页单位重复问题" class="headerlink" title="首页单位重复问题"></a><del>首页单位重复问题</del></h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/230320974642300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/230320974642300.png"></a></p><h2 id="正职测评报错"><a href="#正职测评报错" class="headerlink" title="正职测评报错"></a><del>正职测评报错</del></h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/230366650460300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/230366650460300.png"></a></p><h2 id="副职测评报错"><a href="#副职测评报错" class="headerlink" title="副职测评报错"></a><del>副职测评报错</del></h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/230396292736300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/230396292736300.png"></a></p><h2 id="批次合并导出报错"><a href="#批次合并导出报错" class="headerlink" title="批次合并导出报错"></a><del>批次合并导出报错</del></h2><h2 id="因私出国新需求开发候选人功能"><a href="#因私出国新需求开发候选人功能" class="headerlink" title="因私出国新需求开发候选人功能"></a>因私出国新需求开发候选人功能</h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/230415762595300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/230415762595300.png"></a></p><h1 id="9月25日"><a href="#9月25日" class="headerlink" title="9月25日"></a>9月25日</h1><h2 id="因私出国前端问题修复"><a href="#因私出国前端问题修复" class="headerlink" title="因私出国前端问题修复"></a>因私出国前端问题修复</h2><h1 id="9月24日"><a href="#9月24日" class="headerlink" title="9月24日"></a>9月24日</h1><h2 id="测评票首页开发"><a href="#测评票首页开发" class="headerlink" title="测评票首页开发"></a><del>测评票首页开发</del></h2><h2 id="协助开发湖北因私出国模块"><a href="#协助开发湖北因私出国模块" class="headerlink" title="协助开发湖北因私出国模块"></a><del>协助开发湖北因私出国模块</del></h2><h1 id="9月22日"><a href="#9月22日" class="headerlink" title="9月22日"></a>9月22日</h1><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">工作</button></li><li class="tab"><button type="button" data-href="#test1-2">博客</button></li><li class="tab"><button type="button" data-href="#test1-3">足迹</button></li><li class="tab"><button type="button" data-href="#test1-4">花销</button></li><li class="tab"><button type="button" data-href="#test1-5">体重</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><h2 id="【南瑞】【测评票】"><a href="#【南瑞】【测评票】" class="headerlink" title="【南瑞】【测评票】"></a><mark class="hl-label red">【南瑞】【测评票】</mark></h2><p>首页功能开发</p><h2 id="【南瑞】【测评票】-1"><a href="#【南瑞】【测评票】-1" class="headerlink" title="【南瑞】【测评票】"></a><mark class="hl-label pink">【南瑞】【测评票】</mark></h2><p>导出性能优化</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><h2 id="【个人】【博客】【面试题系列】"><a href="#【个人】【博客】【面试题系列】" class="headerlink" title="【个人】【博客】【面试题系列】"></a><mark class="hl-label green">【个人】【博客】【面试题系列】</mark></h2><p>为什么不推荐使用@Autowired注解</p><h2 id="【个人】【博客】【系列】"><a href="#【个人】【博客】【系列】" class="headerlink" title="【个人】【博客】【系列】"></a><mark class="hl-label green">【个人】【博客】【系列】</mark></h2><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>00:00~7:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>7:00~11:30</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>11:30~14:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>14:00~18:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>18:00~24:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-4"><table><thead><tr><th>店名</th><th>地址</th><th>价格</th><th>评价</th><th>备注</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="9月21日"><a href="#9月21日" class="headerlink" title="9月21日"></a>9月21日</h1><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">工作</button></li><li class="tab"><button type="button" data-href="#test1-2">博客</button></li><li class="tab"><button type="button" data-href="#test1-3">足迹</button></li><li class="tab"><button type="button" data-href="#test1-4">花销</button></li><li class="tab"><button type="button" data-href="#test1-5">体重</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><h2 id="【南瑞】【测评票】【需求】"><a href="#【南瑞】【测评票】【需求】" class="headerlink" title="【南瑞】【测评票】【需求】"></a><mark class="hl-label red">【南瑞】【测评票】【需求】</mark></h2><p><del>导入导出添加进度条</del></p><h2 id="【南瑞】【测评票】【BUG】"><a href="#【南瑞】【测评票】【BUG】" class="headerlink" title="【南瑞】【测评票】【BUG】"></a><mark class="hl-label red">【南瑞】【测评票】【BUG】</mark></h2><p><del>导入导出问题</del></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p><mark class="hl-label green">【个人】【博客】【面试题系列】</mark><br><del>JavaOptional用法</del><br><mark class="hl-label green">【个人】【博客】【系列】</mark> </p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>00:00~7:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>7:00~11:30</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>11:30~14:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>14:00~18:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>18:00~24:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-4"><table><thead><tr><th>店名</th><th>地址</th><th>价格</th><th>评价</th><th>备注</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="9月20日"><a href="#9月20日" class="headerlink" title="9月20日"></a>9月20日</h1><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">工作</button></li><li class="tab"><button type="button" data-href="#test1-2">博客</button></li><li class="tab"><button type="button" data-href="#test1-3">足迹</button></li><li class="tab"><button type="button" data-href="#test1-4">花销</button></li><li class="tab"><button type="button" data-href="#test1-5">体重</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><h2 id="【南瑞】【测评票】【需求】"><a href="#【南瑞】【测评票】【需求】" class="headerlink" title="【南瑞】【测评票】【需求】"></a><mark class="hl-label red">【南瑞】【测评票】【需求】</mark></h2><p>开始开发首页功能<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-20/81546471110000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-20/81546471110000.png"></a></p><h2 id="【南瑞】【测评票】【需求】-1"><a href="#【南瑞】【测评票】【需求】-1" class="headerlink" title="【南瑞】【测评票】【需求】"></a><mark class="hl-label red">【南瑞】【测评票】【需求】</mark></h2><p><del>导入批次数据的时候只要是sql文件都可以导入成功，最好增加个校验，和导出的文件可以呼应上</del><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-20/81580019774500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-20/81580019774500.png"></a></p><h2 id="【南瑞】【测评票】【需求】-2"><a href="#【南瑞】【测评票】【需求】-2" class="headerlink" title="【南瑞】【测评票】【需求】"></a><mark class="hl-label red">【南瑞】【测评票】【需求】</mark></h2><p><del>新表添加明细需求</del></p><h2 id="【南瑞】【测评票】【需求】-3"><a href="#【南瑞】【测评票】【需求】-3" class="headerlink" title="【南瑞】【测评票】【需求】"></a><mark class="hl-label red">【南瑞】【测评票】【需求】</mark></h2><p>实时显示导入进度<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-21/176217163162800.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-21/176217163162800.png"></a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p><mark class="hl-label green">【个人】【博客】【面试题系列】</mark><br><del>说一说springboot加在配置文件优先级</del><br><mark class="hl-label green">【个人】【博客】【Redis系列】</mark> </p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>00:00~7:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'><p>家</p></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>7:00~11:30</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'><p>南信大高新实小</p></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>11:30~14:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'><p>家</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'><p>公司</p></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>14:00~18:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'><p>公司</p></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>18:00~24:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'><p>家</p></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-4"><table><thead><tr><th>店名</th><th>地址</th><th>价格</th><th>评价</th><th>备注</th></tr></thead><tbody><tr><td>饼</td><td>高新路19-1</td><td>5</td><td>好吃</td><td>1饼+1怡宝</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="9月19日"><a href="#9月19日" class="headerlink" title="9月19日"></a>9月19日</h1><blockquote><p>今天比较忙啊。早上4点多睡得，6店50起床急忙忙的送外甥女上学，然后就到公司了。也没时间给老婆弄个早饭打扫一下家务，对不起啦！<br>另一个是今天活多呀，测评票，因私出国，惠人都在催，燥死了燥死了，啊啊啊啊啊！！！！</p></blockquote><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">工作</button></li><li class="tab"><button type="button" data-href="#test1-2">博客</button></li><li class="tab"><button type="button" data-href="#test1-3">足迹</button></li><li class="tab"><button type="button" data-href="#test1-4">花销</button></li><li class="tab"><button type="button" data-href="#test1-5">体重</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><h2 id="【测评票】【BUG】"><a href="#【测评票】【BUG】" class="headerlink" title="【测评票】【BUG】"></a><mark class="hl-label red">【测评票】【BUG】</mark></h2><p><del>人工识别界面图片可以稍微缩放一下刚好在一个页面展示，不用上下滚动</del><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-19/6560479820900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-19/6560479820900.png"></a></p><h2 id="【测评票】【BUG】-1"><a href="#【测评票】【BUG】-1" class="headerlink" title="【测评票】【BUG】"></a><mark class="hl-label red">【测评票】【BUG】</mark></h2><p><del>选中了单位，但是没有点压缩包，直接点击搜索按钮的时候，提示语不正确（若是共用方法的话久把提示语改成通用的）</del><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-19/21654413693800.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-19/21654413693800.png"></a></p><h2 id="【测评票】【BUG】-2"><a href="#【测评票】【BUG】-2" class="headerlink" title="【测评票】【BUG】"></a><mark class="hl-label red">【测评票】【BUG】</mark></h2><p><del>批次作业-导出批次结果数据的时候全选并没有全选</del><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-19/21673519776500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-19/21673519776500.png"></a></p><h2 id="【测评票】【BUG】-3"><a href="#【测评票】【BUG】-3" class="headerlink" title="【测评票】【BUG】"></a><mark class="hl-label red">【测评票】【BUG】</mark></h2><p><del>“江苏电力明明正副职只有一个人，可是表格上却有两条一样的数据，在江苏发现了，其他公司貌似没有<br>（若你那不能复现的话可以找我导出批次数据看看）”</del><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-19/21685082844900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-19/21685082844900.png"></a></p><h2 id="【测评票】【BUG】-4"><a href="#【测评票】【BUG】-4" class="headerlink" title="【测评票】【BUG】"></a><mark class="hl-label red">【测评票】【BUG】</mark></h2><p><del>现阶段若查询不到票数据的时候保存已经做到了提示保存失败，但页面仍然会显示上一个查询结果，交互性有待提高</del><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-19/21697627624800.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-19/21697627624800.png"></a></p><h2 id="【测评票】【BUG】-5"><a href="#【测评票】【BUG】-5" class="headerlink" title="【测评票】【BUG】"></a><mark class="hl-label red">【测评票】【BUG】</mark></h2><p><del>“1.导出批次作业的弹窗和导出批次结果数据的弹窗中的单位选择框没有初始化，前一个按钮弹窗勾选的在后一个按钮弹窗中也会展示相同的勾选条件<br>2.单位选择多选最好可以加一个全选功能”</del><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-19/21711669162000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-19/21711669162000.png"></a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><h2 id="【博客】【面试题系列】"><a href="#【博客】【面试题系列】" class="headerlink" title="【博客】【面试题系列】"></a><mark class="hl-label green">【博客】【面试题系列】</mark></h2><ul><li><del>Mysql如何实现乐观锁</del></li></ul><h2 id="【博客】【Nginx系列】"><a href="#【博客】【Nginx系列】" class="headerlink" title="【博客】【Nginx系列】"></a><mark class="hl-label green">【博客】【Nginx系列】</mark></h2><ul><li>更新Nginx更新计划</li><li>完成一篇文章</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>00:00~7:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'><p>家</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'><p>南信大高新实小：送外甥女上学</p></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>7:00~11:30</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>11:30~14:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'><p>家</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'><p>公司</p></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>14:00~18:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>18:00~24:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-4"><table><thead><tr><th>店名</th><th>地址</th><th>价格</th><th>评价</th><th>备注</th></tr></thead><tbody><tr><td>煎饼摊</td><td>高新路19-1</td><td>8</td><td>一般</td><td>1煎饼+1里脊</td></tr><tr><td>牛家人大碗面</td><td>高新路19-1</td><td>24</td><td>一般</td><td>1青椒炒鸡蛋盒饭+1辣子鸡盒饭</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="9月18日（周一）"><a href="#9月18日（周一）" class="headerlink" title="9月18日（周一）"></a>9月18日（周一）</h1><ol><li><mark class="hl-label red">【南瑞】【测评票】【BUG】</mark> <del>所有票样保存的时候会在最后拼个written：true</del><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-18/569763318500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-18/569763318500.png"></a></li><li><mark class="hl-label red">【南瑞】【测评票】【BUG】</mark> 导<del>出各单位领导班子年度考核汇总表，打开的时候报错，导出的文件有问题</del><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-18/619303332400.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-18/619303332400.png"></a></li><li><mark class="hl-label red">【南瑞】【测评票】【BUG】</mark> <del>“江苏电力明明正副职只有一个人，可是表格上却有两条一样的数据，在江苏发现了，其他公司貌似没有<br>（若你那不能复现的话可以找我导出批次数据看看）”</del><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-18/654027547600.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-18/654027547600.png"></a></li><li><mark class="hl-label red">【南瑞】【测评票】【BUG】</mark> <del>表5的人工编辑输入框不能输入1234了？？？</del><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-18/696599546500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-18/696599546500.png"></a></li><li><mark class="hl-label red">【南瑞】【测评票】【BUG】</mark> <del>表7和表8 通过查询条件人工编辑的时候自动生成的这个null是怎么回事？</del><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-18/723882599000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-18/723882599000.png"></a></li><li><mark class="hl-label red">【南瑞】【测评票】【BUG】</mark> <del>批次数据导出的时候报错（换电脑）</del><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-18/743052424400.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-18/743052424400.png"></a></li></ol><h1 id="9月15日（周五）"><a href="#9月15日（周五）" class="headerlink" title="9月15日（周五）"></a>9月15日（周五）</h1><ul><li><mark class="hl-label green">【个人】【日常】</mark> <del><a href="https://blog.zysicyj.top/zj">更新足迹</a></del></li><li><mark class="hl-label green">【个人】【日常】</mark> <a href="https://blog.zysicyj.top/jf">更新减肥日志</a></li><li><mark class="hl-label green">【个人】【日常】</mark> <del><a href="https://blog.zysicyj.top/hx">更新花销记录</a></del></li><li><mark class="hl-label green">【个人】【日常】</mark> <del><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0">更新日记</a></del></li><li><mark class="hl-label red">【南瑞】【测评票】【需求】</mark> <del>如果本人是部门主任，那么应当跳过部门主任审批节点</del></li><li><mark class="hl-label red">【南瑞】【测评票】【需求】</mark> <del>部门主任应当只能看到自己部门下员工提交的审批单</del></li><li><mark class="hl-label red">【南瑞】【测评票】【BUG】</mark> <del>证照库穿透数据问题</del></li><li><mark class="hl-label red">【南瑞】【测评票】【BUG】</mark> <del>重要事项等四个模块查询报错问题</del></li><li><mark class="hl-label red">【惠人】【零件系统】【BUG】</mark> <del>库存调拨保存失败</del></li><li><mark class="hl-label red">【惠人】【零件系统】【BUG】</mark> <del>无法批量导入调拨数据</del></li></ul><h1 id="9月14日（周四）"><a href="#9月14日（周四）" class="headerlink" title="9月14日（周四）"></a>9月14日（周四）</h1><ul><li><mark class="hl-label green">【个人】【日常】</mark> <del><a href="https://blog.zysicyj.top/zj">更新足迹</a></del></li><li><mark class="hl-label green">【个人】【日常】</mark> <a href="https://blog.zysicyj.top/jf">更新减肥日志</a></li><li><mark class="hl-label green">【个人】【日常】</mark> <del><a href="https://blog.zysicyj.top/hx">更新花销记录</a></del></li><li><mark class="hl-label green">【个人】【日常】</mark> <del><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0">更新日记</a></del></li><li><mark class="hl-label red">【南瑞】【测评票】【新功能】</mark> <del>表1编辑功能以及保存功能</del></li><li><mark class="hl-label red">【南瑞】【测评票】【新功能】</mark> <del>表2编辑功能以及保存功能</del></li><li><mark class="hl-label red">【南瑞】【测评票】【BUG】</mark> 修复大数据文件导入（OOM）问题</li><li><mark class="hl-label green">【个人】【博客】【面试题系列】</mark> <del>你了解String.intern()方法吗</del></li><li><mark class="hl-label green">【个人】【博客】【设计模式系列】</mark> 【设计原则】【一】【单一职责原则】</li><li><mark class="hl-label green">【个人】【学习】</mark> 更新闪记卡卡牌</li><li><mark class="hl-label red">【个人】【博客】【】</mark> ~~<br>因为统一更改图片位webp格式了（速度和金钱），所以打算重新上传相册图片，因为历史原因，相册图片有的被压缩到了1280，有的是1920.。实际上拍的是5k的。。鹅鹅鹅~~</li></ul><h1 id="9月13日（周三）"><a href="#9月13日（周三）" class="headerlink" title="9月13日（周三）"></a>9月13日（周三）</h1><ul><li><mark class="hl-label green">【个人】【日常】</mark> <del><a href="https://blog.zysicyj.top/zj">更新足迹</a></del></li><li><mark class="hl-label green">【个人】【日常】</mark> <del><a href="https://blog.zysicyj.top/jf">更新减肥日志</a></del></li><li><mark class="hl-label green">【个人】【日常】</mark> <del><a href="https://blog.zysicyj.top/hx">更新花销记录</a></del></li><li><mark class="hl-label green">【个人】【日常】</mark> <del><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0">更新日记</a></del></li></ul><ol><li><mark class="hl-label green">【个人】【博客】【Redis系列】</mark> <del>（五）Redis中String的认知误区，详解String数据类型</del></li><li><mark class="hl-label green">【个人】【博客】【面试题系列】</mark> <del>JVM中有哪些垃圾收集器</del></li><li><mark class="hl-label red">【南瑞】【测评票】【新功能】</mark> <del>表1数据解析</del></li><li><mark class="hl-label red">【南瑞】【测评票】【新功能】</mark> <del>表2数据解析</del></li></ol><h1 id="9月12日（周二）"><a href="#9月12日（周二）" class="headerlink" title="9月12日（周二）"></a>9月12日（周二）</h1><ul><li><mark class="hl-label green">【个人】【日常】</mark> <del><a href="https://blog.zysicyj.top/zj">更新足迹</a></del></li><li><mark class="hl-label green">【个人】【日常】</mark> <a href="https://blog.zysicyj.top/jf">更新减肥日志</a></li><li><mark class="hl-label green">【个人】【日常】</mark> <del><a href="https://blog.zysicyj.top/hx">更新花销记录</a></del></li><li><mark class="hl-label green">【个人】【日常】</mark> <del><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0">更新日记</a></del></li><li><mark class="hl-label red">【惠人】【零件系统】【BUG】</mark> <del>出库无法保存问题</del></li><li><mark class="hl-label red">【南瑞】【测评票】【优化】</mark> 单文件导出改成分次导出</li></ul><h1 id="9月11日（周一）"><a href="#9月11日（周一）" class="headerlink" title="9月11日（周一）"></a>9月11日（周一）</h1><ul><li><mark class="hl-label red">【南瑞】【测评票】【性能优化】</mark> MySQL导入功能</li><li><mark class="hl-label red">【南瑞】【测评票】【技术研究】</mark> 研究MySQL高可用</li><li><mark class="hl-label green">【个人】【博客】【Kafka系列】</mark> </li><li><mark class="hl-label green">【个人】【博客】【面试题系列】</mark> </li><li><del><mark class="hl-label red">【南瑞】【其他】【带新人搭建环境】</mark> </del></li><li><mark class="hl-label default">【南瑞】【测评票】【BUG】</mark> <del>人工编辑后会新增一行Written red</del></li><li><mark class="hl-label default">【南瑞】【测评票】【BUG】</mark> 选中了单位，但是没有点压缩包，直接点击搜索按钮的时候，提示语不正确（若是共用方法的话久把提示语改成通用的）<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/27388540659500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/27388540659500.png"></a></li><li><mark class="hl-label default">【南瑞】【测评票】【BUG】</mark> 1.表头和表格没有对齐2.列表的最后一行没有展示全<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/27439575134700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/27439575134700.png"></a></li><li><mark class="hl-label green">【南瑞】【测评票】【BUG】</mark> 批次作业-导出批次结果数据的时候全选并没有全选<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/27457256197200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/27457256197200.png"></a></li><li><mark class="hl-label default">【南瑞】【测评票】【BUG】red</mark> 导出各单位领导班子年度考核汇总表，打开的时候报错，导出的文件有问题<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/27480365415100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/27480365415100.png"></a></li><li><mark class="hl-label red">【南瑞】【测评票】【BUG】</mark> 江苏电力明明正副职只有一个人，可是表格上却有两条一样的数据，在江苏发现了，其他公司貌似没有（若你那不能复现的话可以找我导出批次数据看看）<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/27492638834500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/27492638834500.png"></a></li><li><mark class="hl-label red">【南瑞】【测评票】【BUG】</mark> 表5的人工编辑输入框不能输入1234了？？？<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/27506497904000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/27506497904000.png"></a></li></ul><h1 id="9月10日（加班）（补卡）"><a href="#9月10日（加班）（补卡）" class="headerlink" title="9月10日（加班）（补卡）"></a>9月10日（加班）（补卡）</h1><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">工作</button></li><li class="tab"><button type="button" data-href="#test1-2">博客</button></li><li class="tab"><button type="button" data-href="#test1-3">生活</button></li><li class="tab"><button type="button" data-href="#test1-4">私活</button></li><li class="tab"><button type="button" data-href="#test1-5">社交</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><ol><li><mark class="hl-label green">【博客】Linux系列</mark> </li><li><mark class="hl-label green">【博客】面试题精选</mark></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-4"><ol><li><del><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/8424992024300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/8424992024300.png"></a><br>需要增加一个导出所有零件信息的导出键。并且导出的数据顺序需要与页面一致</del></li><li><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/8480126717700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/8480126717700.png"></a><br><del>导出的表格表头与数据需要与系统页面显示顺序一致</del></li><li><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/8516027029800.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/8516027029800.png"></a><br><del>页面表格表头需要增加大分类，小分类，CS分类这三个数据。导出的表格数据显示需要与系统内显示一致</del></li><li><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/8546137472200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/8546137472200.png"></a><br><del>使用表格导入三组数据时页面会报错无法导入。单独一个数据导入时则不会发生报错现象</del></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="9月9日（加班）"><a href="#9月9日（加班）" class="headerlink" title="9月9日（加班）"></a>9月9日（加班）</h1><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">工作</button></li><li class="tab"><button type="button" data-href="#test1-2">博客</button></li><li class="tab"><button type="button" data-href="#test1-3">生活</button></li><li class="tab"><button type="button" data-href="#test1-4">私活</button></li><li class="tab"><button type="button" data-href="#test1-5">社交</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><ol><li><mark class="hl-label red">协助新疆运维部署Nginx</mark> </li><li><mark class="hl-label red">协助新疆运维部署Mysql</mark> </li><li><mark class="hl-label red">研究MySQL_HA高可用</mark></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><ol><li><mark class="hl-label green">【博客】微服务系列</mark> </li><li><mark class="hl-label green">【博客】面试题精选</mark></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><ol><li><mark class="hl-label red"><del>去索尼维修站修耳机</del></mark> </li><li><mark class="hl-label default">卖手机</mark> </li><li></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-4"><ol><li><mark class="hl-label red">【BUG】【惠人】<del>系统导入报错</del></mark></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="9月8日（周五）"><a href="#9月8日（周五）" class="headerlink" title="9月8日（周五）"></a><del>9月8日（周五）</del></h1><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">工作</button></li><li class="tab"><button type="button" data-href="#test1-2">博客</button></li><li class="tab"><button type="button" data-href="#test1-3">生活</button></li><li class="tab"><button type="button" data-href="#test1-4">私活</button></li><li class="tab"><button type="button" data-href="#test1-5">社交</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><ol><li><mark class="hl-label red"><del>【BUG】【湖北】因私出国SQL报错</del></mark> </li><li><mark class="hl-label red"><del>【优化】【测评票】导出速度优化</del></mark> </li><li><mark class="hl-label red"><del>【BUG】【测评票】导入报错问题</del></mark></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><ol><li><mark class="hl-label green"><del>【博客】如何实现每天定时给女友&#x2F;老婆发消息</del></mark> </li><li><mark class="hl-label green"><del>【博客】面试题精选</del></mark> </li><li><mark class="hl-label green"><del>【博客】深入理解MySQL系列</del></mark></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-4"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="9月7日（周四）"><a href="#9月7日（周四）" class="headerlink" title="9月7日（周四）"></a><del>9月7日（周四）</del></h1><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">工作</button></li><li class="tab"><button type="button" data-href="#test1-2">博客</button></li><li class="tab"><button type="button" data-href="#test1-3">生活</button></li><li class="tab"><button type="button" data-href="#test1-4">私活</button></li><li class="tab"><button type="button" data-href="#test1-5">社交</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><ol><li><mark class="hl-label red"><del>【需求】【测评票】实现监听Python请求，Python处理完之后弹窗提示</del></mark> </li><li><mark class="hl-label red"><del>导出性能继续优化</del></mark></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><ol><li><mark class="hl-label green"><del>面试题精选</del></mark> </li><li><mark class="hl-label green"><del>豆瓣更新《欢颜》为在看</del></mark></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><ol><li><mark class="hl-label red"><del>买手机</del></mark></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-4"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="9月6日（周三）"><a href="#9月6日（周三）" class="headerlink" title="9月6日（周三）"></a>9月6日（周三）</h1><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">工作</button></li><li class="tab"><button type="button" data-href="#test1-2">博客</button></li><li class="tab"><button type="button" data-href="#test1-3">生活</button></li><li class="tab"><button type="button" data-href="#test1-4">私活</button></li><li class="tab"><button type="button" data-href="#test1-5">社交</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><ul><li><mark class="hl-label red"><del>导出性能优化</del></mark></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><ul><li><mark class="hl-label green">Redis系列</mark> </li><li><mark class="hl-label green"><del>面试题精讲</del></mark> </li><li><mark class="hl-label green"><del>去掉右侧标签栏</del></mark> </li><li><mark class="hl-label green"><del>去掉右侧最新评论</del></mark> </li><li><mark class="hl-label green"><del>整理宝宝相册</del></mark> </li><li><mark class="hl-label default"><del>图片源优化</del></mark></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><ul><li>~~<mark class="hl-label green">弄一个openai号</mark> ~~ | 废弃</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-4"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="9月5日（周二）"><a href="#9月5日（周二）" class="headerlink" title="9月5日（周二）"></a>9月5日（周二）</h1><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">工作</button></li><li class="tab"><button type="button" data-href="#test1-2">博客</button></li><li class="tab"><button type="button" data-href="#test1-3">生活</button></li><li class="tab"><button type="button" data-href="#test1-4">私活</button></li><li class="tab"><button type="button" data-href="#test1-5">社交</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><ul><li><mark class="hl-label red"><del>票据解析性能优化</del></mark> </li><li><mark class="hl-label red"><del>汇总统计性能优化</del></mark></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><ul><li><mark class="hl-label green"><del>更新日记</del></mark> </li><li><mark class="hl-label green"><del>完善花销记录</del></mark> </li><li><mark class="hl-label green">Nginx系列（一）</mark> </li><li><mark class="hl-label green"><del>面试题精选</del></mark></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-4"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】如何将二进制转为十六进制</title>
      <link href="/732f2d86.html"/>
      <url>/732f2d86.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 二进制转换为十六进制</span></span><br><span class="line"><span class="comment"> * 这里主要用于处理图片数据，因为数据库存储了图片的Base64编码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> String <span class="title function_">bytesToHexString</span><span class="params">(<span class="type">byte</span>[] bytes)</span> &#123;</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">hexString</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">byte</span> b : bytes) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">hex</span> <span class="operator">=</span> Integer.toHexString(<span class="number">0xff</span> &amp; b);</span><br><span class="line">        <span class="keyword">if</span> (hex.length() == <span class="number">1</span>) &#123;</span><br><span class="line">            hexString.append(<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        hexString.append(hex);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> hexString.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个方法接受一个<code>byte</code>数组作为参数，表示二进制数据。它会将每个字节转换为对应的十六进制字符串，并将这些字符串拼接在一起，最后返回一个完整的十六进制字符串。</p><p>具体的实现步骤如下：</p><ol><li>创建一个<code>StringBuilder</code>对象<code>hexString</code>，用于存储转换后的十六进制字符串。</li><li>使用<code>for-each</code>循环遍历<code>bytes</code>数组中的每个字节。</li><li>对于每个字节，使用<code>Integer.toHexString()</code>方法将其转换为对应的十六进制字符串。<code>0xff &amp; b</code>是为了确保将字节转换为无符号整数。</li><li>如果转换后的十六进制字符串长度为1，说明只有一位，需要在前面补0。</li><li>将转换后的十六进制字符串追加到<code>hexString</code>中。</li><li>循环结束后，使用<code>toString()</code>方法将<code>hexString</code>转换为一个完整的十六进制字符串，并返回。</li></ol><p>这个方法可以用于将任意二进制数据转换为十六进制字符串，不仅限于处理图片数据。你可以在其他需要将二进制数据转换为十六进制字符串的场景中使用这个方法。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 二进制转换 </tag>
            
            <tag> 十六进制 </tag>
            
            <tag> 数据处理 </tag>
            
            <tag> 图片数据 </tag>
            
            <tag> Base64编码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】JavaOptional用法</title>
      <link href="/a3047fae.html"/>
      <url>/a3047fae.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>Java 8 引入了 <code>Optional</code> 类，用于解决空指针异常（NullPointerException）的问题。<code>Optional</code> 是一个容器类，可以包含一个非空的值或者表示值不存在。通过使用 <code>Optional</code>，我们可以更加优雅地处理可能为空的值，避免了繁琐的空值检查和异常处理。</p><p>下面是 <code>Optional</code> 类的一些常用方法和用法：</p><ol><li><p>创建 <code>Optional</code> 对象：</p><ul><li>使用 <code>Optional.of(value)</code>：创建一个包含指定值的 <code>Optional</code> 对象。如果传入的值为 <code>null</code>，则会抛出 <code>NullPointerException</code>。</li><li>使用 <code>Optional.ofNullable(value)</code>：创建一个包含指定值的 <code>Optional</code> 对象。如果传入的值为 <code>null</code>，则会创建一个空的 <code>Optional</code> 对象。</li><li>使用 <code>Optional.empty()</code>：创建一个空的 <code>Optional</code> 对象。</li></ul></li><li><p>判断值是否存在：</p><ul><li>使用 <code>isPresent()</code> 方法：判断 <code>Optional</code> 对象中是否包含值。如果值存在，返回 <code>true</code>；否则，返回 <code>false</code>。</li></ul></li><li><p>获取值：</p><ul><li>使用 <code>get()</code> 方法：获取 <code>Optional</code> 对象中的值。如果值存在，返回该值；否则，抛出 <code>NoSuchElementException</code> 异常。在使用 <code>get()</code> 方法之前，最好先使用 <code>isPresent()</code> 方法进行判断。</li></ul></li><li><p>处理值不存在的情况：</p><ul><li>使用 <code>ifPresent(Consumer&lt;? super T&gt; consumer)</code> 方法：如果值存在，则执行指定的操作。可以传入一个 <code>Consumer</code> 函数式接口，用于处理值存在的情况。</li><li>使用 <code>orElse(T other)</code> 方法：如果值不存在，则返回指定的默认值。</li><li>使用 <code>orElseGet(Supplier&lt;? extends T&gt; supplier)</code> 方法：如果值不存在，则通过指定的供应函数获取一个默认值。</li><li>使用 <code>orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)</code> 方法：如果值不存在，则抛出指定的异常。</li></ul></li></ol><p>下面是一个简单的示例，展示了 <code>Optional</code> 的用法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OptionalExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建 Optional 对象</span></span><br><span class="line">        Optional&lt;String&gt; optional = Optional.of(value);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断值是否存在</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isPresent</span> <span class="operator">=</span> optional.isPresent();</span><br><span class="line">        System.out.println(<span class="string">&quot;Value is present: &quot;</span> + isPresent);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取值</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">retrievedValue</span> <span class="operator">=</span> optional.get();</span><br><span class="line">        System.out.println(<span class="string">&quot;Retrieved value: &quot;</span> + retrievedValue);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 处理值存在的情况</span></span><br><span class="line">        optional.ifPresent(v -&gt; System.out.println(<span class="string">&quot;Value exists: &quot;</span> + v));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 处理值不存在的情况</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">defaultValue</span> <span class="operator">=</span> optional.orElse(<span class="string">&quot;Default Value&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Default value: &quot;</span> + defaultValue);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用函数式接口处理值不存在的情况</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">suppliedValue</span> <span class="operator">=</span> optional.orElseGet(() -&gt; <span class="string">&quot;Supplied Value&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Supplied value: &quot;</span> + suppliedValue);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 抛出异常处理值不存在的情况</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">thrownValue</span> <span class="operator">=</span> optional.orElseThrow(() -&gt; <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Value not found&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;Thrown value: &quot;</span> + thrownValue);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RuntimeException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Exception: &quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个示例中，我们创建了一个包含字符串值的 <code>Optional</code> 对象，并演示了判断值是否存在、获取值、处理值存在和值不存在的情况的用法。</p><p>使用 <code>Optional</code> 可以提高代码的可读性和健壮性，避免了繁琐的空值检查和异常处理。但需要注意的是，不要滥用 <code>Optional</code>，在某些情况下，使用传统的空值检查可能更加合适。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Optional </tag>
            
            <tag> 空指针异常 </tag>
            
            <tag> NullPointerException </tag>
            
            <tag> 容器类 </tag>
            
            <tag> 值不存在 </tag>
            
            <tag> isPresent </tag>
            
            <tag> get </tag>
            
            <tag> ifPresent </tag>
            
            <tag> orElse </tag>
            
            <tag> orElseGet </tag>
            
            <tag> orElseThrow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【深入解读Redis系列】（七）集合类型常见的四种统计模式</title>
      <link href="/eb7bb6cf.html"/>
      <url>/eb7bb6cf.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/Redis/">系列文章地址</a></p><hr><h1 id="聚合统计"><a href="#聚合统计" class="headerlink" title="聚合统计"></a>聚合统计</h1><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】说一说springboot加载配置文件优先级</title>
      <link href="/fed94248.html"/>
      <url>/fed94248.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>Spring Boot加载配置文件的优先级是根据不同的位置和命名规则来确定的。下面按照优先级从高到低的顺序来介绍：</p><ol><li><p><strong>命令行参数</strong>：通过命令行参数指定的配置会覆盖其他配置。例如，使用<code>--spring.config.name</code>和<code>--spring.config.location</code>参数可以指定配置文件的名称和位置。</p></li><li><p><strong>操作系统环境变量</strong>：Spring Boot会自动将操作系统环境变量中以<code>SPRING_</code>开头的变量转换为配置属性。例如，将<code>SPRING_APPLICATION_NAME</code>设置为<code>myapp</code>，则可以在配置文件中使用<code>$&#123;spring.application.name&#125;</code>来引用该值。</p></li><li><p><strong>命令行属性</strong>：可以通过<code>-D</code>参数或者<code>--spring.config.name</code>和<code>--spring.config.location</code>参数来指定配置文件的名称和位置。</p></li><li><p><strong>jar包外部的application.properties或application.yml</strong>：如果存在<code>config</code>文件夹，Spring Boot会加载该文件夹下的<code>application.properties</code>或<code>application.yml</code>文件。</p></li><li><p><strong>jar包内部的application.properties或application.yml</strong>：如果jar包内部存在<code>application.properties</code>或<code>application.yml</code>文件，Spring Boot会加载该文件。</p></li><li><p><strong>jar包内部的application-{profile}.properties或application-{profile}.yml</strong>：如果指定了激活的profile，Spring Boot会加载对应的<code>application-&#123;profile&#125;.properties</code>或<code>application-&#123;profile&#125;.yml</code>文件。</p></li><li><p><strong>jar包外部的application-{profile}.properties或application-{profile}.yml</strong>：如果存在<code>config</code>文件夹，Spring Boot会加载该文件夹下的<code>application-&#123;profile&#125;.properties</code>或<code>application-&#123;profile&#125;.yml</code>文件。</p></li><li><p><strong>jar包外部的application.properties或application.yml</strong>：如果存在<code>config</code>文件夹，Spring Boot会加载该文件夹下的<code>application.properties</code>或<code>application.yml</code>文件。</p></li></ol><p>需要注意的是，Spring Boot会按照上述顺序加载配置文件，后面加载的配置会覆盖前面加载的配置。因此，如果存在多个配置文件，可以通过优先级来控制配置的加载顺序。</p><p>另外，Spring Boot还支持使用<code>@PropertySource</code>注解来加载自定义的配置文件，可以通过<code>value</code>属性指定配置文件的路径。这种方式的优先级介于jar包内部和jar包外部的配置文件之间。</p><p>总结起来，Spring Boot加载配置文件的优先级从高到低依次为：命令行参数 &gt; 操作系统环境变量 &gt; 命令行属性 &gt; jar包外部的配置文件 &gt; jar包内部的配置文件 &gt; jar包外部的profile配置文件 &gt; jar包内部的profile配置文件。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
            <tag> 加载配置文件 </tag>
            
            <tag> 优先级 </tag>
            
            <tag> 命令行参数 </tag>
            
            <tag> 操作系统环境变量 </tag>
            
            <tag> 命令行属性 </tag>
            
            <tag> jar包外部的配置文件 </tag>
            
            <tag> jar包内部的配置文件 </tag>
            
            <tag> jar包外部的profile配置文件 </tag>
            
            <tag> jar包内部的profile配置文件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>南瑞环境准备</title>
      <link href="/dfb0c7b0.html"/>
      <url>/dfb0c7b0.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="9ee8a835cc4e95aac44826a30ead8daada58cd69ceaea819817b1dbe79f3e61e">b9883d58b8990977424973b91adc44d1e7904864033180a8ca281396f6c6ef513f51fead549bd7f505da4b0eb79b968a3be249dfaa85756f77b925df4e29b534e5be7a9128c4c479853556d91b2a443365863c1b0202a03f0176624bfd60709d5656aaa33754e32b7bc07322d4e8bf2895cd6d11f869e68d73fdada32382cabcda0770211b1c7a1f1176398c43429dd1d97b75df792945b2f3d863058343d65165adf486adf79a54643ec3439f2079db92941dc28585b92e1e93a477684d6f5c95643d7994a6531a49ce1eb82472924837e85f847d59b6010bc14479c62cb0f3012c76297d4553a0d392028f39ff9181fe681596d9acf216c2b8ba949915e3bccc68b9d6cf962506735e122e9931188a11881093a87bf3077c15a9a38dcb5532d07598d3c15beac8f9be067fac1a6d72bf8e815a31510f56bc733e312dd28ba2fc4e12f7eab5817fa2a4f4de85b3dfe8d028a16e38d16a418c252f00696f69ce0b21b34fec5b09c2c6d8e15f33e471f506a99ac8d224ec9325a7d8b8bdfc89878bb389cbe0aa735d1fb73c659c2ce790205f1cefdbcae5c97a492cca809e8f53e374eb5159fb887b937683e261998f7151ead7640868cb0a34d63d0be70d3e5cc1e28b29af9128f4405f22d41fa3fc3e83734c24cc0e9b55ef73541e7f22cb6f47ee00ec697e38f210afffa4c701d7ba435480b582c24cd8fb29729ed3e71cdf69fce879cb8d352d8e5904d5ab08fd2410ae9086b2669ba79a67fd240f7563ce3354b42b13d85c5116e78249294dab80f7bde135a9ecb5f5f6f88559331b66ed30ad52dcb3e18807d26ac93ed67d333dc7613d82e8a642f6c6b11f2c58a012e23744b04d16041e83af60633a3ab49398ca036c93baafc3f46fbe3b7939f1259d5a026f95ee05061748b5b87d4f2700af770da7ee42d0c24d4108301f51446594d0fda72957226ecadb71066ecd5f777894d518ae83bac07d470517d8bf70eb7dc1d328f2a0a90569a9c174f223b06e6d48d35c85d5fdea7a962dcd3dac0a60ffb2c5a78ac492fb4c0a601e5f47968ce63bd292f98ee933a636b82efd624fa8cb4d866c1c8084e17227166de042cbd962cf8c00687c54af72bfd378146a929774d328a9b8019b7c907294c8cd212b83c0e641cd507c3519a75999e73f9c8a647c231bb6c2ae54fe5dfc24b562fe4fc26dd83cc8d13c0c6744d8c5ebe0ad71656d25a934fdd68daf2369b679dbdb10a1ba727e0bd1589912d9df9f9303360d566a481a622c5a409278ce1a0c01807c1160ceca05bfac00509d69f49c280c0976fe88f8c57a171456e9162775294a637f46c7adda4df2a4cbf299445afcf714fffad386235e13e7b30cebb728bda99b2a54c58148e98e1cf835a00589270756e7eeccd34f05dfcc08c04ac6192559fefe548d8833446fd0e1d4b567cb7a341aaef9dd9a28d9630f11ae34a377bf04998280fb9bb9197ec101d3b50bc3915d0df9eeafef3ca5ddf1c377df286eade3d773266ecfd04cc991c099b453996a3f802a924d539eab1dcf4b6b61d45f01a1a6d1ffda5a74a934d56f32bd5cebc3894002fca4c5bf8baf19c3e9425b2b468e903593e212117db7050eb376faa73e24361c952e033b311bcf882b7ae052f31af1ed3138570a4e76034de1bfc071ac1ca81a22874788b71fa69aedb7bb6dedbdea9cde350c59f3b1c5ceb1cfaf846d098d784a5f8edee4f317fc47f7a9f664141f1ebb8828f3f671a131ce57710eb3379db38f982e28c32aeccdd6fcb747090d6facced477ed536dcaf007edcd22f39961437ca74a7b89ece72304d6c18d60e32a32a5ee53570e1c60327067c7b549d053db7a78aa813fd11c95a95880ceaa175ea336ce9bee3051b6e8ef9c9718765e92bd582ef0a15543e255c45976343936edcedfc5d9131db3a9d87297e8118b0a01b7228c1adb913b6fb273ec54e85ac6b13d975c507de3b19b82989e8f647463475e72e9626668544044c5466bde4eb9f7a7a962081275b0c201c7fef6fb1bd80e1419031856c7e43c0c329f24df65459dbf484db7cb09c21ef918db94ab30c93dbab4f6480052537647fda040b60d529237173eb255317daa0964bc5f92ac7cc095b1ac1ac47fe04a1d996c27c2327185c450a2c8b1da5e9462d5122a41c19111f81468bacdddcac24faa994a4ff66c8664d25ce60341190b1109d1e023d74e408f9622ac949545ce6ae815e81e71c4200b29c49f8ad6ef74be27fcae109790fd23d9168bc54c3a41dbfb6418648824593d542826f08c621146ef6cc4728dc8836f4e9793e9fda5f2259f259fc37f99a31452c9d9350d397902ddbe06a3546d51694ec59bfd3ebdac20ea848e5643bdd1858ffe102349158fe4322b970799263d968e99e32507ab1a931bcdd4c14a106cbcc09b5ffd88830822e77b9388b6d1343bae678ed0a16a73cdb2703791da6064e30b8e500aa9fddd2732dbae79fe0469339a77fb794a87da418b91c143a8a7cc27b4412610489df8f809a42907ba3ebcf0559d9df7bb243d34c3ce8bae1be0953a5b1be2765df3246f0dd8e35b45b2b5c518c8fdab6d4c93fe03cfc8a016650c70b0833f8ac96abee8051d2001d127066e2c19b04b44551736905c5e14b7c3b3811e25fe8f127427b6e0f0782bccdf12d9b53ee0470dec85ac36f6fbf5c49d47b1075fcd17aa51d0e9feec2c49e6e08fc9552b9e9662198ab0495dce537faff17c3071231551dffdcb86e0c29e9d664958344065ed3c3ee9af9f2f6db2a512da1371e33c9d74ddab65aad7ef89379176318e18545b19efd9062bf996be08db445d616a33fe56e91314ad3f2801ee11376e75e19a0fd3d7b8878525bec07f988f3ebf62a9de433c251baa94a8e3a8eed600e71fd46204c216969236744c2a95f3e6ca05a83f0a9c3d776e1415e00073fb0aa1ee1e11d50aa370e18b0849e6f23e2ff093c812208cbdc1b4a0dc2fbcdf57f809c74740cc6a2078c8bb602dcb33035be16cbd02f4f810b5d9ca1e95c8da88500daa9e30bd87cee4ec2648bf57c948a1ee9194445c636bf06d9ad320cdc36f106ecd274ae5350301272d73ee2d16f1cf7bed4e7b22d2304b3901eddbabf6e5e24a00c504a82ec541657d5169dad7ec7ae32e2234557717b09f1cd89d1c0ed443429b25d2cb34df38faf55d037287cf36e7d272ff80d11732dd9754a3c5afa5643bab890c217e89cd904c4f8f046ad38e83d9484f07bca81ca21263773b20ad337094fe22826c1f924d98a947ce923879363c052cd241eac354774094ff5a17e9aebb2516af1e30b39cca32a01d06332cedbbe2d55deae2402a3e0f91aed52bb5b9f8ee17aca450b4011c660e2598de9c75ceacb30a718bcf2fd3fa96f3bc4d231c784bc073a05a78d126b596d89c7ec129f95e56854e3be045819674924410f70a574f1c64a9d55ff22978e5137436072d1a92d805f9d0e3555da746354600dd86a9dff1fa88c054a350af0df5ad436c3a55bd11060fbdce5e71cdb0a4587223fc5a9fcc8b8694c55f0cde7ada95e111085fe5e27200bbdcd6ffc0409e980da8c791e0ee1685561fe91e4b3ac16f246347ec2c90cd95ea76c64325e3e5bbef5bea17916ee3f089ec6402e3e3a773704856c3f3eef9bc07a40f970de979a4353c3c127cdb8473c25f40417f341a312e9586a3884da551e104db755d6a8c4188a7cc2ada811ae5f44e3d70c7478b55b236f644f362a87619c96e8899c400571dc7c7af7c49394630850371d599e09d2dd6d173e818958926262d79521fd244fce011a4ad52c6595682d797316dec879bf270bd53a6bb7ade87dd883063cd6ff7da879729b69a4bebef415cbb90333a332eec7ae2853f5a2d437e96f94ac46cbda18f790b65500a76bda870110e76131c23de19d3ac01e5d915e16a1b1166be5afee14eb324cc545cc1ff374dcf068ce12c531d9ebfa737a3bfae3b9d248447ac5d50e7c39af74324e71e1b8c62dc68de71a7886d703e48d267fec3291ea317a2424952a450934a73f87f787c16e9175a0fa48dccc0ad1ace4512ca77313278074709a99bd8ef8d71ec8baae592eb12196d33131e49c8d5f0bdf74d8f893d5b5c3ceaf0919f02e806f9c0e4aac1f2287ff775ab4772801585cfd0f4533e463a5db69e490d86df13180677dfd2a5b26051ccd4950a5b053ca83ace9f939e44e38f3933c0a8febc14c53dd3631c8b6cb63ce0320dab614b44d231edf20ddd836fe825ad8bfc95f462eb97cc9ba75419ee0c761ed1363d1833f2f62131ba496c793a377a3f98ce5a3a221f55b3834689b1d9ff14279f6fe2a95c7d04056e33e0a6861492f81599b0e9056628d7c5e0cb1da97283cfdd9eab45e4705be62fb5aa1a4ec8a81b57a1d2aa6f6f22f8b381d8d5dafd22d57caf249b11741948de70e6e95170d16c3a8a7405527e53d81a4171ea3b8b23067cb7262147e64f535629d61b1ef2298c3b183c1bd8703a2cdef020b5ac4114817a72479d986fbe232bb971a1bb18bee4cacf2fd42aa5fb43ca2418fbed0af6b43caa8986ecb691b014794fa398fdb9b1754f47132c90a52a79d944f05cb91c4ea4789dc6599f4e3ee34a3a54dbaad2e4df271f899f362c00ab69808f32c393153990709f3bf8d4b76d50a0746b6f4663c2848bff0f2defa01bf7af694ae4fc</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Mysql如何实现乐观锁</title>
      <link href="/d561c136.html"/>
      <url>/d561c136.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>在MySQL中，可以通过使用乐观锁来实现并发控制，以避免数据冲突和并发更新问题。乐观锁是一种乐观的思想，它假设并发操作不会导致冲突，只有在提交更新时才会检查是否发生冲突。</p><p>下面介绍两种常见的实现乐观锁的方式：</p><ol><li><p>版本号（Version）机制：</p><ul><li>在数据表中添加一个版本号字段，通常是一个整数类型。</li><li>当读取数据时，将版本号一同读取出来。</li><li>在更新数据时，先检查当前读取的版本号是否与数据库中的版本号一致，如果一致则进行更新操作，并将版本号加1；如果不一致，则表示数据已经被其他事务修改，需要进行相应的处理（例如回滚或者重新尝试）。</li><li>通过版本号的比较，可以判断数据是否被其他事务修改过，从而实现乐观锁的效果。</li></ul><p>示例代码如下（使用Java语言）：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读取数据</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT id, name, version FROM table_name WHERE id = ?&quot;</span>;</span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> connection.prepareStatement(sql);</span><br><span class="line">pstmt.setInt(<span class="number">1</span>, id);</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> pstmt.executeQuery();</span><br><span class="line"><span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">version</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;version&quot;</span>);</span><br><span class="line">    <span class="comment">// 更新数据</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">updateSql</span> <span class="operator">=</span> <span class="string">&quot;UPDATE table_name SET name = ?, version = ? WHERE id = ? AND version = ?&quot;</span>;</span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">updateStmt</span> <span class="operator">=</span> connection.prepareStatement(updateSql);</span><br><span class="line">    updateStmt.setString(<span class="number">1</span>, newName);</span><br><span class="line">    updateStmt.setInt(<span class="number">2</span>, version + <span class="number">1</span>);</span><br><span class="line">    updateStmt.setInt(<span class="number">3</span>, id);</span><br><span class="line">    updateStmt.setInt(<span class="number">4</span>, version);</span><br><span class="line">    <span class="type">int</span> <span class="variable">affectedRows</span> <span class="operator">=</span> updateStmt.executeUpdate();</span><br><span class="line">    <span class="keyword">if</span> (affectedRows == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 更新失败，数据已被其他事务修改</span></span><br><span class="line">        <span class="comment">// 进行相应的处理</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>时间戳（Timestamp）机制：</p><ul><li>在数据表中添加一个时间戳字段，通常是一个时间类型（如DATETIME或TIMESTAMP）。</li><li>当读取数据时，将时间戳一同读取出来。</li><li>在更新数据时，先检查当前读取的时间戳是否与数据库中的时间戳一致，如果一致则进行更新操作；如果不一致，则表示数据已经被其他事务修改，需要进行相应的处理。</li><li>通过时间戳的比较，可以判断数据是否被其他事务修改过，从而实现乐观锁的效果。</li></ul><p>示例代码如下（使用Java语言）：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读取数据</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT id, name, timestamp FROM table_name WHERE id = ?&quot;</span>;</span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> connection.prepareStatement(sql);</span><br><span class="line">pstmt.setInt(<span class="number">1</span>, id);</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> pstmt.executeQuery();</span><br><span class="line"><span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">    <span class="type">Timestamp</span> <span class="variable">timestamp</span> <span class="operator">=</span> rs.getTimestamp(<span class="string">&quot;timestamp&quot;</span>);</span><br><span class="line">    <span class="comment">// 更新数据</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">updateSql</span> <span class="operator">=</span> <span class="string">&quot;UPDATE table_name SET name = ?, timestamp = ? WHERE id = ? AND timestamp = ?&quot;</span>;</span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">updateStmt</span> <span class="operator">=</span> connection.prepareStatement(updateSql);</span><br><span class="line">    updateStmt.setString(<span class="number">1</span>, newName);</span><br><span class="line">    updateStmt.setTimestamp(<span class="number">2</span>, newTimestamp);</span><br><span class="line">    updateStmt.setInt(<span class="number">3</span>, id);</span><br><span class="line">    updateStmt.setTimestamp(<span class="number">4</span>, timestamp);</span><br><span class="line">    <span class="type">int</span> <span class="variable">affectedRows</span> <span class="operator">=</span> updateStmt.executeUpdate();</span><br><span class="line">    <span class="keyword">if</span> (affectedRows == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 更新失败，数据已被其他事务修改</span></span><br><span class="line">        <span class="comment">// 进行相应的处理</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>需要注意的是，乐观锁并不能完全解决并发冲突的问题，它只是一种减少冲突概率的机制。在使用乐观锁时，需要注意处理并发冲突的情况，例如通过重试机制或者回滚操作来处理更新失败的情况。此外，乐观锁适用于并发读多写少的场景，如果并发写操作较多，可能会导致大量的重试和回滚操作，影响性能。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> 数据库 </tag>
            
            <tag> 并发控制 </tag>
            
            <tag> 性能 </tag>
            
            <tag> 乐观锁 </tag>
            
            <tag> 版本号机制 </tag>
            
            <tag> 时间戳机制 </tag>
            
            <tag> 数据冲突 </tag>
            
            <tag> 并发更新 </tag>
            
            <tag> 数据表 </tag>
            
            <tag> 版本号字段 </tag>
            
            <tag> 时间戳字段 </tag>
            
            <tag> 比较 </tag>
            
            <tag> 更新操作 </tag>
            
            <tag> 重试机制 </tag>
            
            <tag> 回滚操作 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【日记】9月18日</title>
      <link href="/74ade4ce.html"/>
      <url>/74ade4ce.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0/">系列文章地址</a></p><hr><ol><li>送外甥女上学</li><li>同学当同事了，交接工作</li><li>接外甥女</li><li>更新kafka更新计划</li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 九月 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】为什么G1收集器不需要调优性能也很优秀</title>
      <link href="/eb922c4a.html"/>
      <url>/eb922c4a.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>G1（Garbage-First）收集器是一种面向服务器端应用的垃圾回收器，它在JDK 7u4版本中首次引入，主要用于替代CMS（Concurrent Mark<br>Sweep）收集器。相比于其他垃圾回收器，G1收集器具有很多优点，使得它在性能和调优方面表现出色。</p><p>首先，G1收集器采用了分代收集的思想，将堆内存划分为多个大小相等的区域（Region），每个区域可以是Eden区、Survivor区或Old区。这种划分方式使得G1收集器能够更加高效地管理内存，减少了全局垃圾回收的时间。</p><p>其次，G1收集器使用了增量并发标记算法，可以在垃圾回收过程中与应用程序并发执行，减少了垃圾回收对应用程序的影响。这种并发标记算法可以在多个CPU核心上并行执行，提高了垃圾回收的效率。</p><p>另外，G1收集器还引入了一种新的回收策略，即根据垃圾分布情况优先回收垃圾最多的区域（Garbage-First）。这种策略可以最大程度地减少垃圾回收的时间，提高了应用程序的响应速度。</p><p>此外，G1收集器还具有以下优点：</p><ol><li><strong>可预测的停顿时间</strong>：G1收集器可以通过设置目标停顿时间来控制垃圾回收的时间，从而使得应用程序的停顿时间可预测。</li><li><strong>自适应的调整</strong>：G1收集器可以根据应用程序的运行情况自动调整各个区域的大小，以及垃圾回收的策略，从而提高垃圾回收的效率。</li><li><strong>空间整理效果好</strong>：G1收集器在进行垃圾回收时，会对内存进行整理，使得内存的碎片化程度较低，从而减少了内存的浪费。</li></ol><p>由于G1收集器具有以上优点，因此在大多数情况下，它不需要进行额外的调优就能够达到很好的性能。但是在某些特殊情况下，如堆内存较大、应用程序的垃圾产生较多等，可能需要对G1收集器进行一些参数调整，以进一步优化性能。</p><p>需要注意的是，G1收集器并不是适用于所有场景的最佳选择。在某些特定的应用场景下，如对低延迟有极高要求的实时系统，可能需要考虑其他垃圾回收器的选择。因此，在选择垃圾回收器时，需要根据具体的应用场景和需求进行评估和选择。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> G1收集器 </tag>
            
            <tag> 垃圾回收器 </tag>
            
            <tag> JDK 7u4 </tag>
            
            <tag> CMS收集器 </tag>
            
            <tag> 性能 </tag>
            
            <tag> 调优 </tag>
            
            <tag> 分代收集 </tag>
            
            <tag> Region </tag>
            
            <tag> Eden区 </tag>
            
            <tag> Survivor区 </tag>
            
            <tag> Old区 </tag>
            
            <tag> 增量并发标记算法 </tag>
            
            <tag> 并发执行 </tag>
            
            <tag> 回收策略 </tag>
            
            <tag> 可预测的停顿时间 </tag>
            
            <tag> 自适应的调整 </tag>
            
            <tag> 空间整理效果好 </tag>
            
            <tag> 参数调整 </tag>
            
            <tag> 低延迟 </tag>
            
            <tag> 实时系统 </tag>
            
            <tag> 应用场景 </tag>
            
            <tag> 需求 </tag>
            
            <tag> 评估 </tag>
            
            <tag> 选择 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Kafka系列】（二）Kafka的基本使用</title>
      <link href="/kafka2.html"/>
      <url>/kafka2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/Kafka/">系列文章地址</a></p><hr><h1 id="Kafka线上集群部署方案怎么做"><a href="#Kafka线上集群部署方案怎么做" class="headerlink" title="Kafka线上集群部署方案怎么做"></a>Kafka线上集群部署方案怎么做</h1><h2 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h2><p>先说结论，Kafka部署在Linux上要比Windows和Mac上性能高的多，主要是以下几个原因：</p><p>是的，Kafka在Linux上的性能通常比在Windows和Mac上要高得多。这是由于以下几个原因：</p><ol><li><p><strong>操作系统优化</strong>：Linux操作系统在网络和文件系统性能方面通常比Windows和Mac更优秀。Linux内核对网络和磁盘I&#x2F;O的处理更高效，能够更好地利用硬件资源，从而提高Kafka的性能。</p></li><li><p><strong>文件系统选择</strong>：Linux上常用的文件系统如ext4、XFS等对大规模数据处理和高并发读写有更好的支持。而Windows上的NTFS文件系统在处理大量小文件和高并发读写时性能相对较差。</p></li><li><p><strong>网络栈性能</strong>：Linux的网络栈在处理高并发连接和大规模数据传输时表现更出色。Linux内核对网络协议栈的优化更多，能够更好地处理网络数据包，提高Kafka的吞吐量和响应速度。</p></li><li><p><strong>硬件资源管理</strong>：Linux操作系统对硬件资源的管理更加灵活和高效。Linux上的进程调度、内存管理等机制能够更好地利用多核处理器和大内存，提高Kafka的并发处理能力。</p></li><li><p><strong>社区支持度</strong></p></li></ol><h3 id="I-O模型"><a href="#I-O模型" class="headerlink" title="I&#x2F;O模型"></a>I&#x2F;O模型</h3><p>主流的 I&#x2F;O 模型通常有以下五种类型：</p><ol><li><p>阻塞 I&#x2F;O（Blocking I&#x2F;O）：在进行 I&#x2F;O 操作时，应用程序会被阻塞，直到数据准备好或者操作完成。这种模型是最简单的，但是会导致应用程序的性能下降，因为在等待I&#x2F;O<br>完成时，CPU 无法处理其他任务。</p></li><li><p>非阻塞 I&#x2F;O（Non-blocking I&#x2F;O）：在进行 I&#x2F;O 操作时，应用程序可以继续执行其他任务，而不会被阻塞。但是，如果数据还没有准备好或者操作还没有完成，应用程序需要不断地轮询来检查状态，这会导致CPU<br>的资源浪费。</p></li><li><p>I&#x2F;O 多路复用（I&#x2F;O Multiplexing）：通过使用 select、poll 或者 epoll 等系统调用，应用程序可以同时监视多个文件描述符的状态，当任何一个文件描述符准备好进行<br>I&#x2F;O 操作时，应用程序就可以进行相应的读写操作。这种模型可以有效地处理多个连接，提高系统的并发性能。</p></li><li><p>信号驱动 I&#x2F;O（Signal-driven<br>I&#x2F;O）：应用程序通过注册信号处理函数，在数据准备好时接收到一个信号，然后进行相应的读写操作。这种模型相比于非阻塞I&#x2F;O，减少了轮询的开销，但是仍然需要应用程序不断地检查数据是否准备好。</p></li><li><p>异步 I&#x2F;O（Asynchronous I&#x2F;O）：应用程序发起一个<br>I&#x2F;O操作后，可以继续执行其他任务，当数据准备好或者操作完成时，操作系统会通知应用程序进行相应的读写操作。这种模型是最高效的，因为应用程序不需要进行轮询或者阻塞等待，可以充分利用CPU<br>的资源。</p></li></ol><p>你不必详细了解每一种模型的实现细节，通常情况下我们认为后一种模型会比前一种模型要高级，比如 epoll 就比 select<br>要好，了解到这一程度应该足以应付我们下面的内容了。</p><p>说了这么多，I&#x2F;O 模型与 Kafka 的关系又是什么呢？实际上 Kafka 客户端底层使用了 Java 的 selector，selector 在 Linux<br>上的实现机制是epoll，而在 Windows 平台上的实现机制是 select。因此在这一点上<strong>将 Kafka 部署在 Linux 上是有优势的，因为能够获得更高效的<br>I&#x2F;O性能</strong>。</p><h3 id="零拷贝"><a href="#零拷贝" class="headerlink" title="零拷贝"></a>零拷贝</h3><p>Kafka在Linux上支持零拷贝（Zero-copy）的主要原因是Linux操作系统提供了一些特性和系统调用，使得零拷贝成为可能。而Windows操作系统在设计上与Linux有所不同，因此不直接支持零拷贝。</p><p>零拷贝是一种优化技术，可以减少数据在内核空间和用户空间之间的拷贝次数，提高数据传输的效率。在传统的拷贝方式中，数据从磁盘读取到内核缓冲区，然后再从内核缓冲区拷贝到用户空间的应用程序缓冲区，这涉及到多次数据拷贝操作，增加了CPU和内存的开销。</p><p>在Linux上，零拷贝的实现主要依赖以下几个特性和系统调用：</p><ol><li><p>文件描述符（File Descriptor）：Linux使用文件描述符来表示打开的文件，通过文件描述符可以进行文件的读写操作。</p></li><li><p>内核缓冲区（Kernel Buffer）：Linux内核提供了一块内存区域作为内核缓冲区，用于存放从磁盘读取的数据。</p></li><li><p>sendfile系统调用：sendfile系统调用可以在内核空间和用户空间之间直接传输数据，而无需经过用户空间缓冲区。</p></li></ol><p>通过使用sendfile系统调用，Kafka可以直接将数据从磁盘读取到内核缓冲区，然后通过网络发送给消费者，避免了数据在内核空间和用户空间之间的多次拷贝。</p><p>而在Windows上，没有类似于Linux的sendfile系统调用，因此无法直接实现零拷贝。在Windows上，数据需要经过内核空间和用户空间之间的多次拷贝，导致性能上的损失。</p><p><strong>一句话总结一下，在 Linux 部署 Kafka 能够享受到零拷贝技术所带来的快速数据传输特性。</strong></p><h2 id="磁盘"><a href="#磁盘" class="headerlink" title="磁盘"></a>磁盘</h2><p>先说结论：</p><ul><li>追求性价比的公司可以不搭建RAID，使用普通磁盘组成存储空间即可</li><li>使用机械磁盘完全能够胜任Kafka线上环境</li></ul><h3 id="为什么说Kafka可以不搭建RAID环境"><a href="#为什么说Kafka可以不搭建RAID环境" class="headerlink" title="为什么说Kafka可以不搭建RAID环境"></a>为什么说Kafka可以不搭建RAID环境</h3><ol><li><p><strong>分布式架构</strong><br>：Kafka采用分布式架构，将消息分散存储在多个Broker节点上。每个Broker节点都是独立的，它们之间相互复制消息，实现数据的冗余和高可用性。因此，即使某个节点的磁盘发生故障，其他节点仍然可以提供服务，不会导致数据丢失。</p></li><li><p><strong>数据复制</strong><br>：Kafka使用副本机制来保证数据的可靠性。每个分区都可以配置多个副本，这些副本分布在不同的Broker节点上。当消息写入到Leader副本后，Kafka会将消息复制到其他副本，确保数据的冗余存储。如果某个副本所在的磁盘发生故障，Kafka会自动选择其他副本作为Leader，保证数据的可用性。</p></li><li><p><strong>持久化存储</strong><br>：Kafka将消息持久化存储在磁盘上，而不是仅保存在内存中。这样即使Broker节点发生故障，消息也不会丢失。Kafka使用顺序写入的方式将消息追加到磁盘上的日志文件中，这种方式对磁盘的要求相对较低，不需要特别高的磁盘性能。</p></li><li><p><strong>水平扩展</strong>：Kafka支持水平扩展，可以通过增加Broker节点来提高系统的吞吐量和容量。在扩展过程中，可以选择在新节点上添加磁盘，而不需要对现有节点进行改动。这种方式可以灵活地根据需求来调整磁盘的配置和容量。</p></li></ol><h3 id="为什么说使用机械磁盘完全能够胜任Kafka线上环境"><a href="#为什么说使用机械磁盘完全能够胜任Kafka线上环境" class="headerlink" title="为什么说使用机械磁盘完全能够胜任Kafka线上环境"></a>为什么说使用机械磁盘完全能够胜任Kafka线上环境</h3><p>Kafka是一个高吞吐量、低延迟的分布式消息系统，它的性能和稳定性对于线上环境非常重要。虽然SSD（固态硬盘）在性能方面有明显的优势，但机械磁盘仍然可以胜任Kafka线上环境的原因如下：</p><ol><li><p><strong>顺序写入</strong>：Kafka的特点之一是顺序写入，即消息按照顺序追加到日志文件中。机械磁盘在顺序写入方面的性能表现通常比较好，因为它们具有较大的磁道和扇区，可以更好地支持连续写入操作。</p></li><li><p><strong>容量成本低</strong>：相比于SSD，机械磁盘的容量成本更低。对于大规模的Kafka集群，存储成本是一个重要的考虑因素。机械磁盘可以提供更大的存储容量，使得Kafka能够存储更多的消息数据。</p></li><li><p><strong>持久性和可靠性</strong>：机械磁盘通常具有更高的持久性和可靠性。它们在写入数据时，通常会将数据缓存在磁盘的缓存区中，然后再进行持久化写入。这种写入方式可以提供更好的数据可靠性，即使在断电等异常情况下，数据也不容易丢失。</p></li><li><p><strong>成熟稳定</strong>：机械磁盘是一种成熟的存储设备，已经在各种应用场景中得到广泛应用。相比之下，SSD虽然在性能方面有优势，但在稳定性和寿命方面可能存在一些问题。对于对数据可靠性要求较高的线上环境，机械磁盘可能更受信任。</p></li></ol><p>需要注意的是，尽管机械磁盘可以胜任Kafka线上环境，但在某些特定场景下，如对延迟要求非常高的应用，或者对存储容量要求非常大的应用，可能需要考虑使用SSD等更高性能的存储设备。此外，随着技术的发展，未来可能会有更多新型存储设备出现，对于Kafka的存储需求可能会有不同的选择。</p><h2 id="磁盘容量"><a href="#磁盘容量" class="headerlink" title="磁盘容量"></a>磁盘容量</h2><p>总结下磁盘容量需要考虑的因素：</p><ul><li>新增消息数</li><li>消息留存时间</li><li>平均消息大小</li><li>备份数</li><li>是否启用压缩</li></ul><p>我举一个简单的例子来说明该如何思考这个问题。假设你所在公司有个业务每天需要向 Kafka 集群发送 1<br>亿条消息，每条消息保存两份以防止数据丢失，另外消息默认保存两周时间。现在假设消息的平均大小是 1KB，那么你能说出你的<br>Kafka集群需要为这个业务预留多少磁盘空间吗？</p><p>我们来计算一下：每天 1 亿条 1KB<br>大小的消息，保存两份且留存两周的时间，那么总的空间大小就等于 <code>1 亿 * 1KB * 2 / 1000 / 1000 = 200GB</code>。一般情况下 Kafka<br>集群除了消息数据还有其他类型的数据，比如索引数据等，故我们再为这些数据预留出 10% 的磁盘空间，因此总的存储容量就是<br>220GB。既然要保存两周，那么整体容量即为 220GB * 14，大约 3TB 左右。Kafka 支持数据的压缩，假设压缩比是<br>0.75，那么最后你需要规划的存储空间就是 <code>0.75 * 3 = 2.25TB</code>。</p><h2 id="带宽"><a href="#带宽" class="headerlink" title="带宽"></a>带宽</h2><p>举个例子，我们使用以下假设和计算：</p><ol><li>带宽资源：假设机房环境是千兆网络（1Gbps），即每秒处理1Gb的数据。</li><li>带宽利用率：假设Kafka服务器最多使用70%的带宽资源，即每秒最多使用700Mb的带宽。</li><li>预留资源：为了避免网络丢包，我们额外预留了2&#x2F;3的带宽资源，即单台服务器使用带宽240Mbps。</li><li>数据处理目标：在1小时内处理1TB的业务数据，即每秒需要处理2336Mb的数据。</li></ol><p>根据以上计算，我们得出了需要10台Kafka服务器来完成这个业务目标。这个计算还没有考虑到消息的复制，如果消息需要额外复制两份，那么总的服务器台数还要乘以3，即需要30台服务器。</p><p>在实际部署中，你可以根据自己的网络环境和业务需求进行调整和优化。</p><p>另外，如果你的环境中还涉及跨机房传输，那么带宽资源的瓶颈可能会更加明显。在跨机房传输的情况下，网络延迟和带宽限制都会对性能产生影响。你可能需要考虑使用更高带宽的网络或者采取其他优化措施来解决这个问题。</p><p>总结起来，对于带宽资源的规划，你需要考虑以下几个因素：</p><ol><li>网络带宽：根据网络环境确定每秒处理的数据量。</li><li>带宽利用率：根据实际情况确定Kafka服务器使用的带宽比例。</li><li>预留资源：为了避免网络丢包，额外预留一部分带宽资源。</li><li>数据处理目标：根据业务需求确定每秒需要处理的数据量。</li><li>消息复制：如果消息需要复制，考虑复制的数量。</li></ol><p>根据以上因素，你可以计算出所需的Kafka服务器数量，并根据实际情况进行调整和优化。</p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-18/46348146460000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-18/46348146460000.png"></a></p><h1 id="集群参数配置"><a href="#集群参数配置" class="headerlink" title="集群参数配置"></a>集群参数配置</h1><h2 id="静态参数和动态参数"><a href="#静态参数和动态参数" class="headerlink" title="静态参数和动态参数"></a>静态参数和动态参数</h2><p>静态参数是指在Kafka启动时配置的参数，一旦设置后，只能通过重启Kafka来更改。这些参数通常是对Kafka整体行为的全局设置，例如Kafka的监听端口、日志目录、副本数量等。静态参数的配置通常在Kafka的配置文件（如server.properties）中进行。</p><p>动态参数是指在Kafka运行时可以动态修改的参数，而无需重启Kafka。这些参数通常是对Kafka的某个特定组件或功能进行细粒度的调整。动态参数可以通过Kafka的命令行工具或API进行修改。</p><h2 id="Broker"><a href="#Broker" class="headerlink" title="Broker"></a>Broker</h2><h3 id="磁盘相关"><a href="#磁盘相关" class="headerlink" title="磁盘相关"></a>磁盘相关</h3><p>在 Kafka 中，Broker 是消息队列的核心组件，负责接收、存储和转发消息。为了配置存储信息，我们需要设置一些重要的参数。</p><ol><li><p>log.dirs：这是一个非常重要的参数，用于指定 Broker 使用的文件目录路径。这个参数没有默认值，因此必须由用户自己指定。在生产环境中，建议为<br>log.dirs 配置多个路径，以提高读写性能和实现故障转移。具体格式是一个 CSV<br>格式，多个路径之间用逗号分隔，例如：<code>/home/kafka1,/home/kafka2,/home/kafka3</code>。如果有条件的话，最好将这些目录挂载到不同的物理磁盘上，以提高性能和可靠性。</p></li><li><p>log.dir：这是 log.dirs 的补充参数，用于指定单个路径。在实际使用中，我们只需要设置 log.dirs 参数即可，不需要设置 log.dir。</p></li></ol><p>为什么要为 log.dirs 配置多个路径呢？这是因为多块物理磁盘同时读写数据可以提高吞吐量，同时也能实现故障转移。在 Kafka 1.1<br>版本之前，如果 Broker 使用的任何一块磁盘挂掉了，整个 Broker 进程都会关闭。但是从 Kafka 1.1 版本开始，引入了 Failover<br>功能，坏掉的磁盘上的数据会自动转移到其他正常的磁盘上，Broker 仍然可以正常工作。这个改进使得我们不再依赖 RAID<br>来提供数据的可靠性，而是通过多块磁盘的故障转移来实现。</p><p>需要注意的是，如果使用了多个路径，Kafka 会根据一定的策略将消息分配到不同的路径上，以实现负载均衡。同时，Kafka<br>也会自动管理磁盘空间，当某个路径的磁盘空间不足时，会自动将消息转移到其他路径上。</p><p>总结一下，为了配置存储信息，我们需要设置 log.dirs 参数，为其配置多个路径，最好挂载到不同的物理磁盘上。这样可以提高读写性能和实现故障转移。同时，Kafka<br>会自动管理磁盘空间和实现负载均衡。这些配置可以在 Kafka 的配置文件中进行设置。</p><h3 id="Zookeeper相关"><a href="#Zookeeper相关" class="headerlink" title="Zookeeper相关"></a>Zookeeper相关</h3><p>ZooKeeper是一个分布式协调框架，用于协调和管理Kafka集群的元数据信息。它负责保存Kafka集群的配置信息，例如Broker的运行状态、Topic的创建情况、分区信息以及Leader副本的位置等。</p><p>在Kafka中，与ZooKeeper相关的最重要的参数是<code>zookeeper.connect</code><br>。这个参数是一个CSV格式的字符串，用于指定连接到ZooKeeper集群的地址和端口。例如，<code>zk1:2181,zk2:2181,zk3:2181</code><br>表示连接到三个ZooKeeper节点，默认端口为2181。</p><p>如果要让多个Kafka集群共享同一个ZooKeeper集群，可以使用<code>chroot</code>参数来进行区分。<code>chroot</code><br>是ZooKeeper的概念，类似于别名。假设有两个Kafka集群，分别命名为kafka1和kafka2，那么可以将<code>zookeeper.connect</code><br>参数设置为<code>zk1:2181,zk2:2181,zk3:2181/kafka1</code>和<code>zk1:2181,zk2:2181,zk3:2181/kafka2</code>。这样就可以通过<code>chroot</code>来区分不同的Kafka集群。</p><p>需要注意的是，<code>chroot</code><br>只需要在参数中指定一次，并且应该添加到最后。有时候会遇到这样的错误格式：<code>zk1:2181/kafka1,zk2:2181/kafka2,zk3:2181/kafka3</code><br>，这是不正确的。</p><p>总结一下，设置与ZooKeeper相关的参数时，需要注意以下几点：</p><ol><li><code>zookeeper.connect</code>参数是一个CSV格式的字符串，用于指定连接到ZooKeeper集群的地址和端口。</li><li>如果多个Kafka集群共享同一个ZooKeeper集群，可以使用<code>chroot</code>参数来进行区分。</li><li><code>chroot</code>参数只需要在参数中指定一次，并且应该添加到最后。</li></ol><p>下面是一个示例配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zookeeper.connect=zk1:2181,zk2:2181,zk3:2181/kafka1</span><br></pre></td></tr></table></figure><p>这个配置表示连接到三个ZooKeeper节点，并使用<code>kafka1</code>作为<code>chroot</code>。</p><h3 id="Broker相关"><a href="#Broker相关" class="headerlink" title="Broker相关"></a>Broker相关</h3><p>在 Kafka 中，listeners 参数用于指定外部连接者通过什么协议访问 Kafka 服务。它是一个逗号分隔的三元组列表，每个三元组由协议名称、主机名和端口号组成。协议名称可以是标准的协议，如<br>PLAINTEXT 表示明文传输，SSL 表示使用 SSL 或 TLS 加密传输等，也可以是自定义的协议名称。</p><p>举个例子，如果你定义了一个名为 CONTROLLER 的自定义协议，你可以在 listeners 参数中添加 <code>CONTROLLER://localhost:9092</code><br>，表示该协议通过 localhost 的 9092 端口进行通信。</p><p>需要注意的是，如果你自定义了协议名称，你还需要通过 <code>listener.security.protocol.map</code> 参数告诉 Kafka 使用哪种安全协议。比如，如果你定义了<br>CONTROLLER 协议，并且该协议使用明文传输数据，你需要设置 <code>listener.security.protocol.map=CONTROLLER:PLAINTEXT</code>。</p><p>另外，主机名和端口号比较直观，不需要过多解释。但是需要注意的是，建议在 Broker 端和客户端应用的配置中都使用主机名而不是 IP<br>地址。因为在 Kafka 的源代码中，也是使用主机名进行连接的。如果你在某些地方使用了 IP 地址进行连接，可能会导致连接失败的问题。</p><p>总结一下，listeners 参数用于指定 Kafka 服务的监听器，告诉外部连接者通过什么协议访问<br>Kafka。它是一个三元组列表，每个三元组由协议名称、主机名和端口号组成。建议使用主机名而不是 IP<br>地址进行配置。如果使用自定义协议，还需要通过 <code>listener.security.protocol.map</code>参数指定安全协议。</p><h3 id="Topic相关"><a href="#Topic相关" class="headerlink" title="Topic相关"></a>Topic相关</h3><h4 id="auto-create-topics-enable"><a href="#auto-create-topics-enable" class="headerlink" title="auto.create.topics.enable"></a>auto.create.topics.enable</h4><p>该参数用于控制是否允许自动创建Topic。建议将该参数设置为false，即不允许自动创建Topic。</p><p>在线上环境中，如果该参数被设置为true，可能会导致出现很多名字稀奇古怪的Topic。例如，当我们想要为名为test的Topic发送事件时，由于拼写错误将test写成了tst，启动生产者程序后，一个名为tst的Topic就会被自动创建。这种情况下，好的运维应该防止这种情况的发生，特别是对于大公司而言，每个部门被分配的Topic应该由运维严格把控，不允许自行创建任何Topic。</p><h4 id="unclean-leader-election-enable"><a href="#unclean-leader-election-enable" class="headerlink" title="unclean.leader.election.enable"></a>unclean.leader.election.enable</h4><p>该参数用于控制是否允许Unclean Leader选举。Unclean Leader选举是指在Kafka中，当保存数据较多的副本都挂掉时，是否允许从保存数据较少的副本中选举出新的Leader。</p><p>在Kafka中，每个分区都有多个副本来提供高可用性，其中只有一个副本对外提供服务，即Leader副本。只有保存数据较多的副本才有资格竞选Leader，而那些落后进度太多的副本没有资格竞选。</p><p>如果设置<code>unclean.leader.election.enable</code>为false，那么Kafka将坚持之前的原则，坚决不允许那些落后太多的副本竞选Leader。这样做的后果是该分区将不可用，因为没有Leader。</p><p>如果设置<code>unclean.leader.election.enable</code><br>为true，那么Kafka允许从那些保存数据较少的副本中选举出新的Leader。这样做的后果是数据有可能丢失，因为这些副本保存的数据本来就不全，当成为Leader后，它本身就变得膨胀了，认为自己的数据才是权威的。</p><p>需要注意的是，该参数在最新版的Kafka中默认为false。但是由于社区对该参数的默认值进行了多次更改，所以建议在使用时显式地将其设置为false。</p><h4 id="auto-leader-rebalance-enable"><a href="#auto-leader-rebalance-enable" class="headerlink" title="auto.leader.rebalance.enable"></a>auto.leader.rebalance.enable</h4><p>该参数用于控制是否允许Kafka定期进行Leader选举。建议将该参数设置为false。</p><p>设置<code>auto.leader.rebalance.enable</code>为true表示允许Kafka定期对一些Topic分区进行Leader重选举。需要满足一定的条件才会触发Leader重选举。</p><p>与<code>unclean.leader.election.enable</code>参数不同的是，<code>auto.leader.rebalance.enable</code>并不是选举新的Leader，而是更换现有的Leader。例如，如果Leader<br>A一直表现良好，但是当<code>auto.leader.rebalance.enable</code>为true时，经过一段时间后，Leader A可能会被强制卸任，换成Leader B。</p><p>需要注意的是，Leader的更换代价很高。原本向Leader A发送请求的所有客户端都需要切换成向Leader B发送请求。而且这种Leader的更换本质上没有任何性能收益。</p><p>因此，在生产环境中，建议将<code>auto.leader.rebalance.enable</code>设置为false，避免不必要的Leader更换。</p><h3 id="数据留存方面"><a href="#数据留存方面" class="headerlink" title="数据留存方面"></a>数据留存方面</h3><p>在Kafka中，有一组参数用于控制数据的留存。下面我将逐个介绍这些参数。</p><ol><li><p><code>log.retention.&#123;hours|minutes|ms&#125;</code><br>：这是一组参数，用于控制消息数据在Kafka中保存的时间。这三个参数分别是以小时（hours）、分钟（minutes）和毫秒（ms）为单位的时间间隔。优先级上，ms设置最高，minutes次之，hours最低。通常情况下，我们会设置较长的时间间隔，比如log.retention.hours&#x3D;168表示默认保存7天的数据，自动删除7天前的数据。如果将Kafka用作存储系统，那么这个值可能需要相应调大。</p></li><li><p><code>log.retention.bytes</code><br>：这个参数用于指定Broker在磁盘上保存的消息数据的总容量大小。默认值为-1，表示没有容量限制，即可以保存任意大小的数据。这个参数在构建云上的多租户Kafka集群时发挥作用。假设你要提供一个云上的Kafka服务，每个租户只能使用100GB的磁盘空间，为了避免某个租户占用过多的磁盘空间，设置这个参数就非常重要了。</p></li><li><p><code>message.max.bytes</code><br>：这个参数用于控制Broker能够接收的最大消息大小。默认值为1000012，即不到1MB。然而，在实际场景中，超过1MB的消息是很常见的。因此，在生产环境中，将这个值设置得比较大是比较保险的做法。这个参数只是一个标尺，仅仅衡量Broker能够处理的最大消息大小，即使设置得大一点也不会占用太多磁盘空间。</p></li></ol><p>需要注意的是，这些参数都是可配置的，可以根据实际需求进行调整。在配置文件中，可以通过设置对应的属性来修改这些参数的值。例如，可以在<code>server.properties</code><br>文件中添加以下配置来修改<code>log.retention.hours</code>参数的值：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log.retention.hours=168</span><br></pre></td></tr></table></figure><p>这样就将消息数据的保存时间设置为7天。</p><p>总结一下，这些参数在Kafka中起到了重要的作用，可以根据实际需求来调整，以满足不同的业务场景。</p><h3 id="Topic级别参数"><a href="#Topic级别参数" class="headerlink" title="Topic级别参数"></a>Topic级别参数</h3><p>Topic级别的参数在Kafka中非常重要，它允许我们为每个Topic设置特定的参数值，这些参数会覆盖全局Broker参数的值。这样做的好处是可以根据不同的业务需求，为不同的Topic设置不同的参数，提高系统的灵活性和效率。</p><p>下面我将详细介绍几个重要的Topic级别参数，按照用途分组。</p><ol><li><p>保存消息方面的参数：</p><ul><li><code>retention.ms</code><br>：规定了该Topic消息被保存的时长。默认值是7天，即该Topic只保存最近7天的消息。如果设置了这个值，它会覆盖Broker端的全局参数值。通过设置不同的retention.ms值，我们可以根据业务需求来控制消息的保存时长，避免无效的数据占用过多的存储空间。</li><li><code>retention.bytes</code><br>：规定了为该Topic预留的磁盘空间大小。和全局参数的作用类似，这个值在多租户的Kafka集群中非常有用。默认值是-1，表示可以无限使用磁盘空间。通过设置不同的retention.bytes值，我们可以根据不同的Topic的数据量来合理分配磁盘空间，避免存储空间不足的问题。</li></ul></li><li><p>处理消息大小方面的参数：</p><ul><li><code>max.message.bytes</code>：决定了Kafka<br>Broker能够正常接收该Topic的最大消息大小。在很多公司中，Kafka作为基础架构组件运行，承载了大量的业务数据。如果在全局层面上无法给出一个合适的最大消息值，那么允许不同的业务部门自行设定Topic级别的<code>max.message.bytes</code><br>参数就显得非常必要了。通过设置不同的<code>max.message.bytes</code>值，我们可以根据不同的业务需求来控制消息的大小，确保系统能够正常处理各种大小的消息。</li></ul></li></ol><p>通过设置Topic级别的参数，我们可以根据不同的业务需求来灵活地调整Kafka的配置，提高系统的性能和可用性。同时，这也是Kafka作为一个高性能分布式消息系统的重要特性之一。</p><p>需要注意的是，Topic级别的参数只对该Topic中的消息生效，不会影响其他Topic。如果没有为某个Topic设置特定的参数值，那么将会使用全局Broker参数的默认值。</p><p>除了上述介绍的参数，Kafka还有其他一些Topic级别的参数，如<code>cleanup.policy</code>、<code>compression.type</code><br>等，它们都可以根据具体的业务需求进行设置。在实际应用中，我们可以根据不同的场景和需求，灵活地使用这些参数来优化Kafka集群的性能和可靠性。</p><p>总结一下，Topic级别的参数允许我们为每个Topic设置特定的参数值，覆盖全局Broker参数的值。通过设置不同的参数值，我们可以根据业务需求来控制消息的保存时长、磁盘空间使用和消息大小等，提高系统的灵活性和效率。这是Kafka作为一个高性能分布式消息系统的重要特性之一。</p><p>在Kafka中，可以通过两种方式来设置Topic级别的参数：在创建Topic时设置和修改已存在的Topic时设置。</p><p><strong>1. 创建Topic时设置参数</strong></p><p>在创建Topic时，可以通过<code>--config</code>参数来设置Topic级别的参数。例如，我们要创建一个名为<code>transaction</code><br>的Topic，并设置<code>retention.ms</code>为15552000000，<code>max.message.bytes</code>为5242880，可以使用以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --bootstrap-server localhost:9092 --create --topic transaction --partitions 1 --replication-factor 1 --config retention.ms=15552000000 --config max.message.bytes=5242880</span><br></pre></td></tr></table></figure><p>在上述命令中，<code>--config</code>后面的参数用于指定要设置的Topic级别参数。</p><p><strong>2. 修改已存在的Topic时设置参数</strong></p><p>可以使用<code>kafka-configs</code>命令来修改已存在的Topic的参数。假设我们要将<code>transaction</code> Topic的<code>max.message.bytes</code><br>修改为10485760，可以使用以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-configs.sh --zookeeper localhost:2181 --entity-type topics --entity-name transaction --alter --add-config max.message.bytes=10485760</span><br></pre></td></tr></table></figure><p>在上述命令中，<code>--entity-type topics</code>表示要修改的实体类型为Topic，<code>--entity-name transaction</code><br>表示要修改的Topic名称，<code>--alter</code>表示要进行修改操作，<code>--add-config</code>后面的参数用于指定要修改的Topic级别参数及其新值。</p><p><strong>个人建议</strong></p><p>个人建议始终坚持使用第二种方式来设置Topic级别参数，并且在未来，Kafka社区很有可能统一使用<code>kafka-configs</code><br>脚本来调整Topic级别参数。这样做的好处是统一了设置参数的方式，减少了学习成本和混淆，同时也更加方便管理和维护。</p><h3 id="JVM参数"><a href="#JVM参数" class="headerlink" title="JVM参数"></a>JVM参数</h3><p>JVM参数对于Kafka集群的性能和稳定性非常重要。在设置JVM参数之前，首先需要确定Java版本。对于Kafka来说，不推荐在Java<br>6或7的环境上运行，建议至少使用Java 8。</p><p>在JVM参数设置中，堆大小是一个关键参数。尽管后面我们还会讨论如何调优Kafka性能的问题，但是现在我想给出一个通用的建议：将JVM堆大小设置为6GB，这是目前业界普遍认可的一个合理值。很多人使用默认的堆大小来运行Kafka，但是默认的1GB有点小，因为Kafka<br>Broker在与客户端进行交互时会在JVM堆上创建大量的ByteBuffer实例，堆大小不能太小。</p><p>另一个重要的JVM参数是垃圾回收器（GC）的设置。如果你仍在使用Java<br>7，可以根据以下规则选择合适的垃圾回收器：如果Broker所在机器的CPU资源非常充裕，建议使用CMS（Concurrent Mark<br>Sweep）收集器，启用方法是指定<code>-XX:+UseConcMarkSweepGC</code>。否则，使用吞吐量收集器，启用方法是指定<code>-XX:+UseParallelGC</code>。如果你使用Java<br>8，可以手动设置使用G1（Garbage First）收集器。在没有任何调优的情况下，G1表现要比CMS更出色，主要体现在更少的Full<br>GC和需要调整的参数更少等方面，所以使用G1就可以了。</p><p>现在我们确定了要设置的JVM参数，接下来我们来为Kafka进行设置。奇怪的是，这个问题在Kafka官网上居然没有被提及。实际上，设置的方法非常简单，你只需要设置下面这两个环境变量即可：</p><ul><li><code>KAFKA_HEAP_OPTS</code>：指定堆大小。例如，你可以这样设置：<code>export KAFKA_HEAP_OPTS=&quot;-Xms6g -Xmx6g&quot;</code></li><li><code>KAFKA_JVM_PERFORMANCE_OPTS</code><br>：指定GC参数。例如，你可以这样设置：<code>export KAFKA_JVM_PERFORMANCE_OPTS=&quot;-server -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35 -XX:+ExplicitGCInvokesConcurrent -Djava.awt.headless=true&quot;</code></li></ul><p>在启动Kafka Broker之前，先设置好这两个环境变量，然后执行启动命令，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ export KAFKA_HEAP_OPTS=&quot;-Xms6g -Xmx6g&quot;</span><br><span class="line">$ export KAFKA_JVM_PERFORMANCE_OPTS=&quot;-server -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35 -XX:+ExplicitGCInvokesConcurrent -Djava.awt.headless=true&quot;</span><br><span class="line">$ bin/kafka-server-start.sh config/server.properties</span><br></pre></td></tr></table></figure><p>这样就完成了JVM参数的设置。通过合理的设置，可以提高Kafka集群的性能和稳定性。需要注意的是，具体的参数设置可能因环境和需求而有所不同，可以根据实际情况进行调整。</p><h3 id="操作系统参数"><a href="#操作系统参数" class="headerlink" title="操作系统参数"></a>操作系统参数</h3><p>Kafka 集群通常需要设置一些操作系统参数来优化性能和稳定性。下面是一些常见的操作系统参数设置：</p><ol><li><p><strong>文件描述符限制（ulimit -n）</strong>：文件描述符是操作系统用于跟踪打开文件的标识符。Kafka<br>集群需要同时打开大量的文件描述符，因此需要增加文件描述符限制。默认情况下，操作系统的文件描述符限制较低，可能会导致 Kafka<br>进程无法打开足够的文件描述符，从而影响性能。建议将文件描述符限制设置为一个较大的值，例如 ulimit -n 1000000。</p></li><li><p><strong>文件系统类型的选择</strong>：Kafka 集群的性能和稳定性受到文件系统的影响。根据官方测试报告，XFS 文件系统的性能要优于 ext4<br>文件系统。因此，在生产环境中最好选择 XFS 文件系统。最近也有一些关于 Kafka 使用 ZFS 文件系统的报告，显示其性能更强劲，如果条件允许，可以尝试使用<br>ZFS 文件系统。</p></li><li><p><strong>Swap 的调优</strong>：Swap 是操作系统用于将内存中不常用的数据暂时存储在磁盘上的机制。一些文章建议将 Swap 设置为 0，完全禁用<br>Swap，以防止 Kafka 进程使用 Swap 空间。然而，个人认为最好不要将 Swap 设置为 0，而是设置为一个较小的值。这是因为当物理内存耗尽时，操作系统会触发<br>OOM killer 组件，随机选择一个进程并杀死它，而不给用户任何预警。如果将 Swap 设置为一个较小的值，当开始使用 Swap<br>空间时，你至少能观察到 Broker 性能的急剧下降，从而有时间进行进一步的调优和问题诊断。建议将 swappiness 设置为接近 0 但不为<br>0 的值，例如 1。</p></li><li><p><strong>提交时间（Flush 落盘时间）</strong>：Kafka 发送数据时，并不需要等待数据被写入磁盘才认为成功，只要数据被写入操作系统的页缓存（Page<br>Cache）即可。操作系统会根据 LRU 算法定期将页缓存上的“脏”数据写入物理磁盘。提交时间决定了这个定期的间隔，默认为 5<br>秒。通常情况下，这个时间间隔可能太频繁，可以适当增加提交时间间隔来降低物理磁盘的写操作。需要注意的是，如果数据在写入磁盘之前发生机器宕机，数据将会丢失。但由于<br>Kafka 在软件层面提供了多副本的冗余机制，因此可以适当增加提交时间间隔以换取性能。</p></li></ol><p>需要注意的是，以上参数设置是一般情况下的建议，具体的设置还需要根据实际情况和硬件配置进行调整。另外，不同的操作系统和版本可能会有不同的参数设置方式，请参考相应的操作系统文档或官方建议进行设置。</p><p>下面是一个示例，展示如何在 Linux 系统上设置 ulimit -n 参数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前文件描述符限制</span></span><br><span class="line"><span class="built_in">ulimit</span> -n</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改文件描述符限制为 1000000</span></span><br><span class="line"><span class="built_in">ulimit</span> -n 1000000</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证修改是否生效</span></span><br><span class="line"><span class="built_in">ulimit</span> -n</span><br></pre></td></tr></table></figure><p>请注意，以上示例仅适用于 Linux 系统，其他操作系统可能有不同的设置方式。</p><h1 id="Kafka系列文章更新计划"><a href="#Kafka系列文章更新计划" class="headerlink" title="Kafka系列文章更新计划"></a>Kafka系列文章更新计划</h1><table><thead><tr><th>名称</th><th>状态</th><th>预计更新日期</th><th>文章地址</th></tr></thead><tbody><tr><td>（一）Kafka入门</td><td>已完成</td><td>-</td><td><a href="https://blog.zysicyj.top/kafka1">https://blog.zysicyj.top/kafka1</a></td></tr><tr><td>（二）Kafka的基本使用</td><td>已完成</td><td>9月18日</td><td><a href="https://blog.zysicyj.top/kafka2">https://blog.zysicyj.top/kafka2</a></td></tr><tr><td>（三）生产者消息分区机制原理</td><td>未更新</td><td>9月25日</td><td><a href="https://blog.zysicyj.top/kafka3">https://blog.zysicyj.top/kafka3</a></td></tr><tr><td>（四）生产者压缩算法</td><td>未更新</td><td>10月2日</td><td><a href="https://blog.zysicyj.top/kafka4">https://blog.zysicyj.top/kafka4</a></td></tr><tr><td>（五）如何实现无消息丢失</td><td>未更新</td><td>10月9日</td><td><a href="https://blog.zysicyj.top/kafka5">https://blog.zysicyj.top/kafka5</a></td></tr><tr><td>（六）客户端隐藏功能</td><td>未更新</td><td>10月16日</td><td><a href="https://blog.zysicyj.top/kafka6">https://blog.zysicyj.top/kafka6</a></td></tr><tr><td>（七）Java生产者是如何管理TCP连接的</td><td>未更新</td><td>10月23日</td><td><a href="https://blog.zysicyj.top/kafka7">https://blog.zysicyj.top/kafka7</a></td></tr><tr><td>（八）幂等生产者和事务生产者是一回事吗</td><td>未更新</td><td>10月30日</td><td><a href="https://blog.zysicyj.top/kafka8">https://blog.zysicyj.top/kafka8</a></td></tr><tr><td>（九）消费者组到底是什么</td><td>未更新</td><td>11月6日</td><td><a href="https://blog.zysicyj.top/kafka9">https://blog.zysicyj.top/kafka9</a></td></tr><tr><td>（十）揭开神秘的“位移主题”面纱</td><td>未更新</td><td>11月13日</td><td><a href="https://blog.zysicyj.top/kafka10">https://blog.zysicyj.top/kafka10</a></td></tr><tr><td>（十一）消费者组重平衡能避免吗</td><td>未更新</td><td>11月20日</td><td><a href="https://blog.zysicyj.top/kafka11">https://blog.zysicyj.top/kafka11</a></td></tr><tr><td>（十二）Kafka中位移提交那些事儿</td><td>未更新</td><td>11月27日</td><td><a href="https://blog.zysicyj.top/kafka12">https://blog.zysicyj.top/kafka12</a></td></tr><tr><td>（十三） CommitFailedException异常怎么处理</td><td>未更新</td><td>12月4日</td><td><a href="https://blog.zysicyj.top/kafka13">https://blog.zysicyj.top/kafka13</a></td></tr><tr><td>（十四） 多线程开发消费者实例</td><td>未更新</td><td>12月11日</td><td><a href="https://blog.zysicyj.top/kafka14">https://blog.zysicyj.top/kafka14</a></td></tr><tr><td>（十五） Java 消费者是如何管理TCP连接的</td><td>未更新</td><td>12月18日</td><td><a href="https://blog.zysicyj.top/kafka15">https://blog.zysicyj.top/kafka15</a></td></tr><tr><td>（十六） 消费者组消费进度监控都怎么实现</td><td>未更新</td><td>12月25日</td><td><a href="https://blog.zysicyj.top/kafka16">https://blog.zysicyj.top/kafka16</a></td></tr><tr><td>（十七）  Kafka副本机制详解</td><td>未更新</td><td>1月1日</td><td><a href="https://blog.zysicyj.top/kafka17">https://blog.zysicyj.top/kafka17</a></td></tr><tr><td>（十八）  请求是怎么被处理的</td><td>未更新</td><td>1月8日</td><td><a href="https://blog.zysicyj.top/kafka18">https://blog.zysicyj.top/kafka18</a></td></tr><tr><td>（十九）  消费者组重平衡全流程解析</td><td>未更新</td><td>1月15日</td><td><a href="https://blog.zysicyj.top/kafka19">https://blog.zysicyj.top/kafka19</a></td></tr><tr><td>（二十）  你一定不能错过的Kafka控制器</td><td>未更新</td><td>1月22日</td><td><a href="https://blog.zysicyj.top/kafka20">https://blog.zysicyj.top/kafka20</a></td></tr><tr><td>（二十一）  关于高水位和Leader Epoch的讨论</td><td>未更新</td><td>1月29日</td><td><a href="https://blog.zysicyj.top/kafka21">https://blog.zysicyj.top/kafka21</a></td></tr><tr><td>（二十二）  主题管理知多少</td><td>未更新</td><td>2月5日</td><td><a href="https://blog.zysicyj.top/kafka22">https://blog.zysicyj.top/kafka22</a></td></tr><tr><td>（二十三）  Kafka动态配置了解下</td><td>未更新</td><td>2月12日</td><td><a href="https://blog.zysicyj.top/kafka23">https://blog.zysicyj.top/kafka23</a></td></tr><tr><td>（二十四）   怎么重设消费者组位移</td><td>未更新</td><td>2月19日</td><td><a href="https://blog.zysicyj.top/kafka24">https://blog.zysicyj.top/kafka24</a></td></tr><tr><td>（二十五）   常见工具脚本大汇总</td><td>未更新</td><td>2月26日</td><td><a href="https://blog.zysicyj.top/kafka25">https://blog.zysicyj.top/kafka25</a></td></tr><tr><td>（二十六）   KafkaAdminClient：Kafka的运维利器</td><td>未更新</td><td>3月4日</td><td><a href="https://blog.zysicyj.top/kafka26">https://blog.zysicyj.top/kafka26</a></td></tr><tr><td>（二十七）   Kafka认证机制用哪家</td><td>未更新</td><td>3月11日</td><td><a href="https://blog.zysicyj.top/kafka27">https://blog.zysicyj.top/kafka27</a></td></tr><tr><td>（二十八）    云环境下的授权该怎么做</td><td>未更新</td><td>3月18日</td><td><a href="https://blog.zysicyj.top/kafka28">https://blog.zysicyj.top/kafka28</a></td></tr><tr><td>（二十九）    跨集群备份解决方案MirrorMaker</td><td>未更新</td><td>3月25日</td><td><a href="https://blog.zysicyj.top/kafka29">https://blog.zysicyj.top/kafka29</a></td></tr><tr><td>（三十）    你应该怎么监控Kafka</td><td>未更新</td><td>4月1日</td><td><a href="https://blog.zysicyj.top/kafka30">https://blog.zysicyj.top/kafka30</a></td></tr><tr><td>（三十一）    主流的Kafka监控框架</td><td>未更新</td><td>4月8日</td><td><a href="https://blog.zysicyj.top/kafka31">https://blog.zysicyj.top/kafka31</a></td></tr><tr><td>（三十二）     调优Kafka，你做到了吗</td><td>未更新</td><td>4月15日</td><td><a href="https://blog.zysicyj.top/kafka32">https://blog.zysicyj.top/kafka32</a></td></tr><tr><td>（三十三）     从0搭建基于Kafka的企业级实时日志流处理平台</td><td>未更新</td><td>4月22日</td><td><a href="https://blog.zysicyj.top/kafka33">https://blog.zysicyj.top/kafka33</a></td></tr><tr><td>（三十四）     Kafka Streams与其他流处理平台的差异在哪里</td><td>未更新</td><td>4月29日</td><td><a href="https://blog.zysicyj.top/kafka34">https://blog.zysicyj.top/kafka34</a></td></tr><tr><td>（三十五）     Kafka Streams DSL开发实例</td><td>未更新</td><td>5月6日</td><td><a href="https://blog.zysicyj.top/kafka35">https://blog.zysicyj.top/kafka35</a></td></tr><tr><td>（三十六）     Kafka Streams在金融领域的应用</td><td>未更新</td><td>5月13日</td><td><a href="https://blog.zysicyj.top/kafka36">https://blog.zysicyj.top/kafka36</a></td></tr></tbody></table><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kafka </tag>
            
            <tag> Linux </tag>
            
            <tag> 部署 </tag>
            
            <tag> 垃圾回收器 </tag>
            
            <tag> 性能 </tag>
            
            <tag> 集群 </tag>
            
            <tag> Windows </tag>
            
            <tag> Mac </tag>
            
            <tag> 操作系统 </tag>
            
            <tag> 文件系统 </tag>
            
            <tag> 网络栈 </tag>
            
            <tag> 硬件资源管理 </tag>
            
            <tag> 零拷贝 </tag>
            
            <tag> 阻塞 I/O </tag>
            
            <tag> 非阻塞 I/O </tag>
            
            <tag> I/O 多路复用 </tag>
            
            <tag> 信号驱动 I/O </tag>
            
            <tag> 异步 I/O </tag>
            
            <tag> 磁盘 </tag>
            
            <tag> RAID </tag>
            
            <tag> 机械磁盘 </tag>
            
            <tag> 磁盘容量 </tag>
            
            <tag> 带宽 </tag>
            
            <tag> 带宽资源 </tag>
            
            <tag> 带宽利用率 </tag>
            
            <tag> 预留资源 </tag>
            
            <tag> 数据处理目标 </tag>
            
            <tag> I/O 模型 </tag>
            
            <tag> 操作系统优化 </tag>
            
            <tag> 文件系统选择 </tag>
            
            <tag> 网络栈性能 </tag>
            
            <tag> 社区支持度 </tag>
            
            <tag> 集群参数配置 </tag>
            
            <tag> 静态参数 </tag>
            
            <tag> 动态参数 </tag>
            
            <tag> Broker </tag>
            
            <tag> 磁盘相关 </tag>
            
            <tag> log.dirs </tag>
            
            <tag> log.dir </tag>
            
            <tag> Zookeeper相关 </tag>
            
            <tag> zookeeper.connect </tag>
            
            <tag> chroot </tag>
            
            <tag> Broker相关 </tag>
            
            <tag> listeners </tag>
            
            <tag> 主机名 </tag>
            
            <tag> 端口号 </tag>
            
            <tag> Topic相关 </tag>
            
            <tag> auto.create.topics.enable </tag>
            
            <tag> unclean.leader.election.enable </tag>
            
            <tag> auto.leader.rebalance.enable </tag>
            
            <tag> 数据留存方面 </tag>
            
            <tag> log.retention </tag>
            
            <tag> log.retention.bytes </tag>
            
            <tag> message.max.bytes </tag>
            
            <tag> Topic级别参数 </tag>
            
            <tag> JVM参数 </tag>
            
            <tag> 堆大小 </tag>
            
            <tag> KAFKA_HEAP_OPTS </tag>
            
            <tag> KAFKA_JVM_PERFORMANCE_OPTS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【日记】9月17日</title>
      <link href="/2ccef498.html"/>
      <url>/2ccef498.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0/">系列文章地址</a></p><hr><ol><li>送侄女侄子去姐姐家</li><li>接外甥女来家里</li><li>请外甥女老婆吃饭</li><li>带老婆去按摩</li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 九月 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【软件推荐】屏蔽手机开屏广告</title>
      <link href="/95e7fe51.html"/>
      <url>/95e7fe51.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有时博客内容会有变动，首发博客是最新的，其他博客地址可能未同步，请认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="软件介绍"><a href="#软件介绍" class="headerlink" title="软件介绍"></a>软件介绍</h1><p>李跳跳APP是一款强大的手机软件弹窗广告跳过软件。通常我们使用的广告拦截软件是通过直接代理网络来过滤广告，但这种方法的过滤效果不好，有时过滤得太严重会导致软件无法使用甚至崩溃。而李跳跳APP通过模拟点击自动跳过一些APP软件的启动广告、弹窗广告和开屏广告。目前李跳跳APP评分超高，下载量也超过了很多同类型的软件。值得一提的是，李跳跳是由一个男开发者开发的，而李跳跳是一个女孩子。李跳跳APP完全没有任何广告，完全免费使用。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-15/151874160100200.png" title="李跳跳APP" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-15/151874160100200.png" alt="李跳跳APP"></a></p><p>李跳跳是一个用来跳过广告的APP。</p><p>【我的缺点】在少数系统上为了稳定性，会延长音量条的消失时间。<br>【很能跳】专注跳过广告，能跳过绝大多数APP的开屏广告和弹窗广告。<br>【能省电】每跳过一次广告，相当于节省2~3秒的电量。对于耗电快的手机来说，赶紧试试吧，别把电量浪费在看广告上。<br>【不收费】免费使用，没有任何套路。用收费的标准做免费的产品。<br>【速度快】能秒跳过绝大多数广告。<br>【稳定】运行极其稳定，无需反复开启无障碍权限。<br>【安全】无需联网，从源头上杜绝了隐私外泄的可能。<br>【极简】极简设计，傻瓜式操作，懒癌专属。<br>【良心】仅需一个权限。</p><p>这是目前我最满意的一个版本。即使我不是开发者，我也会感叹：这真的是一个不用花钱就能用的App吗？所以无论你现在使用的是哪个版本的李跳跳，请务必更新。如果你的亲朋好友也在使用李跳跳，请告诉他们也要更新。</p><p>更新内容：</p><ol><li>内置更多规则。</li><li>新增失效提醒。</li><li>新增导入导出规则。</li><li>新增规则生成器。</li><li>新增微信自动勾选原图。</li><li>新增QQ自动查看原图。</li><li>为每个功能都添加注解。</li><li>支持页面白名单。</li><li>支持模糊匹配、首尾匹配、全匹配。</li><li>支持联合规则。</li><li>支持坐标点击。</li><li>优化用户体验。</li><li>优化内存占用。</li><li>优化省电逻辑。</li><li>优化暗色模式。</li><li>优化安卓12系统下的体验。</li><li>修复少量BUG。</li><li>适配锁屏然后亮屏出现的广告。</li></ol><h1 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h1><p>点击 <a href="http://c.ua7.cn/2JNEyA">这里</a> 回复【24】下载</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件推荐 </tag>
            
            <tag> 屏蔽广告 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【日记】9月15日</title>
      <link href="/86c73c13.html"/>
      <url>/86c73c13.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0/">系列文章地址</a></p><hr><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 九月 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【日记】9月15日</title>
      <link href="/86c73c13.html"/>
      <url>/86c73c13.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有时候博客内容会有变动，首发博客是最新的，其他博客地址可能未同步，请认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0/">系列文章地址</a></p><hr><ol><li>今天早上送外甥女去上小学，她吃了半个烧麦。</li><li>晚上去娃仔便利店看宝宝。</li><li>今天断更一天哈。</li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p><h1 id="如果您喜欢我的内容，就点击关注吧-1"><a href="#如果您喜欢我的内容，就点击关注吧-1" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 九月 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】你了解String.intern方法吗</title>
      <link href="/9e2f8e16.html"/>
      <url>/9e2f8e16.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>是的，我了解String.intern方法。</p><p>String.intern方法是Java中的一个方法，它用于**将字符串对象添加到字符串常量池中，并返回常量池中该字符串的引用。如果常量池中已经存在该字符串，则直接返回常量池中的引用<br>**。</p><p>在Java中，字符串常量池是一块特殊的内存区域，用于存储字符串常量。当我们使用字面量创建字符串对象时，如果字符串常量池中已经存在相同内容的字符串，则直接返回常量池中的引用，而不会创建新的字符串对象。这样可以<br><strong>节省内存空间，并提高字符串比较的效率</strong>。</p><p>使用String.intern方法可以手动将字符串对象添加到字符串常量池中。如果字符串常量池中已经存在相同内容的字符串，则返回常量池中的引用；如果字符串常量池中不存在相同内容的字符串，则将该字符串添加到常量池中，并返回常量池中的引用。</p><p>下面是一个示例代码，演示了String.intern方法的使用：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">str3</span> <span class="operator">=</span> str1.intern();</span><br><span class="line"></span><br><span class="line">System.out.println(str1 == str2);  <span class="comment">// false</span></span><br><span class="line">System.out.println(str2 == str3);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>在上面的代码中，str1是通过new关键字创建的字符串对象，它在堆内存中分配空间。str2是使用字面量创建的字符串对象，它在字符串常量池中分配空间。str3是通过String.intern方法将str1添加到字符串常量池中得到的引用。</p><p>通过比较引用可以看出，str1和str2的引用不相同，因为它们分别指向堆内存和字符串常量池中的不同对象。而str2和str3的引用相同，因为它们都指向字符串常量池中的同一个对象。</p><p>需要注意的是，由于字符串常量池是在运行时创建的，因此在使用String.intern方法时需要谨慎使用，以避免过多的字符串对象被添加到常量池中，导致内存占用过大。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> String.intern方法 </tag>
            
            <tag> 字符串常量池 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【BUG】 [hexo-include-markdown] Could not open db.json</title>
      <link href="/b182e074.html"/>
      <url>/b182e074.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/RocketMq/">系列文章地址</a></p><hr><h1 id="报错内容"><a href="#报错内容" class="headerlink" title="报错内容"></a>报错内容</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-14/42294489533200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-14/42294489533200.png"></a></p><h1 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h1><p>没有db.json文件</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>在博客根目录新建一个db.json即可</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-14/42359008034900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-14/42359008034900.png"></a></p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> BUG </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【日记】9月13日</title>
      <link href="/a3ac63cf.html"/>
      <url>/a3ac63cf.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0/">系列文章地址</a></p><hr><ol><li>送外甥女上学，但是雨太大了，中途还忘记拿饭盒，所以迟到了7分钟</li><li>中午去修手机，取的时候没注意，下班后发现屏幕有问题找老板，老板不负责任，打110，一点用也没有，难受呀</li><li>之后去我姐家接外甥女，第二天要送她去上学，我姐没时间送孩子。路上去我姐工作的瑞幸咖啡，我姐请我喝了一杯咖啡。之后买了一份鸡排，一份火烧饼，就回家啦</li><li>博客写到零晨才结束，辛苦但是看到涨粉还是很有动力哒</li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 九月 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>非华为笔记本安装华为电脑管家</title>
      <link href="/9621200a.html"/>
      <url>/9621200a.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有时博客内容会有变动，首发博客是最新的，其他博客地址可能未同步，请认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="下载软件"><a href="#下载软件" class="headerlink" title="下载软件"></a>下载软件</h1><ol><li>启动软件：公众号回复【1023】获取下载链接</li><li>华为电脑管家下载地址：<a href="https://consumer.huawei.com/cn/support/pc-manager/">https://consumer.huawei.com/cn/support/pc-manager/</a></li></ol><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>解压启动软件，并将华为电脑管家放到同一目录下。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-13/4702192199300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-13/4702192199300.png"></a></p><p>双击 <code>huawei-pc-manager-bootstrap.exe</code> 启动安装器。注意，启动安装器后会请求管理员权限，因为华为电脑管家需要管理员权限。</p><p>打开安装器后，点击“自动扫描”按钮，安装器会查找所在目录的华为电脑管家安装包。如果找到安装包，会自动将安装包路径填写到上方的输入框中。如果未能自动找到安装包，应点击“浏览”选择安装包，或手动输入绝对路径。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-13/4780612721200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-13/4780612721200.png"></a></p><p>点击“安装”按钮，安装器将启动安装包程序。注意，在安装过程中，安装器会自动检测华为电脑管家的主程序是否已经安装完毕（即 <code>C:\Program Files\Huawei\PCManager\PCManager.exe</code><br>文件是否存在）。如果检测到该文件，则会自动释放补丁文件 <code>version.dll</code> 到该目录。</p><h1 id="验货"><a href="#验货" class="headerlink" title="验货"></a>验货</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-13/4890550696800.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-13/4890550696800.png"></a></p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 华为电脑管家 </tag>
            
            <tag> 安装教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>锐评</title>
      <link href="/rp.html"/>
      <url>/rp.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><ul><li>如果你对网络要求高，或者热点是强需求，那么不建议买Iphone6S，如果没有以上需求且对续航没要求的话，还是很建议d的，200块不卡，真香！</li><li>修手机还是要去正规手机店，最好是连锁店，小店技术差还贵，态度还不好。</li></ul><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexo中引入另一个文件内容</title>
      <link href="/8c341bf3.html"/>
      <url>/8c341bf3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-include-markdown --save</span><br></pre></td></tr></table></figure><h1 id="创建模板目录"><a href="#创建模板目录" class="headerlink" title="创建模板目录"></a>创建模板目录</h1><p>source&#x2F;_template</p><h1 id="创建模板"><a href="#创建模板" class="headerlink" title="创建模板"></a>创建模板</h1><p>source&#x2F;_template&#x2F;tj.md</p><h1 id="配置-config-yml"><a href="#配置-config-yml" class="headerlink" title="配置_config.yml"></a>配置_config.yml</h1><p>配置模板路径</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">include_markdown:</span></span><br><span class="line">  <span class="attr">dir:</span> <span class="string">source/_template</span>   <span class="comment"># Base directory of template markdown</span></span><br><span class="line">  <span class="attr">verbose :</span> <span class="literal">true</span>          <span class="comment"># If you want to check the path of markdown that use &lt;!-- md --&gt; tag , please set the true.</span></span><br></pre></td></tr></table></figure><p>配置不解析</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">skip_render:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;CNAME&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;_template/**&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;love/static/**&#x27;</span></span><br></pre></td></tr></table></figure><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;!--</span> <span class="string">md</span> <span class="string">tj.md</span> <span class="string">--&gt;</span></span><br></pre></td></tr></table></figure><p>这样就大工告成啦，你所看到的所有的下面的关注就是使用模板生成的哦！</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【深入解读Redis系列】（六）Redis中String的认知误区，详解String数据类型</title>
      <link href="/136d302c.html"/>
      <url>/136d302c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步，请认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/Redis/">系列文章地址</a></p><hr><h1 id="需求描述"><a href="#需求描述" class="headerlink" title="需求描述"></a>需求描述</h1><p>现在假设有这样一个需求，我们要开发一个图像存储系统。要求如下：</p><ol><li>该系统能快速记录图片的ID和图片保存在系统中的ID</li><li>能根据图片ID快速查找到图片存储对象ID</li></ol><p>这里我们用10位来存储图片ID和对象ID，比如下面这种：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">photo_id:</span> <span class="number">1101000051</span></span><br><span class="line"><span class="attr">photo_obj_id:</span> <span class="number">3301000051</span></span><br></pre></td></tr></table></figure><p>这里我们能分析出两个点：</p><ol><li>图片ID和图片对象ID是一一对应的，是典型的“键-单值”模式</li><li>String可以保存二进制字节流，只需要将流转成数组即可</li></ol><h1 id="方案一：使用String存储"><a href="#方案一：使用String存储" class="headerlink" title="方案一：使用String存储"></a>方案一：使用String存储</h1><p>这个方案是首先想到的，毕竟这个场景是非常契合String的。我们把图片ID和图片存储对象ID分别作为键值对的key和value来存储，其中，图片存储对象ID用String类型。</p><p>这里一亿张图片的数据量大概用了6.4G的内存。随着图片的增多，Redis使用的内存也在不断增加，这列就会遇到**大内存Redis因为生成RDB而响应变慢<br>**的问题。</p><p>为什么会变慢？</p><p>当Redis生成RDB文件时，会将内存中的数据写入到磁盘上，以便在Redis重启时可以从RDB文件中恢复数据。生成RDB文件的过程可能会导致Redis的响应变慢，特别是在处理大内存的情况下。</p><p>造成大内存Redis生成RDB而响应变慢的原因主要有以下几点：</p><ol><li><p><strong>内存写入磁盘的速度限制</strong>：磁盘的写入速度相对较慢，尤其是对于大内存的Redis来说，需要写入的数据量较大，可能会导致写入磁盘的速度无法满足Redis的写入速度，从而导致响应变慢。</p></li><li><p><strong>RDB生成过程的阻塞</strong>：在生成RDB文件的过程中，Redis会阻塞其他操作，以确保生成的RDB文件是一致的。这意味着在生成RDB文件期间，Redis无法处理其他的读写请求，从而导致响应变慢。</p></li></ol><p>所以这时候String 类型并不是一种好的选择，我们还需要进一步寻找能节省内存开销的数据类型方案。</p><h1 id="为什么String内存开销大？"><a href="#为什么String内存开销大？" class="headerlink" title="为什么String内存开销大？"></a>为什么String内存开销大？</h1><p>先说结论：<strong>String 类型并不是适用于所有场合的，它有一个明显的短板，就是它保存数据时所消耗的内存空间较多。</strong></p><p>我们回看一下，前面说过，1亿张图片信息，用了约6.4G内存。那么一张图片平均就是64字节，这里面包含了一个图片ID和一个图片对象ID。</p><p>实际上一张图片对应ID和对象ID只需要16字节就可以了，为什么却要64字节呢？</p><p>这里我们分析一下。图片 ID 和图片存储对象 ID 都是 10 位数，我们可以用两个 8 字节的 Long 类型表示这两个 ID。因为 8 字节的<br>Long 类型最大可以表示 2 的 64 次方的数值，所以肯定可以表示 10 位数。但是，为什么 String 类型却用了 64 字节呢？</p><p>在Redis中，String类型是一种二进制安全的数据结构，可以存储任意类型的数据，包括字符串、整数、浮点数等。Redis中的String类型并不是固定长度的，它的长度是根据存储的实际数据来动态调整的。</p><p>对于存储图片ID和图片存储对象ID这样的10位数，使用8字节的Long类型是足够的，因为Long类型可以表示的范围远远超过10位数。但是在Redis中，String类型的底层实现并不是简单地存储数据本身，而是包含了一些额外的信息。</p><p>在Redis中，每个String类型的值都包含一个头部(header)和一个数据体(body)。头部包含了一些元数据信息，如数据类型、长度等。而数据体则存储了实际的数据内容。</p><p>对于String类型的值，Redis为了能够高效地进行内存管理和数据操作，会在头部中存储一些额外的信息。这些额外的信息包括了数据的长度、引用计数、过期时间等。这些信息的存储需要一定的空间，因此会导致String类型的值占用的空间比实际数据的长度要大。</p><p>具体来说，Redis中的String类型的头部占用了39字节的空间，而数据体则占用了实际数据的长度。所以，对于一个10位数的数据，使用String类型存储时，实际占用的空间是39字节加上数据长度的总和。</p><p>需要注意的是，<strong>Redis的String类型的头部大小是固定的，不会随着数据的大小而变化</strong>。因此，**对于较小的数据，头部占用的空间相对较大<br>**，而对于较大的数据，头部占用的空间相对较小。</p><p>总结起来，虽然String类型的值在Redis中占用的空间比实际数据的长度要大，但这是为了支持Redis的高效内存管理和数据操作而设计的。对于较小的数据，这种额外的空间开销可能会比较大，但对于较大的数据，这种开销相对较小。</p><h1 id="具体String是如何保存数据的呢"><a href="#具体String是如何保存数据的呢" class="headerlink" title="具体String是如何保存数据的呢"></a>具体String是如何保存数据的呢</h1><p>Redis String是一种简单的键值对数据结构，它的值可以是字符串、整数或浮点数。在Redis中，String类型的数据是以字节数组的形式进行存储的。</p><p>具体来说，当我们向Redis中存储一个String类型的值时，Redis会将这个值以二进制的形式进行存储。Redis使用了一种称为简单动态字符串（Simple<br>Dynamic String，SDS）的数据结构来表示String类型的值。SDS是Redis自己实现的一种字符串表示方式，它比C语言中的字符串更加灵活和高效。</p><p>SDS的结构如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">struct sdshdr &#123;</span><br><span class="line">    int len;        // 字符串的长度 占 4 个字节，表示 buf 的已用长度。</span><br><span class="line">    int alloc;      // 分配的内存空间大小 也占个 4 字节，表示 buf 的实际分配长度，一般大于 len。</span><br><span class="line">    char buf[];     // 字符串的实际内容 字节数组，保存实际数据。为了表示字节数组的结束，Redis 会自动在数组最后加一个“\0”，这就会额外占用 1 个字节的开销。</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>其中，len表示字符串的长度，alloc表示分配的内存空间大小，buf是一个柔性数组，用来存储字符串的实际内容。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-13/2890524403200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-13/2890524403200.png"></a></p><p>当我们向Redis中存储一个String类型的值时，Redis会根据值的长度来分配一块合适大小的内存空间，并将值的内容复制到这块内存中。Redis会根据值的长度来设置len字段的值，并根据分配的内存空间大小来设置alloc字段的值。</p><p>当我们对SDS进行修改时，如果新的字符串长度小于等于alloc字段的值，那么可以直接在SDS中修改原有的字符串内容，而无需重新分配内存。只有当新的字符串长度大于alloc字段的值时，才需要重新分配内存。</p><p>当需要重新分配内存时，Redis会根据新字符串的长度计算出需要分配的内存大小，并将新字符串的内容复制到新分配的内存中。然后，Redis会更新SDS的len字段为新字符串的长度，更新alloc字段为新分配的内存大小。</p><p>需要注意的是，**SDS结构中的alloc字段表示的是分配的内存空间大小，而不是已使用的字节长度。这样设计的目的是为了提高字符串的修改效率，避免频繁的内存分配和释放操作<br>**。</p><p>在Redis中，String类型的值是以字节数组的形式进行存储的，所以<strong>它可以存储任意类型的数据</strong><br>。当我们需要读取String类型的值时，Redis会将存储的字节数组转换为对应的数据类型，并返回给我们。</p><p>需要注意的是，<strong>Redis的String类型是二进制安全的</strong><br>，也就是说它可以存储任意二进制数据，而不仅仅是文本字符串。这使得Redis的String类型非常灵活，可以用于存储各种类型的数据，例如序列化的对象、图片、音频等。</p><p>总结起来，Redis String类型的数据是以字节数组的形式进行存储的，使用了简单动态字符串（SDS）来表示。它可以存储任意类型的数据，并且支持高效的读写操作。</p><h1 id="对于-String-类型来说，除了-SDS-的额外开销，还有一个来自于-RedisObject-结构体的开销。"><a href="#对于-String-类型来说，除了-SDS-的额外开销，还有一个来自于-RedisObject-结构体的开销。" class="headerlink" title="对于 String 类型来说，除了 SDS 的额外开销，还有一个来自于 RedisObject 结构体的开销。"></a>对于 String 类型来说，除了 SDS 的额外开销，还有一个来自于 RedisObject 结构体的开销。</h1><p>因为 Redis 的数据类型有很多，而且，不同数据类型都有些相同的元数据要记录（比如最后一次访问的时间、被引用的次数等），所以，Redis<br>会用一个 RedisObject 结构体来统一记录这些元数据，同时指向实际数据。</p><p>RedisObject是Redis中通用的对象结构，用于表示不同类型的数据。对于String类型的数据，RedisObject结构体中包含了一个指向SDS结构体的指针，以及其他一些用于管理对象的字段，比如引用计数等。</p><p>具体的RedisObject结构如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">typedef struct redisObject &#123;</span><br><span class="line">    unsigned type:4;        // 对象类型</span><br><span class="line">    unsigned encoding:4;    // 对象编码方式</span><br><span class="line">    unsigned lru:LRU_BITS;  // LRU时间戳</span><br><span class="line">    int refcount;           // 引用计数</span><br><span class="line">    void *ptr;              // 指向实际数据的指针</span><br><span class="line">&#125; robj;</span><br></pre></td></tr></table></figure><p>在Redis中，每个String类型的值都会被封装成一个RedisObject对象。这个对象中的<code>ptr</code><br>字段指向实际的SDS结构体，而不是直接存储字符串的内容。这样设计的目的是为了支持不同编码方式的字符串，比如int、float等。</p><p>RedisObject结构体中的其他字段，比如<code>type</code>、<code>encoding</code>、<code>lru</code>和<code>refcount</code>等，用于管理对象的类型、编码方式、LRU时间戳和引用计数等信息。</p><p>因此，对于String类型的数据，在Redis中除了SDS结构本身的开销外，还需要考虑RedisObject结构体的开销。</p><p>一个 RedisObject 包含了 8 字节的元数据和一个 8 字节指针，这个指针再进一步指向具体数据类型的实际数据所在，例如指向 String<br>类型的 SDS 结构所在的内存地址，可以看一下下面的示意图。关于 RedisObject 的具体结构细节，我会在后面的课程中详细介绍，现在你只要了解它的基本结构和元数据开销就行了。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-13/3442954240200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-13/3442954240200.png"></a></p><p>Redis为了节省内存空间，在处理Long类型整数和SDS（Simple Dynamic String）时进行了专门的设计。</p><p>对于Long类型整数，RedisObject中的指针直接赋值为整数数据，而不需要额外的指针指向整数。这样可以节省指针的空间开销。</p><p>对于字符串数据，当字符串的长度小于等于44字节时，RedisObject中的元数据、指针和SDS是一块连续的内存区域。这种布局方式被称为embstr编码方式。这样可以避免内存碎片，提高内存利用率。</p><p>然而，当字符串的长度大于44字节时，SDS的数据量就开始变多了。为了避免内存浪费，Redis不再将SDS和RedisObject布局在一起，而是给SDS分配独立的空间，并使用指针指向SDS结构。这种布局方式被称为raw编码模式。</p><p>总结一下，Redis为了节省内存空间，对Long类型整数和SDS进行了特殊的内存布局设计。对于Long类型整数，直接将指针赋值为整数数据，避免了额外的指针开销。对于小于等于44字节的字符串，将元数据、指针和SDS布局在一起，避免了内存碎片。而对于大于44字节的字符串，将SDS分配独立的空间，并使用指针指向SDS结构，避免了内存浪费。</p><p>这种内存布局设计可以有效地节省内存空间，提高Redis的性能和效率。但需要注意的是，这种设计是基于对数据类型和数据长度的特定假设，如果数据类型或<br><strong>数据长度超出了设计的范围，可能会导致内存浪费或性能下降</strong>。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-13/3577895065500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-13/3577895065500.png"></a></p><h1 id="计算String类型内存消耗"><a href="#计算String类型内存消耗" class="headerlink" title="计算String类型内存消耗"></a>计算String类型内存消耗</h1><p>每个图片 ID 和图片存储对象 ID 都是 Long 类型整数，可以直接用 int 编码的 RedisObject 保存。每个 int 编码的 RedisObject<br>元数据部分占 8 字节，指针部分被直接赋值为 8 字节的整数。因此，每个 ID 使用了 16 字节。</p><p>然而，你提到还有另外的 32 字节，这些字节是用来保存 Redis 的全局哈希表中的键值对的。Redis 使用一个全局哈希表来保存所有的键值对，每个键值对由一个<br>dictEntry 结构体表示。dictEntry 结构体包含三个 8 字节的指针，分别指向 key、value 和下一个 dictEntry，共占用 24 字节。</p><p>这意味着，每个键值对在全局哈希表中占用了 24 字节的空间。因此，对于每个 ID，除了使用的 16 字节外，还需要额外的 24 字节来保存键值对的指针。</p><p>综上所述，每个 ID 使用了 16 字节来保存自身的值，另外还需要额外的 24 字节来保存键值对的指针，总共占用了 40 字节的空间。</p><p>这三个指针只有 24 字节，为什么会占用了 32 字节呢？这就要提到 Redis 使用的内存分配库 jemalloc 了。</p><p>jemalloc是一种内存分配器，它会对申请的内存进行对齐，以提高内存的使用效率。</p><p>当申请的空间大小不是 8 字节的倍数时，jemalloc 会将申请的空间大小向上对齐到 8 字节的倍数。这是为了提高内存的读写效率，因为现代计算机的内存读写操作通常是以<br>8 字节为单位的。</p><p>在这个场景中，dictEntry 结构占用了 24 字节的空间，不是 32 字节。这是因为 jemalloc 对申请的内存进行了对齐，使得 dictEntry<br>结构的起始地址对齐到 8 字节的边界。</p><p>因此，当使用 String 类型保存图片 ID 和图片存储对象 ID 时，需要使用 40 个字节。这是因为图片 ID 和图片存储对象 ID 的总长度为<br>16 字节，而 jemalloc 会按照对齐的原则，将内存地址对齐到 8 字节的边界。</p><p>需要注意的是，这个例子中的对齐规则是 jemalloc<br>的默认行为，不同的内存分配器可能有不同的对齐规则。此外，对齐规则也可能受到编译器和操作系统的影响。因此，在实际开发中，需要根据具体的情况来确定内存对齐的需求。</p><p>明明有效信息只有 16 字节，使用 String 类型保存时，却需要 40 字节的内存空间，有 24 字节都没有用于保存实际的数据。我们来换算下，如果要保存的图片有<br>1 亿张，那么 1 亿条的图片 ID 记录就需要 1.6GB 内存空间，其中有 2.4GB 的内存空间都用来保存元数据了，额外的内存空间开销很大。那么，有没有更加节省内存的方法呢？</p><h1 id="方案二：压缩列表"><a href="#方案二：压缩列表" class="headerlink" title="方案二：压缩列表"></a>方案二：压缩列表</h1><p>压缩列表（ziplist）是 Redis 中一种用于存储较小的列表和哈希表的数据结构。它是一种紧凑的、连续存储的数据结构，可以在内存中节省空间。</p><p>压缩列表是 Redis 中用于存储列表和哈希表等数据结构的一种紧凑存储结构。每个 entry 表示一个元素，可以是字符串、整数或者其他类型的数据。</p><ol><li><p>prev_len：前一个 entry 的长度。它有两种取值情况：1 字节或 5 字节。如果前一个 entry 的长度小于 254 字节，则 prev_len 取值为<br>1 字节；否则，取值为 5 字节。这是为了节省存储空间，因为 1 字节的值能表示的数值范围是 0 到 255，而压缩列表中 zlend 的取值默认是<br>255，所以不能再用 255 表示长度大于 254 字节的情况。</p></li><li><p>len：当前 entry 的长度，占用 4 字节。它表示当前 entry 的实际长度，包括 encoding 和 content。</p></li><li><p>encoding：当前 entry 的编码方式，占用 1 字节。它表示当前 entry 存储的数据的类型和编码方式。不同的编码方式对应不同的数据类型，比如字符串、整数等。</p></li><li><p>content：当前 entry 的实际数据。它保存了当前 entry 存储的具体内容，根据 encoding 的不同，可以是字符串、整数等。</p></li></ol><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-14/4240827732099.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-14/4240827732099.png"></a></p><p>需要注意的是，这只是压缩列表中每个 entry 的结构，压缩列表本身还有其他的元数据信息，比如 zlbytes（压缩列表的总字节数）、zltail（尾部<br>entry 的偏移量）等。这些信息一起构成了完整的压缩列表数据结构。</p><p>压缩列表的节点是紧密排列的，<strong>没有额外的指针和元数据</strong>，这使得它在内存中占用的空间更小。同时，由于<strong>节点是连续存储的</strong><br>，可以通过偏移量来快速访问节点，而不需要像链表那样遍历整个数据结构。</p><p>压缩列表的构成可以根据存储的数据类型进行灵活调整。例如，如果列表中的所有元素都是整数，那么可以使用整数编码来存储数据，这样可以进一步减少存储空间。压缩列表还支持变长编码，可以根据数据的大小动态选择编码方式，以提高存储效率。</p><p>需要注意的是，压缩列表适用于存储较小的列表和哈希表，当数据量较大时，性能可能会受到影响。在 Redis<br>中，当列表或哈希表的长度超过一定阈值时，会自动将压缩列表转换为普通的链表或哈希表，以提高性能。</p><h1 id="压缩列表占用空间大小"><a href="#压缩列表占用空间大小" class="headerlink" title="压缩列表占用空间大小"></a>压缩列表占用空间大小</h1><p>我们以保存图片存储对象 ID 为例，来分析一下压缩列表是如何节省内存空间的。</p><p>每个 entry 保存一个图片存储对象 ID（8 字节），并且每个 entry 的 prev_len 只需要 1 个字节。这样一来，一个图片的存储对象 ID<br>所占用的内存大小是 14 字节（1+4+1+8&#x3D;14），实际分配 16 字节。</p><p>这里的 1 个字节用于保存 prev_len，4 个字节用于保存 entry 的长度，1 个字节用于对齐，8 个字节用于保存图片存储对象 ID。</p><p>在计算内存大小时，需要考虑对齐的问题。对齐是为了提高内存访问的效率，因为现代计算机的内存访问通常是按照字节对齐的方式进行的。对齐的规则通常是按照数据类型的大小进行对齐，比如<br>1 字节对齐、2 字节对齐、4 字节对齐等。</p><p>每个 entry 的长度为 8 字节，所以按照 4 字节对齐的规则，需要补齐到 8 字节。因此，实际分配的内存大小为 16 字节。</p><h1 id="总结下压缩列表"><a href="#总结下压缩列表" class="headerlink" title="总结下压缩列表"></a>总结下压缩列表</h1><p>压缩列表是一种特殊的数据结构，它将多个元素紧密地存储在一起，以节省内存。在 Redis 中，压缩列表被用于存储较小的集合类型，例如<br>List、Hash 和 Sorted Set。</p><p>压缩列表中的每个元素都由一个或多个字节组成，其中包含元素的长度和实际的元素值。元素的长度可以是 1 字节、5 字节或 9<br>字节，具体取决于元素的长度。</p><p>使用压缩列表实现集合类型的好处是节省了每个元素的开销，因为它们共享同一个 dictEntry。在使用 String 类型时，每个键值对都需要一个<br>dictEntry，占用 32 字节的空间。但是，使用集合类型时，一个键只需要一个 dictEntry，而可以保存多个元素，这样就节省了内存。</p><p>然而，压缩列表也有一些限制和缺点：</p><ul><li>压缩列表只适用于较小的集合类型，因为随着元素数量的增加，压缩列表的性能会下降。当集合类型的元素数量超过一定阈值时，Redis<br>会自动将其转换为更适合大型集合的数据结构。</li><li>压缩列表不支持快速的随机访问，因为要找到一个元素，需要遍历整个压缩列表。这对于需要频繁的随机访问的场景可能会影响性能。</li></ul><p>Redis 使用压缩列表实现集合类型是为了节省内存空间，但在处理大型集合和需要快速随机访问的场景下可能会有性能问题。在实际使用中，需要根据具体的需求和数据规模来选择合适的数据结构。</p><h1 id="如何用集合类型保存单值的键值对？"><a href="#如何用集合类型保存单值的键值对？" class="headerlink" title="如何用集合类型保存单值的键值对？"></a>如何用集合类型保存单值的键值对？</h1><p>在保存单值的键值对时，可以采用基于 Hash 类型的二级编码方法。这里说的二级编码，就是把一个单值的数据拆分成两部分，前一部分作为<br>Hash 集合的 key，后一部分作为 Hash 集合的 value，这样一来，我们就可以把单值数据保存到 Hash 集合中了。</p><p>以图片 ID 1101000060 和图片存储对象 ID 3302000080 为例，我们可以把图片 ID 的前 7 位（1101000）作为 Hash 类型的键，把图片 ID<br>的最后 3 位（060）和图片存储对象 ID 分别作为 Hash 类型值中的 key 和 value。</p><p>按照这种设计方法，我在 Redis 中插入了一组图片 ID 及其存储对象 ID 的记录，并且用 info 命令查看了内存开销，我发现，增加一条记录后，内存占用只增加了<br>16 字节，如下所示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; info memory</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Memory</span></span><br><span class="line">used_memory:1039120</span><br><span class="line">127.0.0.1:6379&gt; hset 1101000 060 3302000080</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; info memory</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Memory</span></span><br><span class="line">used_memory:1039136</span><br></pre></td></tr></table></figure><p>在使用 String 类型时，每个记录需要消耗 64 字节，这种方式却只用了 16 字节，所使用的内存空间是原来的 1&#x2F;4，满足了我们节省内存空间的需求。</p><p>之前我们介绍过，Redis Hash 类型的两种底层实现结构，分别是压缩列表和哈希表。</p><h1 id="Hash-类型底层结构什么时候使用压缩列表，什么时候使用哈希表呢？"><a href="#Hash-类型底层结构什么时候使用压缩列表，什么时候使用哈希表呢？" class="headerlink" title="Hash 类型底层结构什么时候使用压缩列表，什么时候使用哈希表呢？"></a>Hash 类型底层结构什么时候使用压缩列表，什么时候使用哈希表呢？</h1><p>在 Redis 中，Hash 类型可以使用压缩列表（ziplist）或哈希表（hashtable）来保存数据。压缩列表是一种紧凑的数据结构，可以节省内存空间。但是，当<br>Hash 集合中的元素个数超过了 <code>hash-max-ziplist-entries</code> 的阈值，或者单个元素的大小超过了 <code>hash-max-ziplist-value</code><br>的阈值时，Redis 会自动将 Hash 类型的实现结构从压缩列表转换为哈希表。</p><p><code>hash-max-ziplist-entries</code> 表示压缩列表保存时 Hash 集合中的最大元素个数，而 <code>hash-max-ziplist-value</code> 表示压缩列表保存时<br>Hash 集合中单个元素的最大长度。一旦超过了这两个阈值，Redis 会将 Hash 类型转换为哈希表，以保证数据的完整性。</p><p>转换为哈希表后，Hash 类型将一直使用哈希表来保存数据，不会再转回压缩列表。相比压缩列表，哈希表在节省内存空间方面效率较低。</p><p>为了充分利用压缩列表的内存优势，我们通常需要控制 Hash 集合中保存的元素个数。在上述例子中，我们将图片 ID 的最后 3 位作为<br>Hash 集合的 key，以确保 Hash 集合的元素个数不超过 1000。同时，我们将 <code>hash-max-ziplist-entries</code> 设置为 1000，这样 Hash<br>集合就可以一直使用压缩列表来节省内存空间。</p><p>总结起来，通过合理设置 <code>hash-max-ziplist-entries</code> 和 <code>hash-max-ziplist-value</code>，我们可以在保证数据完整性的前提下，充分利用压缩列表的内存优势，从而提高<br>Redis 的性能和效率。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 深入理解Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> String </tag>
            
            <tag> 内存开销 </tag>
            
            <tag> 压缩列表 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】JVM中有哪些垃圾收集器</title>
      <link href="/c7625109.html"/>
      <url>/c7625109.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有时博客内容会有变动，首发博客是最新的，其他博客地址可能未同步，请认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>在Java虚拟机（JVM）中，有以下几种常见的垃圾收集器：</p><ol><li><p><strong>Serial收集器</strong>：Serial收集器是最基本的垃圾收集器，它使用单线程进行垃圾收集。它采用”标记-复制”<br>算法，将堆内存分为年轻代和老年代，通过复制存活对象来进行垃圾回收。Serial收集器适用于单线程环境和小型应用程序。</p></li><li><p><strong>Parallel收集器</strong>：Parallel收集器是Serial收集器的多线程版本，它使用多个线程并行进行垃圾收集。它也采用”标记-复制”<br>算法，但相比于Serial收集器，Parallel收集器能够更快地完成垃圾回收。Parallel收集器适用于多核处理器和需要高吞吐量的应用程序。</p></li><li><p><strong>CMS收集器</strong>：CMS（Concurrent Mark Sweep）收集器是一种并发的垃圾收集器，它使用”标记-清除”<br>算法来进行垃圾回收。CMS收集器通过并发标记和并发清除的方式，减少了垃圾收集导致的停顿时间。它适用于需要低延迟的应用程序。</p></li><li><p><strong>G1收集器</strong><br>：G1（Garbage-First）收集器是一种面向大堆内存的垃圾收集器，它使用了分代收集和区域化内存布局的方式。G1收集器通过并发标记和并发清除的方式，以及优先回收垃圾最多的区域，来实现低延迟和高吞吐量的垃圾回收。它适用于大型应用程序和需要可预测停顿时间的应用程序。</p></li><li><p><strong>ZGC收集器</strong><br>：ZGC收集器是一种低延迟的垃圾收集器，它的目标是在不超过10毫秒的停顿时间内，尽可能地回收大堆内存。ZGC收集器使用了一种称为”<br>Region”的内存布局，将堆内存划分为多个大小相等的区域。它通过并发标记和并发清除的方式，以及读屏障和写屏障来跟踪对象的引用关系。ZGC收集器适用于需要快速响应和高吞吐量的应用程序。</p></li><li><p><strong>Shenandoah收集器</strong><br>：Shenandoah收集器是一种并发的垃圾收集器，它的目标是在不超过10毫秒的停顿时间内，尽可能地回收大堆内存。Shenandoah收集器使用了一种称为”<br>Remembered Set”的数据结构来跟踪对象的引用关系。它通过并发标记和并发清除的方式，以及读屏障和写屏障来保证垃圾收集器和应用程序的并发执行。Shenandoah收集器适用于需要快速响应和高并发的应用程序。</p></li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JVM </tag>
            
            <tag> 垃圾收集器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】你知道MySQL中有哪些隔离级别吗</title>
      <link href="/14595062.html"/>
      <url>/14595062.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有时博客内容会有变动，首发博客是最新的，其他博客地址可能未同步，请认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>脏读（Dirty Read）是指一个事务读取到了另一个未提交事务的数据。假设事务A修改了某个数据，但还未提交，事务B读取到了这个未提交的数据，然后事务A回滚了，导致事务B读取到的数据是无效的或不一致的。脏读可能会导致数据的不一致性。</p><p>幻读（Phantom<br>Read）是指一个事务在两次查询之间，另一个事务插入了新的数据，导致第一个事务的两次查询结果不一致。假设事务A在查询某个范围内的数据时，事务B插入了一条符合该范围的新数据，然后事务A再次查询时，会发现多了一条数据，就像出现了幻觉一样。幻读可能会导致查询结果的不一致性。</p><p>不可重复读（Non-repeatable<br>Read）是指一个事务在多次读取同一数据时，由于其他事务的修改，导致读取到的数据不一致。假设事务A在读取某个数据后，事务B修改了该数据并提交，然后事务A再次读取该数据时，发现数据已经发生了变化。不可重复读可能会导致读取到的数据的不一致性。</p><p>MySQL通过设置隔离级别来解决脏读、幻读和不可重复读的问题。隔离级别定义了一个事务对其他事务的可见性和影响范围。</p><p>MySQL提供了四个隔离级别：</p><ol><li><p><strong>读未提交（Read Uncommitted）</strong>：最低级别，事务可以读取到其他事务未提交的数据，可能导致脏读、幻读和不可重复读问题。</p></li><li><p><strong>读已提交（Read Committed）</strong>：事务只能读取到其他事务已经提交的数据，可以避免脏读问题，但仍可能出现幻读和不可重复读问题。</p></li><li><p><strong>可重复读（Repeatable Read）</strong>：事务在同一个查询中多次读取同一数据时，保证读取到的数据一致，避免了不可重复读问题。但仍可能出现幻读问题。</p></li><li><p><strong>串行化（Serializable）</strong>：最高级别，事务按顺序执行，避免了脏读、幻读和不可重复读问题。但会导致并发性能下降，因为事务需要串行执行。</p></li></ol><p>通过设置合适的隔离级别，可以根据具体的业务需求来解决脏读、幻读和不可重复读问题。在MySQL中，可以使用以下语句设置隔离级别：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> TRANSACTION ISOLATION LEVEL <span class="operator">&lt;</span>隔离级别<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><p>其中，<code>&lt;隔离级别&gt;</code>可以是<code>READ UNCOMMITTED</code>、<code>READ COMMITTED</code>、<code>REPEATABLE READ</code>或<code>SERIALIZABLE</code>。</p><h1 id="如果您喜欢我的内容，请点击关注"><a href="#如果您喜欢我的内容，请点击关注" class="headerlink" title="如果您喜欢我的内容，请点击关注"></a>如果您喜欢我的内容，请点击关注</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/123545407559600.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/123545407559600.png"></a></p><blockquote><p>公众号</p></blockquote><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/132424106168700.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/132424106168700.jpg"></a></p><blockquote><p>个人微信</p></blockquote><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/132126553740700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/132126553740700.png"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> 隔离级别 </tag>
            
            <tag> 脏读 </tag>
            
            <tag> 幻读 </tag>
            
            <tag> 不可重复读 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>给Hexo博客文章加密</title>
      <link href="/3daa39a3.html"/>
      <url>/3daa39a3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://github.com/D0n9X1n/hexo-blog-encrypt/blob/master/ReadMe.zh.md">原文地址</a></p><hr><p><a href="https://camo.githubusercontent.com/4c8a21d79549bd286f0c7af483cbaf26dbff75cf2c8980425a140ed03b3a11d7/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f44306e3978316e2f6865786f2d626c6f672d656e63727970743f696e636c7564655f70726572656c6561736573"><a href="https://camo.githubusercontent.com/4c8a21d79549bd286f0c7af483cbaf26dbff75cf2c8980425a140ed03b3a11d7/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f44306e3978316e2f6865786f2d626c6f672d656e63727970743f696e636c7564655f70726572656c6561736573" class="gallery-item"><img src="https://camo.githubusercontent.com/4c8a21d79549bd286f0c7af483cbaf26dbff75cf2c8980425a140ed03b3a11d7/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f44306e3978316e2f6865786f2d626c6f672d656e63727970743f696e636c7564655f70726572656c6561736573"></a></a> <a href="https://scrutinizer-ci.com/g/MikeCoder/hexo-blog-encrypt/build-status/master"><a href="https://camo.githubusercontent.com/12cc98c584556b4066c090bf0b76c1ec3f85280a769a439f91e02d2fb46bf998/68747470733a2f2f7363727574696e697a65722d63692e636f6d2f672f4d696b65436f6465722f6865786f2d626c6f672d656e63727970742f6261646765732f6275696c642e706e673f623d6d6173746572" class="gallery-item"><img src="https://camo.githubusercontent.com/12cc98c584556b4066c090bf0b76c1ec3f85280a769a439f91e02d2fb46bf998/68747470733a2f2f7363727574696e697a65722d63692e636f6d2f672f4d696b65436f6465722f6865786f2d626c6f672d656e63727970742f6261646765732f6275696c642e706e673f623d6d6173746572"></a></a> <a href="https://scrutinizer-ci.com/g/MikeCoder/hexo-blog-encrypt/?branch=master"><a href="https://camo.githubusercontent.com/0fbf816e21dae1843b246aa5a3c9e81195973e71e0ab0649a501c3bfcef233e4/68747470733a2f2f7363727574696e697a65722d63692e636f6d2f672f4d696b65436f6465722f6865786f2d626c6f672d656e63727970742f6261646765732f7175616c6974792d73636f72652e706e673f623d6d6173746572" class="gallery-item"><img src="https://camo.githubusercontent.com/0fbf816e21dae1843b246aa5a3c9e81195973e71e0ab0649a501c3bfcef233e4/68747470733a2f2f7363727574696e697a65722d63692e636f6d2f672f4d696b65436f6465722f6865786f2d626c6f672d656e63727970742f6261646765732f7175616c6974792d73636f72652e706e673f623d6d6173746572"></a></a></p><h4 id="提-issue-之前，请务必提供复现方式，log，配置信息等必要信息。良好的-issue-可以节省双方的时间。"><a href="#提-issue-之前，请务必提供复现方式，log，配置信息等必要信息。良好的-issue-可以节省双方的时间。" class="headerlink" title="提 issue 之前，请务必提供复现方式，log，配置信息等必要信息。良好的 issue 可以节省双方的时间。"></a>提 issue 之前，请务必提供复现方式，log，配置信息等必要信息。良好的 issue 可以节省双方的时间。</h4><p><em>请严格按照模版要求，不明确的 issue 将直接关闭。</em></p><p><strong>参考 issue:</strong></p><blockquote><ul><li><a href="https://github.com/MikeCoder/hexo-blog-encrypt/issues/83">Issue 83</a></li><li><a href="https://github.com/MikeCoder/hexo-blog-encrypt/issues/68">Issue 68</a></li></ul></blockquote><h2 id="这是个啥"><a href="#这是个啥" class="headerlink" title="这是个啥"></a>这是个啥</h2><ul><li><p><del>首先, 这是 Hexo 生态圈中 <strong>最好的</strong> 博客加密插件</del></p></li><li><p>你可能需要写一些私密的博客, 通过密码验证的方式让人不能随意浏览.</p></li><li><p>这在 wordpress, emlog 或是其他博客系统中都很容易实现, 然而 hexo 除外. :(</p></li><li><p>为了解决这个问题, 让我们有请 “hexo-blog-encrypt”.</p></li></ul><h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul><li><p>一旦你输入了正确的密码, 它将会被存储在本地浏览器的 localStorage中. 按个按钮, 密码将会被清空. 若博客中有脚本,<br>它将会被正确地执行.</p></li><li><p>支持按标签加密.</p></li><li><p>所有的核心功能都是由原生的 API 所提供的. 在 Node.js中,<br>我们使用 <a href="https://nodejs.org/dist/latest-v12.x/docs/api/crypto.html">Crypto</a>. 在浏览器中,<br>我们使用 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API">Web Crypto API</a>.</p></li><li><p><a href="https://tools.ietf.org/html/rfc2898">PBKDF2</a>, <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf">SHA256</a><br>被用于分发密钥, <a href="https://csrc.nist.gov/publications/detail/sp/800-38a/final">AES256-CBC</a> 被用于加解密,<br>我们还使用 <a href="https://csrc.nist.gov/csrc/media/publications/fips/198/1/final/documents/fips-198-1_final.pdf">HMAC</a><br>来验证密文的来源, 并确保其未被篡改.</p></li><li><p>我们广泛地使用 Promise 来进行异步操作, 以此确保线程不被阻塞.</p></li><li><p>加密页面多主题支持, 现在已经支持的主题有 [<code>default</code>, <code>xray</code>], 更多的主题正在开发中.</p></li><li><p>过时的浏览器将不能正常显示, 因此, 请升级您的浏览器.</p></li></ul><h2 id="在线演示"><a href="#在线演示" class="headerlink" title="在线演示"></a>在线演示</h2><ul><li>点击 <a href="https://mhexo.github.io/">Demo Page</a>, <strong>所有的密码都是 <code>hello</code></strong>.</li></ul><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul><li><p><code>npm install --save hexo-blog-encrypt</code></p></li><li><p>或 <code>yarn add hexo-blog-encrypt</code> (需要) <a href="https://yarnpkg.com/en/">Yarn</a>)</p></li></ul><h2 id="快速使用"><a href="#快速使用" class="headerlink" title="快速使用"></a>快速使用</h2><ul><li>将 “password” 字段添加到您文章信息头就像这样.</li></ul><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line">date: 2016-03-30 21:18:02</span><br><span class="line"><span class="section">password: hello</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>再使用 <code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code> 在本地预览加密的文章.</li></ul><h2 id="设置优先级"><a href="#设置优先级" class="headerlink" title="设置优先级"></a>设置优先级</h2><p>文章信息头 &gt; 按标签加密</p><h2 id="高级设置"><a href="#高级设置" class="headerlink" title="高级设置"></a>高级设置</h2><h3 id="文章信息头"><a href="#文章信息头" class="headerlink" title="文章信息头"></a>文章信息头</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">-</span> 作为日记加密</span><br><span class="line">date: 2016-03-30 21:12:21</span><br><span class="line">password: mikemessi</span><br><span class="line">abstract: 有东西被加密了, 请输入密码查看.</span><br><span class="line">message: 您好, 这里需要密码.</span><br><span class="line">wrong<span class="emphasis">_pass_</span>message: 抱歉, 这个密码看着不太对, 请再试试.</span><br><span class="line"><span class="section">wrong<span class="emphasis">_hash_</span>message: 抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="config-yml"><a href="#config-yml" class="headerlink" title="_config.yml"></a><code>_config.yml</code></h3><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Security</span></span><br><span class="line"><span class="attr">encrypt:</span> <span class="comment"># hexo-blog-encrypt</span></span><br><span class="line">  <span class="attr">abstract:</span> <span class="string">有东西被加密了,</span> <span class="string">请输入密码查看.</span></span><br><span class="line">  <span class="attr">message:</span> <span class="string">您好,</span> <span class="string">这里需要密码.</span></span><br><span class="line">  <span class="attr">tags:</span></span><br><span class="line">    <span class="bullet">-</span> &#123; <span class="attr">name:</span> <span class="string">tagName</span>, <span class="attr">password:</span> <span class="string">密码A</span> &#125;</span><br><span class="line">    <span class="bullet">-</span> &#123; <span class="attr">name:</span> <span class="string">tagName</span>, <span class="attr">password:</span> <span class="string">密码B</span> &#125;</span><br><span class="line">  <span class="attr">wrong_pass_message:</span> <span class="string">抱歉,</span> <span class="string">这个密码看着不太对,</span> <span class="string">请再试试.</span></span><br><span class="line">  <span class="attr">wrong_hash_message:</span> <span class="string">抱歉,</span> <span class="string">这个文章不能被校验,</span> <span class="string">不过您还是能看看解密后的内容.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="对博文禁用-Tag-加密"><a href="#对博文禁用-Tag-加密" class="headerlink" title="对博文禁用 Tag 加密"></a>对博文禁用 Tag 加密</h4><p>只需要将博文头部的 <code>password</code> 设置为 <code>&quot;&quot;</code> 即可取消 Tag 加密.</p><p>Example:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Callback Test</span><br><span class="line">date: 2019-12-21 11:54:07</span><br><span class="line">tags:</span><br><span class="line">    - A Tag should be encrypted</span><br><span class="line">password: &quot;&quot;</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">Use a &quot;&quot; to diable tag encryption. </span><br></pre></td></tr></table></figure><h3 id="配置优先级"><a href="#配置优先级" class="headerlink" title="配置优先级"></a>配置优先级</h3><p>文章信息头 &gt; <code>_config.yml</code> (站点根目录下的) &gt; 默认配置</p><h3 id="关于-Callback-函数"><a href="#关于-Callback-函数" class="headerlink" title="关于 Callback 函数"></a>关于 Callback 函数</h3><p>在部分博客中, 解密后部分元素可能无法正常显示或者表现, 这属于已知问题. 目前的解决办法是通过自行查阅自己的博客中的代码,<br>了解到在 onload 事件发生时调用了哪些函数, 并将这些函数挑选后写入到博客内容中. 如:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Callback Test</span><br><span class="line">date: 2019-12-21 11:54:07</span><br><span class="line">tags:</span><br><span class="line">    - Encrypted</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">This is a blog to test Callback functions. You just need to add code at the last of your post like following:</span><br><span class="line"></span><br><span class="line">It will be called after the blog decrypted.</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // 添加一个 script tag 与代码在文章末尾.</span><br><span class="line">    alert(&quot;Hello World&quot;);</span><br><span class="line">&lt;/script&gt; </span><br></pre></td></tr></table></figure><p>例子在: <a href="https://mhexo.github.io/2020/12/06/Callback-Test/">Callback 例子</a>.</p><h3 id="解密后的触发事件"><a href="#解密后的触发事件" class="headerlink" title="解密后的触发事件"></a>解密后的触发事件</h3><p>感谢 @<a href="https://github.com/f-dong">f-dong</a>, 我们现在会在解密完成后触发一个 <code>hexo-blog-decrypt</code> 事件, 你们可以编写<br>callback 来监听该事件.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// trigger event</span><br><span class="line">var event = new Event(&#x27;hexo-blog-decrypt&#x27;);</span><br><span class="line">window.dispatchEvent(event); </span><br></pre></td></tr></table></figure><h3 id="对-TOC-进行加密"><a href="#对-TOC-进行加密" class="headerlink" title="对 TOC 进行加密"></a>对 TOC 进行加密</h3><p>如果你有一篇文章使用了 TOC，你需要修改模板的部分代码。这里用 landscape 作为例子：</p><ul><li>你可以在 hexo&#x2F;themes&#x2F;landscape&#x2F;layout&#x2F;_partial&#x2F;article.ejs 找到 article.ejs。</li><li>然后找到 &lt;% post.content %&gt; 这段代码，通常在30行左右。</li><li>使用如下的代码来替代它:</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if(post.toc == true)&#123; %&gt;</span><br><span class="line">  &lt;div id=&quot;toc-div&quot; class=&quot;toc-article&quot; &lt;% if (post.encrypt == true) &#123; %&gt;style=&quot;display:none&quot; &lt;% &#125; %&gt;&gt;</span><br><span class="line">    &lt;strong class=&quot;toc-title&quot;&gt;Index&lt;/strong&gt;</span><br><span class="line">      &lt;% if (post.encrypt == true) &#123; %&gt;</span><br><span class="line">        &lt;%- toc(post.origin, &#123;list_number: true&#125;) %&gt;</span><br><span class="line">      &lt;% &#125; else &#123; %&gt;</span><br><span class="line">        &lt;%- toc(post.content, &#123;list_number: true&#125;) %&gt;</span><br><span class="line">      &lt;% &#125; %&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line">&lt;%- post.content %&gt; </span><br></pre></td></tr></table></figure><h3 id="禁用-Log"><a href="#禁用-Log" class="headerlink" title="禁用 Log"></a>禁用 Log</h3><p>If you want to disable the logging, you can add a silent property in <code>_config.yml</code> and set it to true. 如果你想要禁止使用<br>Log, 你可以在 <code>_config.yml</code> 中增加一个 silent 属性, 并将其设置为 true.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Security</span></span><br><span class="line"><span class="attr">encrypt:</span> <span class="comment"># hexo-blog-encrypt</span></span><br><span class="line">  <span class="attr">silent:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>这样就会禁止如 <code>INFO hexo-blog-encrypt: encrypting &quot;&#123;Blog Name&#125;&quot; based on Tag: &quot;EncryptedTag&quot;.</code> 的日志.</p><h3 id="加密主题"><a href="#加密主题" class="headerlink" title="加密主题"></a>加密主题</h3><p>之前, 我们尝试使用 <code>template</code> 关键字来让用户能修改自己的主题. 后来发现真不是一个好主意. 所以我们现在引入了主题: <code>theme</code><br>关键字.</p><p>你可以简单的使用 <code>theme</code> 在 <code>_config.yml</code> 里或者文章头, 如下:</p><h3 id="文章信息头-1"><a href="#文章信息头-1" class="headerlink" title="文章信息头"></a>文章信息头</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">-</span> 作为日记加密</span><br><span class="line">date: 2016-03-30 21:12:21</span><br><span class="line">password: mikemessi</span><br><span class="line">abstract: 有东西被加密了, 请输入密码查看.</span><br><span class="line">message: 您好, 这里需要密码.</span><br><span class="line">theme: xray</span><br><span class="line">wrong<span class="emphasis">_pass_</span>message: 抱歉, 这个密码看着不太对, 请再试试.</span><br><span class="line"><span class="section">wrong<span class="emphasis">_hash_</span>message: 抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="在-config-yml"><a href="#在-config-yml" class="headerlink" title="在 _config.yml"></a>在 <code>_config.yml</code></h3><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Security</span></span><br><span class="line"><span class="attr">encrypt:</span> <span class="comment"># hexo-blog-encrypt</span></span><br><span class="line">  <span class="attr">abstract:</span> <span class="string">有东西被加密了,</span> <span class="string">请输入密码查看.</span></span><br><span class="line">  <span class="attr">message:</span> <span class="string">您好,</span> <span class="string">这里需要密码.</span></span><br><span class="line">  <span class="attr">tags:</span></span><br><span class="line">    <span class="bullet">-</span> &#123; <span class="attr">name:</span> <span class="string">tagName</span>, <span class="attr">password:</span> <span class="string">密码A</span> &#125;</span><br><span class="line">    <span class="bullet">-</span> &#123; <span class="attr">name:</span> <span class="string">tagName</span>, <span class="attr">password:</span> <span class="string">密码B</span> &#125;</span><br><span class="line">  <span class="attr">theme:</span> <span class="string">xray</span></span><br><span class="line">  <span class="attr">wrong_pass_message:</span> <span class="string">抱歉,</span> <span class="string">这个密码看着不太对,</span> <span class="string">请再试试.</span></span><br><span class="line">  <span class="attr">wrong_hash_message:</span> <span class="string">抱歉,</span> <span class="string">这个文章不能被校验,</span> <span class="string">不过您还是能看看解密后的内容.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>你可以在线挑选你喜欢的主题,并应用到你的博客中:</p><ul><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Default/">default</a></li><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Blink/">blink</a></li><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Shrink/">shrink</a></li><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Flip/">flip</a></li><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Up/">up</a></li><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Surge/">surge</a></li><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Wave/">wave</a></li><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Xray/">xray</a></li></ul><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【日记】9月12日</title>
      <link href="/1b1004aa.html"/>
      <url>/1b1004aa.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0/">系列文章地址</a></p><hr><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/96904683726800.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/96904683726800.jpg"></a></p><p>懒样</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 九月 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】MySQL为什么不推荐使用in</title>
      <link href="/e013a8fd.html"/>
      <url>/e013a8fd.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><p>当使用IN语句时，MySQL可能会遇到以下问题：</p><ol><li><p>索引问题：MySQL使用索引来加速查询，但在使用IN语句时，MySQL可能无法有效地使用索引。这是因为IN语句中的值列表可能是动态的，无法提前确定索引的使用情况。当MySQL无法使用索引时，它将执行全表扫描，逐行比较每个值，这会导致查询性能下降。</p></li><li><p>内存消耗：当使用IN语句时，MySQL需要将值列表中的所有值加载到内存中进行比较。如果值列表很大，可能会导致内存消耗过高，甚至引发内存溢出的问题。这对于内存有限的系统来说尤其重要。</p></li><li><p>查询优化器的限制：MySQL的查询优化器在处理IN语句时可能会遇到一些限制。例如，优化器可能无法准确估计IN语句的选择性，从而导致选择不合适的查询计划。这可能导致性能下降，因为选择了不合适的索引或执行方式。</p></li></ol><p>为了解决这些问题，我们可以考虑使用其他查询操作符来替代IN语句，例如：</p><ol><li><p>JOIN语句：使用JOIN语句可以将多个表连接起来，根据关联条件进行查询。JOIN语句通常能够更好地利用索引，并且在处理大量数据时更高效。</p></li><li><p>子查询：子查询是将一个查询嵌套在另一个查询中。通过使用子查询，我们可以将IN语句拆分为多个较小的查询，从而提高查询性能。</p></li></ol><p>当然，每个具体的情况都是不同的，所以在选择查询操作符时，我们需要根据具体的需求和数据情况进行评估和测试。在优化查询性能时，我们可以使用MySQL的查询分析工具来帮助我们理解查询的执行计划和性能瓶颈，从而做出更好的决策。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> 数据库 </tag>
            
            <tag> 查询操作符 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【日记】2023年9月11日</title>
      <link href="/79d61d59.html"/>
      <url>/79d61d59.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0/">系列文章地址</a></p><hr><h1 id="宝宝体检"><a href="#宝宝体检" class="headerlink" title="宝宝体检"></a>宝宝体检</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/3205483027900.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/3205483027900.jpg"></a></p><ol><li>前天老婆回家了</li><li>昨天宝宝打疫苗</li><li>今天宝宝视力检查</li><li>老婆今天回她姐超市了</li></ol><p>总价下就是：可以造了。哦哦哦</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 九月 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>MySQL高可用搭建方案之（MHA）</title>
      <link href="/mysql_mha.html"/>
      <url>/mysql_mha.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><h2 id="原文地址"><a href="#原文地址" class="headerlink" title="原文地址"></a><a href="https://blog.51cto.com/zero01/2468767">原文地址</a></h2><h2 id="MHA架构介绍"><a href="#MHA架构介绍" class="headerlink" title="MHA架构介绍"></a>MHA架构介绍</h2><p>MHA是Master High<br>Availability的缩写，它是目前MySQL高可用方面的一个相对成熟的解决方案，其核心是使用perl语言编写的一组脚本，是一套优秀的作为MySQL高可用性环境下故障切换和主从提升的高可用软件。在MySQL故障切换过程中，MHA能做到在0~<br>30秒之内自动完成数据库的故障切换操作，并且能在最大程度上保证数据的一致性，以达到真正意义上的高可用。</p><p>基于MHA的架构不像MMM那样需要搭建主主复制，只需要搭建基本的主从复制架构即可。因为MHA在主库挂掉时，是在多个从库中选取出一个从库作为新的主库。MHA集群中的各节点彼此之间均需要基于<code>ssh</code><br>互信通信，以实现远程控制及数据管理功能。</p><p><strong>MHA提供了什么功能：</strong></p><ul><li>可以监控Master节点是否可用</li><li>当Master不可用时，能在多个Slave中选举出新的Master</li><li>提供了主从切换和故障转移功能，MHA会尝试在宕机的Master上保存binlog，在最大程度上保证事务不丢失。但如果是Master所在的服务器已经无法访问，或硬件层面出现了问题，则无法成功保存binlog</li><li>MHA可以与半同步复制结合，避免从库之间出现数据不一致的情况</li><li>支持MySQL基于GTID和基于日志点的两种复制方式</li></ul><p><strong>MHA故障转移过程：</strong></p><ol><li>尝试使用<code>ssh</code>登录到宕机崩溃的Master节点上保存二进制日志事件（binlog events）;</li><li>从多个Slave中识别含有最新更新的Slave，将其作为备选的Master；</li><li>然后基于该Slave同步差异的中继日志（relaylog）到其他的Slave上；</li><li>接着同步从原Master上保存的二进制日志事件（binlog events）；</li><li>将备选的Master提升为新的Master；</li><li>使其他的Slave连接新的Master进行复制；</li><li>在新的Master启动vip地址，保证前端请求可以发送到新的Master。</li></ol><p><strong>MHA的架构图如下：</strong><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109837022204700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109837022204700.png"></a></p><hr><h2 id="动手搭建MHA架构"><a href="#动手搭建MHA架构" class="headerlink" title="动手搭建MHA架构"></a>动手搭建MHA架构</h2><p><strong>本文中所使用的机器说明：</strong></p><table><thead><tr><th>名称</th><th>IP</th><th>角色</th></tr></thead><tbody><tr><td>master</td><td>192.168.190.151</td><td>主库</td></tr><tr><td>slave-01</td><td>192.168.190.152</td><td>从库</td></tr><tr><td>slave-02</td><td>192.168.190.154</td><td>从库</td></tr><tr><td>manager</td><td>192.168.190.153</td><td>集群管理节点（MHA）</td></tr></tbody></table><p><strong>环境版本说明：</strong></p><ul><li>操作系统版本：CentOS 7</li><li>MySQL版本：8.0.19</li><li>MHA版本：0.58</li></ul><p><strong>另外的说明：</strong></p><ul><li>会来了解MMM架构的小伙伴们想必都已经掌握了MySQL的安装方式，而且介绍<a href="https://blog.51cto.com/zero01/2445762"> MySQL的安装</a><br>也有很多文章，所以本文为了减少不必要的篇幅就不演示MySQL的安装了，文中所用到的机器都已经提前安装好了MySQL。</li></ul><hr><h3 id="配置主从节点的配置文件"><a href="#配置主从节点的配置文件" class="headerlink" title="配置主从节点的配置文件"></a>配置主从节点的配置文件</h3><p>1、在所有主从节点上使用如下语句创建用于主从复制的MySQL用户，因为每个从库都有可能会被选举为主库，所以都需要拥有用于复制的用户：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create user &#x27;repl&#x27;@&#x27;%&#x27; identified with mysql_native_password by &#x27;Abc_123456&#x27;;</span><br><span class="line">grant replication slave on *.* to &#x27;repl&#x27;@&#x27;%&#x27;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>2、然后修改<code>master</code>节点上的MySQL配置文件：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置当前节点的<span class="built_in">id</span></span></span><br><span class="line">server_id=101</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开启binlog，并指定binlog文件的名称</span></span><br><span class="line">log_bin=mysql_bin</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开启relay_log，并指定relay_log文件的名称</span></span><br><span class="line">relay_log=relay_bin</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将relaylog的同步内容记录到binlog中</span></span><br><span class="line">log_slave_updates=on</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开启GTID复制模式</span></span><br><span class="line">gtid_mode=ON</span><br><span class="line">enforce_gtid_consistency=1</span><br></pre></td></tr></table></figure><p>3、在<code>slave-01</code>的配置文件中也是添加一样配置，只不过<code>server_id</code>不一样：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@slave-01 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">server_id=102</span><br><span class="line">log_bin=mysql_bin</span><br><span class="line">relay_log=relay_bin</span><br><span class="line">log_slave_updates=on</span><br><span class="line">gtid_mode=ON</span><br><span class="line">enforce_gtid_consistency=1</span><br></pre></td></tr></table></figure><p>4、接着是配置<code>slave-02</code>：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@slave-02 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">server_id=103</span><br><span class="line">log_bin=mysql_bin</span><br><span class="line">relay_log=relay_bin</span><br><span class="line">log_slave_updates=on</span><br><span class="line">gtid_mode=ON</span><br><span class="line">enforce_gtid_consistency=1</span><br></pre></td></tr></table></figure><p>完成以上配置文件的修改后，分别重启这三个节点上的MySQL服务：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# systemctl restart mysqld</span><br><span class="line">[root@slave-01 ~]# systemctl restart mysqld</span><br><span class="line">[root@slave-02 ~]# systemctl restart mysqld</span><br></pre></td></tr></table></figure><hr><h3 id="配置slave-01对master的主从关系"><a href="#配置slave-01对master的主从关系" class="headerlink" title="配置slave-01对master的主从关系"></a>配置<code>slave-01</code>对<code>master</code>的主从关系</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">stop slave;  -- 停止主从同步</span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">change master to master_host=<span class="string">&#x27;192.168.190.151&#x27;</span>, master_port=3306, master_user=<span class="string">&#x27;repl&#x27;</span>, master_password=<span class="string">&#x27;Abc_123456&#x27;</span>, master_auto_position=1;  -- 配置master节点的连接信息</span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">start slave;  -- 启动主从同</span></span><br><span class="line">-----------------------------------</span><br><span class="line">©著作权归作者所有：来自51CTO博客作者ZeroOne01的原创作品，请联系作者获取转载授权，否则将追究法律责任</span><br><span class="line">基于MHA搭建MySQL Replication集群高可用架构</span><br><span class="line">https://blog.51cto.com/zero01/2468767</span><br></pre></td></tr></table></figure><p>进入<code>slave-01</code>节点的MySQL命令行终端，分别执行如下语句来配置主从复制链路：</p><p>配置完主从复制链路后，使用<code>show slave status\G;</code>语句查看主从同步状态，<code>Slave_IO_Running</code>和<code>Slave_SQL_Running</code>的值均为<code>Yes</code><br>才能表示主从同步状态是正常的：<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109851589695700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109851589695700.png"></a></p><hr><h3 id="配置slave-02对master的主从关系"><a href="#配置slave-02对master的主从关系" class="headerlink" title="配置slave-02对master的主从关系"></a>配置<code>slave-02</code>对<code>master</code>的主从关系</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">stop slave;  -- 停止主从同步</span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">change master to master_host=<span class="string">&#x27;192.168.190.151&#x27;</span>, master_port=3306, master_user=<span class="string">&#x27;repl&#x27;</span>, master_password=<span class="string">&#x27;Abc_123456&#x27;</span>, master_auto_position=1;  -- 配置master节点的连接信息</span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">start slave;  -- 启动主从同步</span></span><br><span class="line">-----------------------------------</span><br><span class="line">©著作权归作者所有：来自51CTO博客作者ZeroOne01的原创作品，请联系作者获取转载授权，否则将追究法律责任</span><br><span class="line">基于MHA搭建MySQL Replication集群高可用架构</span><br><span class="line">https://blog.51cto.com/zero01/2468767</span><br></pre></td></tr></table></figure><p>同样的步骤，进入<code>slave-02</code>节点的MySQL命令行终端，分别执行如下语句来配置主从复制链路：</p><p>配置完主从复制链路后，使用<code>show slave status\G;</code>语句查看主从同步状态，<code>Slave_IO_Running</code>和<code>Slave_SQL_Running</code>的值均为<code>Yes</code><br>才能表示主从同步状态是正常的：<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109856639832900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109856639832900.png"></a></p><hr><h3 id="配置ssh免密登录"><a href="#配置ssh免密登录" class="headerlink" title="配置ssh免密登录"></a>配置ssh免密登录</h3><p>配置集群内所有主机之间能够通过<code>ssh</code>免密登录，因为MHA是基于<code>ssh</code>去实现远程控制及数据管理的。例如，故障转移过程中保存原Master节点的二进制日志以及配置虚拟IP等。</p><p>1、生成<code>ssh</code>登录密钥：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# ssh-keygen</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/root/.ssh/id_rsa): </span><br><span class="line">Enter passphrase (empty for no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved in /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:LzRXziRQPrqaKEteH6KrZpCiV6uGP6GTi6RonE7Hhms root@master</span><br><span class="line">The key&#x27;s randomart image is:</span><br><span class="line">+---[RSA 2048]----+</span><br><span class="line">|        ...      |</span><br><span class="line">|         o       |</span><br><span class="line">|          + o    |</span><br><span class="line">|         . B     |</span><br><span class="line">| .      S . o    |</span><br><span class="line">|+ + .  . =       |</span><br><span class="line">|=Bo*o.. o .      |</span><br><span class="line">|%EOo.+ + .       |</span><br><span class="line">|%XB*. +          |</span><br><span class="line">+----[SHA256]-----+</span><br><span class="line">-----------------------------------</span><br><span class="line">©著作权归作者所有：来自51CTO博客作者ZeroOne01的原创作品，请联系作者获取转载授权，否则将追究法律责任</span><br><span class="line">基于MHA搭建MySQL Replication集群高可用架构</span><br><span class="line">https://blog.51cto.com/zero01/2468767</span><br></pre></td></tr></table></figure><p>2、将密钥拷贝到其他服务器上：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# ssh-copy-id -i /root/.ssh/id_rsa root@192.168.190.151</span><br><span class="line">[root@master ~]# ssh-copy-id -i /root/.ssh/id_rsa root@192.168.190.152</span><br><span class="line">[root@master ~]# ssh-copy-id -i /root/.ssh/id_rsa root@192.168.190.154</span><br><span class="line">[root@master ~]# ssh-copy-id -i /root/.ssh/id_rsa root@192.168.190.153</span><br><span class="line">-----------------------------------</span><br><span class="line">©著作权归作者所有：来自51CTO博客作者ZeroOne01的原创作品，请联系作者获取转载授权，否则将追究法律责任</span><br><span class="line">基于MHA搭建MySQL Replication集群高可用架构</span><br><span class="line">https://blog.51cto.com/zero01/2468767</span><br></pre></td></tr></table></figure><p>然后到集群中其他节点上进行同样的操作，由于是重复的操作这里就不演示了。最后简单测试下能否正常免密登录即可：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# ssh root@192.168.190.152</span><br><span class="line">Last failed login: Sat Feb  1 15:29:38 CST 2020 from 192.168.190.151 on ssh:notty</span><br><span class="line">There was 1 failed login attempt since the last successful login.  # 没有要求输入密码，测试成功</span><br><span class="line">Last login: Sat Feb  1 14:14:03 2020 from 192.168.190.1</span><br><span class="line">[root@slave-01 ~]# </span><br><span class="line">-----------------------------------</span><br><span class="line">©著作权归作者所有：来自51CTO博客作者ZeroOne01的原创作品，请联系作者获取转载授权，否则将追究法律责任</span><br><span class="line">基于MHA搭建MySQL Replication集群高可用架构</span><br><span class="line">https://blog.51cto.com/zero01/2468767</span><br></pre></td></tr></table></figure><hr><h3 id="安装MHA软件包"><a href="#安装MHA软件包" class="headerlink" title="安装MHA软件包"></a>安装MHA软件包</h3><p>1、首先在所有的节点上安装<code>mha4mysql-node</code>软件包，安装包可到如下地址进行下载：</p><ul><li><a href="https://github.com/yoshinorim/mha4mysql-node/releases/tag/v0.58"> https://github.com/yoshinorim/mha4mysql-node/releases/tag/v0.58</a></li></ul><p>下载好的<code>rpm</code>文件如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# ls *.rpm</span><br><span class="line">mha4mysql-node-0.58-0.el7.centos.noarch.rpm</span><br><span class="line">[root@master ~]# </span><br></pre></td></tr></table></figure><p>在安装该<code>rpm</code>包之前需要先安装perl相关依赖：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# yum -y install epel-release</span><br><span class="line">[root@master ~]# yum -y install perl-DBD-MySQL perl-DBI ncftp</span><br></pre></td></tr></table></figure><p>现在就可以安装<code>mha4mysql-node</code>了，命令如下：</p><ul><li>**Tips：**另外的两个Slave节点和监控节点按如上步骤安装即可，这里就不重复演示了</li></ul><p>2、接着是在监控节点<code>manager</code>上安装<code>mha4mysql-manager</code>软件包，安装包到如下地址进行下载：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# rpm -ivh mha4mysql-node-0.58-0.el7.centos.noarch.rpm</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><a href="https://github.com/yoshinorim/mha4mysql-manager/releases"> https://github.com/yoshinorim/mha4mysql-manager/releases</a></li></ul><p>下载好的<code>rpm</code>文件如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@manager ~]# ls *.rpm</span><br><span class="line">mha4mysql-manager-0.58-0.el7.centos.noarch.rpm</span><br><span class="line">[root@manager ~]# </span><br></pre></td></tr></table></figure><p>同样，在安装该<code>rpm</code>包之前需要先安装perl相关依赖：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@manager ~]# yum -y install epel-release</span><br><span class="line">[root@manager ~]# yum -y install perl-Config-Tiny perl-Time-HiRes perl-Parallel-ForkManager perl-Log-Dispatch perl-DBD-MySQL ncftp</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后安装<code>mha4mysql-manager</code>包，命令如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@manager ~]# rpm -ivh mha4mysql-manager-0.58-0.el7.centos.noarch.rpm</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="配置MHA管理节点"><a href="#配置MHA管理节点" class="headerlink" title="配置MHA管理节点"></a>配置MHA管理节点</h3><p>1、创建MHA的配置文件存放目录和工作目录：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@manager ~]# mkdir /etc/mha</span><br><span class="line">[root@manager ~]# mkdir /home/mysql_mha</span><br></pre></td></tr></table></figure><p>2、创建MHA的配置文件，并添加如下内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@manager ~]# vim /etc/mha/mysql_mha.cnf</span><br><span class="line">[server default]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mha用于访问数据库的账户和密码</span></span><br><span class="line">user=mha</span><br><span class="line">password=Abc_123456</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定mha的工作目录</span></span><br><span class="line">manager_workdir=/home/mysql_mha</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mha日志文件的存放路径</span></span><br><span class="line">manager_log=/home/mysql_mha/manager.log</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定mha在远程节点上的工作目录</span></span><br><span class="line">remote_workdir=/home/mysql_mha</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可以使用ssh登录的用户</span></span><br><span class="line">ssh_user=root</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">用于主从复制的MySQL用户和密码</span></span><br><span class="line">repl_user=repl</span><br><span class="line">repl_password=Abc_123456</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定间隔多少秒检测一次</span></span><br><span class="line">ping_interval=1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定master节点存放binlog日志文件的目录</span></span><br><span class="line">master_binlog_dir=/var/lib/mysql</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定一个脚本，该脚本实现了在主从切换之后，将虚拟IP漂移到新的Master上</span></span><br><span class="line">master_ip_failover_script=/usr/bin/master_ip_failover</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定用于二次检查节点状态的脚本</span></span><br><span class="line">secondary_check_script=/usr/bin/masterha_secondary_check -s 192.168.190.151 -s 192.168.190.152 -s 192.168.190.154</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置集群中的节点信息</span></span><br><span class="line">[server1]</span><br><span class="line">hostname=192.168.190.151</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定该节点可以参与Master选举</span></span><br><span class="line">candidate_master=1</span><br><span class="line"></span><br><span class="line">[server2]</span><br><span class="line">hostname=192.168.190.152</span><br><span class="line">candidate_master=1</span><br><span class="line"></span><br><span class="line">[server3]</span><br><span class="line">hostname=192.168.190.154</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定该节点不能参与Master选举</span></span><br><span class="line">no_master=1</span><br></pre></td></tr></table></figure><p>3、编写配置文件中所配置的<code>master_ip_failover</code>脚本，该脚本是根据MHA的官方示例修改的，MHA默认并没有提供。需要注意脚本中的几处地方需要根据实际情况进行修改，已用注释标明：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">[root@manager ~]# vim /usr/bin/master_ip_failover</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/env perl</span></span><br><span class="line"></span><br><span class="line">use strict;</span><br><span class="line">use warnings FATAL =&gt; &#x27;all&#x27;;</span><br><span class="line"></span><br><span class="line">use Getopt::Long;</span><br><span class="line"></span><br><span class="line">my (</span><br><span class="line">    $command, $orig_master_host, $orig_master_ip,$ssh_user,</span><br><span class="line">    $orig_master_port, $new_master_host, $new_master_ip,$new_master_port,</span><br><span class="line">    $orig_master_ssh_port,$new_master_ssh_port,$new_master_user,$new_master_password</span><br><span class="line">);</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这里定义的虚拟IP可以根据实际情况进行修改</span></span><br><span class="line">my $vip = &#x27;192.168.190.80/24&#x27;;</span><br><span class="line">my $key = &#x27;1&#x27;;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这里的网卡名称 “ens32” 需要根据你机器的网卡名称进行修改</span></span><br><span class="line">my $ssh_start_vip = &quot;sudo /sbin/ifconfig ens32:$key $vip&quot;;</span><br><span class="line">my $ssh_stop_vip = &quot;sudo /sbin/ifconfig ens32:$key down&quot;;</span><br><span class="line">my $ssh_Bcast_arp= &quot;sudo /sbin/arping -I bond0 -c 3 -A $vip&quot;;</span><br><span class="line"></span><br><span class="line">GetOptions(</span><br><span class="line">    &#x27;command=s&#x27;          =&gt; \$command,</span><br><span class="line">    &#x27;ssh_user=s&#x27;         =&gt; \$ssh_user,</span><br><span class="line">    &#x27;orig_master_host=s&#x27; =&gt; \$orig_master_host,</span><br><span class="line">    &#x27;orig_master_ip=s&#x27;   =&gt; \$orig_master_ip,</span><br><span class="line">    &#x27;orig_master_port=i&#x27; =&gt; \$orig_master_port,</span><br><span class="line">    &#x27;orig_master_ssh_port=i&#x27; =&gt; \$orig_master_ssh_port,</span><br><span class="line">    &#x27;new_master_host=s&#x27;  =&gt; \$new_master_host,</span><br><span class="line">    &#x27;new_master_ip=s&#x27;    =&gt; \$new_master_ip,</span><br><span class="line">    &#x27;new_master_port=i&#x27;  =&gt; \$new_master_port,</span><br><span class="line">    &#x27;new_master_ssh_port&#x27; =&gt; \$new_master_ssh_port,</span><br><span class="line">    &#x27;new_master_user&#x27; =&gt; \$new_master_user,</span><br><span class="line">    &#x27;new_master_password&#x27; =&gt; \$new_master_password</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">exit &amp;main();</span><br><span class="line"></span><br><span class="line">sub main &#123;</span><br><span class="line">    $ssh_user = defined $ssh_user ? $ssh_user : &#x27;root&#x27;;</span><br><span class="line">    print &quot;\n\nIN SCRIPT TEST====$ssh_user|$ssh_stop_vip==$ssh_user|$ssh_start_vip===\n\n&quot;;</span><br><span class="line"></span><br><span class="line">    if ( $command eq &quot;stop&quot; || $command eq &quot;stopssh&quot; ) &#123;</span><br><span class="line"></span><br><span class="line">        my $exit_code = 1;</span><br><span class="line">        eval &#123;</span><br><span class="line">            print &quot;Disabling the VIP on old master: $orig_master_host \n&quot;;</span><br><span class="line">            &amp;stop_vip();</span><br><span class="line">            $exit_code = 0;</span><br><span class="line">        &#125;;</span><br><span class="line">        if ($@) &#123;</span><br><span class="line">            warn &quot;Got Error: $@\n&quot;;</span><br><span class="line">            exit $exit_code;</span><br><span class="line">        &#125;</span><br><span class="line">        exit $exit_code;</span><br><span class="line">    &#125;</span><br><span class="line">    elsif ( $command eq &quot;start&quot; ) &#123;</span><br><span class="line"></span><br><span class="line">        my $exit_code = 10;</span><br><span class="line">        eval &#123;</span><br><span class="line">            print &quot;Enabling the VIP - $vip on the new master - $new_master_host \n&quot;;</span><br><span class="line">            &amp;start_vip();</span><br><span class="line">    &amp;start_arp();</span><br><span class="line">            $exit_code = 0;</span><br><span class="line">        &#125;;</span><br><span class="line">        if ($@) &#123;</span><br><span class="line">            warn $@;</span><br><span class="line">            exit $exit_code;</span><br><span class="line">        &#125;</span><br><span class="line">        exit $exit_code;</span><br><span class="line">    &#125;</span><br><span class="line">    elsif ( $command eq &quot;status&quot; ) &#123;</span><br><span class="line">        print &quot;Checking the Status of the script.. OK \n&quot;;</span><br><span class="line">        exit 0;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        &amp;usage();</span><br><span class="line">        exit 1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sub start_vip() &#123;</span><br><span class="line">    `ssh $ssh_user\@$new_master_host \&quot; $ssh_start_vip \&quot;`;</span><br><span class="line">&#125;</span><br><span class="line">sub stop_vip() &#123;</span><br><span class="line">    `ssh $ssh_user\@$orig_master_host \&quot; $ssh_stop_vip \&quot;`;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sub start_arp() &#123;</span><br><span class="line">    `ssh $ssh_user\@$new_master_host \&quot; $ssh_Bcast_arp \&quot;`;</span><br><span class="line">&#125;</span><br><span class="line">sub usage &#123;</span><br><span class="line">    print</span><br><span class="line">    &quot;Usage: master_ip_failover --command=start|stop|stopssh|status --ssh_user=user --orig_master_host=host --orig_master_ip=ip --orig_master_port=port --new_master_host=host --new_master_ip=ip --new_master_port=port\n&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>还需要给该脚本添加可执行权限，否则MHA是无法调用的：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@manager ~]# chmod a+x /usr/bin/master_ip_failover</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>4、根据配置文件中<code>remote_workdir</code>的配置，需在其他节点上创建MHA的远程工作目录：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# mkdir /home/mysql_mha</span><br><span class="line">[root@slave-01 ~]# mkdir /home/mysql_mha</span><br><span class="line">[root@slave-02 ~]# mkdir /home/mysql_mha</span><br></pre></td></tr></table></figure><p>5、在配置文件中指定了让<code>manager</code>使用<code>mha</code>这个用户来访问数据库节点，所以需要在<code>master</code>节点上创建<code>mha</code>用户：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create user &#x27;mha&#x27;@&#x27;%&#x27; identified with mysql_native_password by &#x27;Abc_123456&#x27;;</span><br><span class="line">grant all privileges on *.* to &#x27;mha&#x27;@&#x27;%&#x27;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>6、完成以上所有步骤后，在<code>manager</code>节点上使用<code>masterha_check_ssh</code>和<code>masterha_check_repl</code><br>对配置进行检查，其中<code>masterha_check_ssh</code>用于检查<code>ssh</code>登录是否正常，而<code>masterha_check_repl</code>则用于检查主从节点的复制链路是否正常：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@manager ~]# masterha_check_ssh --conf=/etc/mha/mysql_mha.cnf</span><br><span class="line">[root@manager ~]# masterha_check_repl --conf=/etc/mha/mysql_mha.cnf</span><br></pre></td></tr></table></figure><p>执行结果如下：<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109867943902700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109867943902700.png"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109872759556000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109872759556000.png"></a></p><p>7、以上检测都通过后，就可以启动MHA服务了。启动命令如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@manager ~]# nohup masterha_manager --conf=/etc/mha/mysql_mha.cnf &amp;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>启动完成后，可以使用<code>ps</code>命令查看<code>masterha_manager</code>进程是否存在，如下存在则代表启动成功：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@manager ~]# ps aux |grep masterha_manager</span><br><span class="line">root       2842  0.3  1.1 299648 22032 pts/0    S    18:30   0:00 perl /usr/bin/masterha_manager --conf=/etc/mha/mysql_mha.cnf</span><br><span class="line">root       2901  0.0  0.0 112728   976 pts/0    R+   18:31   0:00 grep --color=auto masterha_manager</span><br><span class="line">[root@manager ~]# </span><br></pre></td></tr></table></figure><p>8、最后我们需要到<code>master</code>节点上，手动去配置虚拟IP。因为MHA只会在主从切换时漂移虚拟IP到新的Master节点，而不会在第一次启动时主动去设置Master的虚拟IP，所以我们需要手动设置。设置虚拟IP的命令如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# ifconfig ens32:1 192.168.190.80/24</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>设置成功后，使用<code>ip addr</code>命令可以看到网卡上绑定的虚拟IP：<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109887575344700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109887575344700.png"></a></p><hr><h3 id="测试MHA服务"><a href="#测试MHA服务" class="headerlink" title="测试MHA服务"></a>测试MHA服务</h3><p>到此为止，我们就已经完成了MHA高可用架构的搭建，接下来我们对其进行一些简单的测试。例如，测试下是否能正常<code>ping</code><br>通虚拟IP，毕竟应用端访问数据库时连接的是虚拟IP，所以首先得确保虚拟IP是能够被访问的。如下：<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109895648618900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109895648618900.png"></a></p><p>能<code>ping</code>通之后，使用Navicat等远程连接工具测试下能否正常通过虚拟IP连接上数据库：<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109900498139800.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109900498139800.png"></a></p><p>确定了虚拟IP能正常访问后，接着测试MHA是否能够正常进行主从切换，首先将<code>master</code>节点上的MySQL服务给停掉，模拟Master宕机：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# systemctl stop mysqld</span><br></pre></td></tr></table></figure><p>正常情况下，此时<code>master</code>节点上的网卡就不会再绑定该虚拟IP：<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109906476677200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109906476677200.png"></a></p><p>而是会被MHA漂移到<code>slave-01</code>节点的网卡上，因为此时该Slave就是新的Master：<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109911359737600.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109911359737600.png"></a></p><p>接着进入<code>slave-02</code>节点上的MySQL命令行终端，确认下该Slave是否已经正常与新的Master进行同步。之前我们配置<code>slave-02</code><br>的主库是<code>master</code>，现在将<code>master</code>停掉后，可以看到<code>slave-02</code>的<code>Master_Host</code>已经被MHA切换成了<code>slave-01</code>的IP：<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109915709053300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109915709053300.png"></a></p><p>经过以上测试后，可以看到我们搭建的MHA架构是能够正常运行的，已经使得Replication集群拥有了基本的高可用能力，即便Master下线后也能正常从Slave中选举新的Master并进行切换，也正确建立了其他Slave与新Master的复制链路。</p><hr><h2 id="MHA架构优缺点"><a href="#MHA架构优缺点" class="headerlink" title="MHA架构优缺点"></a>MHA架构优缺点</h2><h3 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h3><ul><li>使用Perl脚本语言开发并且完全开源，开发者可以根据自己的需求进行二次开发</li><li>能够支持基于GTID和基于日志点的复制模式</li><li>MHA在进行故障转移时更不易产生数据丢失</li><li>在一个监控节点上可以监控多个Replication集群</li></ul><h3 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h3><ul><li>MHA默认不提供虚拟IP功能，需要自行编写脚本或利用第三方工具来实现虚拟IP的配置</li><li>MHA启动后只会对Master进行监控，不会对Slave进行监控，也无法监控复制链路的情况</li><li>集群环境需要能够通过<code>ssh</code>免密登录，存在一定的安全隐患</li><li>MHA没有提供对Slave的读负载均衡功能，需要通过第三方工具来实现</li></ul><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>MySQL高可用搭建方案之（MMM）</title>
      <link href="/mysql_mmm.html"/>
      <url>/mysql_mmm.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><blockquote><p>注意：这篇转载文章，非原创</p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><h2 id="原文地址"><a href="#原文地址" class="headerlink" title="原文地址"></a><a href="https://www.modb.pro/db/74005">原文地址</a></h2><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>MySQL的高可用有很多种，有我们经常说的MMM架构、MHA架构、MGR架构。在这一篇文章中我们先讨论MMM架构的高可用，后续在分析MHA和MGR，其中的MGR有点类似于percona推出的PXC集群</p><h2 id="集群-VS-高可用"><a href="#集群-VS-高可用" class="headerlink" title="集群 VS 高可用"></a>集群 VS 高可用</h2><p>在MySQL数据库中，什么是集群？什么是高可用？最早我理解的是只要有了读写分离的组从集群架构，就是拥有高可用的架构了。现在想想，当初的想法是多么的天真。MySQL集群和MySQL的高可用是两个概念，我们不能把他们混为一谈。</p><p>集群是指你多台MySQL数据库实例，有一个可以提供写，多个提供读、或者有多个可以写，多个可以读。比如我们配置了读写分离的一主多从的集群架构，或者双主多从的集群架构。此时，我们只是有了MySQL的集群，在读写性能上有锁提升，但是此时并不是一个高可用的MySQL架构。</p><p>高可用是指在任意一个时刻，我们的MySQL都可以提供读写的服务，不会因为某一个MySQL数据库实例宕机而导致MySQL数据不能正常读写，此时才是高可用。从某种意义上来说，高可用要在集群的基础上才可以实现，也就是说，要想高可用，必须先把集群搭建起来。有了MySQL的集群，才可以谈论MySQL的高可用，没有MySQL的集群，谈MySQL的高可用犹如空中楼阁。</p><p>拿我们前面说的双主多从的MySQL集群架构来说，两个主在同一个时间点，若只有一个主对外提供写的服务，此时如果其中一个主宕机，另外一个主可以顶替原先的主对外提供写的服务，同时其他的从可以把同步的数据源切换到新的主上面来，这样的一个集群就是一个高可用的架构。</p><p>有了MySQL的集群，并不一定就有MySQL的高可用。但是如果有了MySQL的高可用，那么此时它一定是一个MySQL集群。高可用需要在集群的基础上来配合其他组件才能实现。</p><h2 id="MMM高可用架构"><a href="#MMM高可用架构" class="headerlink" title="MMM高可用架构"></a>MMM高可用架构</h2><h3 id="什么是MMM"><a href="#什么是MMM" class="headerlink" title="什么是MMM"></a>什么是MMM</h3><p>所谓的MMM只是：<strong>M</strong>ulti-<strong>M</strong>aster Replication <strong>M</strong>anager for<br>MySQL，取其中的三个M开头的单词简写。它是mysql多主复制管理器，基于perl实现，关于mysql主主复制配置的监控、故障转移和管理的一套可伸缩的脚本套件（在任何时候只有一个节点可以被写入），MMM也能对从服务器进行读负载均衡，所以可以用它来在一组用于复制的服务器启动虚拟ip，除此之外，它还有实现数<br>据备份、节点之间重新同步功能的脚本。</p><p>MySQL本身没有提供replication failover的解决方案，通过MMM方案<br>能实现服务器的故障转移，从而实现mysql的高可用。MMM不仅能提供浮动IP的功能，如果当前的主服务器挂掉后，会将你后端的从服务器自动转向新的主服务器进行同步复制，不用手工更改同步配置。</p><p>从字面来理解就是它有两个master节点，并且实现了这两个master节点的高可用。它的架构如下所示：</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62153149517400.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62153149517400.png"></a></p><p>MMM主要功能，由下面三个脚本提供：</p><ul><li><p>mmm_mond 负责所有的监控工作的监控守护进程，决定节点的移除(mmm_mond进程定 时心跳检测，失败则将write<br>ip浮动到另外一台master)</p></li><li><p>mmm_agentd 运行在mysql服务器上的代理守护进 程，通过简单远程服务集提供给监控节点</p></li><li><p>mmm_control 通过命令行管理mmm_mond进程 在整个监管过程中，<br>需要在mysql中添加相关授权用户，授权的用户包括一个mmm_monitor用户和一个mmm_agent用户，如果想使用mmm的备份工具则还要添加一个mmm_tools用户。</p></li></ul><h3 id="MMM架构的优点"><a href="#MMM架构的优点" class="headerlink" title="MMM架构的优点"></a>MMM架构的优点</h3><ul><li><p>可以兼容不同系列的MySQL来做高可用。比如有MySQL官方社区版本，有percona版本的，有MariaDB版本的MySQL。这样的集群可以可以使用MMM架构来做高可用。</p></li><li><p>高可用性，扩展性好，出现故障自动切换，对于主主同步，在同一时间只提供一台数据库写操作，保证 的数据的一致性。</p></li><li><p>当主服务器挂掉以后，另一个主立即接管，其他的从服务器能自动切换，不用人工干预。</p></li></ul><h3 id="MMM架构的缺点"><a href="#MMM架构的缺点" class="headerlink" title="MMM架构的缺点"></a>MMM架构的缺点</h3><ul><li><p>是一种比较老的MySQL高可用实现方式，因为社区不活跃，所以目前已经没有人在维护这个组件了。</p></li><li><p>只能基于日之点的主从复制集群架构来做高可用，不支持基于GTID的主从复制集群架构。这也是因为社区活跃，没有维护这个组件导致不支持GTID。</p></li><li><p>数据不能保证100%的一致性，这个是以为它在做故障转移的时候实现的方式所导致的。如果对于数据需要强一致性，则不能选择MMM高可用架构，可以考虑MHA高可用架构。</p></li><li><p>monitor节点是单点，不过这个可以结合keepalived或者haertbeat做成高可用。</p></li><li><p>至少三个节点，2个master，1个slave，对主机的数量有要求，</p></li><li><p>在读写非常繁忙的业务系统下表现不是很稳定，可能会出现复制延时、切换失效等问题。</p></li><li><p>MMM方案并不太适应于对数据安全性要求很高，并且读、写 繁忙的环境中。</p></li><li><p>需要实现读写分离，还需要在前端编写读写分离程序，或者结合数据库中间件如mycat来解决。</p></li></ul><h2 id="如何搭建MMM高可用架构"><a href="#如何搭建MMM高可用架构" class="headerlink" title="如何搭建MMM高可用架构"></a>如何搭建MMM高可用架构</h2><p>要想实现MMM高可用架构，我们先来搭建一个双主双从的MySQL集群，然后在这个集群的基础上来完成MMM高可用的架构。</p><p>我们准备搭建的MySQL-MMM高可用架构的网络拓扑如下所示：需要注意的是其中的VIP，这几个IP不需要我们自己创建，MMM服务会自动的在各个节点分配这些VIP。其中的绿色字体read<br>vip，它并不会严格的按照我们下图中分配是主机来分配，而是随机的将这4个read vip分布到4个数据库节点上，但是红色字体的write<br>vip只会在master1或master2上面随着master1和master2节点宕机和恢复来回切换。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62165973507400.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62165973507400.png"></a></p><h3 id="搭建双主双从的MySQL集群"><a href="#搭建双主双从的MySQL集群" class="headerlink" title="搭建双主双从的MySQL集群"></a>搭建双主双从的MySQL集群</h3><h4 id="准备MySQL数据库环境"><a href="#准备MySQL数据库环境" class="headerlink" title="准备MySQL数据库环境"></a>准备MySQL数据库环境</h4><p>我们使用docker来启动4个MySQL容器，作为双主双从的四个MySQL数据库实例。容器镜像的名称为<code>mysql:5.7.31</code><br>，这个镜像是docker hub上面MySQL官方提供的镜像，它是基于<code>Debian buster</code><br>版本制作的MySQL容器镜像。所以，我们的MySQL数据库服务器，可以任务是一个minimal版本的Debian系统。</p><p>为了方便管理，我们先创建一个docker虚拟网段，然后在启动四个MySQL数据库的时候，指定数据库服务器的IP地址并且使用这个网段。创建网段的命令如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">docker network create --subnet=172.20.0.0/24 mysql-ha-mmm-network</span><br><span class="line"></span><br><span class="line">我们使用下面的四条命令，启动4个MySQL数据库实例。这里我们把每一个数据库的`my.cnf`  </span><br><span class="line">配置文件已经在本地配置好，然后通过数据卷的方式挂载到MySQL容器中，这样我们启动的MySQL数据库实例就会按照我们配置的`my.cnf`  </span><br><span class="line">配置文件来启动并配置我们的MySQL数据库实例。</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动master1节点</span>  </span><br><span class="line">docker run --net=mysql-ha-mmm-network --hostname master1.mysql --ip 172.20.0.11 --cap-add NET\_ADMIN --name</span><br><span class="line">mysql-ha-mmm-master1 -d -v Users/coder-home/docker\_mysql\_ha/mmm/master1:/etc/mysql/conf.d -e MYSQL\_ROOT_PASSWORD=root</span><br><span class="line">-e TZ=&quot;Asia/Shanghai&quot; -p 33011:3306 mysql:5.7.31</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动slave1节点</span>  </span><br><span class="line">docker run --net=mysql-ha-mmm-network --hostname slave1.mysql --ip 172.20.0.12 --cap-add NET\_ADMIN --name</span><br><span class="line">mysql-ha-mmm-slave1 -d -v Users/coder-home/docker\_mysql\_ha/mmm/slave1:/etc/mysql/conf.d -e MYSQL\_ROOT_PASSWORD=root</span><br><span class="line">-e TZ=&quot;Asia/Shanghai&quot; -p 33012:3306 mysql:5.7.31</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动master2节点</span>  </span><br><span class="line">docker run --net=mysql-ha-mmm-network --hostname master2.mysql --ip 172.20.0.21 --cap-add NET\_ADMIN --name</span><br><span class="line">mysql-ha-mmm-master2 -d -v Users/coder-home/docker\_mysql\_ha/mmm/master2:/etc/mysql/conf.d -e MYSQL\_ROOT_PASSWORD=root</span><br><span class="line">-e TZ=&quot;Asia/Shanghai&quot; -p 33021:3306 mysql:5.7.31</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动slave2节点</span>  </span><br><span class="line">docker run --net=mysql-ha-mmm-network --hostname slave2.mysql --ip 172.20.0.22 --cap-add NET\_ADMIN --name</span><br><span class="line">mysql-ha-mmm-slave2 -d -v Users/coder-home/docker\_mysql\_ha/mmm/slave2:/etc/mysql/conf.d -e MYSQL\_ROOT_PASSWORD=root</span><br><span class="line">-e TZ=&quot;Asia/Shanghai&quot; -p 33022:3306 mysql:5.7.31</span><br></pre></td></tr></table></figure><p>这里解释一下<code>docker run</code><br>后面几个重要的参数和含义。</p><ul><li><p>–net&#x3D;mysql-ha-mmm-network：指定容器运行的时候使用的网段。</p></li><li><p>–hostname slave2.mysql：指定容器的主机名称。</p></li><li><p>–ip 172.20.0.22：指定容器使用的IP地址。</p></li><li><p>–cap-add NET_ADMIN：默认容器运行的时候，没有增加额外的Linux的功能，这里我们要增加上NET_ADMIN的功能，否则我们不能再启动后的容器内使用ifconfig命令增加虚拟IP。否则会有如下错误提示：</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@test:/etc/network# ifconfig eth0:0 192.168.1.100 up  </span><br><span class="line">SIOCSIFADDR: Operation not permitted  </span><br><span class="line">SIOCSIFFLAGS: Operation not permitted  </span><br><span class="line">SIOCSIFFLAGS: Operation not permitted  </span><br><span class="line">root@test:/etc/network#</span><br></pre></td></tr></table></figure><ul><li><p>–name mysql-ha-mmm-slave2：指定容器的名称为<code>mysql-ha-mmm-slave2</code><br>，后面我们在停止或重启容器的时候，可以通过这个名称来操作容器。</p></li><li><p>-d：以demon进程的方式运行容器。</p></li><li><p>-v Users&#x2F;coder-home&#x2F;docker_mysql_ha&#x2F;mmm&#x2F;slave2:<br>&#x2F;etc&#x2F;mysql&#x2F;conf.d：把本地的<code>/Users/coder-home/docker_mysql_ha/mmm/slave2</code><br>目录挂载到容器中的<code>/etc/mysql/conf.d</code><br>目录下。</p></li><li><p>-e MYSQL_ROOT_PASSWORD&#x3D;root：向容器内传入参数，我们指定MySQL数据库root用户的密码也为root。</p></li><li><p>-e TZ&#x3D;”Asia&#x2F;Shanghai”：向容器内传入参数，这里我们指定的容器中使用的系统的时区为上海时间。</p></li><li><p>-p 33022:3306：我们指定容器中的3306端口，映射到我们本地为33022。这样我们在本地访问MySQL服务的时候，就可以通过33022端口来访问。</p></li><li><p>mysql:5.7.31：这个是我们要运行的容器的名称和版本。如果本地没有这个容器名称和版本，则会从docker<br>hub中自动拉取这个镜像名称和版本到本地，然后再启动这个镜像。</p></li></ul><p>容器启动后，我们可以查看启动后的结果如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ docker ps  </span><br><span class="line">CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES  </span><br><span class="line">5207089da9a5 mysql:5.7.31        &quot;docker-entrypoint.s…&quot;   About a minute ago Up About a minute 33060/tcp, 0.0.0.0:</span><br><span class="line"><span class="meta prompt_">33022-&gt;</span><span class="language-bash">3306/tcp mysql-ha-mmm-slave2</span>  </span><br><span class="line">1c8ff5960272 mysql:5.7.31        &quot;docker-entrypoint.s…&quot;   About a minute ago Up About a minute 33060/tcp, 0.0.0.0:</span><br><span class="line"><span class="meta prompt_">33021-&gt;</span><span class="language-bash">3306/tcp mysql-ha-mmm-master2</span>  </span><br><span class="line">d8d646ba25f1 mysql:5.7.31        &quot;docker-entrypoint.s…&quot;   About a minute ago Up About a minute 33060/tcp, 0.0.0.0:</span><br><span class="line"><span class="meta prompt_">33012-&gt;</span><span class="language-bash">3306/tcp mysql-ha-mmm-slave1</span>  </span><br><span class="line">d3d75d9cd930 mysql:5.7.31        &quot;docker-entrypoint.s…&quot;   About a minute ago Up About a minute 33060/tcp, 0.0.0.0:</span><br><span class="line"><span class="meta prompt_">33011-&gt;</span><span class="language-bash">3306/tcp mysql-ha-mmm-master1</span>  </span><br><span class="line">➜  ~</span><br></pre></td></tr></table></figure><p>下面我们查看每一个MySQL数据库容器的host文件中的IP地址：</p><ul><li>master1的host文件如下：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">➜ ~ docker exec -it mysql-ha-mmm-master1 bin/bash  </span><br><span class="line">root@master1:/# cat etc/hosts  </span><br><span class="line">127.0.0.1 localhost  </span><br><span class="line">::1 localhost ip6-localhost ip6-loopback  </span><br><span class="line">fe00::0 ip6-localnet  </span><br><span class="line">ff00::0 ip6-mcastprefix  </span><br><span class="line">ff02::1 ip6-allnodes  </span><br><span class="line">ff02::2 ip6-allrouters  </span><br><span class="line">172.20.0.11 master1.mysql master1  </span><br><span class="line">root@master1:/#</span><br></pre></td></tr></table></figure><ul><li>master2的host文件如下：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ docker exec -it mysql-ha-mmm-master2 bin/bash  </span><br><span class="line">root@master2:/# cat etc/hosts  </span><br><span class="line">127.0.0.1 localhost  </span><br><span class="line">::1 localhost ip6-localhost ip6-loopback  </span><br><span class="line">fe00::0 ip6-localnet  </span><br><span class="line">ff00::0 ip6-mcastprefix  </span><br><span class="line">ff02::1 ip6-allnodes  </span><br><span class="line">ff02::2 ip6-allrouters  </span><br><span class="line">172.20.0.21 master2.mysql master2  </span><br><span class="line">root@master2:/#</span><br></pre></td></tr></table></figure><ul><li>slave1的host文件如下：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ docker exec -it mysql-ha-mmm-slave1 bin/bash  </span><br><span class="line">root@slave1:/# cat etc/hosts  </span><br><span class="line">127.0.0.1 localhost  </span><br><span class="line">::1 localhost ip6-localhost ip6-loopback  </span><br><span class="line">fe00::0 ip6-localnet  </span><br><span class="line">ff00::0 ip6-mcastprefix  </span><br><span class="line">ff02::1 ip6-allnodes  </span><br><span class="line">ff02::2 ip6-allrouters  </span><br><span class="line">172.20.0.12 slave1.mysql slave1  </span><br><span class="line">root@slave1:/#</span><br></pre></td></tr></table></figure><ul><li>slave2的host文件如下：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ docker exec -it mysql-ha-mmm-slave2 bin/bash  </span><br><span class="line">root@slave2:/# cat etc/hosts  </span><br><span class="line">127.0.0.1 localhost  </span><br><span class="line">::1 localhost ip6-localhost ip6-loopback  </span><br><span class="line">fe00::0 ip6-localnet  </span><br><span class="line">ff00::0 ip6-mcastprefix  </span><br><span class="line">ff02::1 ip6-allnodes  </span><br><span class="line">ff02::2 ip6-allrouters  </span><br><span class="line">172.20.0.22 slave2.mysql slave2  </span><br><span class="line">root@slave2:/#</span><br></pre></td></tr></table></figure><p>上面我们启动的四个MySQL数据库实例，我们还需要一个监控节点，下面启动一个监控节点，用于安装MMM的监控服务。</p><p>为了和其他环境一致，这里我们也使用上面MySQL的镜像。如下是启动一个新的MySQL容器，这个容器，我们不在挂载MySQL的my.cnf配置文件了，因为这个MySQL数据库我们不会使用，我们只是在这个容器中安装MMM的监控服务，我们此时把这个MySQL数据库容器当成一个Debian版本的虚拟机来使用。</p><h1 id="启动监控节点"><a href="#启动监控节点" class="headerlink" title="启动监控节点"></a>启动监控节点</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run --net=mysql-ha-mmm-network --hostname monitor.mysql --ip 172.20.0.10 --cap-add NET\_ADMIN --name</span><br><span class="line">mysql-ha-mmm-monitor -d -e MYSQL\_ROOT_PASSWORD=root -e TZ=&quot;Asia/Shanghai&quot; -p 33010:3306 mysql:5.7.31</span><br></pre></td></tr></table></figure><p>查看这个监控节点的host文件如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ docker exec -it mysql-ha-mmm-monitor bin/bash  </span><br><span class="line">root@monitor:~# cat etc/hosts  </span><br><span class="line">127.0.0.1 localhost  </span><br><span class="line">::1 localhost ip6-localhost ip6-loopback  </span><br><span class="line">fe00::0 ip6-localnet  </span><br><span class="line">ff00::0 ip6-mcastprefix  </span><br><span class="line">ff02::1 ip6-allnodes  </span><br><span class="line">ff02::2 ip6-allrouters  </span><br><span class="line">172.20.0.10 monitor.mysql monitor  </span><br><span class="line">root@monitor:~#</span><br></pre></td></tr></table></figure><h4 id="创建主从同步的数据库用户"><a href="#创建主从同步的数据库用户" class="headerlink" title="创建主从同步的数据库用户"></a>创建主从同步的数据库用户</h4><p>在组从同步的时候，从需要使用一个指定的用户去连接到主上面同步主上面的binlog日志。所以，我们需要在我们的主上面创建好这样的一个用户。因为在master1宕机之后，MMM组件会将master2提升为新的主库，所以需要在master1和master2上面都创建一个这样的用户，也就是下的命令需要在两个master节点上都执行一下。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create user &#x27;repl_user&#x27;@&#x27;172.20.0.%&#x27; identified by &#x27;repl_user&#x27;;  </span><br><span class="line">grant replication slave on *.* to &#x27;repl_user&#x27;@&#x27;172.20.0.%&#x27;;</span><br></pre></td></tr></table></figure><h4 id="历史数据的同步"><a href="#历史数据的同步" class="headerlink" title="历史数据的同步"></a>历史数据的同步</h4><p>如果我们并不是基于一个新的集群环境来搭建，而是基于一个已经运行了一段时间的MySQL数据库来做集群，此时我们需要把选定的master节点上面的数据，先使用<code>mysqldump</code><br>命令导出为<code>.sql</code><br>文件，然后再把这个<code>.sql</code><br>文件导入到所有的slave节点上去。然后在可以开始下面的任务。</p><p>在master上面执行的导出的命令示例如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -proot \  </span><br><span class="line">--master-data=2 \  </span><br><span class="line">--single-transaction \  </span><br><span class="line">--flush-logs \  </span><br><span class="line">--triggers \  </span><br><span class="line">--routines \  </span><br><span class="line">--events \  </span><br><span class="line">-B mydb1 &gt; mydb1.sql</span><br></pre></td></tr></table></figure><p>在所有的slave节点上执行的导入数据的命令示例如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -proot &lt; mydb1.sql</span><br></pre></td></tr></table></figure><p>但是，我们是基于一个崭新的环境来做的，不涉及到历史数据的问题。所以，这一步我们可以省略。</p><h4 id="开启组从同步"><a href="#开启组从同步" class="headerlink" title="开启组从同步"></a>开启组从同步</h4><p>在所有的slave上面执行如下命令，此时的binlog文件和日志点的位置，可以在master1上面使用<code>show master status</code><br>命令查看，或者查看导出数据的时候，生成的<code>.sql</code><br>文件。在master1节点上执行<code>mysqldump</code><br>导出命令的时候，我们指定的<code>--master-data=2</code><br>，这个参数会在导出的<code>.sql</code><br>文件中标记当前master1节点上binlog日志的文件名称和日志偏移量。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">change master to master_host=&#x27;172.20.0.11&#x27;, master_user=&#x27;repl_user&#x27;, master_password=&#x27;repl_user&#x27;,</span><br><span class="line">MASTER\_LOG\_FILE=&#x27;mysql-bin.000003&#x27;, MASTER\_LOG\_POS=1034;</span><br></pre></td></tr></table></figure><p>开启组从同步：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start slave;</span><br></pre></td></tr></table></figure><p>查看同步状态：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">show slave status\\G</span>  </span><br><span class="line">*************************** 1. row ***************************  </span><br><span class="line">Slave\_IO\_State: Waiting for master to send event  </span><br><span class="line">Master_Host: 172.20.0.11  </span><br><span class="line">Master\_User: repl\_user  </span><br><span class="line">Master_Port: 3306  </span><br><span class="line">Connect_Retry: 60  </span><br><span class="line">Master\_Log\_File: mysql-bin.000003  </span><br><span class="line">Read\_Master\_Log_Pos: 1034  </span><br><span class="line">Relay\_Log\_File: mysql-relay.000002  </span><br><span class="line">Relay\_Log\_Pos: 320  </span><br><span class="line">Relay\_Master\_Log_File: mysql-bin.000003  </span><br><span class="line">Slave\_IO\_Running: Yes  </span><br><span class="line">Slave\_SQL\_Running: Yes  </span><br><span class="line">Replicate\_Do\_DB:  </span><br><span class="line">Replicate\_Ignore\_DB:  </span><br><span class="line">Replicate\_Do\_Table:  </span><br><span class="line">Replicate\_Ignore\_Table:  </span><br><span class="line">Replicate\_Wild\_Do_Table:  </span><br><span class="line">Replicate\_Wild\_Ignore_Table:  </span><br><span class="line">Last_Errno: 0  </span><br><span class="line">Last_Error:  </span><br><span class="line">Skip_Counter: 0  </span><br><span class="line">Exec\_Master\_Log_Pos: 1034  </span><br><span class="line">Relay\_Log\_Space: 523  </span><br><span class="line">Until_Condition: None  </span><br><span class="line">Until\_Log\_File:  </span><br><span class="line">Until\_Log\_Pos: 0  </span><br><span class="line">Master\_SSL\_Allowed: No  </span><br><span class="line">Master\_SSL\_CA_File:  </span><br><span class="line">Master\_SSL\_CA_Path:  </span><br><span class="line">Master\_SSL\_Cert:  </span><br><span class="line">Master\_SSL\_Cipher:  </span><br><span class="line">Master\_SSL\_Key:  </span><br><span class="line">Seconds\_Behind\_Master: 0  </span><br><span class="line">Master\_SSL\_Verify\_Server\_Cert: No  </span><br><span class="line">Last\_IO\_Errno: 0  </span><br><span class="line">Last\_IO\_Error:  </span><br><span class="line">Last\_SQL\_Errno: 0  </span><br><span class="line">Last\_SQL\_Error:  </span><br><span class="line">Replicate\_Ignore\_Server_Ids:  </span><br><span class="line">Master\_Server\_Id: 11  </span><br><span class="line">Master_UUID: 047bcc07-7424-11eb-96b4-0242ac14000b  </span><br><span class="line">Master\_Info\_File: mysql.slave\_master\_info  </span><br><span class="line">SQL_Delay: 0  </span><br><span class="line">SQL\_Remaining\_Delay: NULL  </span><br><span class="line">Slave\_SQL\_Running_State: Slave has read all relay log; waiting for more updates  </span><br><span class="line">Master\_Retry\_Count: 86400  </span><br><span class="line">Master_Bind:  </span><br><span class="line">Last\_IO\_Error_Timestamp:  </span><br><span class="line">Last\_SQL\_Error_Timestamp:  </span><br><span class="line">Master\_SSL\_Crl:  </span><br><span class="line">Master\_SSL\_Crlpath:  </span><br><span class="line">Retrieved\_Gtid\_Set:  </span><br><span class="line">Executed\_Gtid\_Set:  </span><br><span class="line">Auto_Position: 0  </span><br><span class="line">Replicate\_Rewrite\_DB:  </span><br><span class="line">Channel_Name:  </span><br><span class="line">Master\_TLS\_Version:  </span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt;</span></span><br></pre></td></tr></table></figure><h4 id="配置主与主的同步"><a href="#配置主与主的同步" class="headerlink" title="配置主与主的同步"></a>配置主与主的同步</h4><p>上面我们配置好了<code>master1-&gt;slave1，master1-&gt;slave2</code><br>的同步。我们还需要在master1和master2直接配置互相同步对方。</p><p>现在master2上面配置master1作为它的主库。参考上面slave1和slave2上面的配置。执行如下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">change master to master_host=&#x27;172.20.0.11&#x27;, MASTER\_LOG\_FILE=&#x27;mysql-bin.000003&#x27;, MASTER\_LOG\_POS=1034;</span><br><span class="line"></span><br><span class="line">start slave user=&#x27;repl_user&#x27; password=&#x27;repl_user&#x27;;</span><br><span class="line"></span><br><span class="line">show slave status\\G</span><br></pre></td></tr></table></figure><p>然后再配置master2到master1的同步。此时我们需要查看一下master2上面的binlog日志名称和日志偏移量是多少。使用如下命令查看：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">show master status\\G</span>  </span><br><span class="line">*************************** 1. row ***************************  </span><br><span class="line">File: mysql-bin.000003  </span><br><span class="line">Position: 623  </span><br><span class="line">Binlog\_Do\_DB:  </span><br><span class="line">Binlog\_Ignore\_DB:  </span><br><span class="line">Executed\_Gtid\_Set:  </span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"><span class="meta prompt_">mysql&gt;</span></span><br></pre></td></tr></table></figure><p>然后我们登录到master1上面，执行如下命令，配置master2作为master1的主库。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">change master to master_host=&#x27;172.20.0.21&#x27;, MASTER\_LOG\_FILE=&#x27;mysql-bin.000003&#x27;, MASTER\_LOG\_POS=623;</span><br><span class="line"></span><br><span class="line">start slave user=&#x27;repl_user&#x27; password=&#x27;repl_user&#x27;;</span><br><span class="line"></span><br><span class="line">show slave status\\G</span><br></pre></td></tr></table></figure><p>验证双主双从同步的效果如下：</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62218319710000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62218319710000.png"></a></p><h3 id="安装MMM"><a href="#安装MMM" class="headerlink" title="安装MMM"></a>安装MMM</h3><h4 id="修改apt-get源"><a href="#修改apt-get源" class="headerlink" title="修改apt-get源"></a>修改apt-get源</h4><p>在下载MMM之前，我们先修改一下<code>apt-get</code><br>源，然后更新一下<code>apt-get</code><br>源。如下所示，因为此时的容器中，没有<code>vim</code><br>命令，所以我们使用<code>echo &quot;xxx&quot; &gt;/etc/apt/sources.list</code><br>的方式去更新<code>apt-get</code><br>的源。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;  </span><br><span class="line">deb http://mirrors.aliyun.com/debian/ buster main non-free contrib  </span><br><span class="line">deb http://mirrors.aliyun.com/debian-security buster/updates main  </span><br><span class="line">deb http://mirrors.aliyun.com/debian/ buster-updates main non-free contrib  </span><br><span class="line">deb http://mirrors.aliyun.com/debian/ buster-backports main non-free contrib</span><br><span class="line"></span><br><span class="line">deb-src http://mirrors.aliyun.com/debian-security buster/updates main  </span><br><span class="line">deb-src http://mirrors.aliyun.com/debian/ buster main non-free contrib  </span><br><span class="line">deb-src http://mirrors.aliyun.com/debian/ buster-updates main non-free contrib  </span><br><span class="line">deb-src http://mirrors.aliyun.com/debian/ buster-backports main non-free contrib  </span><br><span class="line">&quot; &gt; etc/apt/sources.list</span><br></pre></td></tr></table></figure><p>注意，在更新镜像源的时候，要根据自己的Debian系统的版本，我的Debian系统的版本是<code>buster</code><br>版本，所以你要根据自己的系统版本网上找到对应的镜像地址。接着，我们更新一下系统。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@master1:/etc/apt# apt-get update  </span><br><span class="line">Get:1 http://security.debian.org/debian-security buster/updates InRelease \[65.4 kB\]  </span><br><span class="line">Get:2 http://repo.mysql.com/apt/debian buster InRelease \[21.5 kB\]  </span><br><span class="line">Get:3 http://mirrors.ustc.edu.cn/debian buster InRelease \[122 kB\]  </span><br><span class="line">Get:4 http://security.debian.org/debian-security buster/updates/main amd64 Packages \[267 kB\]  </span><br><span class="line">Get:5 http://mirrors.ustc.edu.cn/debian buster-updates InRelease \[51.9 kB\]  </span><br><span class="line">Get:6 http://mirrors.ustc.edu.cn/debian buster/main amd64 Packages \[7907 kB\]  </span><br><span class="line">Get:7 http://repo.mysql.com/apt/debian buster/mysql-5.7 amd64 Packages \[5693 B\]  </span><br><span class="line">Get:8 http://mirrors.ustc.edu.cn/debian buster-updates/main amd64 Packages \[9504 B\]  </span><br><span class="line">Fetched 8450 kB in 10s (871 kB/s)  </span><br><span class="line">Reading package lists... Done  </span><br><span class="line">root@master1:/etc/apt#</span><br></pre></td></tr></table></figure><p>更新完成之后，我们先安装一下我们经常用到的几个命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install net-tools wget vim make cmake inetutils-ping iproute2 iproute2-doc -y</span><br></pre></td></tr></table></figure><h4 id="下载MMM"><a href="#下载MMM" class="headerlink" title="下载MMM"></a>下载MMM</h4><p>推荐使用源码来安装，这样可以在任何Linux系统版本上面进行安装，例如：Ubuntu、Debian、CentOS、Redhat等等。不用因为系统版本的问题找对应的<code>rpm</code><br>包，找对应的<code>deb</code><br>包。</p><p>通过如下步骤来获取MMM的源码。</p><p>登录Debian的官方网站：<a href="https://www.debin.org,然后点击跟多关于下载与软件介绍的连接./">https://www.debin.org，然后点击跟多关于下载与软件介绍的连接。</a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62227796992000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62227796992000.png"></a></p><p>此时我们会进入如下页面：<a href="https://www.debian.org/intro/index#software%EF%BC%8C%E7%84%B6%E5%90%8E%E7%82%B9%E5%87%BB%E8%BD%AF%E4%BB%B6%E5%8C%85%E8%BF%9E%E6%8E%A5%E3%80%82">https://www.debian.org/intro/index#software，然后点击软件包连接。</a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62232996113000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62232996113000.png"></a></p><p>接着，我们会进入如下页面：<a href="https://www.debian.org/distrib/packages#search_packages%EF%BC%8C%E6%A0%B9%E6%8D%AE%E9%80%89%E9%A1%B9%E8%BE%93%E5%85%A5%60mysql-mmm%60">https://www.debian.org/distrib/packages#search_packages，根据选项输入`mysql-mmm`</a><br>，点击搜索按钮。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62238380248100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62238380248100.png"></a></p><p>点击上面的搜索按钮后，进入如下页面：<a href="https://packages.debian.org/search?keywords=mysql-mmm&searchon=names&suite=oldstable&section=all%EF%BC%8C%E7%84%B6%E5%90%8E%E6%88%91%E4%BB%AC%E7%82%B9%E5%87%BB%E9%A1%B5%E9%9D%A2%E4%B8%AD%E7%9A%84Debian%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%89%88%E6%9C%AC%EF%BC%8C%E9%80%89%E6%8B%A9%60jessie%60">https://packages.debian.org/search?keywords=mysql-mmm&amp;searchon=names&amp;suite=oldstable&amp;section=all，然后我们点击页面中的Debian系统的版本，选择`jessie`</a><br>版本，因为<code>mysql-mmm</code><br>是比较老的一种MySQL考可用架构，在最新的Debian系统中，已经没有这样的软件包了，所以我们选择老版本的<code>jessie</code><br>版本，这个版本中包含<code>mysql-mmm</code><br>的源码。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62244923390700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62244923390700.png"></a></p><p>点击完成<code>jessie</code><br>之后，进入如下页面：<a href="https://packages.debian.org/search?suite=jessie&searchon=names&keywords=mysql-mmm%EF%BC%8C%E6%AD%A4%E6%97%B6%E6%88%91%E4%BB%AC%E5%B7%B2%E7%BB%8F%E6%90%9C%E7%B4%A2%E5%88%B0%E4%BA%86%60mysql-mmm%60">https://packages.debian.org/search?suite=jessie&amp;searchon=names&amp;keywords=mysql-mmm，此时我们已经搜索到了`mysql-mmm`</a><br>的软件。点击其中任何一个链接，进入详细页面。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62249976051000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62249976051000.png"></a></p><p>进入如下的页面：<a href="https://packages.debian.org/jessie/mysql-mmm-tools%EF%BC%8C%E6%88%91%E4%BB%AC%E9%80%89%E6%8B%A9%E4%B8%8B%E8%BD%BD%E6%BA%90%E7%A0%81%E6%96%87%E4%BB%B6%E3%80%82">https://packages.debian.org/jessie/mysql-mmm-tools，我们选择下载源码文件。</a></p><p>或者我们可以右键复制下载地址：<a href="http://deb.debian.org/debian/pool/main/m/mysql-mmm/mysql-mmm_2.2.1.orig.tar.gz%EF%BC%8C%E4%BD%BF%E7%94%A8wget%E5%91%BD%E4%BB%A4%E4%B8%8B%E8%BD%BD%E6%BA%90%E7%A0%81%E5%88%B0MySQL%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E3%80%82">http://deb.debian.org/debian/pool/main/m/mysql-mmm/mysql-mmm_2.2.1.orig.tar.gz，使用wget命令下载源码到MySQL服务器上。</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://deb.debian.org/debian/pool/main/m/mysql-mmm/mysql-mmm_2.2.1.orig.tar.gz</span><br></pre></td></tr></table></figure><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62257452614500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62257452614500.png"></a></p><p>如果要下载.deb文件，可以点击上面图片中的硬件架构下面的<code>all</code><br>连接，进入下面页面后，选择对应的距离我们最近镜像地址，我选择的为<code>ftp.cn.debian.org</code><br>这个镜像地址，然后复制下载链接地址，使用wget下载即可。这里贴出如下的下载示例：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget http://ftp.cn.debian.org/debian/pool/main/m/mysql-mmm/mysql-mmm-tools\_2.2.1-1.1\_all.deb  </span><br><span class="line">wget http://ftp.cn.debian.org/debian/pool/main/m/mysql-mmm/mysql-mmm-monitor\_2.2.1-1.1\_all.deb  </span><br><span class="line">wget http://ftp.cn.debian.org/debian/pool/main/m/mysql-mmm/mysql-mmm-common\_2.2.1-1.1\_all.deb  </span><br><span class="line">wget http://ftp.cn.debian.org/debian/pool/main/m/mysql-mmm/mysql-mmm-agent\_2.2.1-1.1\_all.deb</span><br></pre></td></tr></table></figure><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62278934447800.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62278934447800.png"></a></p><h4 id="编译安装MMM"><a href="#编译安装MMM" class="headerlink" title="编译安装MMM"></a>编译安装MMM</h4><p>我们是使用的MySQL的容器镜像来启动的MySQL集群，而这个从docker<br>hub上面拉取的MySQL5.7官方版本的镜像是基于Debian系统来制作的，所以我们此次安装MMM软件需要基于Debian系统来安装。</p><p>下载好的<code>mysql-mmm</code><br>如下所示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@test:~# ls -lstr  </span><br><span class="line">total 60  </span><br><span class="line">56 -rw-r--r-- 1 root root 55278 Feb 21 16:22 mysql-mmm_2.2.1.orig.tar.gz  </span><br><span class="line">4 drwxr-xr-x 2 root root 4096 Feb 21 16:24 deb  </span><br><span class="line">root@test:~#</span><br></pre></td></tr></table></figure><p>解压并且安装，但是在安装MMM之前，先安装一下它的依赖包，使用如下命令来安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install liblog-log4perl-perl libmailtools-perl liblog-dispatch-perl libclass-singleton-perl libproc-daemon-perl</span><br><span class="line">libalgorithm-diff-perl libdbi-perl libdbd-mysql-perl -y</span><br></pre></td></tr></table></figure><p>安装MMM的命令和过程如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">root@test:~# tar -zxf mysql-mmm_2.2.1.orig.tar.gz  </span><br><span class="line">root@test:~# ls -lstr  </span><br><span class="line">total 64  </span><br><span class="line">4 drwxr-xr-x 6 root root 4096 May 7 2010 mysql-mmm-2.2.1  </span><br><span class="line">56 -rw-r--r-- 1 root root 55278 Feb 21 16:22 mysql-mmm_2.2.1.orig.tar.gz  </span><br><span class="line">4 drwxr-xr-x 2 root root 4096 Feb 21 16:24 deb  </span><br><span class="line">root@test:~# cd mysql-mmm-2.2.1/  </span><br><span class="line">root@test:~/mysql-mmm-2.2.1# make install  </span><br><span class="line">mkdir -p usr/share/perl5/MMM usr/lib/mysql-mmm usr/sbin var/log/mysql-mmm etc etc/mysql-mmm etc/init.d/  </span><br><span class="line">cp -r lib/Common/ usr/share/perl5/MMM  </span><br><span class="line">\[ -f etc/mysql-mmm/mmm_common.conf \] || cp etc/mysql-mmm/mmm_common.conf etc/mysql-mmm/  </span><br><span class="line">mkdir -p usr/lib/mysql-mmm/agent/  </span><br><span class="line">cp -r lib/Agent/ usr/share/perl5/MMM  </span><br><span class="line">cp -r bin/agent/* usr/lib/mysql-mmm/agent/  </span><br><span class="line">cp -r etc/init.d/mysql-mmm-agent etc/init.d/  </span><br><span class="line">cp sbin/mmm_agentd usr/sbin  </span><br><span class="line">\[ -f etc/mysql-mmm/mmm_agent.conf \] || cp etc/mysql-mmm/mmm_agent.conf etc/mysql-mmm/  </span><br><span class="line">mkdir -p usr/lib/mysql-mmm/monitor/  </span><br><span class="line">cp -r lib/Monitor/ usr/share/perl5/MMM  </span><br><span class="line">cp -r bin/monitor/* usr/lib/mysql-mmm/monitor/  </span><br><span class="line">cp -r etc/init.d/mysql-mmm-monitor etc/init.d/  </span><br><span class="line">cp sbin/mmm\_control sbin/mmm\_mond usr/sbin  </span><br><span class="line">\[ -f etc/mysql-mmm/mmm_mon.conf \] || cp etc/mysql-mmm/mmm_mon.conf etc/mysql-mmm/  </span><br><span class="line">mkdir -p usr/lib/mysql-mmm/tools/  </span><br><span class="line">cp -r lib/Tools/ usr/share/perl5/MMM  </span><br><span class="line">cp -r bin/tools/* usr/lib/mysql-mmm/tools/  </span><br><span class="line">cp sbin/mmm\_backup sbin/mmm\_clone sbin/mmm_restore usr/sbin  </span><br><span class="line">\[ -f etc/mysql-mmm/mmm_tools.conf \] || cp etc/mysql-mmm/mmm_tools.conf etc/mysql-mmm/  </span><br><span class="line">root@test:~/mysql-mmm-2.2.1#</span><br></pre></td></tr></table></figure><p>如果在安装<code>mmm</code><br>的时候，提示没有<code>make</code><br>命令，则需要先安装<code>make</code><br>命令，安装的时候如果是Debian或Ubuntu系统，使用如下apt-get命令安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install make cmake -y</span><br></pre></td></tr></table></figure><p>如果是CentOS或Redhat系统，则使用如下的yum命令来安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install make cmake -y</span><br></pre></td></tr></table></figure><p>以上编译安装MMM需要在每一个节点都执行，包括两个master节点和两个slave节点，还有monitor监控节点也要安装。</p><p>安装完MMM之后，我们需要注意一下几个目录，这是我们使用MMM服务的基础。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">MMM各种配置文件所在目录</span>  </span><br><span class="line">/etc/mysql-mmm</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">MMM服务日志文件所在目录</span>  </span><br><span class="line">/var/log/mysql-mmm/mmm_mond.log # MMM的monitor服务的日志文件  </span><br><span class="line">/var/log/mysql-mmm/mmm_agentd.log # MMM的agent服务的日志文件</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">各种perl脚本所在目录</span>  </span><br><span class="line">/usr/lib/mysql-mmm/agent # agent客户端各种脚本所在目录  </span><br><span class="line">/usr/lib/mysql-mmm/monitor # monitor监控端各种脚本所在目录  </span><br><span class="line">/usr/lib/mysql-mmm/tools # 工具包脚本所在目录</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动和关闭MMM服务的脚本文件</span>  </span><br><span class="line">/etc/init.d/mysql-mmm-agent  </span><br><span class="line">/etc/init.d/mysql-mmm-monitor</span><br></pre></td></tr></table></figure><h3 id="创建MMM使用的MySQL用户"><a href="#创建MMM使用的MySQL用户" class="headerlink" title="创建MMM使用的MySQL用户"></a>创建MMM使用的MySQL用户</h3><p>监控用和客户端用户，在所有的节点上都要创建这两个用户。如果已经配置组从同步，在master1上创建就OK，其他节点会自动同步这两个创建好的用户到其他节点。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create user &#x27;mmm_monitor&#x27;@&#x27;172.20.0.%&#x27; identified by &#x27;mmm_monitor&#x27;;  </span><br><span class="line">grant replication client on *.* to &#x27;mmm_monitor&#x27;@&#x27;172.20.0.%&#x27;;</span><br><span class="line"></span><br><span class="line">create user &#x27;mmm_agent&#x27;@&#x27;172.20.0.%&#x27; identified by &#x27;mmm_agent&#x27;;  </span><br><span class="line">grant super, replication client, process on *.* to &#x27;mmm_agent&#x27;@&#x27;172.20.0.%&#x27;;</span><br></pre></td></tr></table></figure><p>需要注意的是这两个用户的权限不同，结合前面我们配置组从同步的哪一个用户，我们来对比一下：</p><ul><li><p>monitor：MMM监控使用的用户，拥有replication client权限就可以。</p></li><li><p>agent：MMM客户单使用的用，拥有super、replication client、process权限。</p></li><li><p>replication：组从同步使用的用户，拥有replication slave权限即可。</p></li></ul><p>最后的用户在四个节点上面的结果如下图所示：</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62291961300000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62291961300000.png"></a></p><h3 id="修改MMM的配置文件"><a href="#修改MMM的配置文件" class="headerlink" title="修改MMM的配置文件"></a>修改MMM的配置文件</h3><p>MMM所有的配置文件都在如下目录中：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@master1:/etc/mysql-mmm# ls -lstr etc/mysql-mmm/*  </span><br><span class="line">4 -rw-r----- 1 root root 321 Feb 22 21:46 etc/mysql-mmm/mmm_mon.conf  </span><br><span class="line">4 -rw-r----- 1 root root 1293 Feb 22 21:46 etc/mysql-mmm/mmm_tools.conf  </span><br><span class="line">4 -rw-r----- 1 root root 37 Feb 22 22:21 etc/mysql-mmm/mmm_agent.conf  </span><br><span class="line">4 -rw-r----- 1 root root 789 Feb 22 23:20 etc/mysql-mmm/mmm_common.conf  </span><br><span class="line">root@master1:/etc/mysql-mmm#</span><br></pre></td></tr></table></figure><p><strong>mmm_comm.conf配置文件</strong></p><p>所有5个节点中的<code>/etc/mysql-mmm/mmm_common.conf</code><br>配置文件都修改为如下所示的内容。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">root@master1:/etc/mysql-mmm# cat mmm_common.conf</span><br><span class="line"></span><br><span class="line">active\_master\_role writer</span><br><span class="line">&lt;host default&gt;  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">网卡的名称，各个主机上面网络设备的名称</span>  </span><br><span class="line">cluster_interfaceeth0</span><br><span class="line"></span><br><span class="line">pid\_path/var/run/mmm\_agentd.pid  </span><br><span class="line">bin_path/usr/lib/mysql-mmm/</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">主从复制用户名和密码</span>  </span><br><span class="line">replication\_user repl\_user  </span><br><span class="line">replication\_password repl\_user</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">MMM服务使用的anget用户名和密码</span>  </span><br><span class="line">agent\_user mmm\_agent  </span><br><span class="line">agent\_password mmm\_agent</span><br><span class="line">&lt;/host&gt;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">master1的配置信息</span>  </span><br><span class="line">&lt;host master1&gt;  </span><br><span class="line">ip 172.20.0.11  </span><br><span class="line">mode master  </span><br><span class="line">peer master2  </span><br><span class="line">&lt;/host&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">master2的配置信息</span>  </span><br><span class="line">&lt;host master2&gt;  </span><br><span class="line">ip 172.20.0.21  </span><br><span class="line">mode master  </span><br><span class="line">peer master1  </span><br><span class="line">&lt;/host&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">slave1的配置信息</span>  </span><br><span class="line">&lt;host slave1&gt;  </span><br><span class="line">ip 172.20.0.12  </span><br><span class="line">mode slave  </span><br><span class="line">&lt;/host&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">slave2的配置信息</span>  </span><br><span class="line">&lt;host slave2&gt;  </span><br><span class="line">ip 172.20.0.22  </span><br><span class="line">mode slave  </span><br><span class="line">&lt;/host&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">写虚拟IP的配置信息，指定可写的主机名称</span>  </span><br><span class="line">&lt;role writer&gt;  </span><br><span class="line">hosts master1, master2  </span><br><span class="line">ips 172.20.0.100  </span><br><span class="line">mode exclusive  </span><br><span class="line">&lt;/role&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">读虚拟IP的配置信息，指定可以提供读服务的主机名称。下面的VIP和主键名称不一定是一一对应的，VIP是随机分布到各个可读节点的。</span>  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果提供多个VIP，有可能一个节点被分配多个VIP，这样也是支持的。</span>  </span><br><span class="line">&lt;role reader&gt;  </span><br><span class="line">hosts master1, master2, slave1, slave2  </span><br><span class="line">ips 172.20.0.111, 172.20.0.211, 172.20.0.122, 172.20.0.222  </span><br><span class="line">mode balanced  </span><br><span class="line">&lt;/role&gt;</span><br><span class="line">root@master1:/etc/mysql-mmm#</span><br></pre></td></tr></table></figure><p>上面的<code>role reader</code><br>中配置的可读节点，可以根据自己的需求来配置，这里我把<code>master1, master2, slave1, slave2</code><br>都作为可读的节点，当然可以把主节点<code>master1</code><br>去掉，只配置<code>master2, slave1, slave2</code><br>三个节点。这里的<code>ips</code><br>也是我们指定的VIP的值，我们可以配置多个VIP，最好是VIP的个数和上面的host的数目一致，表示每一个提供读的节点分配一个VIP。</p><p><strong>mmm_agent.conf配置文件</strong></p><p>每一个节点上面的<code>/etc/mysql-mmm/mmm_agent.conf</code><br>配置文件中，都在第2行中，修改一下主机名称。下面给出master1节点的配置如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@master1:/etc/mysql-mmm# cat mmm_agent.conf  </span><br><span class="line">include mmm_common.conf  </span><br><span class="line">this master1  </span><br><span class="line">root@master1:/etc/mysql-mmm#</span><br></pre></td></tr></table></figure><p>其他master2、slave1、slave2各个节点也需要作出对应的修改。只要把master1改为对应的主机名称即可。</p><p><strong>mmm_mon.conf配置文件</strong></p><p>在monitor节点上，修改<code>/etc/mysql-mmm/mmm_mon.conf</code><br>配置文件，修改内容如下所示，其他四个节点不需要对这个文件做修改。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">root@monitor:/etc/mysql-mmm# cat mmm_mon.conf  </span><br><span class="line">include mmm_common.conf</span><br><span class="line"></span><br><span class="line">&lt;monitor&gt;  </span><br><span class="line">ip127.0.0.1  </span><br><span class="line">pid\_path/var/run/mmm\_mond.pid  </span><br><span class="line">bin_path/usr/lib/mysql-mmm/  </span><br><span class="line">status\_path/var/lib/misc/mmm\_mond.status  </span><br><span class="line">ping_ips172.20.0.1, 172.20.0.11, 172.20.0.21, 172.20.0.12, 172.20.0.22 # 网关IP地址，和各个节点的物理IP地址，用于监控各个节点的状态是否可用  </span><br><span class="line">&lt;/monitor&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">MMM服务使用MySQL中的monitor用户名称和密码</span>  </span><br><span class="line">&lt;host default&gt;  </span><br><span class="line">monitor\_user mmm\_monitor  </span><br><span class="line">monitor\_password mmm\_monitor  </span><br><span class="line">&lt;/host&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">debug值为0非debug模式，为1的时候表示debug模式，debug模式下，会在/var/log/mysql-mmm/mmm_mond.log日志文件中生成更多日志信息。</span>  </span><br><span class="line">debug 0  </span><br><span class="line">root@monitor:/etc/mysql-mmm#</span><br></pre></td></tr></table></figure><h3 id="启动MMM服务"><a href="#启动MMM服务" class="headerlink" title="启动MMM服务"></a>启动MMM服务</h3><p>客户端agent服务相关命令如下，客户端agent启动后日志存放在<code>/var/log/mysql-mmm/mmm_agentd.log</code><br>文件中。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/mysql-mmm-agent start  </span><br><span class="line">/etc/init.d/mysql-mmm-agent status  </span><br><span class="line">/etc/init.d/mysql-mmm-agent stop  </span><br><span class="line">/etc/init.d/mysql-mmm-agent restart</span><br></pre></td></tr></table></figure><p>监控端monitor服务相关命令如下，监控端monitor启动后日志存放在<code>/var/log/mysql-mmm/mmm_mond.log</code><br>文件中。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/mysql-mmm-monitor start  </span><br><span class="line">/etc/init.d/mysql-mmm-monitor status  </span><br><span class="line">/etc/init.d/mysql-mmm-monitor stop  </span><br><span class="line">/etc/init.d/mysql-mmm-monitor restart</span><br></pre></td></tr></table></figure><p>MMM监控状态有一个管理命令<code>mmm_control</code><br>，它的使用帮助如下所示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">root@monitor:/# mmm_control --help  </span><br><span class="line">Invalid command &#x27;--help&#x27;</span><br><span class="line"></span><br><span class="line">Valid commands are:  </span><br><span class="line">help \- show this message  </span><br><span class="line">ping \- ping monitor  </span><br><span class="line">show - show status  </span><br><span class="line">checks \[&lt;host&gt;|all \[&lt;check&gt;|all\]\] - show checks status  </span><br><span class="line">set_online &lt;host&gt;                 \- set host &lt;host&gt; online  </span><br><span class="line">set_offline &lt;host&gt;                \- set host &lt;host&gt; offline  </span><br><span class="line">mode - print current mode.  </span><br><span class="line">set_active - switch into active mode.  </span><br><span class="line">set_manual - switch into manual mode.  </span><br><span class="line">set_passive - switch into passive mode.  </span><br><span class="line">move_role \[--force\] &lt;role&gt; &lt;host&gt; \- move exclusive role &lt;role&gt; to host &lt;host&gt;  </span><br><span class="line">(Only use --force if you know what you are doing!)  </span><br><span class="line">set_ip &lt;ip&gt; &lt;host&gt;                \- set role with ip &lt;ip&gt; to host &lt;host&gt;</span><br><span class="line"></span><br><span class="line">root@monitor:/#</span><br></pre></td></tr></table></figure><p>常用的维护节点状态的命令如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mmm_control show  </span><br><span class="line">mmm_control checks all  </span><br><span class="line">mmm\_control set\_online master1  </span><br><span class="line">mmm\_control set\_online master2  </span><br><span class="line">mmm\_control set\_online slave1  </span><br><span class="line">mmm\_control set\_online slave2</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>下面分别在四个MySQL节点上执行如下命令启动并查看MMM的客户端服务</strong></p><ul><li>master1主节点上，启动和查看MMM的客户端服务如下：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@master1:/etc/mysql-mmm# etc/init.d/mysql-mmm-agent start  </span><br><span class="line">Daemon bin: &#x27;/usr/sbin/mmm_agentd&#x27;  </span><br><span class="line">Daemon pid: &#x27;/var/run/mmm_agentd.pid&#x27;  </span><br><span class="line">Starting MMM Agent daemon... Ok</span><br><span class="line"></span><br><span class="line">root@master1:/etc/mysql-mmm# etc/init.d/mysql-mmm-agent status  </span><br><span class="line">Daemon bin: &#x27;/usr/sbin/mmm_agentd&#x27;  </span><br><span class="line">Daemon pid: &#x27;/var/run/mmm_agentd.pid&#x27;  </span><br><span class="line">Checking MMM Agent process: running.  </span><br><span class="line">root@master1:/etc/mysql-mmm#</span><br></pre></td></tr></table></figure><ul><li>master2主节点上，启动和查看MMM的客户端服务如下：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@master2:/etc/mysql-mmm# etc/init.d/mysql-mmm-agent start  </span><br><span class="line">Daemon bin: &#x27;/usr/sbin/mmm_agentd&#x27;  </span><br><span class="line">Daemon pid: &#x27;/var/run/mmm_agentd.pid&#x27;  </span><br><span class="line">Starting MMM Agent daemon... Ok</span><br><span class="line"></span><br><span class="line">root@master2:/etc/mysql-mmm# etc/init.d/mysql-mmm-agent status  </span><br><span class="line">Daemon bin: &#x27;/usr/sbin/mmm_agentd&#x27;  </span><br><span class="line">Daemon pid: &#x27;/var/run/mmm_agentd.pid&#x27;  </span><br><span class="line">Checking MMM Agent process: running.  </span><br><span class="line">root@master2:/etc/mysql-mmm#</span><br></pre></td></tr></table></figure><ul><li>slave1主节点上，启动和查看MMM的客户端服务如下：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@slave1:/etc/mysql-mmm# etc/init.d/mysql-mmm-agent start  </span><br><span class="line">Daemon bin: &#x27;/usr/sbin/mmm_agentd&#x27;  </span><br><span class="line">Daemon pid: &#x27;/var/run/mmm_agentd.pid&#x27;  </span><br><span class="line">Starting MMM Agent daemon... Ok</span><br><span class="line"></span><br><span class="line">root@slave1:/etc/mysql-mmm# etc/init.d/mysql-mmm-agent status  </span><br><span class="line">Daemon bin: &#x27;/usr/sbin/mmm_agentd&#x27;  </span><br><span class="line">Daemon pid: &#x27;/var/run/mmm_agentd.pid&#x27;  </span><br><span class="line">Checking MMM Agent process: running.  </span><br><span class="line">root@slave1:/etc/mysql-mmm#</span><br></pre></td></tr></table></figure><ul><li>slave2主节点上，启动MMM的客户端服务如下：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@slave2:/etc/mysql-mmm# etc/init.d/mysql-mmm-agent start  </span><br><span class="line">Daemon bin: &#x27;/usr/sbin/mmm_agentd&#x27;  </span><br><span class="line">Daemon pid: &#x27;/var/run/mmm_agentd.pid&#x27;  </span><br><span class="line">Starting MMM Agent daemon... Ok</span><br><span class="line"></span><br><span class="line">root@slave2:/etc/mysql-mmm# etc/init.d/mysql-mmm-agent status  </span><br><span class="line">Daemon bin: &#x27;/usr/sbin/mmm_agentd&#x27;  </span><br><span class="line">Daemon pid: &#x27;/var/run/mmm_agentd.pid&#x27;  </span><br><span class="line">Checking MMM Agent process: running.  </span><br><span class="line">root@slave2:/etc/mysql-mmm#</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>下面在监控节点上执行如下命令启动并查看MMM的监控服务</strong></p><ul><li>monitor节点上，启动和查看MMM的监控端服务如下：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@monitor:/etc/mysql-mmm# etc/init.d/mysql-mmm-monitor start  </span><br><span class="line">Daemon bin: &#x27;/usr/sbin/mmm_mond&#x27;  </span><br><span class="line">Daemon pid: &#x27;/var/run/mmm_mond.pid&#x27;  </span><br><span class="line">Starting MMM Monitor daemon: Ok</span><br><span class="line"></span><br><span class="line">root@monitor:/etc/mysql-mmm# etc/init.d/mysql-mmm-monitor status  </span><br><span class="line">Daemon bin: &#x27;/usr/sbin/mmm_mond&#x27;  </span><br><span class="line">Daemon pid: &#x27;/var/run/mmm_mond.pid&#x27;  </span><br><span class="line">Checking MMM Monitor process: running.  </span><br><span class="line">root@monitor:/etc/mysql-mmm#</span><br></pre></td></tr></table></figure><ul><li>在monitor节点，查看监控的状态：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">root@monitor:/etc/mysql-mmm# mmm_control show  </span><br><span class="line">master1(172.20.0.11) master/AWAITING_RECOVERY. Roles:  </span><br><span class="line">master2(172.20.0.21) master/AWAITING_RECOVERY. Roles:  </span><br><span class="line">slave1(172.20.0.12) slave/AWAITING_RECOVERY. Roles:  </span><br><span class="line">slave2(172.20.0.22) slave/AWAITING_RECOVERY. Roles:</span><br><span class="line"></span><br><span class="line">root@monitor:/etc/mysql-mmm# mmm\_control set\_online master1;  </span><br><span class="line">OK: State of &#x27;master1&#x27; changed to ONLINE. Now you can wait some time and check its new roles!  </span><br><span class="line">root@monitor:/etc/mysql-mmm# mmm\_control set\_online master2  </span><br><span class="line">OK: State of &#x27;master2&#x27; changed to ONLINE. Now you can wait some time and check its new roles!  </span><br><span class="line">root@monitor:/etc/mysql-mmm# mmm\_control set\_online slave1  </span><br><span class="line">OK: State of &#x27;slave1&#x27; changed to ONLINE. Now you can wait some time and check its new roles!  </span><br><span class="line">root@monitor:/etc/mysql-mmm# mmm\_control set\_online slave2  </span><br><span class="line">OK: State of &#x27;slave2&#x27; changed to ONLINE. Now you can wait some time and check its new roles!  </span><br><span class="line">root@monitor:/etc/mysql-mmm# mmm_control show  </span><br><span class="line">master1(172.20.0.11) master/ONLINE. Roles: reader(172.20.0.111), writer(172.20.0.100)  </span><br><span class="line">master2(172.20.0.21) master/ONLINE. Roles: reader(172.20.0.211)  </span><br><span class="line">slave1(172.20.0.12) slave/ONLINE. Roles: reader(172.20.0.122)  </span><br><span class="line">slave2(172.20.0.22) slave/ONLINE. Roles: reader(172.20.0.222)</span><br><span class="line"></span><br><span class="line">root@monitor:/etc/mysql-mmm#</span><br></pre></td></tr></table></figure><p><strong>问题排查1：monitor服务不能正常启动？</strong></p><p>当在monitor节点启动监控服务后，监控服务一会就异常退出了。原因是在使用docker启动集群节点的时候没有使用<code>--cap-add NET_ADMIN</code><br>参数，没有这个参数就没有办法在容器只用使用虚拟VIP的功能。在删除容器后，增加参数重新运行后，才运行起来。</p><p>后来，又发现monitor节点启监控服务器仍然失败，查看日志<code>/var/log/mysql-mmm/mmm_mond.log</code><br>，如下所示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@monitor:/etc/mysql-mmm# tail -f var/log/mysql-mmm/mmm_mond.log  </span><br><span class="line">2021/02/22 23:26:27 INFO Waiting for network connection...  </span><br><span class="line">2021/02/22 23:26:27 INFO Spawning checker &#x27;ping_ip&#x27;...  </span><br><span class="line">2021/02/22 23:26:27 INFO Shutting down checker &#x27;ping_ip&#x27;...  </span><br><span class="line">2021/02/22 23:26:27 INFO Network connection is available.  </span><br><span class="line">2021/02/22 23:26:27 FATAL Child exited with exitcode 255, restarting after 10 second sleep</span><br></pre></td></tr></table></figure><p>修改<code>/etc/mysql-mmm/mmm_mon.conf</code><br>配置文件中的<code>debug</code><br>的值为<code>1</code><br>，表示以<code>debug</code><br>的模式运行monitor服务，此时我们再重新启动monitor服务，查看输出的详细错误日志如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root@monitor:/etc/mysql-mmm# etc/init.d/mysql-mmm-monitor start  </span><br><span class="line">Daemon bin: &#x27;/usr/sbin/mmm_mond&#x27;  </span><br><span class="line">Daemon pid: &#x27;/var/run/mmm_mond.pid&#x27;  </span><br><span class="line">Starting MMM Monitor daemon: 2021/02/22 23:30:17 INFO STARTING...  </span><br><span class="line">2021/02/22 23:30:17 DEBUG Created pid file &#x27;/var/run/mmm_mond.pid&#x27; with pid 5330  </span><br><span class="line">2021/02/22 23:30:17 INFO Waiting for network connection...  </span><br><span class="line">2021/02/22 23:30:17 INFO Spawning checker &#x27;ping_ip&#x27;...  </span><br><span class="line">2021/02/22 23:30:17 DEBUG IP &#x27;172.20.0.1&#x27; is reachable: OK  </span><br><span class="line">2021/02/22 23:30:17 INFO Shutting down checker &#x27;ping_ip&#x27;...  </span><br><span class="line">2021/02/22 23:30:17 INFO Network connection is available.  </span><br><span class="line">Use of uninitialized value $old_state in string ne at usr/share/perl5/MMM/Monitor/Agent.pm line 42.  </span><br><span class="line">2021/02/22 23:30:17 FATAL Child exited with exitcode 255, restarting after 10 second sleep</span><br></pre></td></tr></table></figure><p>于是去修改了<code>/usr/share/perl5/MMM/Monitor/Agent.pm</code><br>文件，在第41行增加如下内容，保存退出，重新启动monitor服务。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if (! defined($old\_state)) &#123; $old\_state = &#x27;certinally not new_state&#x27;; &#125;</span><br></pre></td></tr></table></figure><p>然后再次重启monitor服务，启动成功。然后把<code>/etc/mysql-mmm/mmm_mon.conf</code><br>配置文件中的<code>debug</code><br>的值再次修改为<code>0</code><br>，关闭<code>debug</code><br>模式再次重启monitor服务。此时查看monitor服务的日志内容如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@monitor:/# tail -f var/log/mysql-mmm/mmm_mond.log  </span><br><span class="line">2021/02/22 23:42:43 INFO Check &#x27;rep_backlog&#x27; on &#x27;slave1&#x27; is ok!  </span><br><span class="line">2021/02/22 23:42:43 INFO Check &#x27;rep_backlog&#x27; on &#x27;master2&#x27; is ok!  </span><br><span class="line">2021/02/22 23:42:43 INFO Check &#x27;rep_threads&#x27; on &#x27;master1&#x27; is ok!  </span><br><span class="line">2021/02/22 23:42:43 INFO Check &#x27;rep_threads&#x27; on &#x27;slave2&#x27; is ok!  </span><br><span class="line">2021/02/22 23:42:43 INFO Check &#x27;rep_threads&#x27; on &#x27;slave1&#x27; is ok!  </span><br><span class="line">2021/02/22 23:42:43 INFO Check &#x27;rep_threads&#x27; on &#x27;master2&#x27; is ok!  </span><br><span class="line">2021/02/22 23:42:43 INFO Check &#x27;ping&#x27; on &#x27;master1&#x27; is ok!  </span><br><span class="line">2021/02/22 23:42:43 INFO Check &#x27;ping&#x27; on &#x27;slave2&#x27; is ok!  </span><br><span class="line">2021/02/22 23:42:43 INFO Check &#x27;ping&#x27; on &#x27;slave1&#x27; is ok!  </span><br><span class="line">2021/02/22 23:42:43 INFO Check &#x27;ping&#x27; on &#x27;master2&#x27; is ok!</span><br></pre></td></tr></table></figure><p><strong>问题排查2：虚拟IP不能再各个节点生成？</strong></p><p>启动MMM后，发现不能通过VIP访问MySQL数据库，去各个节点使用<code>ifconfig -a</code><br>或者<code>ip addr</code><br>命令查看发现没有对应的VIP生成。查看了各个节点MMM agent服务的日志文件<code>/var/log/mysql-mmm/mmm_agent.log</code><br>，发现如下错误信息：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@master1:/# tail -f var/log/mysql-mmm/mmm_agentd.log  </span><br><span class="line">2021/02/23 17:16:19 FATAL Couldn&#x27;t configure IP &#x27;172.20.0.111&#x27; on interface &#x27;eth0&#x27;: undef  </span><br><span class="line">2021/02/23 17:16:19 FATAL Couldn&#x27;t allow writes: undef  </span><br><span class="line">2021/02/23 17:16:22 FATAL Couldn&#x27;t configure IP &#x27;172.20.0.111&#x27; on interface &#x27;eth0&#x27;: undef  </span><br><span class="line">2021/02/23 17:16:22 FATAL Couldn&#x27;t allow writes: undef</span><br></pre></td></tr></table></figure><p>经过排查发现是在设置VIP的时候失败，设置客户端VIP的脚本如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/lib/mysql-mmm/agent/configure_ip</span><br></pre></td></tr></table></figure><p>执行上面的脚本发现如下错误：</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62316071988900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62316071988900.png"></a></p><p>提示我们，需要在perl中安装arp.pm包。安装的时候，为了提高速度，我们修改一下perl安装模块的时候使用的镜像源。</p><p>修改perl安装包的时候使用的镜像源，参考如下方式修改：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">root@master1:/# perl -MCPAN -e shell  </span><br><span class="line">cpan\[5\]&gt; o conf urllist  </span><br><span class="line">urllist  </span><br><span class="line">0 \[http://www.cpan.org/\] </span><br><span class="line">Type &#x27;o conf&#x27; to view all configuration items</span><br><span class="line"></span><br><span class="line">cpan\[6\]&gt; o conf urllist push http://mirrors.aliyun.com/CPAN/  </span><br><span class="line">Please use &#x27;o conf commit&#x27; to make the config permanent!</span><br><span class="line"></span><br><span class="line">cpan\[7\]&gt; o conf commit  </span><br><span class="line">commit: wrote &#x27;/root/.cpan/CPAN/MyConfig.pm&#x27;</span><br><span class="line"></span><br><span class="line">cpan\[8\]&gt; o conf urllist  </span><br><span class="line">urllist  </span><br><span class="line">0 \[http://www.cpan.org/\] </span><br><span class="line">1 \[http://mirrors.aliyun.com/CPAN/\] </span><br><span class="line">Type &#x27;o conf&#x27; to view all configuration items</span><br><span class="line"></span><br><span class="line">cpan\[9\]&gt; install Net::ARP</span><br><span class="line"></span><br><span class="line">cpan\[10\]&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>其中各个命令的含义如下：</p><ul><li><p><code>o conf urllist</code><br>：查看的当前的镜像源</p></li><li><p><code>o conf urllist push http://mirrors.aliyun.com/CPAN/</code><br>：添加阿里的perl镜像源</p></li><li><p><code>o conf commit</code><br>：提交对镜像源的修改</p></li><li><p><code>install Net::ARP</code><br>：安装arp.pm包。</p></li></ul><p>经过上面的安装方式，发现安装失败。于是下载源码自己编译安装这个包。参考如下命令顺序来编译安装。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载源码文件</span>  </span><br><span class="line">wget https://cpan.metacpan.org/authors/id/C/CR/CRAZYDJ/Net-ARP-1.0.11.tgz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">解压下载后的文件</span>  </span><br><span class="line">tar -zxvf Net-ARP-1.0.11.tgz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入下载目录</span>  </span><br><span class="line">cd Net-ARP-1.0.11</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">执行编译</span>  </span><br><span class="line">perl Makefile.PL</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">执行安装</span>  </span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>上面安装Net-ARP包的操作，需要在除了monitor节点的四个节点上都执行安装一下。</p><p>最后所有节点的IP地址和VIP地址如下所示：</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62324916880500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62324916880500.png"></a></p><h3 id="验证VIP访问数据库"><a href="#验证VIP访问数据库" class="headerlink" title="验证VIP访问数据库"></a>验证VIP访问数据库</h3><p>当我们的MMM客户段服务在四个MySQL数据库实例中启动，并且MMM监控服务在monitor节点启动之后。我们在monitor节点上面尝试使用各个VIP看能否正常连接到MySQL数据库。验证的结果如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">root@monitor:/etc/mysql-mmm#  </span><br><span class="line">root@monitor:/etc/mysql-mmm# mmm_control show  </span><br><span class="line">master1(172.20.0.11) master/ONLINE. Roles: reader(172.20.0.111), writer(172.20.0.100)  </span><br><span class="line">master2(172.20.0.21) master/ONLINE. Roles: reader(172.20.0.122)  </span><br><span class="line">slave1(172.20.0.12) slave/ONLINE. Roles: reader(172.20.0.211)  </span><br><span class="line">slave2(172.20.0.22) slave/ONLINE. Roles: reader(172.20.0.222)</span><br><span class="line"></span><br><span class="line">root@monitor:/etc/mysql-mmm# mysql -uroot -proot -h172.20.0.100 -e &#x27;select @@hostname&#x27;  </span><br><span class="line">mysql: \[Warning\] Using a password on the command line interface can be insecure.  </span><br><span class="line">+---------------+  </span><br><span class="line">| @@hostname |  </span><br><span class="line">+---------------+  </span><br><span class="line">| master1.mysql |  </span><br><span class="line">+---------------+  </span><br><span class="line">root@monitor:/etc/mysql-mmm# mysql -uroot -proot -h172.20.0.111 -e &#x27;select @@hostname&#x27;  </span><br><span class="line">mysql: \[Warning\] Using a password on the command line interface can be insecure.  </span><br><span class="line">+---------------+  </span><br><span class="line">| @@hostname |  </span><br><span class="line">+---------------+  </span><br><span class="line">| master1.mysql |  </span><br><span class="line">+---------------+  </span><br><span class="line">root@monitor:/etc/mysql-mmm# mysql -uroot -proot -h172.20.0.122 -e &#x27;select @@hostname&#x27;  </span><br><span class="line">mysql: \[Warning\] Using a password on the command line interface can be insecure.  </span><br><span class="line">+---------------+  </span><br><span class="line">| @@hostname |  </span><br><span class="line">+---------------+  </span><br><span class="line">| master2.mysql |  </span><br><span class="line">+---------------+  </span><br><span class="line">root@monitor:/etc/mysql-mmm# mysql -uroot -proot -h172.20.0.211 -e &#x27;select @@hostname&#x27;  </span><br><span class="line">mysql: \[Warning\] Using a password on the command line interface can be insecure.  </span><br><span class="line">+--------------+  </span><br><span class="line">| @@hostname |  </span><br><span class="line">+--------------+  </span><br><span class="line">| slave1.mysql |  </span><br><span class="line">+--------------+  </span><br><span class="line">root@monitor:/etc/mysql-mmm# mysql -uroot -proot -h172.20.0.222 -e &#x27;select @@hostname&#x27;  </span><br><span class="line">mysql: \[Warning\] Using a password on the command line interface can be insecure.  </span><br><span class="line">+--------------+  </span><br><span class="line">| @@hostname |  </span><br><span class="line">+--------------+  </span><br><span class="line">| slave2.mysql |  </span><br><span class="line">+--------------+  </span><br><span class="line">root@monitor:/etc/mysql-mmm#</span><br></pre></td></tr></table></figure><h3 id="验证MMM的高可用"><a href="#验证MMM的高可用" class="headerlink" title="验证MMM的高可用"></a>验证MMM的高可用</h3><p>我们把master1节点上面的MySQL服务停止掉，来验证一下是否会把主从同步的源头从master1切换为master2上面，并且我们在monitor节点上，仍然可以通过writer<br>vip 去连接到MySQL上。</p><p>停止master1节点上面的MySQL服务，在master1节点上，执行如下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@master1:~/Net-ARP-1.0.11# etc/init.d/mysql stop  </span><br><span class="line">............  </span><br><span class="line">\[info\] MySQL Community Server 5.7.31 is stopped.  </span><br><span class="line">root@master1:~/Net-ARP-1.0.11# %   </span><br><span class="line">➜  ~</span><br></pre></td></tr></table></figure><p>接着，我们在monitor节点上，查看MMM监控各个节点服务的状态，发现master1节点以及下线了，并且我们的writer<br>ip，已经从原先的master1节点迁移到master2节点上了。如下所示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">root@monitor:/etc/mysql-mmm# mmm_control show  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Warning: agent on host master1 is not reachable</span>  </span><br><span class="line">master1(172.20.0.11) master/HARD_OFFLINE. Roles:  </span><br><span class="line">master2(172.20.0.21) master/ONLINE. Roles: reader(172.20.0.122), writer(172.20.0.100)  </span><br><span class="line">slave1(172.20.0.12) slave/ONLINE. Roles: reader(172.20.0.111), reader(172.20.0.211)  </span><br><span class="line">slave2(172.20.0.22) slave/ONLINE. Roles: reader(172.20.0.222)</span><br><span class="line"></span><br><span class="line">root@monitor:/etc/mysql-mmm# mmm_control checks all  </span><br><span class="line">slave2 ping \[last change: 2021/02/23 16:19:44\] OK  </span><br><span class="line">slave2 mysql \[last change: 2021/02/23 16:19:44\] OK  </span><br><span class="line">slave2 rep_threads \[last change: 2021/02/23 16:19:44\] OK  </span><br><span class="line">slave2 rep_backlog \[last change: 2021/02/23 16:19:44\] OK: Backlog is null  </span><br><span class="line">master1 ping \[last change: 2021/02/23 18:44:57\] ERROR: Could not ping 172.20.0.11  </span><br><span class="line">master1 mysql \[last change: 2021/02/23 18:44:40\] ERROR: Connect error (host = 172.20.0.11:3306, user = mmm_monitor)!</span><br><span class="line">Can&#x27;t connect to MySQL server on &#x27;172.20.0.11&#x27; (115)  </span><br><span class="line">master1 rep_threads \[last change: 2021/02/23 16:19:44\] OK  </span><br><span class="line">master1 rep_backlog \[last change: 2021/02/23 16:19:44\] OK: Backlog is null  </span><br><span class="line">slave1 ping \[last change: 2021/02/23 16:19:44\] OK  </span><br><span class="line">slave1 mysql \[last change: 2021/02/23 16:19:44\] OK  </span><br><span class="line">slave1 rep_threads \[last change: 2021/02/23 16:19:44\] OK  </span><br><span class="line">slave1 rep_backlog \[last change: 2021/02/23 16:19:44\] OK: Backlog is null  </span><br><span class="line">master2 ping \[last change: 2021/02/23 16:19:44\] OK  </span><br><span class="line">master2 mysql \[last change: 2021/02/23 16:19:44\] OK  </span><br><span class="line">master2 rep_threads \[last change: 2021/02/23 16:19:44\] OK  </span><br><span class="line">master2 rep_backlog \[last change: 2021/02/23 16:19:44\] OK: Backlog is null</span><br><span class="line"></span><br><span class="line">root@monitor:/etc/mysql-mmm#</span><br></pre></td></tr></table></figure><p>此时我们看到master2上面的IP地址信息如下，<code>writer vip 172.20.0.100</code><br>已经迁移到了master2主机上了。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">root@master2:~/Net-ARP-1.0.11# ip addr  </span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000  </span><br><span class="line">link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00  </span><br><span class="line">inet 127.0.0.1/8 scope host lo  </span><br><span class="line">valid\_lft forever preferred\_lft forever  </span><br><span class="line">2: tunl0@NONE: &lt;NOARP&gt; mtu 1480 qdisc noop state DOWN group default qlen 1000  </span><br><span class="line">link/ipip 0.0.0.0 brd 0.0.0.0  </span><br><span class="line">3: ip6tnl0@NONE: &lt;NOARP&gt; mtu 1452 qdisc noop state DOWN group default qlen 1000  </span><br><span class="line">link/tunnel6 :: brd ::  </span><br><span class="line">12: eth0@if13: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default  </span><br><span class="line">link/ether 02:42:ac:14:00:15 brd ff:ff:ff:ff:ff:ff link-netnsid 0  </span><br><span class="line">inet 172.20.0.21/24 brd 172.20.0.255 scope global eth0  </span><br><span class="line">valid\_lft forever preferred\_lft forever  </span><br><span class="line">inet 172.20.0.122/32 scope global eth0  </span><br><span class="line">valid\_lft forever preferred\_lft forever  </span><br><span class="line">inet 172.20.0.100/32 scope global eth0  </span><br><span class="line">valid\_lft forever preferred\_lft forever  </span><br><span class="line">root@master2:~/Net-ARP-1.0.11#</span><br></pre></td></tr></table></figure><p>在monitor节点上，查看MMM的监控服务器的日志信息如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">root@monitor:/etc/mysql-mmm# tail -20 /var/log/mysql-mmm/mmm_mond.log  </span><br><span class="line">2021/02/23 16:19:49 INFO Check &#x27;mysql&#x27; on &#x27;slave2&#x27; is ok!  </span><br><span class="line">2021/02/23 16:19:49 INFO Check &#x27;mysql&#x27; on &#x27;master1&#x27; is ok!  </span><br><span class="line">2021/02/23 16:19:49 INFO Check &#x27;mysql&#x27; on &#x27;slave1&#x27; is ok!  </span><br><span class="line">2021/02/23 16:19:49 INFO Check &#x27;mysql&#x27; on &#x27;master2&#x27; is ok!  </span><br><span class="line">2021/02/23 18:44:30 WARN Check &#x27;rep_threads&#x27; on &#x27;master1&#x27; is in unknown state! Message: UNKNOWN: Connect error (host =</span><br><span class="line">172.20.0.11:3306, user = mmm_monitor)! Can&#x27;t connect to MySQL server on &#x27;172.20.0.11&#x27; (115)  </span><br><span class="line">2021/02/23 18:44:30 WARN Check &#x27;rep_backlog&#x27; on &#x27;master1&#x27; is in unknown state! Message: UNKNOWN: Connect error (host =</span><br><span class="line">172.20.0.11:3306, user = mmm_monitor)! Can&#x27;t connect to MySQL server on &#x27;172.20.0.11&#x27; (115)  </span><br><span class="line">2021/02/23 18:44:40 ERROR Check &#x27;mysql&#x27; on &#x27;master1&#x27; has failed for 10 seconds! Message: ERROR: Connect error (host =</span><br><span class="line">172.20.0.11:3306, user = mmm_monitor)! Can&#x27;t connect to MySQL server on &#x27;172.20.0.11&#x27; (115)  </span><br><span class="line">2021/02/23 18:44:41 FATAL State of host &#x27;master1&#x27; changed from ONLINE to HARD_OFFLINE (ping: OK, mysql: not OK)  </span><br><span class="line">2021/02/23 18:44:41 INFO Removing all roles from host &#x27;master1&#x27;:  </span><br><span class="line">2021/02/23 18:44:41 INFO Removed role &#x27;reader(172.20.0.111)&#x27; from host &#x27;master1&#x27;  </span><br><span class="line">2021/02/23 18:44:41 INFO Removed role &#x27;writer(172.20.0.100)&#x27; from host &#x27;master1&#x27;  </span><br><span class="line">2021/02/23 18:44:41 FATAL Can&#x27;t reach agent on host &#x27;master1&#x27;  </span><br><span class="line">2021/02/23 18:44:41 ERROR Can&#x27;t send offline status notification to &#x27;master1&#x27; \- killing it!  </span><br><span class="line">2021/02/23 18:44:41 FATAL Could not kill host &#x27;master1&#x27; \- there may be some duplicate ips now! (There&#x27;s no binary</span><br><span class="line">configured for killing hosts.)  </span><br><span class="line">2021/02/23 18:44:41 INFO Orphaned role &#x27;writer(172.20.0.100)&#x27; has been assigned to &#x27;master2&#x27;  </span><br><span class="line">2021/02/23 18:44:41 INFO Orphaned role &#x27;reader(172.20.0.111)&#x27; has been assigned to &#x27;slave1&#x27;  </span><br><span class="line">2021/02/23 18:44:57 ERROR Check &#x27;ping&#x27; on &#x27;master1&#x27; has failed for 11 seconds! Message: ERROR: Could not ping</span><br><span class="line">172.20.0.11  </span><br><span class="line">root@monitor:/etc/mysql-mmm#</span><br></pre></td></tr></table></figure><p>我们在monitor节点上，再次尝试连接到<code>writer vip 172.20.0.100</code><br>上面，发现已经连接到master2上面了，如下所示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@monitor:/etc/mysql-mmm# mysql -uroot -proot -h172.20.0.100 -e &#x27;select @@hostname&#x27;  </span><br><span class="line">mysql: \[Warning\] Using a password on the command line interface can be insecure.  </span><br><span class="line">+---------------+  </span><br><span class="line">| @@hostname |  </span><br><span class="line">+---------------+  </span><br><span class="line">| master2.mysql |  </span><br><span class="line">+---------------+  </span><br><span class="line">root@monitor:/etc/mysql-mmm#</span><br></pre></td></tr></table></figure><p>下面我们看一下slave1和slave2节点主从同步的配置是否，自动切换到master2节点上。分别登录到slave1和slave2节点上执行如下SQL命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from mysql.slave\_master\_info\\G</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>查看结果如下：</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62340114810300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62340114810300.png"></a></p><p>通过下面的截图，可以看出在新的主节点上面执行的插入数据，是可以正常的同步到两个slave从节点上。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62343970188500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-10/62343970188500.png"></a></p><p>下面我们把master1节点重新启动，让MySQL数据库服务恢复。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动master1容器</span>  </span><br><span class="line">docker start mysql-ha-mmm-master1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入master1容器</span>  </span><br><span class="line">docker exec -it mysql-ha-mmm-master1 /bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动master1上面的MMM的agent服务</span>  </span><br><span class="line">/etc/init.d/mysql-mmm-agent start</span><br></pre></td></tr></table></figure><p>进入monitor节点上，查看各个节点的状态：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在master1启动后，在monitor节点查看各个节点状态的时候，发现已经不再有<span class="string">&quot;Warning: agent on host master1 is not reachable&quot;</span></span></span><br><span class="line">的警告了。  </span><br><span class="line">root@monitor:/etc/mysql-mmm# mmm_control show  </span><br><span class="line">master1(172.20.0.11) master/AWAITING_RECOVERY. Roles:  </span><br><span class="line">master2(172.20.0.21) master/ONLINE. Roles: reader(172.20.0.122), writer(172.20.0.100)  </span><br><span class="line">slave1(172.20.0.12) slave/ONLINE. Roles: reader(172.20.0.111), reader(172.20.0.211)  </span><br><span class="line">slave2(172.20.0.22) slave/ONLINE. Roles: reader(172.20.0.222)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置master1节点上线</span>  </span><br><span class="line">root@monitor:/etc/mysql-mmm# mmm\_control set\_online master1  </span><br><span class="line">OK: State of &#x27;master1&#x27; changed to ONLINE. Now you can wait some time and check its new roles!</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">再次查看各个节点的状态，发现master1已经上线了。但是它此时成立备用的主节点了，并且给他分配了一个reader VIP地址。</span>  </span><br><span class="line">root@monitor:/etc/mysql-mmm# mmm_control show  </span><br><span class="line">master1(172.20.0.11) master/ONLINE. Roles: reader(172.20.0.211)  </span><br><span class="line">master2(172.20.0.21) master/ONLINE. Roles: reader(172.20.0.122), writer(172.20.0.100)  </span><br><span class="line">slave1(172.20.0.12) slave/ONLINE. Roles: reader(172.20.0.111)  </span><br><span class="line">slave2(172.20.0.22) slave/ONLINE. Roles: reader(172.20.0.222)</span><br><span class="line"></span><br><span class="line">root@monitor:/etc/mysql-mmm#</span><br></pre></td></tr></table></figure><p><strong>MMM高可用验证结果小结：</strong></p><ul><li><p>master1节点宕机之后，master2节点会接管master1的所有任务。</p></li><li><p>writer VIP会自动从master1上面转移到master2上面。</p></li><li><p>两个从节点slave1和slave2会自动的把主从同步的链路从master1切换到master2上面。</p></li><li><p>如果在master1上除了提供写的服务，还提供可读的服务，也就是为其分配了reader VIP，那么当master1宕机后，这个reader<br>VIP不会丢失，会被迁移到其他任意一个节点上。</p></li><li><p>在master1重启后，在monitor节点通过命令<code>mmm_control set_online master1</code><br>设置master1节点上线后，master1节点不会接管现有master2的角色，而是作为一个备用主节点集群中提供服务。此时，只有master2节点宕机后，master1节点才会重新成为主节点的角色。</p></li><li><p>随着master1和master2节点的宕机和恢复，提供写的VIP会在两个节点上来回切换。</p></li></ul><p>对于这个5个服务器组成的高可用集群，如果我们担心MMM的monitor节点是单节点，不是高可用的monitor服务，我们可以在选择一台服务器，在上面部署另外一个monitor服务，使用keepalive组件，保证两个monitor服务至少有一个可用。这样就更加完美了。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>上面就是关于MySQL高可用架构-MMM架构的搭建过程。期间涉及到了MySQL主从同步集群的搭建，我们搭建了一个双主双从的集群，然后基于这个集群，又在每一个节点上面编译安装了MMM插件，在每一个节点上启动了MMM的agent服务。还选择了一台服务器，安装MMM监控服务。</p><p>希望对你有所帮助，后续会分享其他高可用架构搭建的方式。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>MySQL高可用九种方案</title>
      <link href="/cd621e01.html"/>
      <url>/cd621e01.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://www.bilibili.com/video/BV1m44y1Q7ZF/?spm_id_from=333.1007.top_right_bar_window_history.content.click&vd_source=e20dd501f3625acc92539eae83023bbb">参考视频</a></p><hr><h1 id="先总结下各方案硬性要求"><a href="#先总结下各方案硬性要求" class="headerlink" title="先总结下各方案硬性要求"></a>先总结下各方案硬性要求</h1><table><thead><tr><th>选型</th><th>端口需求</th><th>SSH通信</th><th>最低节点数</th><th>硬件要求</th></tr></thead><tbody><tr><td>MMM</td><td>3306</td><td>不需要</td><td>2</td><td>与普通MySQL实例相同</td></tr><tr><td>MHA</td><td>3306</td><td>需要</td><td>2</td><td>与普通MySQL实例相同</td></tr><tr><td>MGR</td><td>3306, 33061</td><td>不需要</td><td>3</td><td>与普通MySQL实例相同</td></tr><tr><td>MySQL Cluster</td><td>1186, 11860, 3306</td><td>需要</td><td>3 数据节点 + 2 管理节点</td><td>高内存、高存储、高速网络</td></tr><tr><td>Galera Cluster</td><td>4567, 4568, 4444</td><td>需要</td><td>3</td><td>高内存、高存储、高速网络</td></tr><tr><td>PXC (Percona XtraDB Cluster)</td><td>3306, 4567, 4568, 4444</td><td>需要</td><td>3</td><td>高内存、高存储、高速网络</td></tr></tbody></table><h1 id="MMM方案（单主）"><a href="#MMM方案（单主）" class="headerlink" title="MMM方案（单主）"></a>MMM方案（单主）</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109161189180600.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109161189180600.png"></a></p><p>MySQL高可用方案之MMM（Multi-Master Replication Manager）是一种常用的解决方案，用于实现MySQL数据库的高可用性和负载均衡。</p><p>MMM基于MySQL的复制机制，通过在多个MySQL实例之间进行主从复制，实现了数据的同步和备份。它的主要特点是可以实现多主复制，即多个MySQL实例可以同时作为主节点接收写操作，并将这些写操作同步到其他从节点上。</p><p>MMM的工作原理如下：</p><ol><li>MMM通过监控MySQL实例的状态来实现故障检测和自动故障转移。当一个主节点发生故障时，MMM会自动将其中一个从节点提升为新的主节点，确保数据库的可用性。</li><li>MMM还可以根据负载情况自动进行负载均衡。它可以根据每个节点的负载情况，将读操作分发到不同的节点上，从而提高系统的整体性能。</li><li>MMM还提供了一些管理工具，可以方便地进行节点的添加、删除和配置修改等操作。</li></ol><p>使用MMM可以有效地提高MySQL数据库的可用性和性能。然而，需要注意的是，MMM并不能解决所有的高可用问题，例如**网络分区和数据一致性<br>**等问题。在实际应用中，还需要结合其他技术和方案，如数据库集群、数据复制和数据备份等，来构建更完善的高可用架构。</p><p>MMM作为MySQL高可用方案，具有以下优点和缺点：</p><p>优点：</p><ol><li>高可用性：MMM通过自动故障检测和故障转移机制，可以快速将一个从节点提升为新的主节点，从而实现数据库的高可用性，减少系统的停机时间。</li><li>负载均衡：MMM可以根据节点的负载情况，将读操作分发到不同的节点上，从而实现负载均衡，提高系统的整体性能。</li><li>简单易用：MMM提供了一些管理工具，可以方便地进行节点的添加、删除和配置修改等操作，使得系统的管理和维护变得简单易用。</li></ol><p>缺点：</p><ol><li>数据一致性：由于MMM采用的是异步复制机制，主节点和从节点之间存在一定的延迟，可能导致数据的不一致。在某些场景下，可能需要额外的措施来确保数据的一致性。</li><li>单点故障：虽然MMM可以自动进行故障转移，但在故障转移过程中，可能会存在一段时间的数据库不可用。如果MMM本身发生故障，可能会导致整个系统的不可用。</li><li>配置复杂性：MMM的配置相对复杂，需要对MySQL的复制机制和MMM的工作原理有一定的了解。在配置过程中，需要注意各个节点的配置一致性和正确性。</li></ol><p><a href="http://blog.zysicyj.top/mysql_mmm">http://blog.zysicyj.top/mysql_mmm</a></p><h1 id="MHA架构（单主）"><a href="#MHA架构（单主）" class="headerlink" title="MHA架构（单主）"></a>MHA架构（单主）</h1><p>架构图</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109459060983300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/109459060983300.png"></a></p><p>MySQL MHA（Master High Availability）是一种用于MySQL数据库的高可用性架构。它的设计目标是确保在主数据库发生故障时，能够快速自动地将备库（Slave）提升为新的主库，以保证系统的连续性和可用性。</p><p>MHA架构由以下几个核心组件组成：</p><ol><li><p>Manager节点：Manager节点是MHA的核心组件，负责监控主库的状态并自动执行故障切换操作。它通过与MySQL主库和备库建立SSH连接，实时监测主库的状态，并在主库发生故障时触发自动故障切换。</p></li><li><p>Master节点：Master节点是MySQL数据库的主库，负责处理所有的写操作和读操作。MHA会通过与Master节点建立SSH连接，实时监测主库的状态。</p></li><li><p>Slave节点：Slave节点是MySQL数据库的备库，负责复制主库的数据。MHA会通过与Slave节点建立SSH连接，实时监测备库的状态。</p></li></ol><p>MHA的工作流程如下：</p><ol><li><p>Manager节点通过SSH连接与Master节点和Slave节点进行通信，实时监测它们的状态。</p></li><li><p>当Manager节点检测到Master节点发生故障时，它会自动将一个备库提升为新的主库。</p></li><li><p>在故障切换期间，Manager节点会自动更新应用程序的配置文件，将新的主库信息通知给应用程序。</p></li><li><p>一旦新的主库上线，Manager节点会自动将其他备库重新配置为新的主库的从库，并开始复制数据。</p></li></ol><p>MHA架构的优点包括：</p><ol><li><p>自动故障切换：MHA能够自动检测主库的故障，并快速将备库提升为新的主库，减少了手动干预的需要，提高了系统的可用性。</p></li><li><p>实时监测：MHA通过与Master节点和Slave节点建立SSH连接，实时监测它们的状态，能够及时发现故障并采取相应的措施。</p></li><li><p>简化配置：MHA提供了简单易用的配置文件，可以轻松地配置主库和备库的信息，减少了配置的复杂性。</p></li><li><p>高可扩展性：MHA支持多个备库，可以根据需求灵活地扩展系统的容量和性能。</p></li></ol><p>MHA架构虽然有很多优点，但也存在一些潜在的缺点：</p><ol><li><p>配置复杂性：尽管MHA提供了简化的配置文件，但对于不熟悉MHA的用户来说，配置仍然可能是一项复杂的任务。特别是在涉及多个主库和备库的复杂环境中，配置可能变得更加困难。</p></li><li><p>依赖SSH连接：MHA使用SSH连接与主库和备库进行通信和监控。这意味着在配置和使用MHA时，必须确保SSH连接的可用性和稳定性。如果SSH连接出现问题，可能会导致MHA无法正常工作。</p></li><li><p>故障切换过程中的数据同步延迟：在故障切换期间，MHA需要将备库提升为新的主库，并重新配置其他备库作为新的从库。这个过程可能需要一些时间，导致在切换期间存在一定的数据同步延迟。这可能会对某些应用程序的数据一致性产生影响。</p></li><li><p>依赖MySQL复制功能：MHA依赖MySQL的复制功能来实现数据的同步和复制。如果MySQL的复制功能出现问题，可能会导致MHA无法正常工作或数据同步不完整。</p></li><li><p>需要额外的硬件资源：为了实现高可用性，MHA需要至少一个备库来作为冗余备份。这意味着需要额外的硬件资源来支持备库的运行和数据复制，增加了系统的成本和复杂性。</p></li></ol><p>需要注意的是，MHA并不是万能的解决方案，它适用于大多数的MySQL数据库场景，但在特定的情况下可能需要根据实际需求进行定制化的配置和调整。此外，为了确保MHA的正常运行，还需要进行定期的监控和维护工作，以保证系统的稳定性和可靠性。</p><h1 id="MGR架构（单-多主）"><a href="#MGR架构（单-多主）" class="headerlink" title="MGR架构（单&#x2F;多主）"></a>MGR架构（单&#x2F;多主）</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/110724066219000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/110724066219000.png"></a></p><p>MGR（MySQL Group Replication）是MySQL官方提供的一种高可用性架构，用于实现MySQL数据库的主从复制和自动故障切换。MGR基于MySQL的InnoDB存储引擎和Group<br>Replication插件，通过使用多主复制的方式来提供高可用性和数据一致性。</p><p>MGR架构的核心组件包括：</p><ol><li><p>Group Replication组件：Group Replication是MySQL官方提供的插件，用于实现多主复制和自动故障切换。它基于Paxos协议，通过在集群中的成员之间进行通信和协调，实现数据的同步和一致性。</p></li><li><p>Primary节点：Primary节点是MGR集群中的主节点，负责处理所有的写操作和读操作。Primary节点接收来自应用程序的写请求，并将数据复制到其他节点（Secondary节点）上。</p></li><li><p>Secondary节点：Secondary节点是MGR集群中的从节点，负责复制Primary节点上的数据。Secondary节点通过与Primary节点进行通信，接收并应用Primary节点上的写操作，以保持数据的一致性。</p></li></ol><p>MGR架构的工作流程如下：</p><ol><li><p>初始化集群：在MGR架构中，首先需要选择一个节点作为初始Primary节点，并将其配置为Group<br>Replication组件的成员。然后，其他节点可以加入到集群中，并通过与Primary节点进行通信，获取数据并成为Secondary节点。</p></li><li><p>数据同步：一旦集群初始化完成，Primary节点开始接收来自应用程序的写请求，并将数据复制到其他节点上。Secondary节点通过与Primary节点进行通信，接收并应用Primary节点上的写操作，以保持数据的一致性。</p></li><li><p>自动故障切换：如果Primary节点发生故障，Group<br>Replication组件会自动选择一个Secondary节点作为新的Primary节点，并将其他节点重新配置为新的Secondary节点。这个过程是自动的，无需人工干预。</p></li></ol><p>MGR架构的优点包括：</p><ol><li><p>自动故障切换：MGR能够自动检测Primary节点的故障，并快速将一个Secondary节点提升为新的Primary节点，实现自动故障切换，提高了系统的可用性。</p></li><li><p>数据一致性：MGR使用Paxos协议来保证数据的一致性。在写操作提交之前，集群中的成员会达成一致，确保数据在所有节点上的复制是一致的。</p></li><li><p>简化配置和管理：MGR提供了简单易用的配置选项和管理工具，使得集群的配置和管理变得更加简单和方便。</p></li><li><p>高可扩展性：MGR支持多主复制，可以根据需求灵活地扩展系统的容量和性能。</p></li></ol><p>需要注意的是，MGR架构也有一些限制和注意事项：</p><ol><li><p>网络稳定性：MGR对网络的稳定性要求较高，因为节点之间需要进行频繁的通信和数据同步。如果网络不稳定，可能会导致数据同步延迟或节点之间的通信故障。</p></li><li><p>数据冲突：由于MGR支持多主复制，如果应用程序在不同的节点上同时进行写操作，可能会导致数据冲突和一致性问题。因此，需要在应用程序层面进行合理的设计和处理。</p></li><li><p>配置复杂性：尽管MGR提供了简化的配置选项和管理工具，但对于不熟悉MGR的用户来说，配置仍然可能是一项复杂的任务。特别是在涉及多个节点和复杂环境中，配置可能变得更加困难。</p></li></ol><p>在使用MGR之前，建议进行充分的测试和评估，以确保它能够满足系统的可用性和性能要求，并根据具体的应用场景和需求进行适当的配置和调整。</p><h1 id="Mysql-cluster（官方亲儿子）（多主）"><a href="#Mysql-cluster（官方亲儿子）（多主）" class="headerlink" title="Mysql cluster（官方亲儿子）（多主）"></a>Mysql cluster（官方亲儿子）（多主）</h1><p>官方PDF文档：</p><div class="row">    <embed src="/static/pdf/mysql-cluster-datasheet.zh.pdf" width="100%" height="550" type="application/pdf"></div><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/111101033366200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/111101033366200.png"></a></p><p>MySQL Cluster是MySQL官方提供的一种分布式数据库解决方案，旨在提供高可用性、可扩展性和实时性能。它基于NDB（Network<br>DataBase）存储引擎，使用多台服务器组成一个集群，提供数据的分片和复制，以实现高可用性和负载均衡。</p><p>MySQL Cluster架构的核心组件包括：</p><ol><li><p>Management节点：Management节点是MySQL Cluster的控制节点，负责集群的管理和配置。它负责监控集群中的各个节点，并协调数据的分片和复制。</p></li><li><p>Data节点：Data节点是MySQL Cluster的存储节点，负责存储和处理数据。每个Data节点都运行NDB存储引擎，数据被分片存储在不同的Data节点上，以实现数据的分布和负载均衡。</p></li><li><p>SQL节点：SQL节点是MySQL Cluster的查询节点，负责处理应用程序的查询请求。SQL节点接收来自应用程序的SQL查询，并将查询分发到适当的Data节点上进行处理。</p></li></ol><p>MySQL Cluster架构的工作流程如下：</p><ol><li><p>集群初始化：在MySQL Cluster中，首先需要配置和启动Management节点，然后配置和启动Data节点和SQL节点。Management节点负责监控和管理集群中的各个节点。</p></li><li><p>数据分片和复制：一旦集群初始化完成，Management节点会根据配置的规则将数据分片存储在不同的Data节点上。数据的复制和同步由MySQL<br>Cluster自动处理，以保证数据的一致性和可用性。</p></li><li><p>查询处理：当应用程序发送查询请求时，SQL节点接收并解析查询，并将查询分发到适当的Data节点上进行处理。Data节点返回查询结果给SQL节点，然后SQL节点将结果返回给应用程序。</p></li></ol><p>MySQL Cluster架构的优点包括：</p><ol><li><p>高可用性：MySQL Cluster通过数据的分片和复制，以及自动故障检测和恢复机制，实现了高可用性。即使某个节点发生故障，集群仍然可以继续提供服务。</p></li><li><p>可扩展性：MySQL Cluster支持水平扩展，可以通过增加Data节点来扩展存储容量和处理能力。同时，由于数据的分片和负载均衡，可以实现更好的性能和吞吐量。</p></li><li><p>实时性能：MySQL Cluster的设计目标之一是提供实时性能。通过将数据存储在内存中，并使用并行处理和分布式计算，可以实现较低的延迟和更高的吞吐量。</p></li><li><p>数据一致性：MySQL Cluster使用多副本复制和同步机制，以保证数据的一致性。即使在节点故障或网络分区的情况下，数据仍然可以保持一致。</p></li></ol><p>需要注意的是，MySQL Cluster也有一些限制和注意事项：</p><ol><li><p>配置复杂性：MySQL Cluster的配置相对复杂，需要考虑数据分片、复制和负载均衡等因素。对于不熟悉MySQL<br>Cluster的用户来说，配置可能是一项具有挑战性的任务。</p></li><li><p>内存需求：由于MySQL Cluster将数据存储在内存中，因此对内存的需求较高。需要根据数据量和性能需求来配置足够的内存资源。</p></li><li><p>网络稳定性：MySQL Cluster对网络的稳定性要求较高，因为节点之间需要进行频繁的通信和数据同步。如果网络不稳定，可能会导致数据同步延迟或节点之间的通信故障。</p></li></ol><p>在使用MySQL Cluster之前，建议进行充分的测试和评估，以确保它能够满足系统的可用性、性能和扩展性要求，并根据具体的应用场景和需求进行适当的配置和调整。</p><h1 id="Galera-Cluster（多主）"><a href="#Galera-Cluster（多主）" class="headerlink" title="Galera Cluster（多主）"></a>Galera Cluster（多主）</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/111247537982700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/111247537982700.png"></a></p><p>Galera Cluster是一个基于同步多主复制的MySQL集群解决方案。它使用Galera Replication插件，通过在多个MySQL节点之间同步数据来实现高可用性和负载均衡。</p><p>Galera Cluster的核心组件包括：</p><ol><li><p>Galera Replication插件：Galera Replication是一个基于同步复制的插件，用于实现数据的多主复制和一致性。它使用了多主复制协议，确保在集群中的所有节点之间的数据同步和一致性。</p></li><li><p>Primary Component：Primary Component是Galera Cluster中的主组件，负责处理所有的写操作和读操作。Primary<br>Component接收来自应用程序的写请求，并将数据复制到其他节点（Secondary Component）上。</p></li><li><p>Secondary Component：Secondary Component是Galera Cluster中的从组件，负责复制Primary Component上的数据。Secondary<br>Component通过与Primary Component进行通信，接收并应用Primary Component上的写操作，以保持数据的一致性。</p></li></ol><p>Galera Cluster的工作流程如下：</p><ol><li><p>初始化集群：在Galera Cluster中，首先需要配置和启动一个节点作为初始Primary Component，并将其配置为Galera<br>Replication插件的成员。然后，其他节点可以加入到集群中，并通过与Primary Component进行通信，获取数据并成为Secondary<br>Component。</p></li><li><p>数据同步和复制：一旦集群初始化完成，Primary Component开始接收来自应用程序的写请求，并将数据复制到其他节点上。Secondary<br>Component通过与Primary Component进行通信，接收并应用Primary Component上的写操作，以保持数据的一致性。</p></li><li><p>自动故障切换：如果Primary Component发生故障，Galera Cluster会自动选择一个Secondary Component作为新的Primary<br>Component，并将其他节点重新配置为新的Secondary Component。这个过程是自动的，无需人工干预。</p></li></ol><p>Galera Cluster的优点包括：</p><ol><li><p>高可用性：Galera Cluster通过数据的多主复制和自动故障切换，实现了高可用性。即使某个节点发生故障，集群仍然可以继续提供服务。</p></li><li><p>数据一致性：Galera Cluster使用多主复制协议，确保在集群中的所有节点之间的数据同步和一致性。在写操作提交之前，集群中的成员会达成一致，确保数据在所有节点上的复制是一致的。</p></li><li><p>简化配置和管理：Galera Cluster提供了简单易用的配置选项和管理工具，使得集群的配置和管理变得更加简单和方便。</p></li><li><p>可扩展性：Galera Cluster支持水平扩展，可以通过增加节点来扩展存储容量和处理能力。同时，由于数据的多主复制和负载均衡，可以实现更好的性能和吞吐量。</p></li></ol><p>需要注意的是，Galera Cluster也有一些限制和注意事项：</p><ol><li><p>网络稳定性：Galera Cluster对网络的稳定性要求较高，因为节点之间需要进行频繁的通信和数据同步。如果网络不稳定，可能会导致数据同步延迟或节点之间的通信故障。</p></li><li><p>写冲突：由于Galera Cluster支持多主复制，如果应用程序在不同的节点上同时进行写操作，可能会导致写冲突和一致性问题。因此，需要在应用程序层面进行合理的设计和处理。</p></li><li><p>配置复杂性：尽管Galera Cluster提供了简化的配置选项和管理工具，但对于不熟悉Galera Cluster的用户来说，配置可能是一项具有挑战性的任务。</p></li></ol><p>在使用Galera Cluster之前，建议进行充分的测试和评估，以确保它能够满足系统的可用性、性能和扩展性要求，并根据具体的应用场景和需求进行适当的配置和调整。</p><h1 id="PXC架构（多主）"><a href="#PXC架构（多主）" class="headerlink" title="PXC架构（多主）"></a>PXC架构（多主）</h1><p>PXC（Percona XtraDB Cluster）是一个基于Galera Cluster的高可用性和高性能的MySQL集群解决方案。它是由Percona开发的，建立在Galera<br>Replication插件之上，提供了多主复制和数据同步的功能。</p><p>PXC架构的核心组件包括：</p><ol><li><p>Galera Replication插件：PXC使用Galera Replication插件来实现数据的多主复制和一致性。该插件基于同步复制的原理，确保在集群中的所有节点之间的数据同步和一致性。</p></li><li><p>Primary Component：Primary Component是PXC集群中的主组件，负责处理所有的写操作和读操作。Primary<br>Component接收来自应用程序的写请求，并将数据复制到其他节点（Secondary Component）上。</p></li><li><p>Secondary Component：Secondary Component是PXC集群中的从组件，负责复制Primary Component上的数据。Secondary<br>Component通过与Primary Component进行通信，接收并应用Primary Component上的写操作，以保持数据的一致性。</p></li></ol><p>PXC架构的工作流程如下：</p><ol><li><p>初始化集群：在PXC中，首先需要配置和启动一个节点作为初始Primary Component，并将其配置为Galera<br>Replication插件的成员。然后，其他节点可以加入到集群中，并通过与Primary Component进行通信，获取数据并成为Secondary<br>Component。</p></li><li><p>数据同步和复制：一旦集群初始化完成，Primary Component开始接收来自应用程序的写请求，并将数据复制到其他节点上。Secondary<br>Component通过与Primary Component进行通信，接收并应用Primary Component上的写操作，以保持数据的一致性。</p></li><li><p>自动故障切换：如果Primary Component发生故障，PXC会自动选择一个Secondary Component作为新的Primary<br>Component，并将其他节点重新配置为新的Secondary Component。这个过程是自动的，无需人工干预。</p></li></ol><p>PXC架构的优点包括：</p><ol><li><p>高可用性：PXC通过数据的多主复制和自动故障切换，实现了高可用性。即使某个节点发生故障，集群仍然可以继续提供服务。</p></li><li><p>数据一致性：PXC使用Galera Replication插件，确保在集群中的所有节点之间的数据同步和一致性。在写操作提交之前，集群中的成员会达成一致，确保数据在所有节点上的复制是一致的。</p></li><li><p>简化配置和管理：PXC提供了简单易用的配置选项和管理工具，使得集群的配置和管理变得更加简单和方便。</p></li><li><p>可扩展性：PXC支持水平扩展，可以通过增加节点来扩展存储容量和处理能力。同时，由于数据的多主复制和负载均衡，可以实现更好的性能和吞吐量。</p></li></ol><p>需要注意的是，PXC也有一些限制和注意事项：</p><ol><li><p>网络稳定性：PXC对网络的稳定性要求较高，因为节点之间需要进行频繁的通信和数据同步。如果网络不稳定，可能会导致数据同步延迟或节点之间的通信故障。</p></li><li><p>写冲突：由于PXC支持多主复制，如果应用程序在不同的节点上同时进行写操作，可能会导致写冲突和一致性问题。因此，需要在应用程序层面进行合理的设计和处理。</p></li><li><p>配置复杂性：尽管PXC提供了简化的配置选项和管理工具，但对于不熟悉PXC的用户来说，配置可能是一项具有挑战性的任务。</p></li></ol><p>在使用PXC之前，建议进行充分的测试和评估，以确保它能够满足系统的可用性、性能和扩展性要求，并根据具体的应用场景和需求进行适当的配置和调整。</p><h1 id="RAID10（数据可靠性方案）（单点问题）"><a href="#RAID10（数据可靠性方案）（单点问题）" class="headerlink" title="RAID10（数据可靠性方案）（单点问题）"></a>RAID10（数据可靠性方案）（单点问题）</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/111457590515500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/111457590515500.png"></a></p><p>RAID10（Redundant Array of Independent Disks 10）是一种存储方案，它结合了RAID 1（镜像）和RAID<br>0（条带化）的特性。RAID10通过将多个磁盘组合在一起，提供了数据冗余和性能增强的优势。</p><p>在RAID10中，磁盘被分为两组，每组至少有两个磁盘。其中一组磁盘使用镜像技术，即数据被同时写入两个磁盘，提供了数据的冗余备份。另一组磁盘使用条带化技术，即数据被分块地写入多个磁盘，提供了更好的读写性能。</p><p>RAID10的特点和优势包括：</p><ol><li><p>数据冗余：RAID10通过镜像技术提供了数据的冗余备份。如果一个磁盘发生故障，数据仍然可以从镜像磁盘中恢复，保证了数据的可靠性和可用性。</p></li><li><p>高性能：RAID10通过条带化技术提供了更好的读写性能。数据可以同时从多个磁盘读取或写入，提高了数据访问的速度和吞吐量。</p></li><li><p>故障容忍：由于RAID10具有数据冗余性，当一个磁盘发生故障时，系统可以继续正常运行，并且可以在更换故障磁盘后进行数据恢复，减少了系统停机时间。</p></li><li><p>容量利用率：RAID10的容量利用率较低，因为数据被同时写入两个磁盘。例如，如果有4个1TB的磁盘组成RAID10，实际可用的存储容量只有2TB。</p></li></ol><p>需要注意的是，RAID10的缺点包括：</p><ol><li><p>成本较高：由于RAID10需要使用多个磁盘进行数据镜像和条带化，所以成本较高。相比其他RAID级别，RAID10需要更多的磁盘。</p></li><li><p>容量利用率较低：由于数据被同时写入两个磁盘，RAID10的容量利用率较低。如果容量是一个关键因素，可能需要考虑其他RAID级别。</p></li></ol><p>RAID10适用于对数据冗余性和性能要求较高的应用场景，如数据库服务器、虚拟化环境和高性能计算等。在选择RAID级别时，需要根据具体的需求和预算来权衡各种因素。</p><h1 id="SAN存储网络（数据存储解决方案）（除了贵没有缺点）"><a href="#SAN存储网络（数据存储解决方案）（除了贵没有缺点）" class="headerlink" title="SAN存储网络（数据存储解决方案）（除了贵没有缺点）"></a>SAN存储网络（数据存储解决方案）（除了贵没有缺点）</h1><p>SAN（Storage Area Network）是一种专门用于存储数据的高速网络架构。它将存储设备（如磁盘阵列、磁带库等）与服务器连接起来，提供高性能、高可用性和可扩展性的存储解决方案。</p><p>SAN存储网络的特点和优势包括：</p><ol><li><p>存储共享：SAN允许多台服务器共享存储设备，使得数据可以在不同的服务器之间共享和访问。这样可以提高数据的灵活性和共享性，减少存储资源的浪费。</p></li><li><p>高性能：SAN使用高速的网络连接（如光纤通道、以太网等），提供了高带宽和低延迟的数据传输。这使得存储设备可以提供更高的读写性能，满足对存储性能要求较高的应用场景。</p></li><li><p>高可用性：SAN通过冗余和故障切换机制，提供了高可用性的存储解决方案。如果一个存储设备或连接发生故障，系统可以自动切换到备用设备或路径，保证数据的可靠性和可用性。</p></li><li><p>可扩展性：SAN具有良好的可扩展性，可以根据需求灵活地扩展存储容量和性能。通过添加新的存储设备或扩展现有设备的容量，可以满足不断增长的存储需求。</p></li><li><p>管理简便：SAN提供了集中管理和监控的功能，使得存储资源的配置、监控和管理变得更加简便和高效。管理员可以通过集中的管理界面对存储设备进行配置和管理，提高了管理效率。</p></li></ol><p>需要注意的是，SAN存储网络也有一些限制和注意事项：</p><ol><li><p>成本较高：相比于其他存储解决方案，SAN的成本较高。它需要专用的硬件设备和高速网络连接，这增加了部署和维护的成本。</p></li><li><p>配置复杂性：SAN的配置和管理相对复杂，需要专业的知识和技能。对于不熟悉SAN的用户来说，配置和管理可能是一项具有挑战性的任务。</p></li></ol><p>SAN存储网络适用于对存储性能、可用性和扩展性要求较高的应用场景，如大型企业、数据中心、虚拟化环境等。在选择和部署SAN存储网络时，需要根据具体的需求和预算来权衡各种因素，并确保与服务器和应用程序的兼容性。</p><h1 id="DRBD方案（数据存储解决方案）（系统自带）"><a href="#DRBD方案（数据存储解决方案）（系统自带）" class="headerlink" title="DRBD方案（数据存储解决方案）（系统自带）"></a>DRBD方案（数据存储解决方案）（系统自带）</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/111588503645700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-11/111588503645700.png"></a></p><p>MySQL与DRBD结合使用可以实现高可用性的数据库方案。通过将MySQL数据库的数据目录配置为DRBD设备，可以实现数据的实时复制和故障转移。</p><p>在MySQL与DRBD方案中，通常会有两个节点：一个主节点和一个备节点。主节点负责处理所有的读写操作，并将数据实时复制到备节点上。备节点会持续地从主节点复制数据，以保持数据的一致性。</p><p>当主节点发生故障时，备节点可以接管主节点的角色，成为新的主节点，继续提供数据库服务。这种故障转移过程是自动的，可以通过配置和管理工具（如Pacemaker）来实现。</p><p>使用MySQL与DRBD方案可以提供数据库的冗余和故障转移能力，从而提高数据库的可靠性和可用性。当主节点发生故障时，系统可以自动切换到备节点，减少数据库服务的中断时间。</p><p>需要注意的是，配置和管理MySQL与DRBD方案需要一定的技术知识和经验。此外，对网络的稳定性和带宽要求较高，以确保数据的实时复制和同步。因此，在实施该方案之前，建议进行充分的规划和测试，以确保系统的稳定性和可靠性。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【日记】9月9日</title>
      <link href="/af0c0de2.html"/>
      <url>/af0c0de2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0/">系列文章地址</a></p><hr><p>简单总结下啊，今天比较简单：</p><ol><li>临时送了一趟葡萄到十村</li><li>去水游城索尼专卖修我的那个wfxm4耳机</li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 九月 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【Mysql系列】（二）日志系统：一条更新语句是如何执行的</title>
      <link href="/3c24b455.html"/>
      <url>/3c24b455.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/Mysql/">系列文章地址</a></p><hr><p>上篇文章我们介绍了一个查询语句的执行流程，并介绍了执行过程中涉及的处理模块。一条查询语句的执行过程一般是经过连接器、分析器、优化器、执行器等功能模块，最后到达存储引擎。</p><p>那么，一条语句的更新流程是什么样的？</p><p>MySQL可以恢复到半个月内任意一秒的状态，是怎么做到的？</p><p>我们先复习下查询流程</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-08/29526173057800.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-08/29526173057800.png"></a></p><p>这里我们需要注意的是，更新语句的流程和查询流程有两个区别，更新流程涉及两个重要的日志模块：</p><ul><li>redo log（重做日志）</li><li>binlog（归档日志）</li></ul><p>相信大家在这个面试，学习MySQL的过程中都反复听到这两个词</p><h1 id="WAL技术"><a href="#WAL技术" class="headerlink" title="WAL技术"></a>WAL技术</h1><p>在MySQL中，WAL（Write-Ahead Logging）技术是一种常用的持久化数据的机制，用于确保数据库的事务操作能够持久化到磁盘并保持数据的一致性。WAL技术的核心思想是在事务进行修改之前，<br><strong>先将修改操作记录到日志中，然后再将修改应用到数据库中</strong>。</p><p>具体来说，MySQL中的WAL技术主要包括以下几个组件和步骤：</p><ol><li><p>Redo Log（重做日志）：Redo Log是一种事务日志，用于记录数据库中发生的修改操作。在事务提交之前，MySQL会将修改操作写入Redo<br>Log，而不是直接写入磁盘。这样可以提高性能，因为磁盘写入是相对较慢的操作。</p></li><li><p>Write-Ahead Logging（预写式日志）：WAL技术要求在事务提交之前，Redo<br>Log必须先写入磁盘，然后再将修改操作应用到数据库中。这样即使在事务提交后发生系统崩溃，MySQL也可以通过Redo Log来恢复数据。</p></li><li><p>Redo Log Buffer（重做日志缓冲区）：Redo Log Buffer是一个内存缓冲区，用于暂存待写入Redo Log的修改操作。当事务提交时，Redo<br>Log Buffer中的内容会被刷新到磁盘的Redo Log文件中。</p></li><li><p>Checkpoint（检查点）：Checkpoint是一个标记点，表示在这个点之前的所有事务已经持久化到磁盘。MySQL会定期将Checkpoint的位置更新到磁盘，以确保已经持久化的数据不会丢失。</p></li><li><p>Crash Recovery（崩溃恢复）：当数据库发生崩溃或重启时，MySQL会通过读取Redo Log来恢复数据的一致性。它会按照Redo<br>Log中的顺序，将每个事务的修改操作重新应用到数据库中，以还原数据的最新状态。</p></li></ol><p>WAL技术的优点是可以提高数据库的性能和可靠性。通过将修改操作先记录到Redo<br>Log中，可以避免频繁地写入磁盘，从而提高性能。同时，WAL技术还可以确保数据的持久性和一致性，即使在系统崩溃或断电的情况下也能够恢复数据。</p><p>MySQL中的WAL技术通过使用Redo Log和预写式日志的机制，确保事务的修改操作能够持久化到磁盘并保持数据的一致性。它是一种提高性能和可靠性的重要技术。</p><h1 id="Redo-log执行流程"><a href="#Redo-log执行流程" class="headerlink" title="Redo log执行流程"></a>Redo log执行流程</h1><ol><li><p>当一个事务开始时，MySQL会为该事务分配一个唯一的事务ID，并将该事务的相关信息存储在内存中的事务控制块（Transaction Control<br>Block，TCB）中。</p></li><li><p>在事务执行过程中，所有的修改操作都会被写入redo log缓冲区。这些修改操作包括插入、更新和删除等操作。</p></li><li><p>当事务提交时，MySQL会将该事务的所有修改操作按照顺序写入redo log文件中。这些修改操作会被写入到redo<br>log缓冲区，然后通过后台线程定期将缓冲区中的内容刷新到磁盘上的redo log文件中。这个过程称为redo log的刷新。</p></li><li><p>在事务提交之前，MySQL会将redo log的刷新操作和数据页的刷新操作进行协调，以保证数据的一致性。这是通过使用write-ahead<br>logging（预写式日志）的机制来实现的。即在事务提交之前，redo log必须先写入磁盘，然后再将修改操作应用到数据库中。</p></li><li><p>当数据库发生崩溃或重启时，MySQL会在启动过程中读取redo log文件，并将其中的修改操作重新应用到数据库中，以恢复数据的一致性。这个过程称为崩溃恢复。</p></li></ol><h1 id="Write-Pos和CheckPoint"><a href="#Write-Pos和CheckPoint" class="headerlink" title="Write Pos和CheckPoint"></a>Write Pos和CheckPoint</h1><p>在MySQL的redo log中，有两个重要的概念：write pos（写入位置）和checkpoint（检查点）。</p><ol><li><p>Write Pos（写入位置）：Write Pos是指当前事务写入redo log的位置。当一个事务提交时，其修改操作会被写入redo log中的某个位置，Write<br>Pos指向这个位置。下一个事务的修改操作将会从Write Pos指向的位置开始写入。</p></li><li><p>Checkpoint（检查点）：Checkpoint是指一个标记点，表示在这个点之前的所有事务已经持久化到磁盘。当一个事务提交时，它的修改操作会被写入redo<br>log，并且会更新Checkpoint的位置。这样，在Checkpoint之前的redo log中的操作可以被认为是已经持久化到磁盘的。</p></li></ol><p>Checkpoint的作用是用于数据库的恢复和崩溃恢复。当数据库发生崩溃或重启时，MySQL会从Checkpoint的位置开始，读取redo<br>log中的操作，并将其应用到数据库中，以还原数据的一致性。</p><p>Write Pos和Checkpoint之间的关系是，Write Pos会不断向前移动，指向最新的写入位置，而Checkpoint会根据一定的策略进行更新，以标记已经持久化到磁盘的操作。</p><p>需要注意的是，Write Pos和Checkpoint的位置是相对于redo log文件的偏移量，而不是绝对的字节位置。它们的值通常以字节为单位，表示相对于redo<br>log文件起始位置的偏移量。</p><p>Write Pos表示当前事务写入redo log的位置，Checkpoint表示已经持久化到磁盘的操作的位置。Write<br>Pos会不断向前移动，而Checkpoint会根据一定的策略进行更新，用于数据库的恢复和崩溃恢复。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-08/30102788292500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-08/30102788292500.png"></a></p><h1 id="Redo-log是固定大小的，超出会发生什么"><a href="#Redo-log是固定大小的，超出会发生什么" class="headerlink" title="Redo log是固定大小的，超出会发生什么"></a>Redo log是固定大小的，超出会发生什么</h1><p>当redo log的固定大小不足以容纳新的修改操作时，MySQL会触发一个称为”redo log空间不足”<br>的错误。在这种情况下，MySQL会停止新的事务提交，直到有足够的空间来写入redo log。</p><p>为了解决redo log空间不足的问题，可以采取以下几种方法：</p><ol><li><p>增加redo log的大小：可以通过修改MySQL的配置参数<code>innodb_log_file_size</code>来增加每个redo log文件的大小。增加redo<br>log的大小可以提供更多的空间来存储修改操作，从而延长redo log的使用寿命。</p></li><li><p>增加redo log文件的数量：可以通过修改MySQL的配置参数<code>innodb_log_files_in_group</code>来增加redo log文件组中的文件数量。增加文件数量可以增加redo<br>log的总大小，从而提供更多的空间来存储修改操作。</p></li><li><p>提交事务并清空redo log：如果当前的事务已经提交，但redo log空间不足，可以尝试手动提交其他未提交的事务，以释放redo<br>log空间。这可以通过执行<code>COMMIT</code>语句来提交事务。</p></li><li><p>优化事务的写入操作：可以通过优化事务的写入操作，减少对redo log的写入量。例如，可以合并多个小事务为一个大事务，减少redo<br>log的写入次数。</p></li></ol><p>需要注意的是，增加redo log的大小或数量可能会增加系统的负载和崩溃恢复的时间。因此，在调整redo<br>log大小时，需要综合考虑系统的性能和可靠性需求，并进行充分的测试和验证。</p><h1 id="什么是binlog日志"><a href="#什么是binlog日志" class="headerlink" title="什么是binlog日志"></a>什么是binlog日志</h1><p>Binlog（二进制日志）是MySQL的服务器层产生的一种日志，用于记录数据库中的所有修改操作，包括数据定义语言（DDL）和数据操作语言（DML）等操作。</p><p>Binlog以二进制格式记录了对数据库的逻辑修改操作，而不是直接记录对数据页的具体修改。它包含了一系列的事件（Event），每个事件都代表了一个数据库操作，如插入、更新、删除等。</p><p>Binlog的主要作用是用于<strong>数据复制和恢复</strong><br>。通过将Binlog传递给其他MySQL实例，可以实现数据的复制和同步。其他MySQL实例可以读取Binlog中的事件，并将其中的修改操作应用到自己的数据库中，从而实现数据的复制和同步。</p><p>此外，Binlog也可以用于数据恢复。在误操作、数据丢失或灾难恢复的情况下，可以通过读取Binlog来还原数据。通过逐个回放Binlog中的事件，可以将数据库恢复到特定的时间点或特定的操作之前的状态。</p><p>Binlog是追加写入的，不会被重复使用，以保留完整的修改历史。它可以通过配置参数进行启用和配置，包括指定Binlog的存储位置、设置Binlog的大小和保留时间等。</p><h1 id="为什么MySQL会有两个日志，redo-log和binlog？"><a href="#为什么MySQL会有两个日志，redo-log和binlog？" class="headerlink" title="为什么MySQL会有两个日志，redo log和binlog？"></a>为什么MySQL会有两个日志，redo log和binlog？</h1><p>MySQL之所以同时使用redo log和binlog两个日志，是因为它们具有不同的功能和用途。</p><ol><li><p>Redo Log（重做日志）：</p><ul><li>功能：Redo log是InnoDB存储引擎特有的日志，用于保证事务的持久性和一致性。它记录了数据库中发生的修改操作，包括插入、更新和删除等操作。</li><li>作用：在数据库崩溃或重启时，通过读取redo log来恢复数据的一致性。它可以将未持久化到磁盘的修改操作重新应用到数据库中，以还原数据的最新状态。</li><li>特点：redo log是<strong>物理日志</strong>，记录了对数据页的具体修改操作。它是循环写入的，可以重复使用，以减少磁盘IO的开销。</li></ul></li><li><h2 id="Binlog（二进制日志）：-功能：Binlog是MySQL的服务器层产生的日志，记录了数据库中的所有修改操作，包括数据定义语言（DDL）和数据操作语言（DML）等操作。"><a href="#Binlog（二进制日志）：-功能：Binlog是MySQL的服务器层产生的日志，记录了数据库中的所有修改操作，包括数据定义语言（DDL）和数据操作语言（DML）等操作。" class="headerlink" title="Binlog（二进制日志）： - 功能：Binlog是MySQL的服务器层产生的日志，记录了数据库中的所有修改操作，包括数据定义语言（DDL）和数据操作语言（DML）等操作。"></a>Binlog（二进制日志）：<br> - 功能：Binlog是MySQL的服务器层产生的日志，记录了数据库中的所有修改操作，包括数据定义语言（DDL）和数据操作语言（DML）等操作。</h2><p> 作用：Binlog主要用于数据复制和恢复。它可以被其他MySQL实例读取，并将其中的修改操作应用到自己的数据库中，实现数据的复制和同步。同时，Binlog也可以用于数据恢复，例如在误操作或数据丢失时，可以通过读取Binlog来还原数据。</p><ul><li>特点：Binlog是<strong>逻辑日志</strong>，记录了对数据的逻辑修改操作。它是追加写入的，不会被重复使用，以保留完整的修改历史。</li></ul></li></ol><p>redo log保证了事务的持久性和一致性，而binlog则提供了数据复制和恢复的功能。它们共同工作，确保了MySQL数据库的数据安全和可靠性。</p><h1 id="举一个例子"><a href="#举一个例子" class="headerlink" title="举一个例子"></a>举一个例子</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> T <span class="keyword">set</span> c<span class="operator">=</span>c<span class="operator">+</span><span class="number">1</span> <span class="keyword">where</span> ID<span class="operator">=</span><span class="number">2</span>;</span><br></pre></td></tr></table></figure><ol><li>执行器先找引擎取 ID&#x3D;2 这一行。ID 是主键，引擎直接用树搜索找到这一行。如果 ID&#x3D;2<br>这一行所在的数据页本来就在内存中，就直接返回给执行器；否则，需要先从磁盘读入内存，然后再返回。</li><li>执行器拿到引擎给的行数据，把这个值加上 1，比如原来是 N，现在就是 N+1，得到新的一行数据，再调用引擎接口写入这行新数据。</li><li>引擎将这行新数据更新到内存中，同时将这个更新操作记录到 redo log 里面，此时 redo log 处于 prepare<br>状态。然后告知执行器执行完成了，随时可以提交事务。</li><li>执行器生成这个操作的 binlog，并把 binlog 写入磁盘。</li><li>执行器调用引擎的提交事务接口，引擎把刚刚写入的 redo log 改成提交（commit）状态，更新完成。</li></ol><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-08/30579841696100.png" title="update 语句执行流程" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-08/30579841696100.png" alt="update 语句执行流程"></a></p><p>最后三步看上去有点“绕”，将 redo log 的写入拆成了两个步骤：prepare 和 commit，这就是”两阶段提交”。</p><h1 id="MySQL中的两阶段提交"><a href="#MySQL中的两阶段提交" class="headerlink" title="MySQL中的两阶段提交"></a>MySQL中的两阶段提交</h1><p>在MySQL中，redo log和binlog是两个不同的日志文件，它们都用于确保数据的一致性和持久性。它们的写入顺序和提交顺序有所不同。</p><ol><li><p>Redo Log（重做日志）：</p><ul><li>Redo log是MySQL用于崩溃恢复的机制，它记录了事务对数据库所做的修改操作。</li><li>当事务执行时，MySQL首先将修改操作记录到redo log中，然后将其写入磁盘。</li><li>这样做的目的是为了在系统崩溃时，能够通过redo log来恢复未完成的事务，保证数据的一致性。</li></ul></li><li><p>Binlog（二进制日志）：</p><ul><li>Binlog是MySQL用于数据复制和恢复的机制，它记录了数据库的修改操作。</li><li>当事务提交时，MySQL将修改操作记录到binlog中，但不立即写入磁盘。</li><li>Binlog的写入是异步的，可能会有一定的延迟。</li></ul></li></ol><p>现在来解释为什么MySQL先写redo log，然后等binlog写完后才提交：</p><ol><li><p>事务的持久性和恢复能力：</p><ul><li>通过将修改操作记录到redo log中，MySQL可以确保即使系统崩溃，也能够通过redo log来恢复未完成的事务，保证数据的一致性。</li><li>因此，redo log的写入是在事务执行期间进行的，以提供更好的性能。</li></ul></li><li><p>数据复制和恢复：</p><ul><li>Binlog用于数据复制和恢复，它记录了所有的数据库修改操作。</li><li>在事务提交之后，MySQL将修改操作记录到binlog中，以供主从复制等场景使用。</li><li>为了保证数据的一致性，MySQL会等待binlog的写入完成，然后才提交事务。</li></ul></li></ol><p>所以，MySQL先写redo log，然后等binlog写完后才提交的目的是为了<strong>保证数据的一致性和持久性</strong>，<strong>并提供数据复制和恢复的能力</strong><br>。这样的设计可以提高性能，并确保在系统崩溃或数据复制场景下的数据完整性。希望这次解释更加清晰明了。如果还有任何疑问，请随时提问。</p><h1 id="没写完发生Crash了会出现什么情况？"><a href="#没写完发生Crash了会出现什么情况？" class="headerlink" title="没写完发生Crash了会出现什么情况？"></a>没写完发生Crash了会出现什么情况？</h1><p>仍然用前面的 update 语句来做例子。假设当前 ID&#x3D;2 的行，字段 c 的值是 0，再假设执行 update 语句过程中在写完第一个日志后，第二个日志还没有写完期间发生了<br>crash，会出现什么情况呢？</p><ol><li><strong>先写 redo log 后写 binlog</strong>。假设在 redo log 写完，binlog 还没有写完的时候，MySQL 进程异常重启。由于我们前面说过的，redo<br>log 写完之后，系统即使崩溃，仍然能够把数据恢复回来，所以恢复后这一行 c 的值是 1。但是由于 binlog 没写完就 crash 了，这时候<br>binlog 里面就没有记录这个语句。因此，之后备份日志的时候，存起来的 binlog 里面就没有这条语句。然后你会发现，如果需要用这个<br>binlog 来恢复临时库的话，由于这个语句的 binlog 丢失，这个临时库就会少了这一次更新，恢复出来的这一行 c 的值就是<br>0，与原库的值不同。</li><li><strong>先写 binlog 后写 redo log</strong>。如果在 binlog 写完之后 crash，由于 redo log 还没写，崩溃恢复以后这个事务无效，所以这一行 c<br>的值是 0。但是 binlog 里面已经记录了“把 c 从 0 改成 1”这个日志。所以，在之后用 binlog 来恢复的时候就多了一个事务出来，恢复出来的这一行<br>c 的值就是 1，与原库的值不同。</li></ol><p>可以看到，如果不使用“两阶段提交”，那么数据库的状态就有可能和用它的日志恢复出来的库的状态不一致。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>如何实现每天定时给女友/老婆发消息</title>
      <link href="/d429d716.html"/>
      <url>/d429d716.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p>这篇文章是从Github ReadMe拷贝的，内容实践下载是没问题的，能够正常发送短信，而且也不需要服务器，本地也能跑起来</p><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><p>开源地址：<a href="https://github.com/zysicyj/Vitality-reminder">https://github.com/zysicyj/Vitality-reminder</a></p><h2 id="元气提醒"><a href="#元气提醒" class="headerlink" title="元气提醒"></a>元气提醒</h2><blockquote><p>利用微信订阅号的方式，给女朋友每天定时定时推送消息。</p><p>如果还没有女朋友的这个可以祝你一臂之力，早日脱单。</p></blockquote><h4 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h4><p><a href="https://camo.githubusercontent.com/f99627e70c0925f77ce8cb868c9510109a0fe2143d18a5b4b086dc6e1f94cc1e/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f39346136623232653838393934363464626466626166313162613763613637352e6a70673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a484a766157527a5957357a5a6d467362474a685932732c736861646f775f35302c746578745f51314e4554694241536d6c7462586e706d3672706d366f3d2c73697a655f32302c636f6c6f725f4646464646462c745f37302c675f73652c785f3136" class="gallery-item"><img src="https://camo.githubusercontent.com/f99627e70c0925f77ce8cb868c9510109a0fe2143d18a5b4b086dc6e1f94cc1e/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f39346136623232653838393934363464626466626166313162613763613637352e6a70673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a484a766157527a5957357a5a6d467362474a685932732c736861646f775f35302c746578745f51314e4554694241536d6c7462586e706d3672706d366f3d2c73697a655f32302c636f6c6f725f4646464646462c745f37302c675f73652c785f3136"></a></p><ul><li>每日定时发送元气提醒，（发送的时间可配置）</li><li>特殊时间也会发送特殊提醒，目前已有：发薪日、在一起纪念日、生日。之后会陆续增加</li><li>有变成能力的可以自己改动代码，实现更多的提醒</li></ul><h4 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h4><ul><li>将仓库克隆至本地</li><li><code>npm install</code>或<code>cnpm install</code>安装依赖配置文件</li><li>修改config.js的订阅号配置文件</li><li>修改fnc.js个人重要信息节点配置文件</li><li>创建订阅号测试号，配置群发消息模板</li><li>代码文件上传至个人服务器，先绑定一个订阅号，获取accect_token</li><li>设置指定发送的人员，指定发送的时间</li><li>服务器挂上app.js脚本，配置全部完成！</li></ul><hr><h4 id="修改配置config-js"><a href="#修改配置config-js" class="headerlink" title="修改配置config.js"></a>修改配置config.js</h4><p><a href="https://camo.githubusercontent.com/e7870126dbdbcc670d896c124db704863f04ecc1bb6067f748f8d9642df4fb0b/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f38353338353862653164383534396465383033616338323063656565303232342e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a484a766157527a5957357a5a6d467362474a685932732c736861646f775f35302c746578745f51314e4554694241536d6c7462586e706d3672706d366f3d2c73697a655f32302c636f6c6f725f4646464646462c745f37302c675f73652c785f3136"><a href="https://camo.githubusercontent.com/e7870126dbdbcc670d896c124db704863f04ecc1bb6067f748f8d9642df4fb0b/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f38353338353862653164383534396465383033616338323063656565303232342e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a484a766157527a5957357a5a6d467362474a685932732c736861646f775f35302c746578745f51314e4554694241536d6c7462586e706d3672706d366f3d2c73697a655f32302c636f6c6f725f4646464646462c745f37302c675f73652c785f3136" class="gallery-item"><img src="https://camo.githubusercontent.com/e7870126dbdbcc670d896c124db704863f04ecc1bb6067f748f8d9642df4fb0b/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f38353338353862653164383534396465383033616338323063656565303232342e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a484a766157527a5957357a5a6d467362474a685932732c736861646f775f35302c746578745f51314e4554694241536d6c7462586e706d3672706d366f3d2c73697a655f32302c636f6c6f725f4646464646462c745f37302c675f73652c785f3136"></a></a></p><ul><li><p>appid和AppSecret都是申请微信公众号申请成功就可以获取的，但是这个群发的接口如果是以个人的名义申请的公众号是不能获取到这个接口权限的，这时候可以用一个测试开发公众号，上面有几乎所有的接口权限。<a href="https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login">微信公众平台接口测试帐号申请</a><br>网址：<a href="https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login%E3%80%82">https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login。</a></p></li><li><p>第三方天气接口我是在聚合数据平台申请的，是免费的接口，这里替换成各自的聚合数据接口的天气接口key即可<a href="https://www.juhe.cn/docs?bd_vid=7775114093417537769">聚合数据</a><br>地址：<a href="https://www.juhe.cn/docs?bd_vid=7775114093417537769">https://www.juhe.cn/docs?bd_vid&#x3D;7775114093417537769</a></p></li><li><p>这里就有了这些基本的id，直接复制即可。</p></li></ul><h4 id="修改fnc-js"><a href="#修改fnc-js" class="headerlink" title="修改fnc.js"></a>修改fnc.js</h4><ul><li>修改base对象的birthday、love、pay字段替换为个人的即可</li></ul><h4 id="创建微信公众号测试号，配置群发消息模板"><a href="#创建微信公众号测试号，配置群发消息模板" class="headerlink" title="创建微信公众号测试号，配置群发消息模板"></a>创建微信公众号测试号，配置群发消息模板</h4><blockquote><p><a href="https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login">微信公众平台接口测试帐号申请</a><br>网址：<a href="https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login%E3%80%82">https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login。</a></p></blockquote><p><a href="https://camo.githubusercontent.com/70542e4d8cdd0c1e10042f4eaabd2421bc78ceecb7763258ed72da19af12161c/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f36393934616431396530653134396636383635313738313764303063383266622e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a484a766157527a5957357a5a6d467362474a685932732c736861646f775f35302c746578745f51314e4554694241536d6c7462586e706d3672706d366f3d2c73697a655f32302c636f6c6f725f4646464646462c745f37302c675f73652c785f3136"><a href="https://camo.githubusercontent.com/70542e4d8cdd0c1e10042f4eaabd2421bc78ceecb7763258ed72da19af12161c/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f36393934616431396530653134396636383635313738313764303063383266622e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a484a766157527a5957357a5a6d467362474a685932732c736861646f775f35302c746578745f51314e4554694241536d6c7462586e706d3672706d366f3d2c73697a655f32302c636f6c6f725f4646464646462c745f37302c675f73652c785f3136" class="gallery-item"><img src="https://camo.githubusercontent.com/70542e4d8cdd0c1e10042f4eaabd2421bc78ceecb7763258ed72da19af12161c/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f36393934616431396530653134396636383635313738313764303063383266622e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a484a766157527a5957357a5a6d467362474a685932732c736861646f775f35302c746578745f51314e4554694241536d6c7462586e706d3672706d366f3d2c73697a655f32302c636f6c6f725f4646464646462c745f37302c675f73652c785f3136"></a></a></p><ul><li><p>元气提醒</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;dateTime.DATA&#125;&#125; </span><br><span class="line">今天是 我们相恋的第&#123;&#123;love.DATA&#125;&#125;天 </span><br><span class="line">距离上交工资还有&#123;&#123;pay.DATA&#125;&#125;天 </span><br><span class="line">距离你的生日还有&#123;&#123;birthday.DATA&#125;&#125;天 </span><br><span class="line">今日天气 &#123;&#123;weather.DATA&#125;&#125; </span><br><span class="line">今日温度 &#123;&#123;temp.DATA&#125;&#125;度 </span><br><span class="line">空气湿度 &#123;&#123;humidity.DATA&#125;&#125; </span><br><span class="line">风向 &#123;&#123;wind.DATA&#125;&#125; </span><br><span class="line">每日一句 </span><br><span class="line">&#123;&#123;message.DATA&#125;&#125; </span><br></pre></td></tr></table></figure></li><li><p>工资模板</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;dateTime.DATA&#125;&#125; </span><br><span class="line">亲爱的，今天要发工资了，咱们账户上又多了一笔！注意查收~！ </span><br></pre></td></tr></table></figure></li><li><p>生日模板</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;dateTime.DATA&#125;&#125; </span><br><span class="line">听说今天是你人生当中第 &#123;&#123;individual.DATA&#125;&#125; 个生日？</span><br><span class="line">天呐， 我差点忘记！因为你永远18岁~。 </span><br><span class="line">尽管，日历告诉我：你又涨了一岁，但你还是那个天真可爱的小仙女，生日快乐! </span><br></pre></td></tr></table></figure></li><li><p>纪念日模板</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;dateTime.DATA&#125;&#125; </span><br><span class="line">今天是在一起&#123;&#123;anniversary.DATA&#125;&#125;周年纪念日。 </span><br><span class="line">经历了风风雨雨,最终依然走在一起,很幸运,很幸福!我们的小家庭要一直幸福下去。 </span><br></pre></td></tr></table></figure></li></ul><p>这里的模板id就是分别对应的config.js的那四个模板id</p><h4 id="获取公众号的accect-token的权限"><a href="#获取公众号的accect-token的权限" class="headerlink" title="获取公众号的accect_token的权限"></a>获取公众号的accect_token的权限</h4><blockquote><p>accect_token是获取我们访问公众号接口的一个必填字段，需要先获取。获取这个需要有url，所以需要准备一台个人的云服务器</p></blockquote><ul><li>将整个项目放到云服务器上</li><li>进入这个项目的目录</li><li>检查config.js文件中的token字段的值是不是和公众号接口配置中的值是一样的，需要时一致的。</li><li>用node运行一下connect.js脚本</li><li>提交一下接口配置信息的认证。等待页面提示成功</li><li>取消node的connect.js脚本</li></ul><p>此处我省略了一些内容，connect.js监听的是8080,但是接口配置只能是80端口或者443端口，所以基于这个需要做个接口的转发，利用宝塔面板可以很容易的实现接口的反向代理。</p><h4 id="设置指定发送的人员"><a href="#设置指定发送的人员" class="headerlink" title="设置指定发送的人员"></a>设置指定发送的人员</h4><p>进入api.js,修改两个template对象的touser字段</p><p><a href="https://camo.githubusercontent.com/247facdfa86f8bed4736a0a05499af623be987a714e923002e1da8252bd588e5/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f36303935653238303764373734316466623366636564326535383435653132632e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a484a766157527a5957357a5a6d467362474a685932732c736861646f775f35302c746578745f51314e4554694241536d6c7462586e706d3672706d366f3d2c73697a655f32302c636f6c6f725f4646464646462c745f37302c675f73652c785f3136"><a href="https://camo.githubusercontent.com/247facdfa86f8bed4736a0a05499af623be987a714e923002e1da8252bd588e5/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f36303935653238303764373734316466623366636564326535383435653132632e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a484a766157527a5957357a5a6d467362474a685932732c736861646f775f35302c746578745f51314e4554694241536d6c7462586e706d3672706d366f3d2c73697a655f32302c636f6c6f725f4646464646462c745f37302c675f73652c785f3136" class="gallery-item"><img src="https://camo.githubusercontent.com/247facdfa86f8bed4736a0a05499af623be987a714e923002e1da8252bd588e5/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f36303935653238303764373734316466623366636564326535383435653132632e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a484a766157527a5957357a5a6d467362474a685932732c736861646f775f35302c746578745f51314e4554694241536d6c7462586e706d3672706d366f3d2c73697a655f32302c636f6c6f725f4646464646462c745f37302c675f73652c785f3136"></a></a></p><ul><li>这里没有写进配置文件是考虑到可能有要发给不同的人的需求？</li></ul><p>进入app.js,修改CromJob构造函数的第一个参数来设置每日发送时间。</p><p><a href="https://camo.githubusercontent.com/d56e6481123ee5c39be058806e4d89131ae7e69cabd841fedec53d6cd0a27ad2/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f30386637313664656536303134383836383964333834316234343139366135642e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a484a766157527a5957357a5a6d467362474a685932732c736861646f775f35302c746578745f51314e4554694241536d6c7462586e706d3672706d366f3d2c73697a655f32302c636f6c6f725f4646464646462c745f37302c675f73652c785f3136"><a href="https://camo.githubusercontent.com/d56e6481123ee5c39be058806e4d89131ae7e69cabd841fedec53d6cd0a27ad2/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f30386637313664656536303134383836383964333834316234343139366135642e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a484a766157527a5957357a5a6d467362474a685932732c736861646f775f35302c746578745f51314e4554694241536d6c7462586e706d3672706d366f3d2c73697a655f32302c636f6c6f725f4646464646462c745f37302c675f73652c785f3136" class="gallery-item"><img src="https://camo.githubusercontent.com/d56e6481123ee5c39be058806e4d89131ae7e69cabd841fedec53d6cd0a27ad2/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f30386637313664656536303134383836383964333834316234343139366135642e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a484a766157527a5957357a5a6d467362474a685932732c736861646f775f35302c746578745f51314e4554694241536d6c7462586e706d3672706d366f3d2c73697a655f32302c636f6c6f725f4646464646462c745f37302c675f73652c785f3136"></a></a></p><h4 id="利用pm2运行app-js脚本"><a href="#利用pm2运行app-js脚本" class="headerlink" title="利用pm2运行app.js脚本"></a>利用pm2运行app.js脚本</h4><ul><li>先安装一下pm2</li><li>进入项目目录</li><li>运行<code>pm2 start app.js</code></li></ul><h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><p>以上步骤如果都完成的了，可以手动在浏览器输入<code>url:8080/base</code>和<code>url:8080/base/important</code>,或者调整app.js的监听时间改成即将到的时间来测试</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本项目本质是写好一个可以访问公众号群发消息模板的接口，然后利用CronJob实现每日定时发送模板信息。</p><p>目前模板的内容有限，模板的内容会不断新增，有能力的小伙伴如果有兴趣也可以自己修改代码实现更多的功能。</p><h2 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h2><ul><li><p>新增自定义情话（2022.10.05）</p><blockquote><p>再config.js中可自定义配置<code>love_message</code>每日情话，每日随机从中取出一条发送</p></blockquote></li></ul><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】使用Java Stream将List转为Map</title>
      <link href="/819fb86a.html"/>
      <url>/819fb86a.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有时博客内容会有变动，首发博客是最新的，其他博客地址可能未同步，请认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>使用Java Stream将List转换为Map可以使用<code>Collectors.toMap()</code>方法。<code>toMap()</code><br>方法接受两个参数，第一个参数是用于提取Map的键的函数，第二个参数是用于提取Map的值的函数。下面是一个示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Person&gt; people = Arrays.asList(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Alice&quot;</span>, <span class="number">25</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Bob&quot;</span>, <span class="number">30</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Charlie&quot;</span>, <span class="number">35</span>)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        Map&lt;String, Integer&gt; ageByName = people.stream()</span><br><span class="line">                .collect(Collectors.toMap(Person::getName, Person::getAge));</span><br><span class="line"></span><br><span class="line">        System.out.println(ageByName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的示例中，我们有一个<code>Person</code>类表示人员信息，包含姓名和年龄。我们将一个<code>List&lt;Person&gt;</code>转换为一个<code>Map&lt;String, Integer&gt;</code><br>，其中姓名作为键，年龄作为值。使用<code>Person::getName</code>作为键提取函数，<code>Person::getAge</code>作为值提取函数。最后，我们将结果打印出来。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java Stream </tag>
            
            <tag> List </tag>
            
            <tag> Map </tag>
            
            <tag> Collectors.toMap() </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】如何使用Stream的聚合功能</title>
      <link href="/e8e4863e.html"/>
      <url>/e8e4863e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><ol><li>求和（Sum）：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> numbers.stream().mapToInt(Integer::intValue).sum();</span><br><span class="line">System.out.println(<span class="string">&quot;Sum: &quot;</span> + sum);</span><br></pre></td></tr></table></figure><ol start="2"><li>求平均值（Average）：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"><span class="type">double</span> <span class="variable">average</span> <span class="operator">=</span> numbers.stream().mapToInt(Integer::intValue).average().orElse(<span class="number">0.0</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;Average: &quot;</span> + average);</span><br></pre></td></tr></table></figure><ol start="3"><li>最大值（Max）：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> numbers.stream().mapToInt(Integer::intValue).max().orElse(<span class="number">0</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;Max: &quot;</span> + max);</span><br></pre></td></tr></table></figure><ol start="4"><li>最小值（Min）：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> numbers.stream().mapToInt(Integer::intValue).min().orElse(<span class="number">0</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;Min: &quot;</span> + min);</span><br></pre></td></tr></table></figure><ol start="5"><li>计数（Count）：可以使用<code>count()</code>方法来计算Stream中元素的个数。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"><span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> numbers.stream().count();</span><br><span class="line">System.out.println(<span class="string">&quot;Count: &quot;</span> + count);</span><br></pre></td></tr></table></figure><ol start="6"><li>连接字符串（Joining）：可以使用<code>collect()</code>方法结合<code>Collectors.joining()</code>来将Stream中的元素连接成一个字符串。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; names = Arrays.asList(<span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Charlie&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">joinedNames</span> <span class="operator">=</span> names.stream().collect(Collectors.joining(<span class="string">&quot;, &quot;</span>));</span><br><span class="line">System.out.println(<span class="string">&quot;Joined Names: &quot;</span> + joinedNames);</span><br></pre></td></tr></table></figure><ol start="7"><li>分组（Grouping）：可以使用<code>collect()</code>方法结合<code>Collectors.groupingBy()</code>来根据某个属性对Stream中的元素进行分组。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Person&gt; people = Arrays.asList(</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Alice&quot;</span>, <span class="number">25</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Bob&quot;</span>, <span class="number">30</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Charlie&quot;</span>, <span class="number">25</span>)</span><br><span class="line">);</span><br><span class="line">Map&lt;Integer, List&lt;Person&gt;&gt; peopleByAge = people.stream().collect(Collectors.groupingBy(Person::getAge));</span><br><span class="line">System.out.println(<span class="string">&quot;People grouped by age: &quot;</span> + peopleByAge);</span><br></pre></td></tr></table></figure><ol start="8"><li>求和（Summarizing）：可以使用<code>collect()</code>方法结合<code>Collectors.summarizingInt()</code>等方法来获取元素的汇总信息，如求和、平均值、最大值、最小值等。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"><span class="type">IntSummaryStatistics</span> <span class="variable">stats</span> <span class="operator">=</span> numbers.stream().collect(Collectors.summarizingInt(Integer::intValue));</span><br><span class="line">System.out.println(<span class="string">&quot;Sum: &quot;</span> + stats.getSum());</span><br><span class="line">System.out.println(<span class="string">&quot;Average: &quot;</span> + stats.getAverage());</span><br><span class="line">System.out.println(<span class="string">&quot;Max: &quot;</span> + stats.getMax());</span><br><span class="line">System.out.println(<span class="string">&quot;Min: &quot;</span> + stats.getMin());</span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【日记】2023年9月8日</title>
      <link href="/ef2f882.html"/>
      <url>/ef2f882.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0/">系列文章地址</a></p><hr><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>2023&#x2F;9&#x2F;8</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>8:45 看起来漂亮多了</p></div></div><div class='timeline-item-content'><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-08/83430789878400.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-08/83430789878400.png"></a></p></div></div></div><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 九月 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【日记】2023年9月7日</title>
      <link href="/5691e8d4.html"/>
      <url>/5691e8d4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0/">系列文章地址</a></p><hr><p>几个事说一下吧</p><ol><li>早上跑步太猛，腿废了，走路都疼，上下楼梯那就是要命了，挪一步都费劲，膝盖废了</li><li>孩子从凌晨开始发烧，老婆又不在家，太辛苦了，下班后我就去栖霞店里面帮忙，到8号早上我过来上班还没好</li><li>手机早上跑步的时候可能因为汗太多，外屏不亮了，然后花了260买了一个64G的6s当备用机，临时用一段时间</li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 九月 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【Nginx系列】（一）Nginx基础概念</title>
      <link href="/nginx1.html"/>
      <url>/nginx1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/RocketMq/">系列文章地址</a></p><hr><h1 id="Nginx的三个主要应用场景"><a href="#Nginx的三个主要应用场景" class="headerlink" title="Nginx的三个主要应用场景"></a>Nginx的三个主要应用场景</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-20/78395942153300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-20/78395942153300.png"></a></p><h3 id="静态资源服务通过本地文件系统提供服务"><a href="#静态资源服务通过本地文件系统提供服务" class="headerlink" title="静态资源服务通过本地文件系统提供服务"></a>静态资源服务通过本地文件系统提供服务</h3><p>静态资源服务是指通过本地文件系统提供静态文件（如HTML、CSS、JavaScript、图片等）的服务。这种服务通常由Web服务器来提供，比如Nginx、Apache等。</p><p>静态资源服务的实现原理很简单，当客户端请求静态资源时，服务器会根据请求的URL路径找到对应的文件，并将文件内容返回给客户端。这个过程不需要进行动态处理，因此可以提高服务的性能和响应速度。</p><p>在Nginx中配置静态资源服务非常简单，只需要在配置文件中指定静态资源的根目录即可。例如，以下是一个简单的Nginx配置示例：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> example.com;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">root</span> /path/to/static/files;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ =<span class="number">404</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述配置中，<code>root</code>指定了静态资源的根目录，<code>location /</code>表示所有请求都会被该配置块处理。<code>try_files</code><br>指令用于尝试查找请求的文件，如果找到则返回文件内容，否则返回404错误。</p><h3 id="反向代理服务"><a href="#反向代理服务" class="headerlink" title="反向代理服务"></a>反向代理服务</h3><p>反向代理是一种服务器架构模式，它将客户端的请求转发给后端的多个服务器进行处理，并将处理结果返回给客户端。与正向代理不同，反向代理是对服务器端的资源进行代理，客户端并不知道请求的资源实际上是由哪个服务器提供的。</p><p>反向代理的主要作用是负载均衡和提高系统的可靠性和安全性。通过将请求分发给多个后端服务器，可以均衡服务器的负载，提高系统的并发处理能力。同时，反向代理还可以隐藏后端服务器的真实IP地址，增加系统的安全性。</p><p>Nginx是一款常用的反向代理服务器，它具有高性能、高并发处理能力和灵活的配置选项。在Nginx中配置反向代理非常简单，只需要在配置文件中指定后端服务器的地址即可。以下是一个简单的Nginx反向代理配置示例：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> example.com;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://backend_server;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述配置中，<code>proxy_pass</code>指令用于指定后端服务器的地址，可以是IP地址或域名。当客户端发送请求时，Nginx会将请求转发给后端服务器，并将后端服务器的响应返回给客户端。</p><h3 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h3><p>Nginx具有强大的性能缓存功能，可以有效提高网站的访问速度和性能。Nginx的性能缓存主要包括两个方面：静态文件缓存和反向代理缓存。</p><p>静态文件缓存是指将静态文件（如HTML、CSS、JavaScript、图片等）缓存到内存中，当客户端请求这些文件时，直接从缓存中返回，而不需要再次读取文件。这样可以大大减少文件的读取时间，提高网站的响应速度。</p><p>反向代理缓存是指将后端服务器的响应结果缓存到内存中，当客户端发送相同的请求时，直接从缓存中返回响应结果，而不需要再次请求后端服务器。这样可以减少对后端服务器的访问压力，提高系统的并发处理能力。</p><p>Nginx的缓存配置非常灵活，可以根据需要进行配置。可以设置缓存的有效期、缓存的大小、缓存的存储位置等。以下是一个简单的Nginx缓存配置示例：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">proxy_cache_path</span> /path/to/cache levels=<span class="number">1</span>:<span class="number">2</span> keys_zone=my_cache:<span class="number">10m</span> max_size=<span class="number">10g</span> inactive=<span class="number">60m</span>;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span> example.com;</span><br><span class="line"></span><br><span class="line">        <span class="section">location</span> / &#123;</span><br><span class="line">            <span class="attribute">proxy_cache</span> my_cache;</span><br><span class="line">            <span class="attribute">proxy_cache_valid</span> <span class="number">200</span> <span class="number">302</span> <span class="number">10m</span>;</span><br><span class="line">            <span class="attribute">proxy_cache_valid</span> <span class="number">404</span> <span class="number">1m</span>;</span><br><span class="line">            <span class="attribute">proxy_cache_use_stale</span> <span class="literal">error</span> timeout updating http_500 http_502 http_503 http_504;</span><br><span class="line">            <span class="attribute">proxy_cache_bypass</span> <span class="variable">$http_cache_control</span>;</span><br><span class="line">            <span class="attribute">proxy_no_cache</span> <span class="variable">$http_pragma</span> <span class="variable">$http_authorization</span>;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://backend_server;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述配置中，<code>proxy_cache_path</code>指令用于指定缓存的存储位置和大小。<code>proxy_cache</code>指令用于启用缓存，<code>proxy_cache_valid</code><br>指令用于设置缓存的有效期。<code>proxy_cache_use_stale</code>指令用于指定在后端服务器不可用时是否使用过期的缓存。<code>proxy_cache_bypass</code><br>和<code>proxy_no_cache</code>指令用于控制缓存的使用条件。</p><h3 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h3><p>负载均衡是指将客户端的请求分发给多个服务器进行处理，以达到均衡服务器负载、提高系统性能和可靠性的目的。负载均衡可以通过多种方式实现，包括硬件负载均衡器、软件负载均衡器和DNS负载均衡等。</p><p>Nginx是一款常用的软件负载均衡器，它具有高性能、高并发处理能力和灵活的配置选项。在Nginx中配置负载均衡非常简单，只需要在配置文件中指定后端服务器的地址即可。以下是一个简单的Nginx负载均衡配置示例：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="section">upstream</span> backend_servers &#123;</span><br><span class="line">        <span class="attribute">server</span> backend1.example.com;</span><br><span class="line">        <span class="attribute">server</span> backend2.example.com;</span><br><span class="line">        <span class="attribute">server</span> backend3.example.com;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span> example.com;</span><br><span class="line"></span><br><span class="line">        <span class="section">location</span> / &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://backend_servers;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述配置中，<code>upstream</code>指令用于定义后端服务器的地址，可以是IP地址或域名。<code>proxy_pass</code><br>指令用于将请求转发给后端服务器。当客户端发送请求时，Nginx会根据一定的负载均衡算法选择一个后端服务器进行处理。</p><p>Nginx支持多种负载均衡算法，包括轮询、IP哈希、最少连接数等。可以根据实际需求选择合适的负载均衡算法。</p><h3 id="API服务"><a href="#API服务" class="headerlink" title="API服务"></a>API服务</h3><p>API（Application Programming Interface）服务是指通过接口提供的一组功能和服务，用于与其他软件系统进行交互和通信。API服务通常用于实现不同系统之间的数据传输和功能调用。</p><p>API服务可以通过多种方式实现，包括RESTful API、SOAP API、GraphQL等。其中，RESTful<br>API是一种常用的API设计风格，它使用HTTP协议进行通信，通过URL和HTTP方法来表示资源和操作。</p><p>在实现API服务时，需要考虑以下几个方面：</p><ol><li>接口设计：定义API的资源和操作，包括URL路径、HTTP方法、请求参数、响应格式等。</li><li>授权认证：保护API的安全性，限制只有授权用户才能访问API。</li><li>数据传输：API服务通常需要与数据库或其他系统进行数据交互，需要考虑数据传输的方式和格式。</li><li>错误处理：处理API请求过程中可能出现的错误，返回合适的错误码和错误信息。</li></ol><p>在实际开发中，可以使用框架来简化API服务的实现。例如，使用Spring Boot可以快速搭建RESTful API服务，使用Express可以快速搭建Node.js<br>API服务。</p><h3 id="OpenResty"><a href="#OpenResty" class="headerlink" title="OpenResty"></a>OpenResty</h3><p>OpenResty是一个基于Nginx的高性能Web应用服务器，它将Nginx与Lua脚本语言集成在一起，提供了强大的扩展能力和灵活的配置选项。</p><p>OpenResty的主要特点包括：</p><ol><li>高性能：OpenResty基于Nginx，具有高性能和高并发处理能力。</li><li>扩展能力：OpenResty使用Lua脚本语言作为扩展语言，可以通过编写Lua脚本来实现自定义的功能和逻辑。</li><li>灵活配置：OpenResty的配置文件采用Nginx的配置语法，可以灵活配置各种功能和选项。</li><li>动态模块：OpenResty支持动态加载模块，可以根据需要加载和卸载模块，提高系统的灵活性和可维护性。</li></ol><p>使用OpenResty可以实现各种功能，包括反向代理、负载均衡、API服务、静态资源服务等。通过编写Lua脚本，可以实现自定义的功能和逻辑，如访问控制、请求转发、数据处理等。</p><p>OpenResty的安装和配置相对简单，可以根据官方文档进行操作。在实际开发中，可以根据需求选择合适的功能和配置选项，编写Lua脚本来实现自定义的功能。</p><h1 id="Nginx出现的历史背景"><a href="#Nginx出现的历史背景" class="headerlink" title="Nginx出现的历史背景"></a>Nginx出现的历史背景</h1><p>Nginx之所以出现，是因为互联网的数据量快速增长以及互联网的快速普及、全球化和物联网的发展。这些因素导致了对网络服务器的性能和效率要求越来越高。</p><p>在过去，Apache是最常用的Web服务器软件之一。然而，Apache的架构是基于每个连接对应一个进程的模型，这种模型在面对大量并发连接时效率较低。由于摩尔定律的存在，硬件性能不断提升，但Apache的架构并没有跟上硬件性能的发展。</p><p>Nginx的出现正是为了解决Apache的性能问题。Nginx采用了事件驱动的异步非阻塞架构，可以处理大量并发连接而不会消耗过多的系统资源。它使用少量的线程来处理多个连接，而不是为每个连接创建一个进程。这种架构使得Nginx在高并发场景下表现出色，能够更好地应对互联网数据量的快速增长。</p><p>此外，Nginx还具有高度可扩展性和灵活性，可以作为反向代理服务器、负载均衡器和静态文件服务器等多种用途。它还支持动态模块的扩展，可以根据实际需求进行功能扩展和定制。</p><p>总结来说，Nginx之所以出现，是为了满足互联网数据量快速增长和高并发连接的需求，以及解决Apache在处理大量并发连接时的性能问题。它的异步非阻塞架构和高度可扩展性使得它成为了互联网领域中非常重要的服务器软件之一。</p><h1 id="为什么用Nginx？"><a href="#为什么用Nginx？" class="headerlink" title="为什么用Nginx？"></a>为什么用Nginx？</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-20/78868569858100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-20/78868569858100.png"></a></p><ol><li><p><strong>高并发，高性能</strong><br>：Nginx采用了事件驱动的异步非阻塞架构，能够处理大量并发连接，而且在高负载情况下仍然能够保持较低的资源消耗。它的事件驱动模型使得它能够更好地处理并发请求，提供更高的吞吐量和更低的延迟。主流的32核心64G内存的服务器，可以轻松达到数千万并发请求连接，处理静态资源可以达到一千万的RPS。</p></li><li><p><strong>可扩展性好</strong>：Nginx的设计使得它非常适合构建可扩展的系统。它可以作为负载均衡器，将请求分发到多个后端服务器上，从而实现水平扩展。此外，Nginx还支持动态模块加载，可以根据需要添加或删除模块，方便扩展功能。</p></li><li><p><strong>高可靠性</strong><br>：Nginx具有出色的稳定性和可靠性。它采用了多进程或多线程的工作模式，每个进程或线程都是独立的，一个进程或线程的崩溃不会影响其他进程或线程的正常工作。此外，Nginx还具有自动故障恢复和自动重启功能，可以在出现故障时保持服务的可用性。</p></li><li><p><strong>热部署</strong>：Nginx支持热部署，即在不停止服务的情况下更新配置文件或模块。这意味着可以在不影响用户访问的情况下进行系统配置的更改或升级。</p></li><li><p><strong>BSD许可证</strong>：Nginx采用BSD许可证，这意味着它可以免费使用，并且可以自由修改和分发。BSD许可证还允许将Nginx用于商业目的，而无需公开源代码。</p></li></ol><p>综上所述，Nginx具有高并发、高性能、可扩展性好、高可靠性和热部署等优点，使得它成为构建高性能、可靠的Web应用程序和服务的理想选择。</p><h1 id="Nginx的组成"><a href="#Nginx的组成" class="headerlink" title="Nginx的组成"></a>Nginx的组成</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-20/79286049684000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-20/79286049684000.png"></a></p><ol><li><p>Nginx 二进制可执行文件：这是Nginx的核心组件，它是一个独立的可执行文件，负责接收和处理客户端的请求，并将请求转发给后端的服务器。Nginx的二进制可执行文件通常位于操作系统的可执行文件路径中，比如<code>/usr/sbin/nginx</code>。</p></li><li><p>Nginx.conf配置文件：这是Nginx的主要配置文件，用于配置Nginx服务器的各种参数和行为。Nginx.conf文件包含了全局配置、http模块配置、server模块配置等多个部分，可以通过编辑该文件来定制Nginx服务器的行为。</p></li><li><p>access.log访问日志：Nginx会将每个客户端的请求记录到access.log文件中，该文件记录了客户端的IP地址、访问时间、请求的URL、HTTP状态码等信息。通过查看access.log文件，可以了解到Nginx服务器的访问情况，对于排查问题和分析性能非常有帮助。</p></li><li><p>error.log错误日志：Nginx会将服务器的错误信息记录到error.log文件中，该文件记录了Nginx服务器在处理请求过程中出现的错误，比如请求超时、后端服务器连接失败等。通过查看error.log文件，可以及时发现和解决服务器的问题。</p></li></ol><p>除了以上几个组成部分，Nginx还可以通过加载各种模块来扩展其功能，比如HTTP模块、SSL模块、缓存模块等。这些模块可以通过在Nginx.conf配置文件中进行配置和加载。</p><h1 id="Nginx版本"><a href="#Nginx版本" class="headerlink" title="Nginx版本"></a>Nginx版本</h1><ol><li><p>Nginx 0.1.0：这是Nginx的第一个版本，发布于2004年10月4日。这个版本只支持基本的HTTP功能。</p></li><li><p>Nginx 0.2.0：发布于2004年10月10日，这个版本增加了对FastCGI的支持。</p></li><li><p>Nginx 0.3.0：发布于2004年10月26日，这个版本增加了对代理服务器的支持。</p></li><li><p>Nginx 0.4.0：发布于2004年11月9日，这个版本增加了对SSL的支持。</p></li><li><p>Nginx 0.5.0：发布于2005年1月4日，这个版本增加了对虚拟主机的支持。</p></li><li><p>Nginx 0.6.0：发布于2006年4月4日，这个版本增加了对缓存的支持。</p></li><li><p>Nginx 0.7.0：发布于2008年5月6日，这个版本增加了对HTTP流的支持。</p></li><li><p>Nginx 0.8.0：发布于2010年6月8日，这个版本增加了对异步文件IO的支持。</p></li><li><p>Nginx 1.0.0：发布于2011年4月12日，这个版本是Nginx的第一个稳定版本。</p></li><li><p>Nginx 1.2.0：发布于2012年4月24日，这个版本增加了对IPv6的支持。</p></li><li><p>Nginx 1.4.0：发布于2013年4月24日，这个版本增加了对SPDY的支持。</p></li><li><p>Nginx 1.6.0：发布于2014年4月24日，这个版本增加了对HTTP&#x2F;1.1的支持。</p></li><li><p>Nginx 1.8.0：发布于2015年4月21日，这个版本增加了对HTTP&#x2F;2的支持。</p></li><li><p>Nginx 1.10.0：发布于2016年4月26日，这个版本增加了对TLS SNI的支持。</p></li><li><p>Nginx 1.12.0：发布于2017年4月12日，这个版本增加了对TLS 1.3的支持。</p></li><li><p>Nginx 1.14.0：发布于2018年4月17日，这个版本增加了对动态模块的支持。</p></li><li><p>Nginx 1.16.0：发布于2019年4月23日，这个版本增加了对gRPC的支持。</p></li><li><p>Nginx 1.18.0：发布于2020年4月21日，这个版本增加了对HTTP&#x2F;3的支持。</p></li><li><p>Nginx 1.19.1：发布于2020年7月7日。</p></li><li><p>Nginx 1.20.0：发布于2021年4月20日。</p></li><li><p>Nginx 1.21.0：发布于2021年7月12日。</p></li><li><p>Nginx 1.22.1：发布于2022年5月24日。</p></li></ol><p>Nginx的版本号由三个数字组成，格式为<code>主版本号.次版本号.修订版本号</code>。例如，1.18.0是一个典型的Nginx版本号。</p><ul><li>主版本号：当Nginx的主要功能发生重大变化或者有不兼容的改动时，主版本号会增加。这意味着新版本可能需要用户进行一些修改或者配置调整才能正常使用。</li><li>次版本号：当Nginx的功能有较大的增强或者有一些新特性添加时，次版本号会增加。这些新特性通常不会破坏现有的配置和使用方式。</li><li>修订版本号：当Nginx进行一些错误修复、性能优化或者其他小的改动时，修订版本号会增加。这些改动通常不会引入新的功能或者破坏现有的配置。</li></ul><p>通常情况下，我们可以通过查看Nginx的版本号来了解其功能和改动情况。比如，如果版本号的主版本号发生了变化，那么可能需要注意一些不兼容的改动；如果版本号的次版本号增加了，那么可能有一些新的功能或者特性可以使用；如果版本号的修订版本号增加了，那么可能有一些错误修复或者性能优化。</p><h1 id="如何选择Nginx版本"><a href="#如何选择Nginx版本" class="headerlink" title="如何选择Nginx版本"></a>如何选择Nginx版本</h1><ol><li><p>开源免费版Nginx：</p><ul><li>这是最常见的Nginx版本，也是最广泛使用的版本。</li><li>它是一个高性能的HTTP和反向代理服务器，可以用于负载均衡、静态资源缓存、反向代理等场景。</li><li>开源免费版Nginx具有稳定性高、性能优越、配置简单等特点。</li><li>它提供了丰富的模块和插件，可以满足大部分的需求。</li><li>如果你只需要基本的HTTP和反向代理功能，并且对商业支持没有特别的需求，那么开源免费版Nginx是一个不错的选择。</li></ul></li><li><p>商业版Nginx Plus：</p><ul><li>商业版Nginx Plus是由Nginx官方提供的增强版Nginx。</li><li>它在开源版本的基础上增加了一些高级功能和工具，如负载均衡算法、健康检查、实时监控、高级缓存等。</li><li>商业版Nginx Plus还提供了商业支持和服务，包括技术支持、紧急修复、性能优化等。</li><li>如果你需要更高级的功能和更可靠的商业支持，可以考虑使用商业版Nginx Plus。</li></ul></li><li><p>阿里巴巴Tengine：</p><ul><li>Tengine是由阿里巴巴集团开发的Nginx衍生版本。</li><li>它在官方主干版本的基础上进行了一些修改和优化，以适应阿里巴巴的特定需求。</li><li>Tengine在性能和稳定性方面与官方版本相当，但可能会有一些额外的功能和特性。</li><li>如果你是阿里巴巴的用户，或者对Tengine的特定功能有需求，可以考虑使用阿里巴巴Tengine。</li></ul></li><li><p>OpenResty：</p><ul><li>OpenResty是一个基于Nginx和Lua的Web应用服务器。</li><li>它将Nginx作为核心，通过Lua脚本扩展了Nginx的功能，使其可以处理动态请求和业务逻辑。</li><li>OpenResty适用于需要在Nginx上编写复杂的业务逻辑的场景，如API网关、微服务架构等。</li><li>如果你需要在Nginx上编写复杂的业务逻辑，可以考虑使用OpenResty。</li></ul></li></ol><p>综上所述，选择哪个版本的Nginx取决于你的具体需求和使用场景。如果你只需要基本的HTTP和反向代理功能，开源免费版Nginx是一个不错的选择。如果你需要更高级的功能和商业支持，可以考虑商业版Nginx<br>Plus。如果你是阿里巴巴的用户或对Tengine的特定功能有需求，可以考虑使用阿里巴巴Tengine。如果你需要在Nginx上编写复杂的业务逻辑，可以考虑使用OpenResty。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 缓存 </tag>
            
            <tag> Nginx </tag>
            
            <tag> 静态资源服务 </tag>
            
            <tag> 反向代理服务 </tag>
            
            <tag> 负载均衡 </tag>
            
            <tag> API服务 </tag>
            
            <tag> OpenResty </tag>
            
            <tag> Nginx版本 </tag>
            
            <tag> 开源免费版Nginx </tag>
            
            <tag> 商业版Nginx Plus </tag>
            
            <tag> 阿里巴巴Tengine </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Java中有哪些方式能实现锁某个变量</title>
      <link href="/9ee38b1b.html"/>
      <url>/9ee38b1b.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>在Java中，有几种方式可以实现对某个变量的锁定：</p><ol><li>使用synchronized关键字：synchronized关键字是Java中最常用的实现锁的方式之一。通过在方法或代码块中使用synchronized关键字，可以确保同一时间只有一个线程可以访问被锁定的变量或代码块。例如：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">synchronizedMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 代码块被锁定，只能被一个线程执行</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">someMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">        <span class="comment">// 代码块被锁定，只能被一个线程执行</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>使用ReentrantLock类：ReentrantLock是Java提供的一个可重入锁实现类。与synchronized关键字相比，ReentrantLock提供了更多的灵活性和功能，例如可定时的、可中断的、公平的锁等。使用ReentrantLock可以通过lock()<br>和unlock()方法来手动控制对变量的锁定和释放。例如：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">someMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    lock.lock(); <span class="comment">// 锁定变量</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 代码块被锁定，只能被一个线程执行</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlock(); <span class="comment">// 释放锁</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>使用Atomic类：Java提供了一系列的原子类，如AtomicInteger、AtomicLong等，它们提供了一种线程安全的方式来操作变量。这些原子类使用了底层的CAS（Compare<br>and Swap）操作，可以实现对变量的原子性操作，避免了使用锁的开销。例如：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="type">AtomicInteger</span> <span class="variable">counter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">increment</span><span class="params">()</span> &#123;</span><br><span class="line">    counter.incrementAndGet(); <span class="comment">// 原子性地增加变量的值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>使用volatile关键字：volatile关键字用于修饰变量，确保对该变量的读写操作具有可见性，即一个线程对该变量的修改对其他线程是可见的。虽然volatile关键字不能实现像锁那样的互斥访问，但它可以用于确保变量的一致性。例如：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">volatile</span> <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">someMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    flag = <span class="literal">true</span>; <span class="comment">// 对volatile变量的写操作</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">anotherMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">        <span class="comment">// 对volatile变量的读操作</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li><p>使用Lock接口的实现类：除了ReentrantLock，Java还提供了其他实现了Lock接口的类，如ReadWriteLock、StampedLock等。这些类提供了更多的锁定机制和功能，例如读写锁、乐观锁等。根据具体的需求，可以选择合适的Lock实现类来实现对变量的锁定。</p></li><li><p>使用synchronized关键字的Lock对象：除了使用synchronized关键字锁定方法或代码块外，还可以使用synchronized关键字锁定一个特定的对象，即使用synchronized关键字的Lock对象。这种方式可以更细粒度地控制对变量的锁定。例如：</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">someMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">        <span class="comment">// 代码块被锁定，只能被一个线程执行</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>除了前面提到的方式，还有其他一些方式可以在Java中对变量进行锁定：</p><ol start="7"><li>使用ReadWriteLock接口：ReadWriteLock接口提供了读写锁的机制，允许多个线程同时读取共享变量，但只允许一个线程进行写操作。这种方式可以提高并发性能，适用于读多写少的场景。例如：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReadWriteLock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantReadWriteLock;</span><br><span class="line"></span><br><span class="line"><span class="type">ReadWriteLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantReadWriteLock</span>();</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">readMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    lock.readLock().lock(); <span class="comment">// 获取读锁</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 读取共享变量</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.readLock().unlock(); <span class="comment">// 释放读锁</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">writeMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    lock.writeLock().lock(); <span class="comment">// 获取写锁</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 修改共享变量</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.writeLock().unlock(); <span class="comment">// 释放写锁</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="8"><li>使用Semaphore类：Semaphore是一个计数信号量，可以用于控制同时访问某个资源的线程数量。通过设置Semaphore的许可数量，可以限制对变量的并发访问。例如：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.Semaphore;</span><br><span class="line"></span><br><span class="line"><span class="type">Semaphore</span> <span class="variable">semaphore</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Semaphore</span>(<span class="number">1</span>); <span class="comment">// 设置许可数量为1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">someMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        semaphore.acquire(); <span class="comment">// 获取许可</span></span><br><span class="line">        <span class="comment">// 访问共享变量</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        <span class="comment">// 处理中断异常</span></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        semaphore.release(); <span class="comment">// 释放许可</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>除了前面提到的方式，还有一些其他的方式可以在Java中对变量进行锁定：</p><ol start="9"><li>使用StampedLock类：StampedLock是Java<br>8引入的一种乐观读写锁机制。它提供了一种优化的读写锁实现，允许多个线程同时读取共享变量，但只允许一个线程进行写操作。StampedLock使用乐观锁和版本号的概念，可以提供更高的并发性能。例如：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.StampedLock;</span><br><span class="line"></span><br><span class="line"><span class="type">StampedLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StampedLock</span>();</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">readMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">long</span> <span class="variable">stamp</span> <span class="operator">=</span> lock.tryOptimisticRead(); <span class="comment">// 尝试获取乐观读锁</span></span><br><span class="line">    <span class="comment">// 读取共享变量</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">if</span> (!lock.validate(stamp)) &#123;</span><br><span class="line">        <span class="comment">// 乐观读锁无效，需要升级为悲观读锁</span></span><br><span class="line">        stamp = lock.readLock(); <span class="comment">// 获取悲观读锁</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 读取共享变量</span></span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlockRead(stamp); <span class="comment">// 释放悲观读锁</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">writeMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">long</span> <span class="variable">stamp</span> <span class="operator">=</span> lock.writeLock(); <span class="comment">// 获取写锁</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 修改共享变量</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlockWrite(stamp); <span class="comment">// 释放写锁</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="10"><li>使用Condition接口：Condition接口是与锁相关联的条件，可以用于实现更复杂的线程通信和同步。通过使用Condition，可以在特定条件下对变量进行等待和唤醒操作。例如：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Condition;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"><span class="type">Condition</span> <span class="variable">condition</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">awaitMethod</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    lock.lock();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        condition.await(); <span class="comment">// 在条件下等待</span></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">signalMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    lock.lock();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        condition.signal(); <span class="comment">// 唤醒等待的线程</span></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【BUG】Operation not allowed for a result set of type ResultSet.TYPE_FORWARD_ONLY</title>
      <link href="/c98e6f2d.html"/>
      <url>/c98e6f2d.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/RocketMq/">系列文章地址</a></p><hr><h1 id="报错内容"><a href="#报错内容" class="headerlink" title="报错内容"></a>报错内容</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.dao.TransientDataAccessResourceException: StatementCallback; SQL [SELECT <span class="title function_">concat_ws</span><span class="params">(<span class="string">&#x27;,&#x27;</span>,id, time, imgname, hex(imgdata)</span>, img, results, state, pjwd, orgcode, orgname, tickettype, jsonid, flag, inputtime, analysis, project_id, countfx, type, ticketname)  FROM t_json_data where orgCode=<span class="string">&#x27;O06000000000130&#x27;</span> and project_id=<span class="string">&#x27;PC1692689126000&#x27;</span> LIMIT <span class="number">1500</span> OFFSET <span class="number">0</span>]; Operation not allowed <span class="keyword">for</span> a result set of type ResultSet.TYPE_FORWARD_ONLY.; nested exception is java.sql.SQLException: Operation not allowed <span class="keyword">for</span> a result set of type ResultSet.TYPE_FORWARD_ONLY.</span><br><span class="line">at org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate(SQLStateSQLExceptionTranslator.java:<span class="number">110</span>)</span><br><span class="line">at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:<span class="number">72</span>)</span><br><span class="line">at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:<span class="number">81</span>)</span><br><span class="line">at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:<span class="number">81</span>)</span><br><span class="line">at org.springframework.jdbc.core.JdbcTemplate.translateException(JdbcTemplate.java:<span class="number">1443</span>)</span><br></pre></td></tr></table></figure><h1 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h1><p>根据您提供的异常信息，您遇到了一个<code>org.springframework.dao.TransientDataAccessResourceException</code>异常。这个异常是由于在执行SQL查询时出现了问题。</p><p>具体来说，异常信息中提到了一个<code>Operation not allowed for a result set of type ResultSet.TYPE_FORWARD_ONLY</code><br>错误。这个错误通常是由于使用了<code>ResultSet.TYPE_FORWARD_ONLY</code>类型的结果集，而该类型的结果集只能向前遍历，不支持随机访问。</p><p>要解决这个问题，您可以尝试以下几种方法：</p><ol><li>使用<code>ResultSet.TYPE_SCROLL_INSENSITIVE</code>或<code>ResultSet.TYPE_SCROLL_SENSITIVE</code>类型的结果集，这些类型的结果集支持随机访问。您可以在执行查询时指定结果集的类型，例如：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY);</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> statement.executeQuery(<span class="string">&quot;SELECT ...&quot;</span>);</span><br></pre></td></tr></table></figure><ol start="2"><li>如果您只需要向前遍历结果集，可以尝试在执行查询时添加<code>ResultSet.CONCUR_READ_ONLY</code>参数，例如：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY);</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> statement.executeQuery(<span class="string">&quot;SELECT ...&quot;</span>);</span><br></pre></td></tr></table></figure><ol start="3"><li>如果您使用的是Spring的JdbcTemplate，可以尝试使用<code>query</code>方法的重载版本，指定结果集的类型，例如：</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;MyObject&gt; results = jdbcTemplate.query(<span class="string">&quot;SELECT ...&quot;</span>, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;&#125;, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;&gt;(MyObject.class), ResultSet.TYPE_SCROLL_INSENSITIVE);</span><br></pre></td></tr></table></figure><p>请注意，具体的解决方法可能因您的代码和环境而异。如果以上方法都无法解决问题，建议您检查您的代码逻辑，确保在处理结果集时没有出现其他问题。</p><p>希望这些信息对您有所帮助！如果您有任何其他问题，请随时提问。</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">jdbcTemplate.query(<span class="string">&quot;SELECT * FROM your_table&quot;</span>, <span class="keyword">new</span> <span class="title class_">ResultSetExtractor</span>&lt;Void&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Void <span class="title function_">extractData</span><span class="params">(ResultSet rs)</span> <span class="keyword">throws</span> SQLException, DataAccessException &#123;</span><br><span class="line">        <span class="comment">// 使用支持滚动的结果集类型</span></span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">scrollableResultSet</span> <span class="operator">=</span> jdbcTemplate.getDataSource().getConnection()</span><br><span class="line">                .createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY)</span><br><span class="line">                .executeQuery(<span class="string">&quot;SELECT * FROM your_table&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 在这里执行操作</span></span><br><span class="line">        <span class="keyword">while</span> (scrollableResultSet.next()) &#123;</span><br><span class="line">            <span class="comment">// 处理结果集中的数据</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> BUG </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>使用Java分析器优化代码性能，解决OOM问题</title>
      <link href="/3ffdfec.html"/>
      <url>/3ffdfec.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>最近我一直在做性能优化，对一个单机应用做性能优化。主要是涉及到解析和导入导出相关的业务。</p><p>大致说一下这个单机应用干嘛的：制作票样，类似于答题卡。发给某些人填写，然后通过单机python图像识别存到数据库里面，在我们单机平台进行各种分析汇总数据。</p><p>前面呢已经优化了两块，一个是解析（目前性能提升了8倍，后续再优化），一个是汇总（性能提升了10倍+，后续再优化）。</p><p>写这个呢是因为有个服务在大数据量的时候总是OOM，实在是头疼呀，只能搞内存分析了，做内存分析有很多主要软件。。我这里呢不折腾，就用Idea自带的，个人觉得宇宙无敌啊。</p><p>实际业务呢，是需要实现一个功能，一键换机。我的实现思路呢是通过导出sql文件，然后另一台机子导入sql文件。</p><p>这里数据量实在是太大，主要是图片数据太大，因为历史表设计问题，所以图片是直接存储到数据库的。</p><p>我们是一个批次为一组，一个批次下面有多家单位，一个单位下面可能会有数千条数据，每条数据都有一张图片，大部分图片大小在200k左右。</p><p>另一个受限点是，实际运行程序的单机内存只有4g的样子，非常小。</p><p>一家单位导出来的数据量大概是2个多G</p><h1 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h1><p>在试图&gt;工具窗口下面有一个分析器，点开它</p><p>如果你的idea没有该功能，请升级最新版</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/23773955283000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/23773955283000.png"></a></p><p>然后我们正常启动项目</p><p>项目起来后，这边会刷出启动的进程，然后我们需要附加Profile</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/24298072233900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/24298072233900.png"></a></p><p>这里显示正在分析那就没问题了，我们去网站上执行导出操作</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/24341566484000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/24341566484000.png"></a></p><h1 id="实时查看CPU和堆内存"><a href="#实时查看CPU和堆内存" class="headerlink" title="实时查看CPU和堆内存"></a>实时查看CPU和堆内存</h1><p>这里能看到这种情况是因为，我优化了一下，在每次处理完之后就手动GC一下，如果不手动GC大概处理三轮就OOM了</p><p>这个也是我已经优化后的一种手段，后续我打算调高每次批量处理的阈值，提高单次处理效率</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/24522461046900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/24522461046900.png"></a></p><p>我们点击停止分析，就能看到下面的页面</p><h1 id="分析结果"><a href="#分析结果" class="headerlink" title="分析结果"></a>分析结果</h1><h2 id="火焰图"><a href="#火焰图" class="headerlink" title="火焰图"></a>火焰图</h2><p>火焰图（Flame graph）是一种可视化工具，用于分析和优化软件的性能。它以图形的形式展示了程序在执行过程中各个函数的调用关系和耗时情况。</p><p>火焰图的横轴表示程序的执行时间，纵轴表示函数调用栈。每个函数在火焰图中以一个矩形表示，矩形的宽度表示函数在执行过程中所占用的时间比例，矩形的高度表示函数的调用深度。通过火焰图，我们可以直观地看到程序中哪些函数占用了大量的时间，从而帮助我们找到性能瓶颈和优化的方向。</p><p>要生成火焰图，通常需要使用性能分析工具来采集程序的执行数据。常用的性能分析工具包括Linux下的perf、Java应用程序中的Java<br>Flight Recorder（JFR）和Java VisualVM等。这些工具可以记录程序的函数调用信息和耗时情况，并生成火焰图。</p><p>生成火焰图后，我们可以通过观察火焰图中的热点函数（即占用时间较多的函数）来进行性能优化。可以考虑对热点函数进行代码优化、算法优化、并发优化等，以提高程序的性能和响应速度。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/24838822497900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/24838822497900.png"></a></p><h2 id="调用树"><a href="#调用树" class="headerlink" title="调用树"></a>调用树</h2><p>调用树（Call Tree）是一种可视化工具，用于展示程序在执行过程中函数之间的调用关系。它以树状结构的形式展示了函数的调用层次和调用次数。<br>在调用树中，根节点表示程序的入口函数，每个子节点表示一个被调用的函数。通过观察调用树，我们可以了解函数之间的调用流程，找到函数的调用路径和调用次数，从而帮助我们分析程序的执行逻辑和性能瓶颈。<br>调用树通常会显示每个函数的调用次数和总耗时。这样我们可以快速识别出调用次数较多或耗时较长的函数，从而找到可能的性能问题和优化的方向。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/24931815159500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/24931815159500.png"></a></p><h2 id="方法列表"><a href="#方法列表" class="headerlink" title="方法列表"></a>方法列表</h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/24978358079500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/24978358079500.png"></a></p><h2 id="时间线"><a href="#时间线" class="headerlink" title="时间线"></a>时间线</h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/25028486965000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/25028486965000.png"></a></p><h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/25043170386500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/25043170386500.png"></a></p><h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><p>这些图吧，看着也不麻烦，揣摩下也大概能知道干嘛的，我举个例子</p><p>在调用树视图中，我们一直点下去，看到下面这个方法，占用了33.8%时间啊，这不得赶紧优化一下</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/25356760776500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/25356760776500.png"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String <span class="title function_">bytesToHexString</span><span class="params">(<span class="type">byte</span>[] bytes)</span> &#123;</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">hexString</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">byte</span> b : bytes) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">hex</span> <span class="operator">=</span> Integer.toHexString(<span class="number">0xff</span> &amp; b);</span><br><span class="line">        <span class="keyword">if</span> (hex.length() == <span class="number">1</span>) &#123;</span><br><span class="line">            hexString.append(<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        hexString.append(hex);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> hexString.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>那我后面就把这块代码重构下就行，优化过程大致就是这样啦，大家掌握方法就好</p><h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>如果你想了解使用Xrebel优化接口性能，可以看看这篇文章：<a href="http://blog.zysicyj.top/db82e5f2">http://blog.zysicyj.top/db82e5f2</a><br>我前两天写了优化解析接口性能的，可以看看这篇文章：<a href="http://blog.zysicyj.top/a384b09f">http://blog.zysicyj.top/a384b09f</a></p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【日记】2023年9月6日</title>
      <link href="/ee2d8fb1.html"/>
      <url>/ee2d8fb1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0/">系列文章地址</a></p><hr><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>2023&#x2F;9&#x2F;6</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>更新文章内容</p></div></div><div class='timeline-item-content'><ul><li>完善花销记录</li><li>更新计划</li><li>新增日志</li></ul></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 小可爱</p></div></div><div class='timeline-item-content'><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/1823290921300.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/1823290921300.jpg"></a></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 早饭</p></div></div><div class='timeline-item-content'><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/1884358945400.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/1884358945400.png"></a></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>14:30 存储从阿里云迁移到腾讯云了</p></div></div><div class='timeline-item-content'><p>太贵了。。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/19646897417600.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/19646897417600.png"></a></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>中饭</p></div></div><div class='timeline-item-content'><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/52586523935400.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/52586523935400.png"></a></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>晚饭</p></div></div><div class='timeline-item-content'><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/52604800493000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/52604800493000.png"></a><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/52609166357100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/52609166357100.png"></a><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/52613168733800.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/52613168733800.png"></a><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/52617500552700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/52617500552700.png"></a></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>23:43 更新宝宝相册</p></div></div><div class='timeline-item-content'><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/52497771265100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/52497771265100.png"></a></p></div></div></div><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 九月 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Today</title>
      <link href="/today.html"/>
      <url>/today.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><blockquote><p>优先级说明：</p><ul><li><mark class="hl-label red">重要紧急</mark> </li><li><mark class="hl-label pink">重要不紧急</mark> </li><li><mark class="hl-label green">不重要紧急</mark> </li><li><mark class="hl-label default">不重要不紧急</mark> </li></ul></blockquote><h1 id="2023年9月28日"><a href="#2023年9月28日" class="headerlink" title="2023年9月28日"></a>2023年9月28日</h1><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">工作</button></li><li class="tab"><button type="button" data-href="#test1-2">博客</button></li><li class="tab"><button type="button" data-href="#test1-3">足迹</button></li><li class="tab"><button type="button" data-href="#test1-4">花销</button></li><li class="tab"><button type="button" data-href="#test1-5">体重</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><h2 id="证照清单导入功能"><a href="#证照清单导入功能" class="headerlink" title="证照清单导入功能"></a>证照清单导入功能</h2><h2 id="样式调整"><a href="#样式调整" class="headerlink" title="样式调整"></a>样式调整</h2><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><ul><li>基本数据类型<ul><li>Java补码实现基本数据类型</li></ul></li><li>基础语法<ul><li>Java移位运算符计算流程</li></ul></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>00:00~7:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>7:00~11:30</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>11:30~14:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>14:00~18:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>18:00~24:00</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'></div></div><div class='timeline-item-content'></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-4"><table><thead><tr><th>店名</th><th>地址</th><th>价格</th><th>评价</th><th>备注</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-5"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="归档"><a href="#归档" class="headerlink" title="归档"></a>归档</h1><p><a href="https://blog.zysicyj.top/today_2023_09">2023年9月</a></p><p>证件种类</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>账号</title>
      <link href="/account.html"/>
      <url>/account.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="c04ff720d308cfe1d0d2472cec4fa7cc171ab17fdeabc442e3f39172e2ebdb6a">daaeda1bd81b99ff12ca5177ed95b5bb263d5c5d0b10a0c3359c4520e82de8b02b85c2cef389b76d2763cf56ec4ab429f1c9cb45dc8eb178a86acec5e5b8bb1e4cbcede0ef53c0a2c493e376f6129cf7eb5d4edf9bf6cd14e67109c157882eac99d6124a009aad7f1144a6cc6eed95a458bd1e086edf119d212a7bc91743b1d28257cfd7cab5c0624e654ebfdfb5b61630ce5a6a5469fd1fdc2da79c3ba963aef7bc3ba05086685100ac777f14f5ab558d4f40d8ae9bf72b35627b2381446a5a7cbb2eeeb524b5a937ad925a437f68208c1a04e250a5e9e940bfc8f477ca5bc9ed6bda1c724d32d752e541487e0195fadf61cb91ae153adff0fd20ded1984a78a2e8be0a991773688615b833140290c2d51560234ed2ca26f4e030cda85cd5e9f19d0a0b40cfcbcb1dde00916d498a4e3bba0f6c74047a09c9ad2613569d5e712fb782114c91cf3299dbc379a67cec0c2c5569135be25f72ef10709bc6f667558489e9a4ea6970a7c90f7602c1a1ce03e9ca57e0ec93f42286fce11c06ad3762836646cf48ef0077db555daaced78f786b0b0a2f11d6bdd02a457d2e1032b9d2b0493ba932c93529d34350b46a500b7127370b10e5b028dc05acbcd8564875dd8614bc494afdf689ee521bc1e00d48c627151c1c4bfbf96f6c328878d7034df51dba51e56ccd8725640f7a38528b1a0ed23dbc12b9cfd9f02fbf13303593d587b34476e6e9b1769a0832e05b0bbd28fd8ddcfc858aab4b67dc25ba60db686ba5c3616d22b521ddfe6bec1d20a9909eab4f11ec5c4ae5aadc172e0d623339c09bcc677d9f63bea63ee5168c545b3f7cb68025e1f6714eba31152b7d17ad22e90d9172d81cb744fec8e0e9b4ed57f43636e7401473313863426fe1ddb93689b1cfb6bbaff33128e9c208295a0d3ffd6e74f630fec5eaaaa6ec024a6954e86340a407fabcf7bd3d5f58aa901438f7214388f30459dd5499b7eff8d821aeac1437e8dd7f18084d5c1c7d4226a8f276addab4309bc0355f042cc1d38598da2412637289ae311fe0df6cb269a3d50791ef5a17ebdbfdf843a7d75555b0e34b99633ddecc1428168a30b5d341457671456ca02185f1bac30cea0cbd0b53e1d19441994c8d67f31dfe6f8708781a318f677927e3792c278190f78a7a43d1b4703f923481522620af92601500aa480cf6dcc53bc29f319ec01a88f4c0b35beefec5f5412a523398ca774c4c6d809a51c5b8e96bc91c10c32043913a23c3a09ad84a68346cdcfa5847f0bf5a016328ef225d99c7901a5e0213ca951b801214389fabd72aba7ebcc4de37a6672c079b08f634b6d62e01bfc250379188c3f5056a5c3923562b61e470d7a942e1f01f1b59ba10d53d35d259a9135005d53744876f9acc96e5557a167d9e2e56b3df44ade5032416df534e42942e438a586b2b5acfa973188ed88f67ab8dd43aa3af50ba2a4a4cee0add93fc4d1bd7d1205629e2db22892ecbaecec6463fc5a03658a0133bbf5638dc4fd4d8631120ab3b559f753f8ee01be1a668ed8ee74bc8eb68b26c8c33ea1ec20d339fbf0f0abaa2b73cd1664c6f8f4bc77852f5138b77c5e9a2335ceb53252f08962bb7805dcaf49e9433d9af2246dcf4a926615f2db91410c4edbc2441890e1f258e07b86372835f17394d834ff977000ca9de035b0f08cd47482ddc1223669d9d0b01d6b4b23cf177d00ee5d9ca3c28693cf8a49b6c32ef4129223e8b5a69d92bf8012cfcb8bd7c9159822ad340e093e6fb0b5d20637a2533d0c5b486cd85b149192b4198de3c9d141779b20aee2639fcc95b2422896beca748fbc35d9251ca503c372d9d19fddebd72950b24c1b367f2c1eb071a888a760d7591772a64a32f05e86aa702830fe02076a3d12cbe7dbdeb4a8ca2d5eb3453e535f16d1508b2ad32686f30365d3302e7efaa67cccef4aac29f0d47a03b6b252cc707cbbba27c7da98f11d312e92dce33b6013aac3c78e64432d1284e52d2b188207ac5c87d3d42a0d4a9d1a38647257e7f1e656a2c660fbe35e14b95aa7dfd53241ac027173f6b67110c57d7c90441add70916a5c60012944bd4bb80908cce9025dbc31bf565cdf380e4af11c13917adbc7ba357d6681b68b0d1ea08bea01e5ed88a67df4b5c16e286cd65e812e4a2b26d3a04c85c00052b47ae2b2c28a63e3f690b3fdd1cc492012ac688302aee7dae90dab93adf49178cf4252454f7b0ea9e3b170c9770d1bd5b2656a6ddcdf40805ee1309a0aa759cdce1925f09189f8fe629d14553a10a2aee7cfdb5fd0dc12d6348095e0c3d1a6dd2f147349c605424e6e957f106ea0767ff3745cb1dd66cf6efb623cbec8cba028d086b6ba2a69519e3ad8553cfb8da85c24d4964cbc788b890138dc0ad131886b8bfe33a4947d848557c261ad2fae3db981db503bb5d7aa980e608218f042749e5ef8d797896e0ffa3e9530b9c4a7e70aead409109bbc4956c4b0c7b481d5c837118fa5e39f2e2aac493cb92f24f14c17288ed95c01e2fff22c8783e1b4c74bdef63d3e5139238b1be818050e4274ac10f9fcf60a76d70571d6c7e91688e2eb4b281a78075d557a1c07c858701f0e6511280ad6d3ebb3d8e32b8b38cc930b674c7f5f87cc7e94be87ff7e6d11d6df23aaae346c32bc012ba56e3a82ff3ecd02f3ee1f6d5b723394fe4f8b5f31604c751ea384409e5226a2c69660e2bedf49749e88779fae301a95ac592abb82105838aa68be20cd87b53a3197747b4797bcae0ab37e2b2f43b9aa164b233798018f86909d097735af45602ab655caaff33b807a3b757ce8fa3b76d9a5261a15bf8b2786bd7bf882f9c1b3b21037a74fe1523e7dc4aa18f704fed87b886dd11ffdcb1a3fa8b09277f906bae040f09c7c402d3e21abb12f9b6f627084b9acb4a9d18d5d378f4741dabbca9f77ca7ca22fc2e375293f4ac1cc3c680b459f1a95e5c377f6bd227665d8c047747889503e2f0918fec87d6947fb3211b526c2c968fc95a83599d316a92d748bdce233afe49f9839a698442009c63bab9dc8601a207ddf162a5ff9d0c51fff210a110bfbd9ea09aeb4e4d1cc11dcf8b834ef9e1a0a433b72262e16607cb07b4d241a8c1cffcded9f50e8e51dc68405c8cc0c40f4af2f1bfb2bada8ce0e52baded466e3f254cc61179b5b8f512a291b7dac9d224078408d2124f036972f2a894386dca95e38dfa855bb8cb6eef017a6b049cceb956903189495feabea62971dd6b78acc2a8c28750ca6fa6e885e5f19cc404ab08511c6fdc831e0215f2358bea2ae870a80be0f83c92fd4a06fb2d0885a0a4d1e7687d145d79fbb37f5c3983c1d05cbf12c478ea3b87f1cd3961171c7810d0e051b765f5a2348a15232ff9f8e6babfde017f187ad2db9409c7d1280ae44aa1ccf275e425e857fc7c533be6bd958548792b253c2d24b019a436359da33a18c767a3d5fa160f88b3e07e329ff668dcd6953adab9f3bf7167d4160ef5de760b8c1e6d163bb918306ffb7580620cd69e724fbb1822627d61161d1169ec404777072a430ea1cdf802466a1e48501b80f9983ca242dd0a56999184c60c8b46ecc0f735edb5df27340558bf171cd299fdcdedb21eda22bc4e0ff74dff6fe852e83f590ad26c62e020fce15fa1335d57b19e0cd890a014b46adaa659b3c5acd41e9a31ca43fd285cead347f16cc508070a679f94885dfbb899feabf775e2b1267e3ad7e1d32a89e0a07e1d8cec311f2079f73fccab6ce473d32be97d2abcaa20bdf0cfd21acc12e6ea292717fecfd48c1d0fcbe0ee2d13d847d36c1d6f16cf95027b54658848d62017dac4927d65f3c3449c98b448249293b7a9323b4741c0cb37109d5b658960274ec9ea4d43651a710fcfa424f7977bb50b6ecdf0b8dc3637a7061a683a90e35ab132fadd2c8bd581b3878bbdc4555cbf9dc8cd4db51bd41a53a9115ff1a09089706800e7dcdeb5004201ca4e3bf1f0167b51a089e070cf3bf23dd09cd38a7b5e16991681e3325981b9a18eca08509963bda2fffae3d11c8c98c144eb9c93f877dc30dea87a3158bf4d76362680e13d6f061fd8a888a53a8a748286e6df3200b7ce4e4790c11c7a98ace62e17d45e80565c9324fe3b95cdd66fad441525d815c219409b1949bcfd5d0c35ec9cfac0679c0eedbdc021c6c63a886ab2ee3e36cd0b4ce87eb8831881ce3995e8c5d525f21f86d3ab947d6c3735740edf312f42df9ded8b3e599ebb44801daed1b82160415cad7b0ce0eb2adb5f749fded05b88df1a19a93cb495aa2517a314c4d9e4384315aed4d63446db6dfa429938fb4abf1b5cf117e4ee151b929480b4a64919e1ff59ffb48367c2cee2d0b011c766cbf6b57ef7d01fbfc3a7e1ff1f9f77ac17ab6e9e0816229779ef5b7ec614523225e5965fb75a5bc9104ff42d7946fa8cd4a261a4b4a775ad28f6d26765a715653c71db7d88aa79a365b8f35d5f14a6a19dd3777ba416a2cdcd252b2f30c595a691128e43baa82a58bc898785ce73ab5d44b5eb72558bfa62d51f82b6f87cf75b338ccac05eb708f6eba248e8417865d6c562d11a09aa3c61fb37713f444bfb64a38a140c47a054da85fb90308da80d58646d54f33b4970ec30c1328e1c971574bc4c7a7cb144b982ae7ba4d09ad80881bde6561d5dfa99e8205d858cd40cd889ba15bd51c7ab90e248907683eb0e99d286974ac3f78e84e4cbd82749f7b72445c2f00fdc85da08213b0e37eba710c4ecb2a751efc5405128e5c75548d8fb6e724daf728979d9782280425c7a471850bf5d0385a9e17b5fe507ad2f9b7939d5224a5154b41c8fb8cd29db2e35ceb2b2f9459ce049749006970d69483e750ac9d30fc4575897518ee0d4fce6bf25172a7ac1c763473300ea64f9968d15ed47f32baf96e714dbccba05e616607141a50e12eef7aa29a2682060ffa4a1e6a06f3d2251d6edfbb63d61bbf1aec0fcaf5ab9a3e19b02c96a7edfe480c1e1db7c2cca01394f3758cd3660404ddc267aae6d0ec1213d8c1439b074098b94f2eb62a58e38cc7eef9111924a1d4427961a2dac40a7c57aa0b43286d6d359edeeff42286f02b7996c0fa643645770b5db8246cbb9acd1ae408eb77fef0e303a76988b859e6fe98f6225cffbbd7294ef1fd0b523c39639469911c07691a5bec41a24bd4354c7f07cab3e5a78b00ef17c13e1207e66916266841ae9922ea5fd5efde0ebedbdd9c24e60fe06c56ffb64ded5710700c4073f554b1042fc0f737f692e2c2cf0f6ed7e8bc8f3a47b8789ac529e58c2ddd98eca19c1b41ef8c14f3d967e47e2c5a741d707029aff77abdf37fb06f811b093a108b92bfe4aa8abb78db0fe02901d2fb4b6b259432a11ab9e17753359d059e8bf3cfdb9b0adb462e21989fd178b9f8252daf597ded86c0801b5919b47dae4acd5db6243ed8f2a1a3c78deb0b066d17321352e1d110ad69392ac98f272185a8bb2979bff664598a012df6373a4b5fd972d80ad85366c721d773996ce8ace7d2d3c15070b3c0e13b58ceef1144302658871a77f43a4f65df4b71f47ad36289bbae2a36ff9778d558daf688ed6710cf36cd84c5e83bdb618795562a3048b1c0d9cb1a58fe961f9eccd4cca51df2299b5968d5ec63be80a622c9f2967e6d06158624fa5f878af0add88df3179fbdb09a5536066e1592c055d3fc723ebc173e8cec9f3f30d0b56eac5c659bcd3fa34989c09ff261c7ff00bf6d9a085745b8064446af90451d3c4ed8a245b826625932b1ee2848cd87351abdb55c6db79af4c4d93770f5cf22543f26d8d9dc0566870ca4aac6f6bc10ac7c08fb5095dde38ca9eca457bed24fc9eceb1b3449684617933e54e07dab5f7b55032f143eef1e1003b16e7e54611c33e561f9a4424e1f420ba5d34cf96c5681b3bfda95ea6473bd9275b8983af1f00037741f42875b8c06c2d6cc67f633b729da53549f85c8d9ded32a6e90327636018cdeb5150b6f136620ef5d30aa06d2c73159ea068dede99d2f8fe2fed541bfc5ebb169a8dae848dbfe9aa316e37a89ada964a7e284b9c596c18a312dfdff0636c690aae8e5cc98d65a74dc1b37ee79e9c65015397c8326c377455d9a615ce234fb2392c6e304f019584313d34ee638a0ab7ec98c716781e3e06418adcd5d58cc5f68c962874ce1a5103d5891d656aa03b6b686bd83767a80591e9146a0ae7c8796f8497ba3395853d9f29d2c68d3234672a3b2afc9852c42542fcfc7040d156f44bfea974d1d3771f623c098ad1933395bb5471700ccea13e2e3635a75cdc4b8b49a2e953e08fffac90fac745a56284f6a2501161731b83786adc1c8e720294ca905417d1a13d5300e9884564e72984168b4e5965f3f7e9dd18c6afc86ca3a21e4970d198cd1c03689ab1c3ada21eb5d3e9d15dccc876313f21e4ace101d1e2c4cf7d4f0dab0a4175d587123ab42378d59b3f8fa11f1e956641e6275d5437311e3771ac384ff376c4b1b72c4890cbd620105fe2e5f185e84dfa31bf9066e7b6f4e9cb4b79b90eac4f03887da5c248fdb5724d48b01f4af2c1644c050f61ccd58535ff8f4556ecad30796d342a1627b33e3dac7020a0bd74cd4202e5f60d9aee50fdc6e38798e298b81f138d7336ae2cd35ee43b5135121bc0a98b7a25057b39c7495d69367700a4df0c087df0fd3847337ec9589e04cc92eacce1e2bd89fa74687b241cf1c4b161cbd9972fbb41e4b2e790a6a76fca9dd7a095ef1a55009a336cdd36d60e48acc2d52090a5227b0edcb687105dbb74bebf0af5539df06f81ace1011222d781208657d590c79a6189dec0e32ab383e023c05e55c69cb8ec5d804a5b7584323dbbd7b72f9eee2d448aaa89c54d4a97fdfc8e73bb4250c39fcf72eaa41f2b2cb79aee2cb2f632e0efd47f19ecc248f20f8c4a73a7446a88012a5da08ca815f07c767c8366354fd756eeb85c6932cafc619f1285da0507c5afe09d4192e60f05bd6c6940cab554e107fc8dd9899844852d64ead8f7bf67606d71cf399ab1f4c82666cb67a27e7030d4fc4d5cca3ad6395cf7f81c538c330068abb388ae8c58b709c5c2f4956e8e1ee68c2d2c8c9665562dd4d86f824f793a03d98d803c895bf670f0082ab7f8fd370ce51d619bb8698bc564a0f2c7a13673323d69c01d9ddd40f003308b72fd96710d62bbcbccfd9d8a6b604e4baefc9a8585ee918222d6b8dddea28124adf8a0c0295326ff4346bcce69a9e20e7bc8a73b2e5b230a9c85058dc98c24f0cf8202f0fcf0ca235bcbdb7597b7736d9fcc76cbb4708fd4daa227e586693bb9dbc0e6022f9171063022039655da7b4ab63f933256ebc7f72de7edbc6404e6297586c1d6a530ebb3e4d06df18a7bff91644fabc3ec2997dafdd8dd59592980077e35910efc24cbfbfd1de2ceb16dacc29d48323c22920919a6775d50451cac7ce863eb59544ca6651eec0bacfb924df907f3416dc35c69314f302e097d0415b1149d2f66f1fd59891746f0e8abdca9bf7d7ac6203bfeaa272e67678079f91f43b40f0639d395869d278fefa6241549c6457079c9b84bdaefe971ae2f6c95beab6a0d79afa941d1a4225a9d9c1d30607b4a2dc257c286d720a45530ab12cf419b3415ac9834e7896e38e844f2c6b010ceff368f79d2331f38221ef45e5f2e3aeee741061e56923a4d11216e43fc1f344e2bbec9c49daaa488f7b7f3a4f799d0ac310ff81b4669d16f4facfe2fe0a4fd1a4e6bab615dbd89d72c5f3752ad916ce34aef3d64d1523f8e1995ab1f689a56cce4e1bca82b369548e02758e9874843a492474f67d2dbd46deefb1af0d7bb6b68616f00d108ff49f418eb509cb9eb85d21aab9db3161cf7b35b22a028ddd58d87c3dfaf7268d09cec67b51862a4767948978c2f5be2cdce266feda600275f88e393493b0471fbd73ecd3fa20bfa3d1bf4dc9b43d7004bfbeb921f27621144088562a5b1ce41c87ce65117ad955d6eb6b3791c5ca4d0ed247e6d2133ad7d7549078cfd1e544c5b34546395b0a81ce8f556fbd7f2ab4978c8db5bce05add89e677d59f359b9e9e5607691e9af39b422a70d440543b5eefb7b5d8d36765efc5017b856bfca2e68db7f745e232188b15edccf2e2251ff668b6dbef6c91cc44b97d28b222ac95ad87be450af428e99563c32f71942be12f0c47e98055837176f31152b1557619b41855dea004a69641bea195f3836ff8540c9a3836046edc571fe3a6e7e1689d27a90f992bec067f3316791e9dd7ae7ec378f0da3e78b3bb3d743ee193558e1d4ff7374251b2d5fd1937a96ed6a8cbc922eebc53db03d7446341f89a599352ce89c809cfcf3221af71a809259b54b603605a90a94fb8f538d17d11866e08bf07454ea0ceee32499488256e9121a2b741286a49aaff2858f69a22b19c60b29870c8b581df694af8450c09acee1d3ffa4d9e34a528651719f234406077eabfe394e0495111a99f266bcc643852caa38cfde05d6d9c84ff1e154ffd2ac07d07bd9ec4c592ba7c51e7592c0f8af68d0622f5381b1e2e0f46e7af2e783b14ee0526d05b148cc14b40e2f996624394c50900005d44e92fd01b6d2ba14e7eab2fd3aee0a3e8a92b7173417836bc9b84e7563d161e6acbf1296dd2be11de0b42be6afab6fbe2c3964367108864fbc4a73d7fa669b6b32f32d7d2411fc0dbb39db41d6854ba33a34e897f31c804df4c4c281a4dff4ae5bdee36160013d2ffeedb10b6ff57c9a933c123b801682b7936515b9ef9f1a29c2ddfb6963b7548c03eb775e9ef9bd3b2539f39e3bd0bc24bd7019d19dd086920d4a51738e4578f4d7fae3a26a8ac8be14d8284bfe0510a53ff962947d77113a382da718bc3b602bd6c1f557024fc15a19907d2934459ff810e97e723eacfa8e1187b6551981ecf108700cb2983859941b44e03659a9c603767c8d6d6276b5d4c55bcdeba273249a36b500121568185975f7e668699bd68308d99b051fb7a48b8818d7bfe92a04f7be213e2d60316f61268dee1ab690d0473f8d4ad8405a193e41c8f7a98794549506243023457948f107f49c9f2ebe472aaaaec7354f2551458cfaa25feacd790e42e44728b1f9f2aa7ac5f18b6496a1aa5da0fb4867822cc525c66aab16cfe5e90a2b9d51643e379f3408ad43df1030904a602ebed9805a8e8464fead370bb8aa42b5aafc7c12f6fb2a9e39ceba235883bf76c6d844a04402a580abba05630cfe4b93642059686f39f1ffd4f8a3ad4fe310e426eb297368ee2c06c36a5e8aece823acdfea1ff8d837d406d78fb527844121168a811e1519ff29939b2c079a803a7b0f1293a946a077891c53a8d10202fc010518f12fcc521a91ff5a9b79bb75d87ee94b54e2dce002b0f883ae97e14c53ea8f1ede3506e37b66ecfbee95136c9c1b82f07c470779d54ce6458f132f97ba194dc64f6d804f6ad7d5f84ddafc97747e7cc4cf9dbe880fd80f6ef1d18ef06c216e2ad98c159e33f55c0dea4ce163a0889e19f552a85cdd697f8907e0808c3e6d01fe26c18ceaa2efa0c80b4fc9682d3dc2607a5587ff231f7f26ab1245956935db651d09d834921e72f7bee0c0d5660eec2d582b05de9df80345920b2a324d9dd3b70fc057babd63f6a126ce5a3c8b009cca45341cb3532985386995a26d24449086ef9e5ece8ae55f638e6efb01ecd7e99530fcd44f7bd8481fe4061e4743c6dd74c22af6053089bd256a101701616dbe8c9e7f4aa52e49ddbd4aa7061d3ced02da1c7ab5e95b02d4721299d6017841f72480efc1d4f1302bfaef06e3b58ac9e5e91362eec38d6112480c37278ee04f8649c8d741eb949cbccfe0a2b485c9ca04c171bebe2ebe3271fea4c2620db5e7b101341df214eb337ba108279fe4747826b5f9e8e03dd1e87f61548f18f54e5430ec3885bad9fcd3e6f82853c9f5dee758160a0f844db019a6fa7947c2c00e644e0e518b00bd548041f0661eee42479402067b33d172c2100a031c38e8e6767a9ba471c78cd0528cbd428615c57adc803a89927e443de2c43849d10bab6307b30d270552b9fba26d0a05c425fdc6519c5e2242af8e3a852a60ff5dc1f3baa8218e6bf9913a5ad6c46e22b580003a6d92c5d642e182bb398a0a167cb6370675e6a9c693e6a46feb61d9a325060189cafe017d42cf0e31484635ceec11cc86c6e9a263a653430b3791b5f957052b715afad1c4f22586924132507fd5bbff98b4fc1049140ecf1a6b377b75a4df4f04aef27182ffbeaaf7ba7a1a7671d42270d7f3fa070407d90044b147ee98b4bde203e836413b0cc25e4212d71f35fbfad367059177b81834ebe9b15c77db1ba3ff6d9eb89b8e8b8b75f9005d583c39bbd039f240ed5cf08fdf72b6e2e2210229f6a80f04f1771e013333d9d327c4ac9ca23d4d591512de2ee89efa576bbc75ec1190eb1b50217cbd9c3f60c21bd3df61273ddc1d04899db2cf749b083e4986317cfb2d7480de402c21fef6cdd3ef0b1de46e396c36f48505d8ad635a133c863eba8e39204a5e5104b2f8c8b38d7d4ff8d9e9b801f4c6f4653146038fa071e95252f12522995d5d43301a4114c4cd3f48385fd1f3237f14083bd3127fd3c04a7a98df026c7617b2dbf420501bf299e2b18617c021495b169030a993badbc96eb17d5f868a15fedd603816fad869a513985c4604eba6e1147b96e329fa6c36ebe19e4da09b619c6ce31f73543c322e63d6224b7295506a53b0de23097056eb0507a7cec3875e493302361879243f5ae9a50f53d29801cd48b9360646afdd6daf9547b065b88d2c0ad4e6bae740bc7b505454aeffb403c0410ac9ede5272a5ff0135f6a0e91a53ea394e8f1408c33c4b072bc0a08fc48c189b04aebce1832d893e94eff7b26bbe21090df2da8799264e7aecf3b79b0dec3f3659d40e359b465a9eb7fa742e475ccefba42b2ae0e57a3de036cef068acbd06e137d369e41032dde4a7c0fd6cdd00b4866107f005c33b9d8286462fcb369491dc01bd22f6a9dd92920ffb042870b302210fc109457c8191028727a001fdbcb5a7ec4cdf2897c1ca005f542caee94243bac980a815adefa347737ea7d116313e93af00cbec2ad181643db673032c8590332bea930af8a062565749c3b913fb815e6073e85c6aab8f32f7d5ffa3de34f380c4336f9ef17eefae307e9bf8ceb226edf4be954e3c0627f78da8c35e37ffd2ead7dfdbff775f52f7887aa80b8169cb9dc5bf35a6a230c7a3629aed2bc9eb6d37b7ee3e0df0f42b7fcbc2caebc120b303680432d38304267c961ed1391ebb4ba4a4f0609415c31f7dd71c71bf613e43bb54cb409934d9d9ea61be30326f092334c10d63d3830f721e090753766c6de8d733a7dd4dcdeda8bc48684f9427b1430c2ac6b1d0a69f1f3476f059d25acb77120c95a35c0c0214f49bb3b235c793bfef0bb912807df5bad55b0da58b9cf752f48fca11472a5269fd1886473a62c337fb6fb268cae7d3e7c0f191106d0a0354f5634c63544b089c58d138d236c6c46bcf7f0a6208e720270f1c1f11109ff86966a3f9e95c6546491e16e4a94917143434f0a881c6e86cd4005fec7fccd6f59e2149ec9e93951386b16ce9ed10121ce8b107b53e16fd122313b4c719735478ff63a017ad71517c8ca21be882657fe14f4deffd09fa11620f765ff21b3e6bbe4090e9dad621f08409a55f2518ca73cafa150d0f64fdeb5a619e5f24a5c2a411b10188d63760ed191bd68e304713fc883f0a210725cf2c23a93546dbfb26624debd168b7bfda6f92c25b3ffe17770afff763b751d30623d92ef805c00f06519903910489b3900b0c9e5f106ae25a64e2a062bd1c4695154a191d89f3042b510d2655a08d9f6e1fea69ff25ee762a510a3577a8415ea11cb3852913a9a59a203e8c35ed37f70f4e5bfb4dc7307ed092c2855baa2d24f5d8efe431dfaefdc48910b44bb9a2609c55b96f842b5636542d510cebe1b6dbb58cc0b21d3baec607ad4dc0eda65fb2c6a227541e4956a7b9060df09b80302547b737231c9a491c57523e4fc7cdfe4436c49fd9b47c0fe88dd82d5993f19fdfdb80596f6fc9c43779db1acd202d4acfead4b1fd2aa4f975a45b160853b658685e9db421f0bda6183c2c7a7bf1102f3d60308d06cd715970f193048660621e4e63b1ceedfd9b253e157700f503f73e5bcddb692b80cde632f3cc019e2cf259cffefbb603f8e124fe627c55fdc9285b1d29d666f510fc065816925168c1b183e974c30670c81fa60715edb01b13ccfc69be65b3930f523d1538a9220e86b7f62563385eba5f2432e5094a3bf1563c8847474068f2877f5ca6bb2f90777aa5f75266ffff12f8f2d254bd678d93b509245f34cd6da24d6f8daebe203ea05d493c6133b7fae72cb27ba3caa194a486fdea8d3a09ea0d32d10acd3f5eab2eaa63a826ee45b404e8c9d1074cd47139346f28441011c1bcc35283a25eaa11fb7c8f8623afcc5347af7c9dfb1e2a072a39ffbb648bf12d84e483c26181269c1c95a5d1a291a6d8654f357c931b7078b02afd28ce76d5ada2c6b7d589f56620ea4fbc8dc240ee0058aabb11199365ee6d13570248f0a0b5a59718bf8fc2dd4cadd72df4036f0019c3f76ab6704eb0e89709c630a9d16f98caf7beee07bb2565a931cfb9767c9acca31a63483ec3bfbf2b155f7a677a636f51583b482b6a3c86de4f666660b3b7693c7f8d68799053df82549d3b947fef45a2da33968bfa274e1c0f260e1ce2ee89f8b7383e7d50c83542080032b3307f4c3c00da7dce700cc0c6e10273a1cf9bbfb278039b6a8aae25eb97de1a0e4a2de0b39cc7fa45ac10d180fddf57e52d5d9305411204a6946716309cc6d3f5875e101d447adebf6a95ea9d7b1ab77d5a375ca5bae344dbfe85a625054eac1a57d6361997facedb42cbd0a9ed9ee1727d6f71e78d70d9be37050db42a9e1a597d90cc7e011b28939ca2c2fa7cfeaa6bbb75353fac28e6b79e95e2c8e3d76746098e1dbc1857f2f17326bf693de4dcf952b042fedfb1ea986a920993b7fd146893ecbef382c14b510daa7c3fbc1fe1f65383f1de330b750a497dbaa71349249afdc15d65e3437400526fb17fac10ca5f5f596a09a50485beb5f7e1b2ecd303dd565c378a2cad03412930b74bafb280a82ca74e38ae99b9465fc90854d07ceac99c64d19e94575dfe9b5fc1fca8d07d0632043994de3b88beb879f6a821acc4ccfa0dc6a1e3df297f344c700f4468a85a7702bc9bce6001138a9efcf5fb150a2b144c5db0bf24dc061b86af73f1d97147535d2ce6ef786b30ab0284764225155d2388c6d2423be1c3194f79fb873f0d04042a2a1447dffcccd74c62a1dff4a5c2b7504d40d15697b208ec9334b997eb082db6318b87451df9d6ec581d5c2f08d48e44befac5db20283e68a7b4ce92260b1aa4afd04ff2fd0a59190d5923c388d3a3541c0cd7eca257fa3600299d6579e168ae563f8c6bb0abef0337322d363fcc9be361a907d6a5094c2ad3536bb7dbe188b597007a2ee735db32e2018eeef1b70b9ccbfaf11a24c3a5f70478e65b12ff4787b79ce10005596af70aed6c33e688a155fa996148de127aee7234218ee7e72e7aadd8f703254582d5428d077eb3d0d99ecc2d72c9dc9560005089301a043bbceae695ea2c2df6d66a3c4430ef89cfd666fc78d3e1ad98d9151692fa1917ba325d41c061a1ce0f5d45ea5144eacab157d8b4875611bccbac65e8687979a709a4c82f98c5782a9eb913766b46cc14c781a0604d8e372df5b99384f80f0cee894b6d7e8472aaa02b78338693d6adc1c944f33f3a4be21800ce27750e0c7f6eacc71ff4c9a9b8bf0fc06301cbce80be676cf8436c936bf3ce3cddc363ec12eb9fe72910297e1e2f17187e15c182b41e8c3788ee868a12aa40e1f2b352a72827cad4aa0447965851e87780e08b9a6a85b7a41b6d9938170896cf5b76f758f04ebd5922bdb43bc8a3fb77d6f12b2c65c81d9849d39f7073377704e911a53715c80302fd7eafe406457ae0cab3db5bf9c019468e94df7d4b60b3664c0d676df70dd88e51906e6a87db3ae90766703b5861522b77cacc0d54f921e463f20097bb4c81e3af67c9c3b4a22c11f00427124685ccc2a481953cfa5b32c0e08653380db30da8f82b8a39f67fb90fdcbec4fc88311c28d36aec49a405767a7fd45cd87146e8bfc7d0dda9326c86ea8659d1bddbb7fb9d2bd1870a77207534cdae4fe788dbb8ce1a926dbd3a031546f191d89b1eb4b04fb486482ad9a9306b436c799e94c1fee23f9db193363d61fea58413c447a222d2477e4212aab53a4f3b47b429a90dec0099442b1161c00897d3cfe2e7bf0398fb2a454c08ac9220121e6d42554bd49b832ed588a1d0f40cd3dda924ec4b32bb57a7b554080af21316e6161538462f0de3be18791c19493eeb5314b22888a89df8f290076db26419d6ad755371181070985534537f929780fdad13c9e9f5e45fb4224ca9afa0bb7f6a40c655011ecb1d52500f5d706e2ac8fb9435dcbc0ff5c54f806cb92176b7d637ea001603bf38942336f5cef7273cd7e4cb979ffc1d525f5e70b175b91ab453f738f684dc0ba3411fe25d373cb2cdc2d705f02f17fe37ba7cf61014ec9be9bd30e9d5b172bb5d8bfd41d44549f706b7cf1f915134af6198c5378e82a6a44480bf012b719d17994a3b0106d50c1f6761f6b1e656213bf7e5f0594ce07393c024e543bb87fca9f3fbf0574cd13e4e7a73f50fcc0962fed6181a9c0c53601a14db86842d5a0d231abd4c32be4caf5ac131c7d37719147b3631aec603bfa2aeb75e9cf30176d4e95ed47cbcc2dd4635ff2070a9a5cd06067195d4618d8cc47f717db3079b0f5a11d5b39187c20678883ee7b9440e72122d8ba513132c7050b37444b60bc7c393303cb42615ed63b3fce2d42190f272592ff1d54fdea22d500127316206da039095448007def1ea5e021b603e7c78a61de516cf9d0ec1300cdff1fdf5fde8dbe250e93038ab5acc1411816e16aa01b1a0e39ce8792b6fa3c38370765ef485d630b03466370864a6c1ea46bdeca79f16549908494be93de37e65951b77e352a0b810b6e0e6a01c04695f1e21a1a6f376e3067de37696692effbd02727eebe5b3260d3d1ee526da55cb6eee5a1fd0c6dc9672d949d22fad4668214d4135eebe82229b4396623a0e43c9f4cfab74c9940c6d8daaa40eee9926ff682e33c23b5687f43dea4c315588d96b6a461a7cde08aa033ed486d2f4876dad7a7c03a8f38da77c71c44c690286b9baefab0df5a0852c59ca0e412ddf9b9b05a99dd23a39d8f81799a4c6faa31c81f640f9d841a758bcebef1c4461e1755b55c430eb9930c083e91bdced31681152c66d73a1143c5cdf5fc26c87e5a688ba66abfb3ea32d65042ecd6d8e77893b24a65e3e3d9249ac77b89d3326ab9601526d9f68bc84efcdb8e6a1c56abca7853af0cee7b11a58b37b6a37db39b35b0f98e4c8eb82c1b1aa51ef91ed848c36a0f5d2d2d651afc379a86a32545c013f23cedd7fc0ff027b449e85d59e27e565356e9acbb4250891e5b12a4143b056a9afb58d06ab3c79e000af96b581559ec157590346b3bc5830ba5905f3d7326f65761f83849a9fd63845c3a14e439e465923a8d76d79b7a3d30462f31389b4846881df9e539d7038375f6328da1cee6b82cb97359c2cbece3df985fa81d7f2a6d9e3b947d6b8dfd96ae88ca8b6d28896ae7d49fdd2afb6110c8733c78a3c0342d0e17ecd8c5aa9e6eccb2a3ec83f182607bac85c11c86eec8a73140a41a8d281d839330496536eac3b86c99f94d28c4cac049608c45b35820690ceb2601a25ae230aac43755d5fe70f8303a066998a5a7dbcfbbbb8d3b4eb545d0d975e7458e68ce32b0f0d55a28f688a1d624d1438d2b7bf2a1d09a5cb6d2a4c4421f81743a034539da5a8369e29ed45bcabb12180a58491e2dfb941c678adb7ed2b3321150bd72ba266909c66712878d2fdd84fff45078e032a5e7319cf043c455f0f99bf49babcf50c10b5d2bcc97913bac4f7a2b76a7d63cfa39b40fa61f6c617d551713a1dd36a287f2f049dc78fd5ebaeadaee347acfbe84e86e58fdde4266c7bbd03004281a9dd3c63d2592343a91bff5176d97a78f77a5e75160b7f5d279c3d442af0dad14fd8c0050456313d6e971a065488bdee70b8da5902a96ea6b73efc2e102c2b33bad70125bdd281e4762cacd613d49ad7c99a90b3e0636f5897664107336b13a6f54e472b0e54f7aa5e55651499e27bfb605769ad671aa4341e54b8e39786b7078fedae03ce3ee716ce7e22e73eca6b87a9b710e2edd5445aed250bb81ac91e039831fdda4cc168624352f9bbc2ab6f82e1301022b4c49bb6b94f4dccafa21346461999ba4f5ad0181c0aa9d0015cfc9cbee727ac1bd50dbf6372c5cf7186e2d3c0e067e16fc69e4d55c74ebb40cece41e713ce050d61555720e3cd35d4af5863fbba206046f65dd2e876397dddafc79d349076bec35ef3e43e38f892c3cfece59a37ffd5a7b1e61d51450fe895607d91d25899b1c61d2c6d943d518ffadafc38a661f56f6169b5a0af34ae1c51fb2c4e4517d889c140b2f4a0cdfe2200d6e89324a4c508f5bb66c17fff7f21c4c24d8a971d8f4cb9d3a002b22d5d6a162baa6666089f18e73217a4f93b9805629c744bd8f349bc2a5988c452678ce4d65b22eb725f4346b6339c836430ddadd1fc282764d7d07dea559f402589ee0f6767dbc576b8b8dc7f45f3a275ee519097606bea327de27e80bddca5e132979d5f536ace71d457bfa623db8658165ee53026ce9e652cf9c77ee14b0b7239f9f21cf3d65a260cdbb28f640df68c94ba9453d48b6017ae7ced08472772f0ca5d1a22d5a922f0ce09f49b875a4c816e48087c50af2c8148dc37afc7e9ad8e25f34723f1e7b2cc27265e0262da160799a3bd7753b1ef012ec054fa5f4d23d2c5dd1e9963437c992e15c5260a18fb3bec493962bd9bb368c84d849655bf04da1880075b789209125aec814cd00f31d1f80a23caee130a8b7a338ab363dfcf1d65f0554cc28c94ecbd9e0b591c3a729996a6576a5ea8bee161820ce56969c36b56384cfb7d3c72e1f118ddf73b1fa9698b08d0fc9ee5261d5180aa44ea0669315b3cc4d3c571470e8ff16585798686961be5a329fb081a9e76fad79390eecd7301200d2ef885d14ecb8a957a708d7b122aef3697f5b956dead81df6b864a62d6e0f1d0b83d8086e4d69d298e1d24a56f302caf8af84ff977a66721df00c2694d2db25ed0a4c5a4e141053441759fee5b17297cf42acdc090a5f90aeb74f2da58a4f60941787e43fffbc8549e1cfe7a39ee2d8a1a44fc5b390d3fcc96fbf2f1f1f79a07c23afdd9e3a38360232d930a5a7b2a40218ac20d45cfe9e7dd03999c61a673d6ed347591debc1afa63b6da0ae84c94e0877cf6dcee5414c68c6f715463147aa27c7903669c84149314ca7c1a74939485faebe7178b7924337d4a8e3d233a2a11a39b4622d84003f58520f54ee02b495b2d52f508fc4a8220d09785fe75066406547cea8e8a0c6b4928510cefae12b83f65a24eb8b398fcde7ffe12c2c64b946351ee8f1f9caba6128cc3b81831707e1fd6aca77bbdcb6ab756b38c401d6008f06eaccedcb29f93af1fe67b61726ea0e7bbc2fbac0e259379d4899dd814999ec98a26c2cd4e51ffb6a1d4951d03dab70916a83a6754d01c731a64fb0f7a63b34c94e5760565e34490cc4483eb98b8dae7edef1685eb4055df3ff427760533c16f9d921d92798249a14f8036d80ab36704077e9ec8c0831289383b657fba7c1d7033abd5bd7679a067fcfc3ba314b30b25883826c4706b07a8e720b8246c88ae178833cad4b3405163ecc93d7b14df3fac36aa8a167a23d79a703a5af8452be4b07451b5b7409b9993ae8602b0b8a7bbffb6285f1d68f93b246bee762a13b4158d814aed408e04df1d9423430e304bb3102bf1ca13b471c2a071add389cb384dc8d119af1bb413126d0ea0638f46bf45f52e49fe00bede08b7cfc69e4160dd0706b5ec1316005f8a78af820acb4b0fd6b3a17354e0472ccf29440e1ec53abcbbd3e44ed866c0228df671b10279368459ea10f1550f76ebe622d58fd2c2000841f715f67d73eea7d85f3a3f9a36f3241860ae021be91e0b0e6346f0c8bb9e5718de58b1a9c83c3b476939f131d4468e8a5eb3c8de10889de9178d23341fed47ef5f1484952a1765de3f3df22a0b580b5e5892029fd5d272e6ce4ab9a8f7d8a7027dc49076ba641fac84963a104ba1c3717109f897f6326d8650c12c43f22c386b545c9183f41c02b14e0fa469df43f2b3d1e74b73ea95aec973a6e3fc918dc8598df73298c5be09360a5c5996ee6836c74e51e9a2cadb2e7d57cd91898140510925543259010b35417bd8f15f1fe04411e67c6f21365969d0dfc3a1a2d3796f859c1caf353d426fcfff0f05a8ef0f37675e36e16d0ff53dc79c57382356d7d35491c52f1557434cd274bdab03e90cbdbda825a8105c4af72ece028ea293f037d5a89ef8782f360b01c4a415058f71130aa7f7aa8c33eb589da07ea7a36130bb4863ca4221cfc6f1a285e1cb0c43cd87e48d127b75b6e6fc6dbf70852d971882bcfdd7e09f7579cdb2e0cdef0c0777fa2c295cb9ffbade7a354de1a67e7bfe335adfefaf2581ebb897ab519a2f0a14b14024b53414cda9923e462603c497a0559e6020e4adddc699837c90bae588a4198a74a108b787059cbde0f6ffd167bb6c90edee89cc25952d0776caad2b2a0ec64dbd15be32a3a61caaa7401894b9fc0382eb9e67091bdbfa3e3b81266c03bb0f5cc80150290711c09b138dc5aaebe2d02ff80b9b505944c1e2c1032d06c51da686ea6607b4a19f1c3da944e23e17defed71466d9a4115fc89259da6275f35694130df4eacc596abfc3c5df50e495054e399448ea26d5365bea54b33c418776403d380a62d5b5e70ac7d17c0a916e7917f8df73259905f1f6531179e8c7455c3b4497e9c901922b9ca08c534960d9f8c7817f0835632ed19cf3960af8916c8776576d60b32f769c86b9d60bbef5c939fddd134001135d2f417800d6e38db24f1ecb125b4444f41ed98a4d4b870fac885d4cff27e2161bb6ab5cf3779630c787ac7a8a8e9cc73815cb7d6d64cf91d33ed43ed7d0c11c3a8685f086ce01380ed5b5ee0f972d514a45625</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> 账号 </tag>
            
            <tag> 阿里云 </tag>
            
            <tag> 陆强 </tag>
            
            <tag> 惠人 </tag>
            
            <tag> 滁州公交 </tag>
            
            <tag> 正式环境 </tag>
            
            <tag> 外网 </tag>
            
            <tag> 服务器 </tag>
            
            <tag> Gitlab </tag>
            
            <tag> 小程序 </tag>
            
            <tag> 微信商户 </tag>
            
            <tag> 连邦 </tag>
            
            <tag> 本部项目 </tag>
            
            <tag> 公司内网 </tag>
            
            <tag> YAPI </tag>
            
            <tag> 检察院 </tag>
            
            <tag> 达梦 </tag>
            
            <tag> 政务微信 </tag>
            
            <tag> 授权网站 </tag>
            
            <tag> 网站 </tag>
            
            <tag> 内网 </tag>
            
            <tag> 测试环境 </tag>
            
            <tag> 贵州检察院 </tag>
            
            <tag> 贵州检察院（二期） </tag>
            
            <tag> 邳州养老 </tag>
            
            <tag> 安阳养老 </tag>
            
            <tag> 通辽公安 </tag>
            
            <tag> 开发环境 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>足迹</title>
      <link href="/zj.html"/>
      <url>/zj.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="14a47315fc6dd4f7ca7eeb92acf320dbfa5145f3a18307a062db5f1320a491a9">6e74855c1d0ed641e4e5615d7d28faf8d08f18f6fdb8a49e4a375e813eedf8cd083b103471bbe96dd923913261d9a1627779402d7213c1d1a1d3b0de9ad1b2c6fafec4a6974aaa381cf48b89a61e811c199984c246cc7ade950ed3e302cdcbd99c5eb39a65221676dd604b3c7c5cc76b0b443e140ed6ea1857f38eb202b6bd40209cd200e1c26995da6bdedf8bb6fb9c64ae6847b69ad4158baf2400b4ff8433333f7340acfab582e4c8b012ee2b43f48214c51c8cdcc11ce842e63fa6754d404e0569f91a31a4aec2b100b6111b9b0e4a18964541332f07ca488cccfcf5ff25a24d0d3beef36d94275612227478ae8e90c084ee989b0f713d9e716d5e5db84e33bb4a2ff2341c01b4837209e569bd6d7fa2d04d3822a7f3b9a5a65c11de5ee35b8bb9411d7ca1d99ab3f09fba89a4f1b8bdf126099a5b24b06ef19d92d8eac3dc32248292e94a9e26c5d89c3863f15409daa187ff369e8662654e505e0f17d437b7326228a1ed2cd97eea47ebd869d5806b06c1dff5c39a40103dc9ea572ff13272925f02dd6ed0c38b7d7bf0c2d4e255563ce5562db48771983a82d106ce965327389e120e558dbf847b05fe177d9002b560eea65dd279b980e77f5ce43879c54ab931395718a98be9c9a19fb7f5fb1eb09a0c29a343a23b8e828c12b0912e1fb69ea31fa9060f10282b1932acb47e8b3bbb535dfa6776786d6c63902fd0a34966ff44a24a255a9c00c05311565d2e0af6742e2c7d07b60edb58ac58c1d737c5ad59e90fe9b9710ad4dca4f45f7095034d88216f9991a76515187ecc44787be6173ae567deee785fa035431f05083277589c8891ab650876ece0198079af06c85d226e9111ce84a7e53ca7e602658e20fe5ca7eee83747a55c95f388b611242ef32ee5231e5c01ddf21abc474aef7f53503d8f86d2d5e37d4e266043c48831b2575c5bbb048ebd2d8d9e6ea52a059201fa53383f5a6bc8b4b1e734cfc445cc0e7587d36ea2af7f657c4d7d528cdd95e3ddf01479b7216a2a2f6b55f5bd78ff42c40fb2824cda8eaa39a189fe48555fdd43a3589279bda33621d1a04e911e464b5c2ada63f41880bce5f70768fa76dbda8f3ae47c8c4f55399c4db42da46cac686e0afd89ca783d322399088311e26a03d42a273fa093a48774af5e8691c18c9efc4597a49a6c08a770ea52b19a82a924e5994ccb99e4391a50c0ecb8d388e7944336ed2d4cfc2d03b68eae8942e6598cbf0a0a740e64e8be5d5cd56ee675ebddd86f43225d6ba8693c34a7be230bcc6a90311f86dda0b9a0a2b52adf3d289abf127ca587b0aef4d402ca3bab35bd2a4ff62bb48a17fd505f4e25e6791558afa6b722df36e266cd5fa3c8a648643c9ebdb98752b02d4e5488ecf2e5dc334aa16985e86cf5fd1f1102e6f1f1bf82fd03e11cfdd043b830f9df4098cbc1d55bb1ff6cc12e0b0297535b2f8e285c17c39c5aed6b1e14df2457e378d78ee13f70f38636b6b55ddbed8f96ab65a39468ad67ed96801e1d6d0ee51026977a1a982e6af2012b2a63223a1a520f1149c60ef3e34ca6b8acc7660ed0ec4b09c8497f209af985547d5344e7112acd96b2b8af1c09921aafe6396677088478dbb3f41008bc564543ba63357317480e29d39d79dd73521af274dc1708e5ae0a2207623d7c5173c12a0d3a198b7eac0818594b3251585f6f1117c14144cc21f9d3877fd70e58d40d2947971bc5bb5600281b477a77182c33c1f65bda543d5c838b724630f03aaa3a9e4dcc3874289fdee83a2c0dc3bf3950d423abdb2290c53a3f5e9f2cf26d6bfebadcb09e88250987892d39d75d41aaa358a0b10282f745ce5021ce5f696bee61ad04ecd00faf98cab7a81e60dff9bd0b7dd6f955ccc76d77373955c9815be3e83afc5a5397fb6200f7539ebe898dfe32903d7929f573f03bd6052d0bdaa99d3083c13892d23ef51acd2fff9a95912c2c2f66ab4cd27267abe1b8ec941e4168d89d40b64e6fd778e9c1c79343027e7fc409222576d167f4259ddb4a9358746d5a223ef3cbcb090c7608efa4dd27466d5dc5032c20521ff5515e5c01b9ada804cbf1fc05e26d490196d4a22a963e176706554c4d5e6f44ccfa0af0e807c7119e780b1a5245b3381af9be8dbcb558e9482cf32a6869f4ff113107eedab28cdb9c4866ae72b13d4b8720b744728282f992c32716ef5a01cdb61cef643e6ce239a4e11498174455a6df7b4644cf9d842dfb09d378d2689e5119daeb830c1b57ad8dbee58b0cba2acdef95bafb5ef6b62636cbc1febbfff7ad0b81444a172e9c4e3a84eb1d63168bcbdec094a5d13817269f8f93deeea6abdaefb63b05cf6346073c2bb1f386204f5f910e1ab4ec888c1bd920aab0855dd61815ba1b82945b4b4e6af75232d485a702108ef56af5a225e63bb26400b6dde593a9971f07fb4bbce26627c76f60a3db91a5a66655a380937107d1fe1cff50624f2df0019665f244942b4e34e9c7843c25fb98c716d9176620746bbbdd11e0b94dbafcf6d88ba965819c4c55bf34862654e6a1e1c39202903a46f5cc0a5da050e60498bfe8ebe522d1876ae724fa14a96fc8fb8cb7cef3d5352f993d78ca381163402f847630892c162706a9c8eab77b9cb5fc85eb0238cfc82736ecd8c9588ac00a30fec4721a30b2d14f5e809d7129adadf19a9eb264a05dc2f27e3466dbbbf2ef4c4f91803a159971ffe9be4bcd15197967f966fa07735043562afc13db3ee2020b23f3fdc049957ccc37d51259bbcaf5c4506973fff8aab3b12be40d9ceb04e299863374ff3a5e63d5b16ddd435b75ae9793531e80958fdb477ab3cab659e082774f6b22ce698a46b2ed7713017b8de7c70779f2d663ad275cc9d626d030158123cf5bcacaefb50fbb604a3f670cbbdd19c1087d192d6dee5fae53539884e5312c639cc0ec47bb8ddffb7205250313f630183230b63bc5513c871a3a0c9fb00682642711d822ca2ec2966414c76605e0b365665e337c31cb6dc8026b679724806096f2d2df5834c712ec3a2e6487d4eb47bbe8b13a87aa992b2e29077cad1ee8b881fda386e3d8270d604e5b843208448973b2b3cb11f532fe05d63c94ed3cd279581a14e27beb2361ab077a7ffe707e92776233f0ffab732756a00c106792d77ffa8e18387ee9bf339c7cc1676f7a053659aaee6862400764c16167cdea637f77bda2de61532546ee4db6f7bb4fb66c8f9e3048eb4b22ae06c58057a9125bb6ec40233278a96db9c03eacfc742ddc113687164df0f29112c7d53461b6c16873e0a0c4681d53c7f0f8b4f92064a9bafa48d9fcad769221dd726f578e8c8fc363a8697fe7ee7fcc839f5af28cda239fe5be096cb7bab763b5a936d8db49d069d07e4f2fa7381cb0315487df59c3c7f42a812e317cefc3e0a667a2618eb0f788e78561563c0dc5e39c8b3dd3697f887592e38145ad17f762debcf55c27e1386a413472a3e77c906e877c90f8e61b45aea8c4e510e03d0b8daf0e1913b35e6f8b928d4ccfc04d571250a3bb91a5a186ef59c67ddc19e3df1d63e6a730c707b23b969df4020d41a5f580f37153c85f626c3fa30504981703c2e90bdbc3babadd0016b3f7a58fb657e10ad1a794227c4625935cd6c692a149b93993c3010b2d72842eb7cf0e5dbc7f566d837450cb45457cf3e313b071e8c70d6733f0c9f283819b7c10fd1fe200d598ce029c30a2442ccde97d32374e6c1cd6e09ded23fd254d3078c29b37a3b7fd42266e39670aaa289be8f431942fde0a02550eab407f51bf53a246fe94236daa2239c1f476d606f2ebf93303447cfe03e393c68d5503862feaa6e2e89784eecf4d498d60c9fbbe23a229ceaf4c71e9ec466d63ea56ef84a66e0f5a4e5d79006bb25d87256b8e0ea1a69372e25695dcc225c76cad1fdba69548f6f6d9877a18ceb01fc1f1ae0f82213712d38ee4006bbb3f0cf70754bd34c57353393fd8fad1461f51594d289c425b26b2d1e051cfbe4c4ea4175b75c0a2a3d518d322eea2eebb28168b9ce89973e29baccf8f0229431cf7</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 加油 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>花销记录</title>
      <link href="/hx.html"/>
      <url>/hx.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="51ae5dedc6312a409b245e44cd8163bf876545d54dea0338e1ee1a277dde7811">6e74855c1d0ed641e4e5615d7d28faf8d08f18f6fdb8a49e4a375e813eedf8cd083b103471bbe96dd923913261d9a1627779402d7213c1d1a1d3b0de9ad1b2c6fafec4a6974aaa381cf48b89a61e811c199984c246cc7ade950ed3e302cdcbd99c5eb39a65221676dd604b3c7c5cc76b0b443e140ed6ea1857f38eb202b6bd40209cd200e1c26995da6bdedf8bb6fb9c64ae6847b69ad4158baf2400b4ff8433333f7340acfab582e4c8b012ee2b43f48214c51c8cdcc11ce842e63fa6754d404e0569f91a31a4aec2b100b6111b9b0e4a18964541332f07ca488cccfcf5ff25a24d0d3beef36d94275612227478ae8e90c084ee989b0f713d9e716d5e5db84e33bb4a2ff2341c01b4837209e569bd6d7fa2d04d3822a7f3b9a5a65c11de5ee35b8bb9411d7ca1d99ab3f09fba89a4f1b8bdf126099a5b24b06ef19d92d8eac3dc32248292e94a9e26c5d89c3863f15409daa187ff369e8662654e505e0f17d437b7326228a1ed2cd97eea47ebd869d5806b06c1dff5c39a40103dc9ea572ff13272925f02dd6ed0c38b7d7bf0c2d4e255563ce5562db48771983a82d106ce965327389e120e558dbf847b05fe177d9002b560eea65dd279b980e77f5ce43879c54ab931395718a98be9c9a19fb7f5fb1eb09a0c29a343a23b8e828c12b0912e1fb69ea31fa9060f10282b1932acb47e8b3bbb535dfa6776786d6c63902fd0a353e7da9f21886d3557c2f2bd658d9d8de57cded2fd1b097bde159996ff7a14d312c4d4187628d8c869570ccb13bc5b6f0ac74783cb18035b0e9c56ab855c6594e479ffe3edc5f43575d42210081db69eb7d47cd0b419950083270879fe983ccc4f2b2aa520a6ff9cb2e545da9a1c3c7963e1e9e1735a197ed134f510a29a7e51f580d24b863edcbb42db826f29bf74bab870355d0725839304048c2f8655074d43bff10e1e83cad781592f80859738aab160f0823a2d0c371e023f5125e2995b52a4ef89581e5695d568d3667e084709f297fb492021314e97a53bbec27dc7e161330e49ae865faa807efa7b6755b51ce29eb934424ce78067b44d8e84c534ff51d1aa1da559b57303d637d651eab6c6bf6b208f30124cfc1c060f748db1b9f504698e579d6b29ab7a849c03b03259be3fb69d6e9ef2e89e19857a5527f951e090de4521f02f9ed8cb934ed6625ad5a4bbbd3c3566b9ff9a80147ebfa9728c0aa52a919120dc04e342bb01994e94e17ad900ef78da920c6fb4c7b66092f8d212be6361635f120f5adced6d81c066af426f00c46a86efb95d32425d5b84ad46d811ee9ef690edfe810078405ff2c31c668dc10d06b8aa268e89668b1639254e0fbee1d0577fa557d036d1ef0a2c5e85544690575b17f0b30402424ac29b04379f0486fc8449e6693d655a67fcca25c35dc01ab1022493882877594542fb0dd1ec310959dcfce9c4df027cf386d8ea486fe1dcf2d70b24783ece70a8957bf8142a138195fe18ae328cab509539d314900a407e35c317491b9ca22c4e6412f27872d37d2e13d5ed45479c5369435c528f1d3fc24f584de8fc2f41abefe08b1e216da214ac712c81f5c4b62c007f043571a68a1ba510a54969a70f319bcef8e76bbd4bc43770536955a814c45254bb4766e6f5e5535dd1b179d44835efc9ea6c9709112de451fd710f3b845c2a4d33fa38e61fd74d4a962035e09cd9f97c5d1fac3cea7c9971cd4278a644eb66ecc09b7f3a3df452818aa08f11ec2cf1f704811d1947ac66fcd18d9fc03521116bf42dbda05b0558cc7067651bdf8c8019c8fc8062d7b5c16b3f75eb359fd650c370999e4b15f90df6c6254f8aa388012df6c9f53123b07c8a77e81d7bf799221d10b6c266543197b770449f4b8db70d1670ba7a7b01ea8864f74cbe45fa0c510be07fdbf600904decc41f732556537907d5370e94e34e750d80f0b600b1d1a0b7f8b4f489af60c28b5c2a3b5e8d0dbb17a9da6dc2b1449357d950c7f09d4ae670149a7874322c1ba0ccbeed133f8f1dd88b18157296726170193a37d1083585950ea928fc5c8fb734c7bc319141b16bb98a493d786713d2424e53cd7abeaf2efac0f5067dfb51fe22e794e58790de5e91d4a46ceae2587e547c865eea351fefda29147e3d14299abf5560cbcb6df84308197fdc7558dcf07051412de1a7c9cfd7353bd9f43c7a1e55047a90405d24b38f779e00708504e8003cb0d2cb1f4885aa1debf1e55e413ea5f3839065ac17981a61777f2f90c1adbc33467c9de9cba8986fb5dacd429389c1dd2a938a8da5a58b09e8574d303e66039afb0aa05a2fa5460d126cf991b325c0d77397e6f3f50b473e162a259e7e686059e251f3d9062df0583cccc10dfa8f840d350459c767523e03c514c8cc963c55945e1444941b10c597ab2a111d944941dbff63f045e0139b23d1dc9159da896c069f5b4fbceea5e8987e99bf58671d3aa09b9fe957b3d39a8d9790b5f2556f6b6765c6ce750579150d45df9586225bb8459c6baf4040eab38732c787ac837ddcda954c4ab303f8da8e50f53c56976f64fed223625a74fd5cdf527f8963c58f2eacad1ecdc678f20ec5f2be30293c216520054c682ee77dfbffbccde5a777cbb7bcc0180890e691705a8dd7036ec6e62e8c976f5cd414183adc988a5fe2be7f22fd045dc165317089e606ed40abfe0d59cdfebccd80c981fc34729a74791e884f9da95ffb1c3cfcf9769308ecef5fe0060cd6c50e9802771bb1e054954dc93e1f8ae2a94661248c7240d1c82c05d27b45a44cc544736f393fa657b3e02abe6b40ab24eeefbd2c88f54c14a79a3069a42527cb184a47f352386f63ef3df83ac7c8e7c03c23ff25bfc38347b4d39ac74e5b5f4f03e6c595340719ee4245401ab35a3a891865316527123e54443a6c5e0cd28eeb04b73cd1f9e9478663092f1172cf7aede069f39edd32832b97b3a74081aa6581cd3e5687c9b9cd492c53399b92fddda07743df6986da48bc419350b0f74ca99e758bad8c8595b0a17d234d58130da15ba86a4fe964220ec279d82a610123fc409cc7ae8240fafe50520bb4d7dd7be8906098aec3b0714457f5d8e2a1db048548773c7d1c60ddfb455caa54a56b8bc4fa7894e99678c4f7b3e91c2fcb108d0316ff886d5cbf7fd184ebf3270e3d7d5243e75828409f425e64bd07c83241021507dbccb3cc1557f309565716a7ffe0fe8be70bd8ba459b60d26efac6317fc3838028b9b40a543f90e53a784f750603b34ee8d02f45947ad286dc5233ba8926cb6e44b8c8241c9eb5dcfbf82771f6058cc797cdeb4d9f9e9838abe5d5b145bb7fefe519d6b2eb98bc150ed2da7416fd0f6fe4964d244e7051fd8875b3f047251d8abe45991d178f841d95f3fa55789820ca87b22882cd345e5cccef46c447a60e77a9a0d86d86fb3dc501d5f2c81385bf22fbe0bc4d1b861e51f239742454a8c7d6db97437f8d80d3306216df411d9a1e7f13e79220231ebb59cf22f70d6083475fc1ccc46608076e1981f48851c0f2e95da839effd1af4df680e488cb4c4dba75d77bf2566a284c556e2c20c0a1f3edbf11b950338830d937b5a97acd720cf3ce06e3da9de2a5f58756387cdaf7563aa45ed4b72c612cb0fbef0911cfc2543d9618ce9914cadc0d07627a9ea8ca9b5f05fe676c10d8bb43e33c6595a9da340a3a0b26b0f37f25b6724e26330016fcbee716fce8f08200c1f60644e31115f0529202455daafba0fa33583c274d86efd46208c48d11d009092d83c1710453a9c7594cbf72bf661ebc4a4e0080fd944b58d8ed9308eab227a3182235257e889f8bb587326db6cc5473bf6340ebb79ae6d978559f564c496eae39051a718774e363772a7134297230c39d25c14a47c93f694f0105e2172f431025dce7c45181887aedcd08fda5489e4b902d721a60a7989170cb276cbd840fa1e1cfd506084ea9cdac0e6aa277b50f93b1aeae78b4dc1a29ad1c5550b1fd709f9d447fcfb83d32e86f5b6bb1cb60d3a468881bc4926312c9943c6c10e237804f74def1922c267d97d78ccbc6ba71c722f156830e0f50f29f6a36e9091d38a329de48b86bb3843afba061df3cb3eae784b069045e44f116b41fe5cc29ea9d927e57526314395928bfacbbf08ed492b44da329dad28a809dd194cbb9f5c8936f207156004b472a2b6e8b8fecae9d38287600a8c94bcd19b8434491b530adcde6dea9db20c5c9ba297eb0e798ae530a2b39e7d0322edffd91cd46919f9a5d586f745ebed3ee1d7c4376772400580265c42fe81c99e85aeb4eb69330cc355fa3139e026f55e5be89a5a73910728da9847927e270e17e0d82ef16adae7b6ab78ee9d7056747dbd7092c952be499b5f75670880743c69845c8e379c4b9bc10580d72ca0bf0bf6a7b996d0edb2ad8d01bf9c49178c0592defa684bf4fcbca7a379f182834ad023ab78b0072be3e7c8618f012e153cba6e284a983562b88156080b1ec9d945e71b12ca5af98adfc4d6db64ab41731e3c848ead340c6c0eb7cdc5b8b971a79363d0d2a66cb16c3e02bcb8e9f56892a7c736cc3d4e8f9742d2083fdb014ab695b9297594abcc25b34ffaa7563c04907a66394a58e5089f2407ae93dd7ef93b3955fae2e80d3feadf5f8df6bbbc454cc841ea05033b88ff11dc19b5b9dfa94e547f65925a1b73e318dba7d34820dd6a485b9bf988f350a699b8fc37a9525e1605e2cf7598ec51ff5430ce2b73f4d7494334839bfb10bc156a38a38c799acf8d6d70b7dab5ed1da6fcde3c63b1b078966f6e8ccf03c4621e8c32be9fd5e3e3b05c1f6ead794e5d3d22212e2ecbe1961d5f0180d0d7858fc8631488d97b3cdef6a3b91ff0b79e5bf29728854a737912c695036aff033cd84983eab364559cdf1f7de866b972c212818a170a87a5a30bd5f4535301d8c63c9782bed6ae7eeedf7bbf3c3f043186b3cf448127f6cd7ef7bf947706447f7e6f4d94422e274cba762cb14f5ddfafa441c7b8cf6d0e1124ac1a29d8a6dc71be2be92c987328c04623074be5e273200beffd053d3f57a10d3510a6bee578cb5cd77bc8db142efc937106f8773d6a7416c15a831a989106affc891d50f7e65158c0e16b1391008d535f5b58e69a350eef10bd0550beb6e0ea88e9def554f84875a4c18028c2ec6be70d24bdbaf795cd87bce8b0adbf7c1ca934eaa018a0c2d3dc8f325ea37bf860c0ca953a38824fb3a3919e670e16ca7e12bfde97c3133c092b7d59b8df0f143abef8af582d76a74c073ea62c28fda85497fd7b7abb3fed07387742a5a0aeeff74d037250bc561632f6f7ce0fd2eef2da2c3316bf3c501ea54f84cf3b3fd178a8d8655f100343ea610c74ec4c0df76ddb85be388aecc3d84d2a58571220d4be887a4c454d47fbb5b71da52dcd2c6042c509882e150d9f75ed6e1df8a213f16c37c36b502867163b581ec5f727c76c20454f0ffc198da57216dc701d5812879b30081cd821de5d9a60612214efc7e9a788d7817551e574b9c08d2b761d49ca8731e7a17d5ee43c11d5daf1bafa7244f3918dca1a37b2697bbd29cf0655f4c052b8a5a503e23dd54970a8b3f7c8534b4d9a0ad0beaf925be59ee8076ac6233a386f631177701737d5cc2ffe4b73e1696b07b5d0f93eca0b8195675edf61d15c363f18c06f68cae26ea123ff7e2d8fc1645545b9e508438ec8745c5e811b5e5d81d1a50a4ce1e9d507170c7ce374e0aa0f378197fe3fa6671ce583fef349113306e11caff777c690d3b810bda11dfa83a2b8ef259dc9041cbad59a99435fef6e167ce49dbb13ee01551c9554f5a19416af4fba6fd45275dc23cba1d336d2a22eb0474ad25cbfcecf41dc0fa83ec2239b0a1ff9d96ffc66a20b84d439c400786df634168bcd4127e5b74a912eb9df4e483499dd51d4e26394b511224716cf71fbbf11ed9603a3bd3b0ec90958df2e05d62baf3ddf34c6473c8cc8868d6e31723424f21dd2bec70191fea7397d138dfc0dc5b63fae384da886e0220ea82b6dff03e256069db1f153975e56f46019f0b0e4873c88bf818c4e8ae1912ece63e6c67085635c713f8a6a43946f242420da2a3e6b7d7887bfff0be6c31be81ffc29e1324139a59b13928a7233307c3c5b0972b5f17f8054789583b5ba0d0a421febfa04ca4a53cc4ec5b5e030445d2c8ddf25e7364b3117074a6bec2187623195e78af1d2612dab7b347a3ce6cf0d05f84dcf1cdda3d1661e917f28c26c86b4855b3d8e94cce362d54de13669b381aac9f15f114d1d1f32b4cc867d5a958a5d5d4a1ed4e202f876385929b8d577d3acef3b2f7a0190a3cc680bd7b0f74da5eafb9f06edb4933c8896a90e76d9c360edcc93a6162f38636c1318a0886fd34785a513ba6f2d55df917360c6ba3b40f524375a2c9ef1acf10879c6c4865f888c99ca1eedb3ad03e1cfbd3a99f13b2ab553aaed011731bfd19923ba367cfbed1e3ee0a7dd60d6d804e20b57a956d601f6066b040482e0c2674f4ccd45dac3d0a94c7823c8303b383c9a4b70d3a6823692c8100112bd82ee97cdbfc29620d0922403915ffc1cc4d968c739556e31f5021feac9e46bd76ce46e604c71b96987a7b78a21c000307e2c1b2d78d09748afe7760655ec9be49a36b620b8486e84e2ab459e66795a01371ccf0292a9c99f148abaacbaefbf82e7c1d4537e254a555ad429c07639ef5b635d7849abaacdf2ac488d1d6a140181b2d1698688a8f428332f9a90b6895318578e595aaf1a5d8f4b3cf569d833032adc927cc79633d5a140b4020d243f35185817135234845c998d5698a579d368acfdf37feaab5eccf5173fa51c4c0773740cdf0f72605e79a969452c87dbbb065b090a8bf004f98892d0c89f8e535b24f848f2933252ba7f6f42f3924df689022b4e4f1289cec962df2a80781e7553a3d8bd8856ff54f96b839f06084241f26ebb32323c82af5cbdb74d7cf48d74a2bc33b88b853701f0d581ad1a404069731a598e7b3c57f0502b1009a9e54376756b8a39d5bd2539ab221c06857b81cd79dae0d7b8a9ece6639428e540239abf95b55e3a1d47dd002a97eff38daaa4a77311a024896908225aba95d0ca34d6f5ebd6a1dc92aec38a4594a1de4d1d455b920662e2d6c1829f1ce0211802bea4c09938f9fc98fda5fb9bed5e176c4a316a45832ba94041e28ecda581192a4759e7db6c97d36a3136e34c82af</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 加油 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【日记】2023年9月5日</title>
      <link href="/fc98205f.html"/>
      <url>/fc98205f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%97%A5%E8%AE%B0/">系列文章地址</a></p><hr><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>2023年9月5日</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 05点43分 5点多的太阳，准备送葡萄啦</p></div></div><div class='timeline-item-content'><p>今天是送一趟就行啦，就是吧，又让我等了好久。。回到家都7点了</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/135041698127200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/135041698127200.png"></a></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>07点00分 今日份早饭</p></div></div><div class='timeline-item-content'><p>碳水慢慢啊，有点饿了。。🤭</p><p>弄晚饭差不多7点半的样子</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/135011911663200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/135011911663200.png"></a></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>宝宝还没醒呢</p></div></div><div class='timeline-item-content'><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/148911788426900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/148911788426900.png"></a></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>07点28分 腾讯视频真垃圾呀</p></div></div><div class='timeline-item-content'><p>打算看看《吞噬星空》的。。但是限制我登录。。</p><p>要不是老婆喜欢看，我才不开会员呢。。限制两太设备，我把手机上的关掉了，电脑上刷半天都没用。。</p><p>还是喜欢啊B，一年会员才60块钱。。</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>10点24分 解析优化完成了一部分</p></div></div><div class='timeline-item-content'><p>现在差不错是12秒的样子</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/143032215298000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/143032215298000.png"></a></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>宝宝棒棒</p></div></div><div class='timeline-item-content'><p>老婆买的这个不错，👍</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/148854173025100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/148854173025100.png"></a></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>11点50分 吃午饭</p></div></div><div class='timeline-item-content'><p>还是公司门口的便当，去的早了。。收了12，下回去晚点，晚点10块一份</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/148746429568700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/148746429568700.png"></a></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>14点09分 干活干活</p></div></div><div class='timeline-item-content'></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>干柴烈火</p></div></div><div class='timeline-item-content'><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/167794208041400.jpeg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/167794208041400.jpeg"></a></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>17:36 使用模板写日记</p></div></div><div class='timeline-item-content'><blockquote><p>时间线</p></blockquote><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- timeline $V$  --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br></pre></td></tr></table></figure><blockquote><p>面板</p></blockquote><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- tabs test1  --&gt;</span><br><span class="line">&lt;!-- endtabs --&gt;</span><br></pre></td></tr></table></figure></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 厉害了</p></div></div><div class='timeline-item-content'><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/1961583995000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-06/1961583995000.png"></a></p></div></div></div><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 九月 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>体重记录</title>
      <link href="/jf.html"/>
      <url>/jf.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="f961121703a3f70c36d9049510f43ba42675c922fc327c08ebc7edac5a1eeea2">6e74855c1d0ed641e4e5615d7d28faf8d08f18f6fdb8a49e4a375e813eedf8cd083b103471bbe96dd923913261d9a1627779402d7213c1d1a1d3b0de9ad1b2c6fafec4a6974aaa381cf48b89a61e811c199984c246cc7ade950ed3e302cdcbd99c5eb39a65221676dd604b3c7c5cc76b0b443e140ed6ea1857f38eb202b6bd40209cd200e1c26995da6bdedf8bb6fb9c64ae6847b69ad4158baf2400b4ff8433333f7340acfab582e4c8b012ee2b43f48214c51c8cdcc11ce842e63fa6754d404e0569f91a31a4aec2b100b6111b9b0e4a18964541332f07ca488cccfcf5ff25a24d0d3beef36d94275612227478ae8e90c084ee989b0f713d9e716d5e5db84e33bb4a2ff2341c01b4837209e569bd6d7fa2d04d3822a7f3b9a5a65c11de5ee35b8bb9411d7ca1d99ab3f09fba89a4f1b8bdf126099a5b24b06ef19d92d8eac3dc32248292e94a9e26c5d89c3863f15409daa187ff369e8662654e505e0f17d437b7326228a1ed2cd97eea47ebd869d5806b06c1dff5c39a40103dc9ea572ff13272925f02dd6ed0c38b7d7bf0c2d4e255563ce5562db48771983a82d106ce965327389e120e558dbf847b05fe177d9002b560eea65dd279b980e77f5ce43879c54ab931395718a98be9c9a19fb7f5fb1eb09a0c29a343a23b8e828c12b0912e1fb69ea31fa9060f10282b1932acb47e8b3bbb535dfa6776786d6c63902fd0a34966ff44a24a255a9c00c05311565d2e0af6742e2c7d07b60edb58ac58c1d737ccdeb9938a33b309c8567116395513b79eac27bf81ba175f55e8a72403f540d40b6dc66f33ca41676946c623cfd676be68472a8da0011c5853475e2adfe458bd181aaeadcf98a4e1067be0f5abff0a527bc808d9442e5cdae2d6bb2a743b7291c17754fd1dcc8b99bc82ea893de06f2e8013153f5ab893248e0bc58e068c342b4dd2be65b609b2d919d74b711be839144ded23d06e2b110eaf3ed9fbd8adf3a48a62bbc78fd16e3070b7dbf4e139956bd3cf01cb247f7fda84db40a939b02debf4cbe094d7491c9bd76e1b811d7ea8b4b813853f886d94051e419c9da1d99353c4b7fb12c86a620c9a4a8acb4f03bc16fc5d5c291e74d393462e754511a880eea1d31148c2a9d7b8fffa1a8925d3a6fbd2e11fb696b00f8e1536d2f7832663f0bf1be4da78da14c18c613ae01228eb9c49fdb62ea9e0d6a630ad5653735b4962d8decfad0b363b3f64fdc1c410344d48338a81b1f1036caa4fa57e3557a6de86a79065b75621b086bdc500ede3b217f9a20fb3767239bb8571f87a6bcaf63ee032f196a086f3e22285c56b7d943b542d00a9cf5ae2e95a77fed4c20f81a4e96e7aee863e926c579733eeb56447133b265fb382937e7b946e2d1337fc012a71790287029d998da3c611aed43e59b5860603addd522b7c995040d4d95429304d9ac4fe4b294a736aa1cab9bdd054f6302c05673ed634ee93efcad793c07f0c987da37cf3d248491ee82b904d8039372f9b48c1b23ee3274f54b6cb733caaef9b3468f675f9de8ffec45b6be58c4896955c272fe689ee0058c6788fe07ffff96a91ce180124441176a8a8e5bb94442bddaff5979a759ea3e0e23bc7d7e4094d37e3b20d28c8920749c571d548cf53716af2382737e7752a00a8a542002205c648a9bcf0494c3b38363ecab5dc1b3096dca811d5b3802ea27de7f4108b0cce732f3ff64d1c7f191bcbc2fe9b5121214406713c1a297770be5dba80e0458646965e6c9523c35ef4ce1fd9d8230acade6a764d4c6fbb37ec2525c0afcd3bf2a9444f83758957aadcff42084571d87066681762501762b748580a1d9b6dac57d0b584e0c917d7299f89559bff7c9656c28bf27b7a9a0856cb0219ef95aebaf4f6b30d34cbae3ec33044a992ea1a417a732551b5ee2d8e3cced3e95bfbcee8270d4f8e513abac8060a39de54296a5a811e247d9e1823b505ddcbedd84e1e22fae0a96c6f63c08f7b9cfe2cd5da88fec5151db4aaeeadcff840e2039fab6d13ce8415b7197eab4dcd0d364dabb1d48b4b8118009523373c0fadc2d07337ab75fc2d7675d2234158a164a86ef3f9a5e325bf34b96bd905afc716cc8d6ab54c7f392b0bfb2c28c72b889dee6294ba7985ae306cf4bc53ce160e3fddcc5424b3dbd417c4d21ea6f2474b4b050d8cf639a48f0212b84dd80e72f5844881eba13840d4374fe3d24c3c07c25905e80ca13c741250cf17188d3d0dd6a5ba71b91340496731b210f8f9a024853f21b67ad8f3d5e5becd44a2cdd7eb3e9fd607e7c845d96561eda9626ab7da2f951e76add9addffad130f6674af91f856ae5d99580d259a012adf7f8324c09a8d1e378db4d40ab0f91acd6876f2da00571d5331f68b5d897e4f9e6067285b150ce4602bbfd0b112b6654eb8d6ec2cbc4b0c6dc1a73f6a9840defa43a4daef41b74bf981449511acb43f75cf49d009ab156cc6984ca449fc9ab9dc071ebc11ec7a26f187a51269c02ddb5fb40d3ce5e60a82614170a2d5cbf293ba880f417a240ddf50493e28623e04c2fc24b39ba878978b7cd3d7ec2a6b376ea03b2</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 加油 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】MySQL中覆盖索引是什么</title>
      <link href="/67a0787f.html"/>
      <url>/67a0787f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>在MySQL中，覆盖索引是一种特殊类型的索引，它包含了查询所需的所有列，而不仅仅是索引列本身。当一个查询可以完全使用覆盖索引来满足时，<br><strong>MySQL可以直接从索引中读取数据，而无需访问实际的数据行</strong>，从而提高查询性能。</p><p>使用覆盖索引的好处是减少了磁盘I&#x2F;O和内存的使用，因为MySQL不需要加载和处理实际的数据行。这对于查询大型表或者需要频繁执行的查询特别有用。</p><p>要创建覆盖索引，你需要确保索引包含了查询所需的所有列。例如，如果你有一个包含列A、B和C的表，并且你的查询只需要列A和B，那么你可以创建一个包含列A、B和C的索引，以便覆盖查询。</p><p>下面是一个示例，展示了如何创建一个覆盖索引：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX idx_covering <span class="keyword">ON</span> your_table (column_a, column_b, column_c);</span><br></pre></td></tr></table></figure><p>在这个示例中，<code>your_table</code>是你的表名，<code>column_a</code>、<code>column_b</code>和<code>column_c</code>是你想要包含在索引中的列。</p><p>请注意，覆盖索引并不适用于所有类型的查询。**它对于选择少量列的查询非常有效，但对于需要返回大量列或进行复杂计算的查询可能不太适用<br>**。此外，过多的覆盖索引可能会增加写操作的开销，因为每次更新表时都需要更新索引。</p><p>因此，在设计索引时，需要权衡查询性能和写操作的开销，并根据具体的查询需求来决定是否使用覆盖索引。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【Kafka系列】Kafka入门</title>
      <link href="/kafka1.html"/>
      <url>/kafka1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/Kafka/">系列文章地址</a></p><hr><h1 id="Kafka是什么？"><a href="#Kafka是什么？" class="headerlink" title="Kafka是什么？"></a>Kafka是什么？</h1><p>一句话概括：<strong>Apache Kafka 是一款开源的消息引擎系统</strong></p><h1 id="什么是消息引擎系统？"><a href="#什么是消息引擎系统？" class="headerlink" title="什么是消息引擎系统？"></a>什么是消息引擎系统？</h1><p>消息引擎系统（Message Broker System）是一种中间件软件或服务，用于在分布式系统中进行异步消息传递。它提供了可靠的消息传输、消息路由和消息处理的功能，使不同的应用程序和组件能够通过发送和接收消息进行通信。</p><p>消息引擎系统通常由以下几个核心组件组成：</p><ol><li><p>发布者（Publisher）：负责将消息发布到消息引擎系统中。发布者将消息发送到指定的主题（Topic）或队列（Queue）中。</p></li><li><p>订阅者（Subscriber）：订阅者可以通过订阅特定的主题或队列来接收消息。订阅者可以按照自己的需求选择订阅的消息类型和主题。</p></li><li><p>主题&#x2F;队列（Topic&#x2F;Queue）：主题或队列是消息的目的地，消息发布者将消息发送到特定的主题或队列，而订阅者可以从中接收相应的消息。</p></li><li><p>消息路由（Message Routing）：消息引擎系统负责将消息路由到正确的订阅者。它根据订阅者的订阅关系和消息的标识（如主题、标签等）来确定消息的路由方式。</p></li><li><p>消息持久化（Message Persistence）：消息引擎系统通常会将消息持久化到存储介质中，以确保消息的可靠性和持久性。这样即使在系统故障或重启后，消息仍然可以被正确地传递和处理。</p></li><li><p>消息传递模式（Message Delivery<br>Patterns）：消息引擎系统支持多种消息传递模式，如点对点模式（Point-to-Point）、发布&#x2F;订阅模式（Publish&#x2F;Subscribe）、请求&#x2F;响应模式（Request&#x2F;Response）等，以满足不同的通信需求。</p></li></ol><p>消息引擎系统具有解耦性、可靠性和扩展性等优点，使得分布式系统中的不同组件能够进行异步通信，提高系统的可靠性、可伸缩性和性能。常见的消息引擎系统包括Apache<br>Kafka、RabbitMQ、ActiveMQ等。</p><h1 id="为什么要引入消息引擎呢？直接A发送给B不好吗？"><a href="#为什么要引入消息引擎呢？直接A发送给B不好吗？" class="headerlink" title="为什么要引入消息引擎呢？直接A发送给B不好吗？"></a>为什么要引入消息引擎呢？直接A发送给B不好吗？</h1><p>引入消息引擎系统的主要目的是解耦和提高系统的可伸缩性、可靠性和性能。下面是一些使用消息引擎系统的优点：</p><ol><li><p><strong>解耦性</strong><br>：通过引入消息引擎系统，发送者和接收者之间可以解耦。发送者只需要将消息发送到消息引擎中的特定主题或队列，而不需要直接知道接收者的详细信息。接收者可以根据自己的需求选择订阅相应的主题或队列来接收消息。这种解耦可以使系统的组件可以独立演化和扩展，避免了紧耦合的依赖关系。</p></li><li><p><strong>异步通信</strong><br>：消息引擎系统支持异步通信模式，发送者可以将消息发送到消息引擎中后立即返回，而不需要等待接收者的响应。这种异步通信模式可以提高系统的响应速度和并发处理能力，使得发送者和接收者可以独立地进行任务处理，提高系统的整体性能和吞吐量。</p></li><li><p><strong>可靠性</strong>：消息引擎系统通常会将消息持久化到存储介质中，以确保消息的可靠性和持久性。即使在系统故障或重启后，消息仍然可以被恢复和传递，避免了消息的丢失。此外，消息引擎系统还提供了消息的确认机制和重试机制，确保消息的可靠传递。</p></li><li><p><strong>扩展性</strong>：使用消息引擎系统可以轻松地扩展系统的规模和容量。通过增加消息引擎的实例或增加消息队列的分区，可以实现水平扩展，以处理更大的消息流量和更高的并发请求。</p></li><li><p><strong>消息传递模式</strong>：消息引擎系统支持多种消息传递模式，如点对点模式、发布&#x2F;订阅模式、请求&#x2F;响应模式等。不同的模式适用于不同的业务场景，可以根据需求选择合适的模式。</p></li></ol><p>引入消息引擎系统可以提供更灵活、可靠和高效的消息传递方式，使得系统可以更好地适应复杂的业务需求和分布式环境。它提供了解耦、异步通信、可靠性、可伸缩性和性能等优势，使系统设计更具弹性和可维护性。</p><h1 id="常见的消息传输模型有哪些呢"><a href="#常见的消息传输模型有哪些呢" class="headerlink" title="常见的消息传输模型有哪些呢"></a>常见的消息传输模型有哪些呢</h1><p>在计算机系统中，常见的消息传输模型有以下几种：</p><ol><li><p><strong>点对点模型</strong>（Point-to-Point<br>Model）：在点对点模型中，消息的发送者将消息发送到特定的接收者。每个消息只被一个接收者接收，类似于一对一的通信。这种模型通常使用队列或消息中间件来实现，例如JMS（Java<br>Message Service）中的点对点模型。</p></li><li><p><strong>发布&#x2F;订阅模型</strong>（Publish&#x2F;Subscribe<br>Model）：在发布&#x2F;订阅模型中，消息的发送者（发布者）将消息发布到一个主题（Topic），多个接收者（订阅者）可以订阅该主题，接收发布的消息。这种模型通常用于广播消息给多个接收者，类似于一对多的通信。常见的实现包括消息队列、消息中间件、事件总线等。</p></li><li><p><strong>请求&#x2F;响应模型</strong>（Request&#x2F;Response<br>Model）：在请求&#x2F;响应模型中，客户端发送请求消息给服务端，服务端处理请求并发送响应消息给客户端。这种模型通常用于客户端向服务端请求数据或执行操作，并等待服务端返回响应。常见的实现包括HTTP协议、RPC（Remote<br>Procedure Call）等。</p></li><li><p><strong>发布&#x2F;订阅加请求&#x2F;响应模型</strong><br>：这种模型结合了发布&#x2F;订阅模型和请求&#x2F;响应模型的特性。消息的发送者可以发布消息到一个主题，多个接收者可以订阅该主题并接收消息。同时，某些接收者还可以向发送者发送请求消息，并等待发送者的响应消息。这种模型通常用于实现复杂的分布式系统和消息传递模式。</p></li></ol><p>这些消息传输模型可以根据具体的需求和场景进行选择和组合，以实现灵活、可靠的消息传输和通信。不同的模型适用于不同的应用场景，需根据具体的业务需求来选择合适的模型。</p><h1 id="那么，kafka支持哪些消息传输模型？"><a href="#那么，kafka支持哪些消息传输模型？" class="headerlink" title="那么，kafka支持哪些消息传输模型？"></a>那么，kafka支持哪些消息传输模型？</h1><p>Kafka是一个分布式流处理平台，它支持以下几种常见的消息传输模型：</p><ol><li><p><strong>发布&#x2F;订阅模型</strong>（Publish&#x2F;Subscribe<br>Model）：Kafka的核心特性就是基于发布&#x2F;订阅模型的消息传输。生产者（发布者）将消息发布到一个主题（Topic），多个消费者（订阅者）可以订阅该主题，以并行方式消费消息。Kafka使用消息日志来持久化消息，保证消息的持久性和可靠性。</p></li><li><p><strong>队列模型</strong>（Queue Model）：尽管Kafka主要是基于发布&#x2F;订阅模型，但也可以通过使用单个消费者组来实现类似队列模型的行为。在这种情况下，每个主题的每个分区只能由一个消费者消费，确保消息按顺序进行处理。</p></li><li><p><strong>请求&#x2F;响应模型</strong>（Request&#x2F;Response<br>Model）：尽管Kafka主要是用于流式处理，但也可以使用请求&#x2F;响应模式。客户端可以向Kafka发送请求消息，并等待Kafka返回响应消息。这种模型通常用于需要以请求&#x2F;响应方式与Kafka进行交互的应用场景。</p></li><li><p><strong>批量处理模型</strong>（Batch Processing Model）：Kafka支持从生产者端进行消息批量发送，以及从消费者端进行消息批量消费。这种模型可以更有效地利用网络和IO资源，提高消息的吞吐量和性能。</p></li></ol><p>Kafka的灵活性和可扩展性使其适用于许多不同的应用场景，包括实时数据流处理、消息队列、日志收集和分析等。根据具体的需求，可以选择合适的模型来构建基于Kafka的消息传输系统。</p><h1 id="不同模型对应的使用场景是什么呢"><a href="#不同模型对应的使用场景是什么呢" class="headerlink" title="不同模型对应的使用场景是什么呢"></a>不同模型对应的使用场景是什么呢</h1><ol><li><p><strong>点对点模型</strong>（Point-to-Point Model）：</p><ul><li>适用场景：单个消息只能被一个接收者处理的场景。例如，任务分发系统、异步请求-响应系统等。</li></ul></li><li><p><strong>发布&#x2F;订阅模型</strong>（Publish&#x2F;Subscribe Model）：</p><ul><li>适用场景：需要将消息广播给多个订阅者的场景。例如，实时数据推送、事件通知、日志订阅等。</li></ul></li><li><p><strong>请求&#x2F;响应模型</strong>（Request&#x2F;Response Model）：</p><ul><li>适用场景：需要进行请求和响应的场景。例如，客户端与服务器之间的请求-响应交互、RPC（远程过程调用）等。</li></ul></li><li><p><strong>队列模型</strong>（Queue Model）：</p><ul><li>适用场景：需要确保消息按顺序处理的场景，每个消息只能被一个接收者处理。例如，任务队列、工作流系统等。</li></ul></li><li><p><strong>扇出&#x2F;扇入模型</strong>（Fan-Out&#x2F;Fan-In Model）：</p><ul><li>适用场景：需要将消息复制给多个不同的接收者的场景。例如，日志记录和分析系统、消息广播等。</li></ul></li><li><p><strong>请求&#x2F;异步响应模型</strong>（Request&#x2F;Async Response Model）：</p><ul><li>适用场景：需要异步处理请求并返回响应的场景。例如，长时间运行的任务、异步通知等。</li></ul></li><li><p><strong>分布式事务模型</strong>（Distributed Transaction Model）：</p><ul><li>适用场景：需要保证多个分布式系统之间的事务一致性的场景。例如，分布式订单处理、分布式支付系统等。</li></ul></li></ol><h1 id="Kafka术语说明"><a href="#Kafka术语说明" class="headerlink" title="Kafka术语说明"></a>Kafka术语说明</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-04/101209180045900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-04/101209180045900.png"></a></p><ul><li><strong>消息：Record</strong>。Kafka 是消息引擎嘛，这里的消息就是指 Kafka 处理的主要对象。</li><li><strong>主题：Topic</strong>。主题是承载消息的逻辑容器，在实际使用中多用来区分具体的业务。</li><li><strong>分区：Partition</strong>。一个有序不变的消息序列。每个主题下可以有多个分区。</li><li><strong>消息位移：Offset</strong>。表示分区中每条消息的位置信息，是一个单调递增且不变的值。</li><li><strong>副本：Replica</strong>。Kafka 中同一条消息能够被拷贝到多个地方以提供数据冗余，这些地方就是所谓的副本。副本还分为领导者副本和追随者副本，各自有不同的角色划分。副本是在分区层级下的，即每个分区可配置多个副本实现高可用。</li><li><strong>生产者：Producer</strong>。向主题发布新消息的应用程序。</li><li><strong>消费者：Consumer</strong>。从主题订阅新消息的应用程序。消费者位移：</li><li><strong>Consumer Offset</strong>。表征消费者消费进度，每个消费者都有自己的消费者位移。消费者组：</li><li><strong>Consumer Group</strong>。多个消费者实例共同组成的一个组，同时消费多个分区以实现高吞吐。</li><li><strong>重平衡：Rebalance</strong>。消费者组内某个消费者实例挂掉后，其他消费者实例自动重新分配订阅主题分区的过程。Rebalance 是 Kafka<br>消费者端实现高可用的重要手段。</li></ul><p>我们要注意的几个点</p><h2 id="Kafka的副本并不像MySQL那样对外提供服务"><a href="#Kafka的副本并不像MySQL那样对外提供服务" class="headerlink" title="Kafka的副本并不像MySQL那样对外提供服务"></a>Kafka的副本并不像MySQL那样对外提供服务</h2><p>Kafka的副本（Replicas）和MySQL的副本（Replicas）在功能和设计上有一些不同，因此它们在对外提供服务方面有所不同。</p><ol><li><p><strong>数据复制目的不同</strong><br>：Kafka的副本是为了提供数据冗余和高可用性而设计的，它们用于备份主题的分区数据，以防止数据丢失。副本之间的数据同步和复制是Kafka集群的核心机制。而MySQL的副本则是为了提供数据的冗余备份和读取负载均衡而设计的，副本之间通过复制和同步来保证数据的一致性和可用性。</p></li><li><p><strong>数据读写方式不同</strong><br>：Kafka的副本只用于读取数据，不直接对外提供写入服务。生产者将消息写入主题的分区，然后Kafka集群负责将消息复制到副本中，以提供冗余和容错能力。消费者可以从任意副本中读取数据，实现高可用性和负载均衡。而MySQL的副本是通过主从复制实现数据的读写分离，主节点负责写入操作，从节点负责读取操作。</p></li><li><p><strong>数据一致性要求不同</strong><br>：Kafka的副本之间的数据同步是异步进行的，即主题的分区数据在写入主节点后，可能会有一些延迟才被复制到副本。这种异步复制方式可以提高Kafka的吞吐量和性能，但可能导致副本之间存在一定的数据延迟。而MySQL的副本之间的数据同步是同步进行的，确保数据在主节点写入后立即被复制到所有副本，以保证数据的一致性和可用性。</p></li></ol><h1 id="Kafka只是一个消息引擎吗？"><a href="#Kafka只是一个消息引擎吗？" class="headerlink" title="Kafka只是一个消息引擎吗？"></a>Kafka只是一个消息引擎吗？</h1><p>Kafka通常被描述为一个分布式流处理平台，而不仅仅是一个消息引擎。尽管Kafka的核心功能是消息引擎，它提供了高性能、可靠的分布式消息传递，但Kafka还具备其他重要的特性和功能，使其成为一个全面的分布式流处理平台。</p><p>如果你通读全篇文字但只能记住一句话，我希望你记住的就是这句。<strong>再强调一遍，Kafka 是消息引擎系统，也是分布式流处理平台。</strong></p><h1 id="Kafka发展史"><a href="#Kafka发展史" class="headerlink" title="Kafka发展史"></a>Kafka发展史</h1><p>Kafka的设计历史可以追溯到2010年，当时由LinkedIn的工程师Jay Kreps、Neha Narkhede和Jun Rao共同开发和推出。</p><ol><li><p><strong>起初的需求</strong>：在LinkedIn，存在一个需要处理大规模数据流的问题。传统的消息队列系统无法满足其高吞吐量和低延迟的需求。因此，Jay<br>Kreps、Neha Narkhede和Jun Rao决定自行开发一种新的解决方案。</p></li><li><p><strong>项目开始</strong>：2010年，Kafka项目正式启动。最初的目标是构建一个高性能的分布式提交日志系统，用于LinkedIn内部的数据管道和实时流式处理。</p></li><li><p><strong>发布开源</strong>：2011年，LinkedIn将Kafka作为开源项目发布，成为Apache软件基金会的孵化项目。这使得更多的公司和开发者开始参与和贡献Kafka的发展。</p></li><li><p><strong>Kafka 0.8版本</strong>：2012年，发布了Kafka的第一个重要版本0.8。该版本引入了新的存储层设计，使用分段日志（Segmented<br>Log）来提高吞吐量和可靠性。此外，0.8版本还引入了新的消息消费模型（Consumer Model），支持多个消费者组和消息的持久化存储。</p></li><li><p><strong>Kafka 0.9版本</strong>：2015年，发布了Kafka的0.9版本。这是一个重要的里程碑，引入了Kafka的新的消费者API，增强了安全性和可靠性。此外，0.9版本还引入了Kafka<br>Connect和Kafka Streams，使Kafka成为一个全面的流处理平台。</p></li><li><p><strong>Kafka 1.0版本</strong>：2017年，发布了Kafka的1.0版本。这是一个重要的稳定版本，引入了许多改进和性能优化。1.0版本还引入了幂等写入和事务支持等重要功能，使Kafka成为更可靠和全面的分布式流处理平台。</p></li></ol><p>自那时以来，Kafka持续发展和改进，不断增加新的功能和特性。它已经成为一个广泛使用的分布式流处理平台，被许多公司和组织用于构建实时数据管道、事件驱动应用程序和大规模数据处理。</p><p>言归正传，Kafka 在设计之初就旨在提供三个方面的特性：</p><ul><li><strong>提供一套 API 实现生产者和消费者</strong>；</li><li><strong>降低网络传输和磁盘存储开销</strong>；</li><li><strong>实现高伸缩性架构</strong>。</li></ul><p>后续的文章中，我们将陆续探讨 Kafka 是如何做到以上三点的。</p><h1 id="Kafka生态"><a href="#Kafka生态" class="headerlink" title="Kafka生态"></a>Kafka生态</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-04/102023588953200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-04/102023588953200.png"></a></p><h1 id="Kafka有哪些版本？"><a href="#Kafka有哪些版本？" class="headerlink" title="Kafka有哪些版本？"></a>Kafka有哪些版本？</h1><ol><li><p><strong>Apache Kafka</strong>：这是Kafka的官方发行版，由Apache软件基金会进行维护和管理。Apache Kafka是一个开源项目，提供了稳定的版本和官方支持。</p></li><li><p><strong>Confluent Platform</strong>：Confluent是一家专注于Kafka的公司，他们提供了Confluent Platform作为Kafka的一个企业级发行版。Confluent<br>Platform在Apache Kafka的基础上扩展了一些企业级功能和工具，包括集成的Schema Registry、Kafka Connect、KSQL等。</p></li><li><p><strong>Cloudera Distribution Including Apache Kafka（CDH）</strong>。CDH是Cloudera提供的一个发行版，它基于Apache<br>Kafka，并与Cloudera生态系统中的其他工具和框架集成。CDH提供了一套集成的工具和管理界面，帮助用户更方便地部署、管理和监控Kafka集群。</p></li></ol><h2 id="Apache-Kafka"><a href="#Apache-Kafka" class="headerlink" title="Apache Kafka"></a>Apache Kafka</h2><p>对 Apache Kafka 而言，它现在依然是开发人数最多、版本迭代速度最快的 Kafka。在 2018 年度 Apache 基金会邮件列表开发者数量最多的<br>Top 5 排行榜中，Kafka 社区邮件组排名第二位。如果你使用 Apache Kafka 碰到任何问题并提交问题到社区，社区都会比较及时地响应你。这对于我们<br>Kafka 普通使用者来说无疑是非常友好的。</p><p>但是 Apache Kafka 的劣势在于它仅仅提供最最基础的组件，特别是对于前面提到的 Kafka Connect 而言，社区版 Kafka<br>只提供一种连接器，即读写磁盘文件的连接器，而没有与其他外部系统交互的连接器，在实际使用过程中需要自行编写代码实现，这是它的一个劣势。另外<br>Apache Kafka 没有提供任何监控框架或工具。显然在线上环境不加监控肯定是不可行的，你必然需要借助第三方的监控框架实现对 Kafka<br>的监控。好消息是目前有一些开源的监控框架可以帮助用于监控 Kafka（比如 Kafka manager）。</p><h2 id="Confluent-Kafka"><a href="#Confluent-Kafka" class="headerlink" title="Confluent Kafka"></a>Confluent Kafka</h2><p>下面来看 Confluent Kafka。Confluent Kafka 目前分为免费版和企业版两种。前者和 Apache Kafka 非常相像，除了常规的组件之外，免费版还包含<br>Schema 注册中心和 REST proxy 两大功能。前者是帮助你集中管理 Kafka 消息格式以实现数据前向 &#x2F; 后向兼容；后者用开放 HTTP<br>接口的方式允许你通过网络访问 Kafka 的各种功能，这两个都是 Apache Kafka 所没有的。</p><p>除此之外，免费版包含了更多的连接器，它们都是 Confluent<br>公司开发并认证过的，你可以免费使用它们。至于企业版，它提供的功能就更多了。在我看来，最有用的当属跨数据中心备份和集群监控两大功能了。多个数据中心之间数据的同步以及对集群的监控历来是<br>Kafka 的痛点，Confluent Kafka 企业版提供了强大的解决方案帮助你“干掉”它们。</p><p>不过 Confluent Kafka 的一大缺陷在于，Confluent 公司暂时没有发展国内业务的计划，相关的资料以及技术支持都很欠缺，很多国内<br>Confluent Kafka 使用者甚至无法找到对应的中文文档，因此目前 Confluent Kafka 在国内的普及率是比较低的。</p><p><strong>一言以蔽之，如果你需要用到 Kafka 的一些高级特性，那么推荐你使用 Confluent Kafka。</strong></p><h2 id="CDH-HDP-Kafka"><a href="#CDH-HDP-Kafka" class="headerlink" title="CDH&#x2F;HDP Kafka"></a>CDH&#x2F;HDP Kafka</h2><p>最后说说大数据云公司发布的 Kafka（CDH&#x2F;HDP Kafka）。这些大数据平台天然集成了 Apache Kafka，通过便捷化的界面操作将 Kafka<br>的安装、运维、管理、监控全部统一在控制台中。如果你是这些平台的用户一定觉得非常方便，因为所有的操作都可以在前端 UI<br>界面上完成，而不必去执行复杂的 Kafka 命令。另外这些平台提供的监控界面也非常友好，你通常不需要进行任何配置就能有效地监控<br>Kafka。</p><p>但是凡事有利就有弊，这样做的结果是直接降低了你对 Kafka 集群的掌控程度。毕竟你对下层的 Kafka 集群一无所知，你怎么能做到心中有数呢？这种<br>Kafka 的另一个弊端在于它的滞后性。由于它有自己的发布周期，因此是否能及时地包含最新版本的 Kafka 就成为了一个问题。比如 CDH<br>6.1.0 版本发布时 Apache Kafka 已经演进到了 2.1.0 版本，但 CDH 中的 Kafka 依然是 2.0.0 版本，显然那些在 Kafka 2.1.0 中修复的<br>Bug 只能等到 CDH 下次版本更新时才有可能被真正修复。</p><p><strong>简单来说，如果你需要快速地搭建消息引擎系统，或者你需要搭建的是多框架构成的数据平台且 Kafka 只是其中一个组件，那么我推荐你使用这些大数据云公司提供的<br>Kafka。</strong></p><h1 id="最后说一说Kafka版本演进"><a href="#最后说一说Kafka版本演进" class="headerlink" title="最后说一说Kafka版本演进"></a>最后说一说Kafka版本演进</h1><ol><li><p><strong>Kafka 0.8.x系列</strong>：这是Kafka的初始版本系列。它引入了Kafka的基本功能，如高吞吐量、持久性、分布式消息传递等。在这个系列中，Kafka引入了生产者和消费者API，以及基本的消息存储和复制机制。</p></li><li><p><strong>Kafka 0.9.x系列</strong>：这个版本系列引入了一些重要的改进和新特性。其中最显著的是引入了Kafka Connect和Kafka Streams。Kafka<br>Connect提供了可插拔的连接器，用于将Kafka与外部系统集成。Kafka Streams是一个用于构建实时流处理应用程序的库。</p></li><li><p><strong>Kafka 0.10.x系列</strong>：这个版本系列引入了一些重要的改进和新特性。其中包括了Exactly-Once语义的支持，这是通过引入事务API来实现的。此外，Kafka<br>0.10.x还引入了Kafka Mirror Maker，用于在不同的Kafka集群之间进行数据复制和同步。</p></li><li><p><strong>Kafka 0.11.x系列</strong>：这个版本系列引入了一些重要的改进和新特性。其中包括了Kafka Streams的重大改进，如窗口操作和KTable。此外，Kafka<br>0.11.x还引入了Kafka Admin Client，用于管理和配置Kafka集群。</p></li><li><p><strong>Kafka 1.0.x系列</strong>：这个版本系列是Kafka的一个重要里程碑。它引入了许多重要的改进和新特性，包括Kafka<br>Streams的重大改进、更好的安全性支持、更好的监控和管理工具等。</p></li><li><p><strong>Kafka 2.0.x系列</strong>：这个版本系列引入了一些重要的改进和新特性。其中包括了KIP-98，引入了Exactly-Once语义的增强支持。此外，Kafka<br>2.0.x还引入了KRaft，这是一种新的复制协议，用于提供更强大的数据一致性保证。</p></li></ol><h1 id="Kafka系列文章更新计划"><a href="#Kafka系列文章更新计划" class="headerlink" title="Kafka系列文章更新计划"></a>Kafka系列文章更新计划</h1><table><thead><tr><th>名称</th><th>状态</th><th>预计更新日期</th><th>文章地址</th></tr></thead><tbody><tr><td>（一）Kafka入门</td><td>已完成</td><td>-</td><td><a href="https://blog.zysicyj.top/kafka1">https://blog.zysicyj.top/kafka1</a></td></tr><tr><td>（二）Kafka的基本使用</td><td>已完成</td><td>9月18日</td><td><a href="https://blog.zysicyj.top/kafka2">https://blog.zysicyj.top/kafka2</a></td></tr><tr><td>（三）生产者消息分区机制原理</td><td>未更新</td><td>9月25日</td><td><a href="https://blog.zysicyj.top/kafka3">https://blog.zysicyj.top/kafka3</a></td></tr><tr><td>（四）生产者压缩算法</td><td>未更新</td><td>10月2日</td><td><a href="https://blog.zysicyj.top/kafka4">https://blog.zysicyj.top/kafka4</a></td></tr><tr><td>（五）如何实现无消息丢失</td><td>未更新</td><td>10月9日</td><td><a href="https://blog.zysicyj.top/kafka5">https://blog.zysicyj.top/kafka5</a></td></tr><tr><td>（六）客户端隐藏功能</td><td>未更新</td><td>10月16日</td><td><a href="https://blog.zysicyj.top/kafka6">https://blog.zysicyj.top/kafka6</a></td></tr><tr><td>（七）Java生产者是如何管理TCP连接的</td><td>未更新</td><td>10月23日</td><td><a href="https://blog.zysicyj.top/kafka7">https://blog.zysicyj.top/kafka7</a></td></tr><tr><td>（八）幂等生产者和事务生产者是一回事吗</td><td>未更新</td><td>10月30日</td><td><a href="https://blog.zysicyj.top/kafka8">https://blog.zysicyj.top/kafka8</a></td></tr><tr><td>（九）消费者组到底是什么</td><td>未更新</td><td>11月6日</td><td><a href="https://blog.zysicyj.top/kafka9">https://blog.zysicyj.top/kafka9</a></td></tr><tr><td>（十）揭开神秘的“位移主题”面纱</td><td>未更新</td><td>11月13日</td><td><a href="https://blog.zysicyj.top/kafka10">https://blog.zysicyj.top/kafka10</a></td></tr><tr><td>（十一）消费者组重平衡能避免吗</td><td>未更新</td><td>11月20日</td><td><a href="https://blog.zysicyj.top/kafka11">https://blog.zysicyj.top/kafka11</a></td></tr><tr><td>（十二）Kafka中位移提交那些事儿</td><td>未更新</td><td>11月27日</td><td><a href="https://blog.zysicyj.top/kafka12">https://blog.zysicyj.top/kafka12</a></td></tr><tr><td>（十三） CommitFailedException异常怎么处理</td><td>未更新</td><td>12月4日</td><td><a href="https://blog.zysicyj.top/kafka13">https://blog.zysicyj.top/kafka13</a></td></tr><tr><td>（十四） 多线程开发消费者实例</td><td>未更新</td><td>12月11日</td><td><a href="https://blog.zysicyj.top/kafka14">https://blog.zysicyj.top/kafka14</a></td></tr><tr><td>（十五） Java 消费者是如何管理TCP连接的</td><td>未更新</td><td>12月18日</td><td><a href="https://blog.zysicyj.top/kafka15">https://blog.zysicyj.top/kafka15</a></td></tr><tr><td>（十六） 消费者组消费进度监控都怎么实现</td><td>未更新</td><td>12月25日</td><td><a href="https://blog.zysicyj.top/kafka16">https://blog.zysicyj.top/kafka16</a></td></tr><tr><td>（十七）  Kafka副本机制详解</td><td>未更新</td><td>1月1日</td><td><a href="https://blog.zysicyj.top/kafka17">https://blog.zysicyj.top/kafka17</a></td></tr><tr><td>（十八）  请求是怎么被处理的</td><td>未更新</td><td>1月8日</td><td><a href="https://blog.zysicyj.top/kafka18">https://blog.zysicyj.top/kafka18</a></td></tr><tr><td>（十九）  消费者组重平衡全流程解析</td><td>未更新</td><td>1月15日</td><td><a href="https://blog.zysicyj.top/kafka19">https://blog.zysicyj.top/kafka19</a></td></tr><tr><td>（二十）  你一定不能错过的Kafka控制器</td><td>未更新</td><td>1月22日</td><td><a href="https://blog.zysicyj.top/kafka20">https://blog.zysicyj.top/kafka20</a></td></tr><tr><td>（二十一）  关于高水位和Leader Epoch的讨论</td><td>未更新</td><td>1月29日</td><td><a href="https://blog.zysicyj.top/kafka21">https://blog.zysicyj.top/kafka21</a></td></tr><tr><td>（二十二）  主题管理知多少</td><td>未更新</td><td>2月5日</td><td><a href="https://blog.zysicyj.top/kafka22">https://blog.zysicyj.top/kafka22</a></td></tr><tr><td>（二十三）  Kafka动态配置了解下</td><td>未更新</td><td>2月12日</td><td><a href="https://blog.zysicyj.top/kafka23">https://blog.zysicyj.top/kafka23</a></td></tr><tr><td>（二十四）   怎么重设消费者组位移</td><td>未更新</td><td>2月19日</td><td><a href="https://blog.zysicyj.top/kafka24">https://blog.zysicyj.top/kafka24</a></td></tr><tr><td>（二十五）   常见工具脚本大汇总</td><td>未更新</td><td>2月26日</td><td><a href="https://blog.zysicyj.top/kafka25">https://blog.zysicyj.top/kafka25</a></td></tr><tr><td>（二十六）   KafkaAdminClient：Kafka的运维利器</td><td>未更新</td><td>3月4日</td><td><a href="https://blog.zysicyj.top/kafka26">https://blog.zysicyj.top/kafka26</a></td></tr><tr><td>（二十七）   Kafka认证机制用哪家</td><td>未更新</td><td>3月11日</td><td><a href="https://blog.zysicyj.top/kafka27">https://blog.zysicyj.top/kafka27</a></td></tr><tr><td>（二十八）    云环境下的授权该怎么做</td><td>未更新</td><td>3月18日</td><td><a href="https://blog.zysicyj.top/kafka28">https://blog.zysicyj.top/kafka28</a></td></tr><tr><td>（二十九）    跨集群备份解决方案MirrorMaker</td><td>未更新</td><td>3月25日</td><td><a href="https://blog.zysicyj.top/kafka29">https://blog.zysicyj.top/kafka29</a></td></tr><tr><td>（三十）    你应该怎么监控Kafka</td><td>未更新</td><td>4月1日</td><td><a href="https://blog.zysicyj.top/kafka30">https://blog.zysicyj.top/kafka30</a></td></tr><tr><td>（三十一）    主流的Kafka监控框架</td><td>未更新</td><td>4月8日</td><td><a href="https://blog.zysicyj.top/kafka31">https://blog.zysicyj.top/kafka31</a></td></tr><tr><td>（三十二）     调优Kafka，你做到了吗</td><td>未更新</td><td>4月15日</td><td><a href="https://blog.zysicyj.top/kafka32">https://blog.zysicyj.top/kafka32</a></td></tr><tr><td>（三十三）     从0搭建基于Kafka的企业级实时日志流处理平台</td><td>未更新</td><td>4月22日</td><td><a href="https://blog.zysicyj.top/kafka33">https://blog.zysicyj.top/kafka33</a></td></tr><tr><td>（三十四）     Kafka Streams与其他流处理平台的差异在哪里</td><td>未更新</td><td>4月29日</td><td><a href="https://blog.zysicyj.top/kafka34">https://blog.zysicyj.top/kafka34</a></td></tr><tr><td>（三十五）     Kafka Streams DSL开发实例</td><td>未更新</td><td>5月6日</td><td><a href="https://blog.zysicyj.top/kafka35">https://blog.zysicyj.top/kafka35</a></td></tr><tr><td>（三十六）     Kafka Streams在金融领域的应用</td><td>未更新</td><td>5月13日</td><td><a href="https://blog.zysicyj.top/kafka36">https://blog.zysicyj.top/kafka36</a></td></tr></tbody></table><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>优化流程记录</title>
      <link href="/a384b09f.html"/>
      <url>/a384b09f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="解析数据"><a href="#解析数据" class="headerlink" title="解析数据"></a>解析数据</h1><h2 id="更新索引"><a href="#更新索引" class="headerlink" title="更新索引"></a>更新索引</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">drop index idx_orgCode_projectId on t_json_data;</span><br><span class="line"></span><br><span class="line">create index idx_orgCode_projectId</span><br><span class="line">    on t_json_data (project_id, orgcode)</span><br><span class="line">    comment &#x27;单位项目联合索引&#x27;;</span><br></pre></td></tr></table></figure><p>可以看到，更新顺序后在全量查询的时候走了索引，未更新前并没有走索引。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-04/75392492588400.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-04/75392492588400.png"></a></p><h2 id="添加多线程支持"><a href="#添加多线程支持" class="headerlink" title="添加多线程支持"></a>添加多线程支持</h2><p>优化了这里性能在本地是有显著提升的，优化前差不多是78秒，优化完之后2秒多的样子。</p><p>但是这里遇到一个问题，只有idea启动的才快，使用<code>java -jar</code>手动启动提升，但是并没有那么惊艳。</p><p>那么这里打算继续优化</p><h2 id="单表插入改为批量插入"><a href="#单表插入改为批量插入" class="headerlink" title="单表插入改为批量插入"></a>单表插入改为批量插入</h2><p>原逻辑是单表查询的，这里改成批量添加比较复杂，改动就比较大了，改动中ing。。。。</p><h1 id="汇总数据"><a href="#汇总数据" class="headerlink" title="汇总数据"></a>汇总数据</h1><p>这里主要有两个大坑</p><ul><li>大量的单行插入，改为批插</li><li>使用IdUtil生成随机id，性能真拉跨，总共耗时2秒多，解决方法是手写了一个ID生成类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nari.common.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Getter;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IdUtilV2</span> &#123;</span><br><span class="line">    <span class="meta">@Getter</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> IdUtilV2 instance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        instance = <span class="keyword">new</span> <span class="title class_">IdUtilV2</span>();</span><br><span class="line">        <span class="comment">//        id = Long.valueOf(String.valueOf(System.nanoTime()).substring(4));</span></span><br><span class="line">        id = System.nanoTime();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">AtomicInteger</span> <span class="variable">ids</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">IdUtilV2</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getIdStr</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cn.hutool.core.util.IdUtil.fastSimpleUUID();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">value</span> <span class="operator">=</span> Long.valueOf(id + <span class="string">&quot;&quot;</span> + (ids.incrementAndGet()));</span><br><span class="line">        log.warn(<span class="string">&quot;id--:&#123;&#125;&quot;</span>, value);</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="导出性能优化"><a href="#导出性能优化" class="headerlink" title="导出性能优化"></a>导出性能优化</h1><p>这里单独写了一篇文章总结：<a href="http://blog.zysicyj.top/3ffdfec">http://blog.zysicyj.top/3ffdfec</a></p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】什么是websocket？如何与前端通信？</title>
      <link href="/84ceba89.html"/>
      <url>/84ceba89.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h1 id="什么是WebSocket？"><a href="#什么是WebSocket？" class="headerlink" title="什么是WebSocket？"></a>什么是WebSocket？</h1><p>WebSocket是一种在Web应用程序中实现双向通信的协议。它允许在客户端和服务器之间建立持久的、全双工的连接，以便实时地发送数据。</p><p>传统的HTTP协议是一种无状态的请求-响应协议，客户端发送请求，服务器返回响应，然后连接立即关闭。这种模型适用于大多数Web应用程序，但对于需要实时数据更新或双向通信的应用程序来说，它并不理想。</p><p>WebSocket通过在客户端和服务器之间建立长久的TCP连接，提供了一种持久性的通信通道。它通过在HTTP握手过程中升级连接，从而允许在同一个连接上进行双向通信。</p><p>WebSocket的特点包括：</p><ol><li><p>双向通信：WebSocket允许客户端和服务器之间双向发送数据，而不仅仅是客户端向服务器发送请求。</p></li><li><p>实时性：WebSocket提供了高效的实时数据传输，可以在数据可用时立即将其推送给客户端。</p></li><li><p>较低的开销：WebSocket使用较少的网络开销，因为它使用持久连接而不需要频繁的握手和头部信息。</p></li><li><p>兼容性：WebSocket协议已经得到了广泛的支持，现代的Web浏览器和服务器都可以很好地支持WebSocket。</p></li></ol><p>WebSocket在许多实时应用程序中得到广泛应用，例如聊天应用程序、实时协作工具、股票市场报价、多人游戏等。它提供了一种强大的机制，使得开发者可以轻松实现实时和双向的Web应用程序。</p><h1 id="Spring-Boot如何实现WebSocket"><a href="#Spring-Boot如何实现WebSocket" class="headerlink" title="Spring Boot如何实现WebSocket"></a>Spring Boot如何实现WebSocket</h1><p>在Spring Boot中，可以使用Spring WebSocket模块来实现WebSocket功能。以下是使用Spring Boot实现WebSocket的基本步骤：</p><ol><li>添加依赖：在<code>pom.xml</code>文件中添加以下依赖，以引入Spring WebSocket和Tomcat WebSocket的支持：</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-websocket<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-websocket<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>创建一个WebSocket处理器类：创建一个类，实现<code>org.springframework.web.socket.handler.TextWebSocketHandler</code><br>，并重写<code>handleTextMessage</code>和<code>afterConnectionEstablished</code>等方法来处理WebSocket事件。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.web.socket.TextMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.WebSocketSession;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.handler.TextWebSocketHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyWebSocketHandler</span> <span class="keyword">extends</span> <span class="title class_">TextWebSocketHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">handleTextMessage</span><span class="params">(WebSocketSession session, TextMessage message)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 处理收到的文本消息</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterConnectionEstablished</span><span class="params">(WebSocketSession session)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 处理连接建立事件</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>配置WebSocket端点：创建一个配置类，继承自<code>org.springframework.web.socket.config.annotation.WebSocketConfigurer</code><br>，并重写<code>registerWebSocketHandlers</code>方法来注册WebSocket处理器和端点。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.config.annotation.EnableWebSocket;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.config.annotation.WebSocketConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.config.annotation.WebSocketHandlerRegistry;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSocket</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebSocketConfig</span> <span class="keyword">implements</span> <span class="title class_">WebSocketConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">registerWebSocketHandlers</span><span class="params">(WebSocketHandlerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addHandler(<span class="keyword">new</span> <span class="title class_">MyWebSocketHandler</span>(), <span class="string">&quot;/websocket&quot;</span>).setAllowedOrigins(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>启动应用程序：编写一个Spring Boot启动类，并添加<code>@SpringBootApplication</code>注解来启动应用程序。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MyApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过这些步骤，您可以在Spring Boot中实现WebSocket功能。客户端可以使用JavaScript的<code>WebSocket</code><br>对象或其他WebSocket客户端库来连接到您的WebSocket端点。</p><p>请注意，上述代码只是一个基本示例，您可以根据实际需求进行更复杂的WebSocket实现。另外，还可以使用<code>@MessageMapping</code><br>注解来处理特定消息类型，使用<code>SimpMessagingTemplate</code>发送消息给订阅了特定主题的客户端等。</p><h1 id="前端如何与websocket通信"><a href="#前端如何与websocket通信" class="headerlink" title="前端如何与websocket通信"></a>前端如何与websocket通信</h1><p>在前端处理WebSocket连接和消息，您可以使用JavaScript的WebSocket API来实现。以下是基本的前端处理步骤：</p><ol><li>创建WebSocket对象：使用<code>WebSocket</code>构造函数创建一个WebSocket对象，并传入WebSocket服务器的URL。</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> socket = <span class="keyword">new</span> <span class="title class_">WebSocket</span>(<span class="string">&quot;ws://localhost:8080/your-application/websocket&quot;</span>);</span><br></pre></td></tr></table></figure><ol start="2"><li>监听WebSocket事件：通过WebSocket对象的事件处理程序，监听WebSocket的连接状态和消息事件。</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">socket.<span class="property">onopen</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 连接建立后的操作</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">socket.<span class="property">onclose</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 连接关闭后的操作</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">socket.<span class="property">onerror</span> = <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// 错误处理</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">socket.<span class="property">onmessage</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> message = event.<span class="property">data</span>;</span><br><span class="line">    <span class="comment">// 处理收到的消息</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="3"><li>发送消息：使用WebSocket对象的<code>send</code>方法发送消息到WebSocket服务器。</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socket.<span class="title function_">send</span>(<span class="string">&quot;Hello, server!&quot;</span>);</span><br></pre></td></tr></table></figure><ol start="4"><li>关闭连接：使用WebSocket对象的<code>close</code>方法关闭WebSocket连接。</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socket.<span class="title function_">close</span>();</span><br></pre></td></tr></table></figure><p>通过这些步骤，您可以在前端处理WebSocket连接和消息。您可以根据实际需求，在事件处理程序中实现您的业务逻辑，例如更新UI、发送和接收数据等。</p><p>请注意，WebSocket连接是异步的，所以您需要适当处理连接建立、关闭和错误事件。此外，还可以使用其他WebSocket库（如Socket.io、SockJS等）来简化WebSocket处理，并提供更多高级功能，如自动重连、心跳检测等。</p><h1 id="如何使用Python与websocket通信"><a href="#如何使用Python与websocket通信" class="headerlink" title="如何使用Python与websocket通信"></a>如何使用Python与websocket通信</h1><p>要实现Python和Spring Boot WebSocket的通信，可以使用Python的WebSocket客户端库与Spring Boot的WebSocket服务器进行通信。以下是一种常见的实现方式：</p><ol><li>安装WebSocket客户端库：使用Python的包管理工具（如pip）安装websocket-client库。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install websocket-client</span><br></pre></td></tr></table></figure><ol start="2"><li>在Python中创建WebSocket连接：在Python代码中导入websocket库，并创建一个WebSocket连接到Spring Boot的WebSocket服务器。</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> websocket</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">on_message</span>(<span class="params">ws, message</span>):</span><br><span class="line">    <span class="comment"># 处理收到的消息</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Received: <span class="subst">&#123;message&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">on_error</span>(<span class="params">ws, error</span>):</span><br><span class="line">    <span class="comment"># 处理错误</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Error: <span class="subst">&#123;error&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">on_close</span>(<span class="params">ws</span>):</span><br><span class="line">    <span class="comment"># 处理连接关闭</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Connection closed&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">on_open</span>(<span class="params">ws</span>):</span><br><span class="line">    <span class="comment"># 处理连接建立</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Connection established&quot;</span>)</span><br><span class="line">    <span class="comment"># 发送消息</span></span><br><span class="line">    ws.send(<span class="string">&quot;Hello from Python!&quot;</span>)</span><br><span class="line"></span><br><span class="line">websocket.enableTrace(<span class="literal">True</span>)</span><br><span class="line">ws = websocket.WebSocketApp(<span class="string">&quot;ws://localhost:8080/your-websocket-endpoint&quot;</span>,</span><br><span class="line">                            on_message=on_message,</span><br><span class="line">                            on_error=on_error,</span><br><span class="line">                            on_close=on_close)</span><br><span class="line">ws.on_open = on_open</span><br><span class="line">ws.run_forever()</span><br></pre></td></tr></table></figure><ol start="3"><li>在Spring Boot中处理WebSocket消息：在您的Spring Boot应用程序中创建WebSocket处理器类，处理来自Python客户端的消息。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.handler.TextWebSocketHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.TextMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.WebSocketSession;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyWebSocketHandler</span> <span class="keyword">extends</span> <span class="title class_">TextWebSocketHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">handleTextMessage</span><span class="params">(WebSocketSession session, TextMessage message)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 处理收到的消息</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Received: &quot;</span> + message.getPayload());</span><br><span class="line">        <span class="comment">// 发送消息给Python客户端</span></span><br><span class="line">        session.sendMessage(<span class="keyword">new</span> <span class="title class_">TextMessage</span>(<span class="string">&quot;Hello from Spring Boot!&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>确保WebSocket端点的URL路径在Python和Spring Boot代码中匹配，并根据实际情况进行调整。</p><p>通过这些步骤，您可以在Python和Spring Boot之间建立WebSocket通信。当Python客户端发送消息时，Spring<br>Boot服务器将接收并处理该消息，并可以向Python客户端发送响应消息。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WebSocket </tag>
            
            <tag> 实时通信 </tag>
            
            <tag> 后端技术 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【详解配置文件系列】es7配置文件详解</title>
      <link href="/fc410ad.html"/>
      <url>/fc410ad.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E8%AF%A6%E8%A7%A3%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%B3%BB%E5%88%97/">系列文章地址</a></p><hr><h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ---------------------------------- Cluster -----------------------------------</span></span><br><span class="line"><span class="attr">cluster.name:</span> <span class="string">my-cluster</span></span><br><span class="line"><span class="comment"># 集群的名称</span></span><br><span class="line"></span><br><span class="line"><span class="attr">node.name:</span> <span class="string">node-1</span></span><br><span class="line"><span class="comment"># 节点的名称</span></span><br><span class="line"></span><br><span class="line"><span class="attr">node.master:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 是否允许节点成为主节点（默认为 true）</span></span><br><span class="line"></span><br><span class="line"><span class="attr">node.data:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 是否允许节点存储数据（默认为 true）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------------------------------- Paths ------------------------------------</span></span><br><span class="line"><span class="attr">path.data:</span> <span class="string">/path/to/data</span></span><br><span class="line"><span class="comment"># 数据文件的存储路径</span></span><br><span class="line"></span><br><span class="line"><span class="attr">path.logs:</span> <span class="string">/path/to/logs</span></span><br><span class="line"><span class="comment"># 日志文件的存储路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------- Network -----------------------------------</span></span><br><span class="line"><span class="attr">network.host:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"><span class="comment"># 监听的网络接口地址（默认为 0.0.0.0，即监听所有接口）</span></span><br><span class="line"></span><br><span class="line"><span class="attr">http.port:</span> <span class="number">9200</span></span><br><span class="line"><span class="comment"># HTTP 通信使用的端口号（默认为 9200）</span></span><br><span class="line"></span><br><span class="line"><span class="attr">transport.tcp.port:</span> <span class="number">9300</span></span><br><span class="line"><span class="comment"># 节点间通信使用的 TCP 端口号（默认为 9300）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------------- Discovery ----------------------------------</span></span><br><span class="line"><span class="attr">discovery.seed_hosts:</span> [ <span class="string">&quot;host1&quot;</span>, <span class="string">&quot;host2&quot;</span> ]</span><br><span class="line"><span class="comment"># 发现初始主机节点的地址列表，用于集群自动发现</span></span><br><span class="line"></span><br><span class="line"><span class="attr">cluster.initial_master_nodes:</span> [ <span class="string">&quot;node-1&quot;</span>, <span class="string">&quot;node-2&quot;</span> ]</span><br><span class="line"><span class="comment"># 初始主节点列表，用于集群自动发现</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------- Gateway -----------------------------------</span></span><br><span class="line"><span class="attr">gateway.recover_after_nodes:</span> <span class="number">3</span></span><br><span class="line"><span class="comment"># 节点数达到指定数量后，才开始恢复数据（默认为 3）</span></span><br><span class="line"></span><br><span class="line"><span class="attr">gateway.expected_nodes:</span> <span class="number">5</span></span><br><span class="line"><span class="comment"># 预期的节点数量，用于恢复数据（默认为 5）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------- Memory ------------------------------------</span></span><br><span class="line"><span class="attr">bootstrap.memory_lock:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 是否锁定 Elasticsearch 进程的内存（需要设置文件系统权限）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------- Various -----------------------------------</span></span><br><span class="line"><span class="attr">action.destructive_requires_name:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 在执行危险操作（如删除索引）时，需要显式指定操作名称（默认为 true）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------- Security ----------------------------------</span></span><br><span class="line"><span class="attr">xpack.security.enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 是否启用 X-Pack 安全功能（默认为 false）</span></span><br><span class="line"></span><br><span class="line"><span class="attr">xpack.security.authc.api_key.enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 是否启用 API 密钥认证（默认为 false）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------- Logging ----------------------------------</span></span><br><span class="line"><span class="attr">logger.org.elasticsearch.transport:</span> <span class="string">debug</span></span><br><span class="line"><span class="comment"># 日志级别设置（可选：trace, debug, info, warn, error, fatal）</span></span><br></pre></td></tr></table></figure><h1 id="cluster-name"><a href="#cluster-name" class="headerlink" title="cluster.name"></a>cluster.name</h1><p><code>cluster.name</code>是Elasticsearch配置文件中的一个重要选项，用于指定集群的名称。每个运行的Elasticsearch实例都必须具有相同的集群名称才能加入同一个集群。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cluster.name:</span> <span class="string">my-cluster</span></span><br></pre></td></tr></table></figure><ul><li><p><code>cluster.name</code>是一个自定义的字符串，用于标识一个Elasticsearch集群。集群名称可以是任何合法的字符串，但最好选择一个具有描述性的名称，以便在多个集群之间区分。</p></li><li><p>所有想要加入同一个集群的Elasticsearch节点都必须设置相同的<code>cluster.name</code>值。这样，它们才能相互发现并协同工作，共享数据和状态。</p></li><li><p>如果您在配置文件中更改了<code>cluster.name</code>选项的值，需要确保所有节点都使用相同的集群名称，并重新启动它们才能生效。</p></li><li><p>默认情况下，Elasticsearch的集群名称为”elasticsearch”。但为了避免与其他集群发生冲突，建议将<code>cluster.name</code>设置为唯一的名称。</p></li><li><p>集群名称是Elasticsearch集群的重要标识，它还用于在集群中的节点之间进行发现、通信和协调。</p></li></ul><p>确保在配置Elasticsearch集群时，将所有节点的<code>cluster.name</code>选项设置为相同的值，以确保它们能够正常加入同一个集群并协同工作。</p><h1 id="node-name"><a href="#node-name" class="headerlink" title="node.name"></a>node.name</h1><p><code>node.name</code>是Elasticsearch配置文件中的一个选项，用于指定节点的名称。每个运行的Elasticsearch节点都应该具有唯一的名称，以便在集群中进行识别和通信。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">node.name:</span> <span class="string">node-1</span></span><br></pre></td></tr></table></figure><ul><li><p><code>node.name</code>是一个自定义的字符串，用于标识一个Elasticsearch节点。节点名称可以是任何合法的字符串，但最好选择一个具有描述性的名称，以便在集群中识别和管理节点。</p></li><li><p>每个Elasticsearch节点都应该具有唯一的<code>node.name</code>值，以避免与其他节点发生冲突。</p></li><li><p>节点名称对于集群中的节点之间的发现、通信和协调非常重要。节点名称用于在集群中识别和标识特定的节点。</p></li><li><p>如果您在配置文件中更改了<code>node.name</code>选项的值，需要确保每个节点都使用唯一的名称，并重新启动它们才能生效。</p></li><li><p>默认情况下，如果没有显式设置<code>node.name</code>选项，Elasticsearch会自动生成一个随机的节点名称。</p></li></ul><p>在配置Elasticsearch节点时，确保为每个节点设置唯一的<code>node.name</code>值，以便在集群中正确识别和管理节点。这将有助于确保节点之间的正常通信和协作。</p><h1 id="node-master-true"><a href="#node-master-true" class="headerlink" title="node.master: true"></a>node.master: true</h1><p><code>node.master</code>是Elasticsearch配置文件中的一个选项，用于指定节点是否可以成为主节点。主节点负责集群中的元数据管理和协调工作。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">node.master:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ul><li><p><code>node.master</code>是一个布尔值选项，用于指定节点是否可以成为主节点。默认情况下，它的值为<code>true</code>，表示节点可以担任主节点的角色。</p></li><li><p>主节点负责集群级别的操作，如创建或删除索引、分配分片、维护节点拓扑结构等。通常情况下，一个集群中只有少数几个节点会被选为主节点。</p></li><li><p>如果您有多个节点运行在同一个集群中，并希望将某些节点排除在主节点的角色之外，可以将<code>node.master</code>选项设置为<code>false</code>。</p></li><li><p>在配置节点时，根据集群的规模和需求，需要仔细选择主节点的数量和分布。通常建议在较大的集群中选择多个主节点，以提高冗余性和可用性。</p></li><li><p>如果集群中的主节点失败或不可用，Elasticsearch会自动从剩余的节点中选举新的主节点。</p></li></ul><p>确保在配置节点时，根据集群的需求和规模，正确设置<code>node.master</code>选项，以确保主节点的角色分配和集群的正常运行。</p><h1 id="node-data-true"><a href="#node-data-true" class="headerlink" title="node.data: true"></a>node.data: true</h1><p><code>node.data</code>是Elasticsearch配置文件中的一个选项，用于指定节点是否可以存储数据。数据节点负责存储和处理索引数据。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">node.data:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ul><li><p><code>node.data</code>是一个布尔值选项，用于指定节点是否可以存储数据。默认情况下，它的值为<code>true</code>，表示节点可以作为数据节点。</p></li><li><p>数据节点负责存储索引的分片数据和执行与索引数据相关的操作，如索引和搜索。在一个Elasticsearch集群中，可以有多个数据节点来分担数据的存储和处理负载。</p></li><li><p>如果您希望某个节点只负责协调和管理集群，并不存储任何数据，则可以将<code>node.data</code>选项设置为<code>false</code>。</p></li><li><p>在配置节点时，根据集群的需求和规模，需要仔细考虑数据节点的数量和分布。通常建议在大型集群中选择多个数据节点，以实现数据的冗余和高可用性。</p></li><li><p>数据节点会自动接收和管理分配给它们的分片，并与其他数据节点进行数据同步和复制，以确保数据的可靠性和一致性。</p></li></ul><p>确保在配置节点时，根据集群的需求和规模，正确设置<code>node.data</code>选项，以确保数据节点的角色分配和集群的正常运行。</p><h1 id="path-data-path-to-data"><a href="#path-data-path-to-data" class="headerlink" title="path.data: &#x2F;path&#x2F;to&#x2F;data"></a>path.data: &#x2F;path&#x2F;to&#x2F;data</h1><p><code>path.data</code>是Elasticsearch配置文件中的一个选项，用于指定数据文件的存储路径。</p><p>以下是对<code>path.data</code>选项的详细解释：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">path.data:</span> <span class="string">/path/to/data</span></span><br></pre></td></tr></table></figure><ul><li><p><code>path.data</code>用于指定Elasticsearch存储索引数据的路径。这个路径可以是一个本地文件系统的目录，也可以是一个挂载的网络文件系统（NFS）路径。</p></li><li><p>在配置文件中，将<code>/path/to/data</code>替换为实际的数据存储路径。</p></li><li><p>默认情况下，Elasticsearch会在启动时自动创建一个名为<code>data</code>的子目录，并在该目录下存储索引数据。</p></li><li><p>如果您希望将索引数据存储在不同的位置，可以使用<code>path.data</code>选项来指定自定义的数据存储路径。确保目录具有适当的权限，以便Elasticsearch进程可以读取和写入数据。</p></li><li><p>如果您有多个数据节点运行在同一个集群中，那么所有数据节点的<code>path.data</code>配置应该指向相同的目录，以确保数据的共享和一致性。</p></li><li><p>对于高可用性和数据冗余，建议将数据存储在多个独立的磁盘驱动器上，以避免单点故障。</p></li></ul><p>确保在配置Elasticsearch节点时，正确设置<code>path.data</code>选项，以指定数据文件的存储路径，并确保路径的可用性和适当的权限设置。</p><h1 id="path-logs-path-to-logs"><a href="#path-logs-path-to-logs" class="headerlink" title="path.logs: &#x2F;path&#x2F;to&#x2F;logs"></a>path.logs: &#x2F;path&#x2F;to&#x2F;logs</h1><p><code>path.logs</code>是Elasticsearch配置文件中的一个选项，用于指定日志文件的存储路径。</p><p>以下是对<code>path.logs</code>选项的详细解释：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">path.logs:</span> <span class="string">/path/to/logs</span></span><br></pre></td></tr></table></figure><ul><li><p><code>path.logs</code>用于指定Elasticsearch存储日志文件的路径。这个路径可以是一个本地文件系统的目录，也可以是一个挂载的网络文件系统（NFS）路径。</p></li><li><p>在配置文件中，将<code>/path/to/logs</code>替换为实际的日志文件存储路径。</p></li><li><p>默认情况下，Elasticsearch会在启动时自动创建一个名为<code>logs</code>的子目录，并在该目录下存储日志文件。</p></li><li><p>如果您希望将日志文件存储在不同的位置，可以使用<code>path.logs</code>选项来指定自定义的日志文件存储路径。确保目录具有适当的权限，以便Elasticsearch进程可以写入日志文件。</p></li><li><p>日志文件包含了Elasticsearch的运行日志、错误日志和其他日志信息，对于故障排除和监控非常重要。</p></li><li><p>确保为日志存储路径选择一个具有足够的磁盘空间和适当的文件系统性能的位置。</p></li></ul><p>确保在配置Elasticsearch节点时，正确设置<code>path.logs</code>选项，以指定日志文件的存储路径，并确保路径的可用性和适当的权限设置。</p><h1 id="network-host"><a href="#network-host" class="headerlink" title="network.host"></a>network.host</h1><p><code>network.host</code>是Elasticsearch配置文件中的一个选项，用于指定Elasticsearch监听的网络接口地址。</p><p>以下是对<code>network.host</code>选项的详细解释：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">network.host:</span> <span class="number">192.168</span><span class="number">.0</span><span class="number">.1</span></span><br></pre></td></tr></table></figure><ul><li><p><code>network.host</code>用于指定Elasticsearch监听的网络接口地址。可以使用具体的IP地址或主机名来指定要监听的网络接口。</p></li><li><p>默认情况下，<code>network.host</code>的值是<code>localhost</code>，表示Elasticsearch只监听本地回环接口（<code>127.0.0.1</code>），即只允许本地访问。</p></li><li><p>要使Elasticsearch对外可见并允许来自其他主机或网络的访问，可以将<code>network.host</code>设置为具体的IP地址或主机名。</p></li><li><p>可以指定一个具体的IP地址（如<code>192.168.0.1</code>）来监听特定的网络接口。也可以使用通配符地址（如<code>0.0.0.0</code>）来监听所有可用的网络接口。</p></li><li><p>如果您的服务器有多个网络接口（如多个网卡），可以根据需求选择要监听的特定接口。</p></li><li><p>使用<code>network.host</code>选项时，需要注意安全性和访问控制，确保只允许受信任的主机或网络访问Elasticsearch。</p></li></ul><p>确保在配置Elasticsearch节点时，根据实际需求、网络环境和安全考虑，正确设置<code>network.host</code>选项，以指定Elasticsearch监听的网络接口地址。</p><h1 id="http-port"><a href="#http-port" class="headerlink" title="http.port"></a>http.port</h1><p><code>http.port</code>是Elasticsearch配置文件中的一个选项，用于指定Elasticsearch HTTP通信所使用的端口号。</p><p>以下是对<code>http.port</code>选项的详细解释：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">http.port:</span> <span class="number">9200</span></span><br></pre></td></tr></table></figure><ul><li><p><code>http.port</code>用于指定Elasticsearch监听的HTTP通信端口号。默认情况下，它的值是<code>9200</code>。</p></li><li><p>当客户端通过HTTP协议与Elasticsearch进行通信时，使用的是<code>http.port</code>指定的端口号。</p></li><li><p>如果您希望在访问Elasticsearch时使用不同的端口号，可以修改<code>http.port</code>的值为所需的端口号。</p></li><li><p>请确保所选的端口号在您的环境中是未被使用的，并且没有防火墙或其他网络设备阻止与该端口的通信。</p></li><li><p>如果您有多个Elasticsearch节点运行在同一个集群中，每个节点都应该使用不同的<code>http.port</code>来避免端口冲突。</p></li></ul><p>确保在配置Elasticsearch节点时，根据实际需求和网络环境，正确设置<code>http.port</code>选项，以指定Elasticsearch HTTP通信所使用的端口号。</p><h1 id="transport-tcp-port"><a href="#transport-tcp-port" class="headerlink" title="transport.tcp.port"></a>transport.tcp.port</h1><p><code>transport.tcp.port</code>是Elasticsearch配置文件中的一个选项，用于指定Elasticsearch节点间通信所使用的TCP端口号。</p><p>以下是对<code>transport.tcp.port</code>选项的详细解释：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">transport.tcp.port:</span> <span class="number">9300</span></span><br></pre></td></tr></table></figure><ul><li><p><code>transport.tcp.port</code>用于指定Elasticsearch节点间通信所使用的TCP端口号。默认情况下，它的值是<code>9300</code>。</p></li><li><p>当Elasticsearch节点之间进行通信时，使用的是<code>transport.tcp.port</code>指定的端口号。节点间的通信主要用于数据复制、协调和集群管理等操作。</p></li><li><p>如果您希望在访问Elasticsearch节点间通信时使用不同的端口号，可以修改<code>transport.tcp.port</code>的值为所需的端口号。</p></li><li><p>请确保所选的端口号在您的环境中是未被使用的，并且没有防火墙或其他网络设备阻止与该端口的通信。</p></li><li><p>如果您有多个Elasticsearch节点运行在同一个集群中，每个节点都应该使用不同的<code>transport.tcp.port</code>来避免端口冲突。</p></li><li><p>默认情况下，客户端与Elasticsearch节点之间的通信应该使用HTTP协议，而不是直接通过<code>transport.tcp.port</code>进行通信。</p></li></ul><p>确保在配置Elasticsearch节点时，根据实际需求和网络环境，正确设置<code>transport.tcp.port</code>选项，以指定Elasticsearch节点间通信所使用的TCP端口号。</p><h1 id="discovery-seed-hosts"><a href="#discovery-seed-hosts" class="headerlink" title="discovery.seed_hosts"></a>discovery.seed_hosts</h1><p><code>discovery.seed_hosts</code>是Elasticsearch配置文件中的一个选项，用于指定集群自动发现所需的初始主机节点列表。</p><p>以下是对<code>discovery.seed_hosts</code>选项的详细解释：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">discovery.seed_hosts:</span> [ <span class="string">&quot;host1&quot;</span>, <span class="string">&quot;host2&quot;</span> ]</span><br></pre></td></tr></table></figure><ul><li><p><code>discovery.seed_hosts</code>用于指定集群自动发现时需要连接的初始主机节点列表。这些主机节点是用于引导新加入的节点发现和加入集群。</p></li><li><p><code>discovery.seed_hosts</code>的值应该是一个字符串数组，包含了初始主机节点的主机名或IP地址。</p></li><li><p>在启动Elasticsearch节点时，它会尝试连接<code>discovery.seed_hosts</code>列表中的每个主机，以获取集群的初始状态和其他节点的信息。</p></li><li><p>当新的Elasticsearch节点加入集群时，它会通过与<code>discovery.seed_hosts</code>中的主机节点通信，自动发现并加入集群。</p></li><li><p>请确保<code>discovery.seed_hosts</code>中的主机节点是可达的，并且在启动新节点之前，这些主机节点已经在运行。</p></li><li><p><code>discovery.seed_hosts</code>选项在集群的初始配置中非常重要，它确保新节点能够正确加入已有的Elasticsearch集群。</p></li></ul><p>确保在配置Elasticsearch节点时，根据实际需求和集群拓扑，正确设置<code>discovery.seed_hosts</code>选项，以指定集群自动发现所需的初始主机节点列表。</p><h1 id="cluster-initial-master-nodes"><a href="#cluster-initial-master-nodes" class="headerlink" title="cluster.initial_master_nodes"></a>cluster.initial_master_nodes</h1><p><code>cluster.initial_master_nodes</code>是Elasticsearch配置文件中的一个选项，用于指定集群的初始主节点列表。</p><p>以下是对<code>cluster.initial_master_nodes</code>选项的详细解释：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cluster.initial_master_nodes:</span> [ <span class="string">&quot;node-1&quot;</span>, <span class="string">&quot;node-2&quot;</span> ]</span><br></pre></td></tr></table></figure><ul><li><p><code>cluster.initial_master_nodes</code>用于指定集群的初始主节点列表。这些节点是集群中的初始主节点，负责集群的管理和协调工作。</p></li><li><p><code>cluster.initial_master_nodes</code>的值应该是一个字符串数组，包含了初始主节点的名称。</p></li><li><p>在启动Elasticsearch节点时，它会尝试连接<code>cluster.initial_master_nodes</code>列表中的每个节点，以选举出集群中的主节点。</p></li><li><p>初始主节点是在集群启动时被选举出来的，并负责管理集群的元数据和协调工作。</p></li><li><p>请确保<code>cluster.initial_master_nodes</code>中的节点名称是正确的，并且这些节点已经在运行。</p></li><li><p><code>cluster.initial_master_nodes</code>选项在集群的初始配置中非常重要，它确保正确选举出初始的主节点，以启动和管理集群。</p></li></ul><p>确保在配置Elasticsearch节点时，根据实际需求和集群拓扑，正确设置<code>cluster.initial_master_nodes</code>选项，以指定集群的初始主节点列表。</p><h1 id="gateway-recover-after-nodes"><a href="#gateway-recover-after-nodes" class="headerlink" title="gateway.recover_after_nodes"></a>gateway.recover_after_nodes</h1><p><code>gateway.recover_after_nodes</code>是Elasticsearch配置文件中的一个选项，用于指定在多少个节点可用后开始进行数据恢复。</p><p>以下是对<code>gateway.recover_after_nodes</code>选项的详细解释：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gateway.recover_after_nodes:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure><ul><li><p><code>gateway.recover_after_nodes</code>用于指定在多少个节点可用后开始进行数据恢复。默认情况下，它的值是<code>3</code>。</p></li><li><p>当一个Elasticsearch集群中的节点发生故障或重新启动时，数据恢复过程将在指定数量的可用节点后开始执行。</p></li><li><p><code>gateway.recover_after_nodes</code>的值应该是一个正整数，表示需要达到的可用节点数量。</p></li><li><p>通过设置<code>gateway.recover_after_nodes</code>，可以确保在集群中有足够的节点可用时才进行数据恢复，以避免数据恢复过程对集群的过大负载。</p></li><li><p>请注意，<code>gateway.recover_after_nodes</code>选项仅适用于启用了持久化存储的情况，例如使用本地磁盘或专用数据存储。</p></li><li><p>如果集群中的可用节点数量少于指定的<code>gateway.recover_after_nodes</code>值，数据恢复将不会自动开始。在这种情况下，您需要手动触发数据恢复过程。</p></li></ul><p>确保在配置Elasticsearch节点时，根据实际需求和集群规模，正确设置<code>gateway.recover_after_nodes</code>选项，以确保在足够数量的节点可用后开始进行数据恢复。</p><h1 id="gateway-expected-nodes"><a href="#gateway-expected-nodes" class="headerlink" title="gateway.expected_nodes"></a>gateway.expected_nodes</h1><p><code>gateway.expected_nodes</code>是Elasticsearch配置文件中的一个选项，用于指定预期的节点数量，用于数据恢复。</p><p>以下是对<code>gateway.expected_nodes</code>选项的详细解释：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gateway.expected_nodes:</span> <span class="number">5</span></span><br></pre></td></tr></table></figure><ul><li><p><code>gateway.expected_nodes</code>用于指定预期的节点数量，用于数据恢复。默认情况下，它的值是<code>5</code>。</p></li><li><p>当一个Elasticsearch集群中的节点发生故障或重新启动时，数据恢复过程将等待达到预期的节点数量。</p></li><li><p><code>gateway.expected_nodes</code>的值应该是一个正整数，表示期望的节点数量。</p></li><li><p>通过设置<code>gateway.expected_nodes</code>，可以确保在集群中有足够的节点可用时才开始数据恢复，以确保数据的完整性和一致性。</p></li><li><p>当达到预期节点数量时，数据恢复过程会自动开始。如果节点数量少于预期，则数据恢复将等待，直到达到预期节点数量或手动触发恢复过程。</p></li><li><p>请注意，<code>gateway.expected_nodes</code>选项仅适用于启用了持久化存储的情况，例如使用本地磁盘或专用数据存储。</p></li></ul><p>确保在配置Elasticsearch节点时，根据实际需求和集群规模，正确设置<code>gateway.expected_nodes</code><br>选项，以确保在达到预期的节点数量时开始数据恢复。这有助于保证数据的完整性和一致性。</p><h1 id="bootstrap-memory-lock"><a href="#bootstrap-memory-lock" class="headerlink" title="bootstrap.memory_lock"></a>bootstrap.memory_lock</h1><p><code>bootstrap.memory_lock</code>是Elasticsearch配置文件中的一个选项，用于锁定Elasticsearch进程的内存，以防止内存被交换到磁盘上。</p><p>以下是对<code>bootstrap.memory_lock</code>选项的详细解释：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">bootstrap.memory_lock:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ul><li><p><code>bootstrap.memory_lock</code>用于指定是否锁定Elasticsearch进程的内存。默认情况下，它的值是<code>false</code>，即未启用内存锁定。</p></li><li><p>当将<code>bootstrap.memory_lock</code>设置为<code>true</code>时，Elasticsearch将尝试锁定进程的内存，防止操作系统将内存交换到磁盘上。</p></li><li><p>锁定内存可以提高Elasticsearch的性能，因为内存交换会导致延迟和性能下降。但是，要启用内存锁定，需要确保Elasticsearch的运行用户（如elasticsearch）具有足够的权限。</p></li><li><p>如果您启用了内存锁定并遇到权限问题或其他错误，可以将<code>bootstrap.memory_lock</code>设置为<code>false</code>，以允许Elasticsearch进程的内存被交换到磁盘上。</p></li><li><p>请注意，启用内存锁定可能需要对操作系统进行额外的配置，以允许Elasticsearch进程锁定内存。具体步骤和要求取决于您使用的操作系统和分配的权限。</p></li></ul><p>确保在配置Elasticsearch节点时，根据实际需求和系统配置，正确设置<code>bootstrap.memory_lock</code><br>选项，以控制是否锁定Elasticsearch进程的内存。请确保在启用内存锁定之前了解相关的权限和操作系统要求。</p><h1 id="action-destructive-requires-name"><a href="#action-destructive-requires-name" class="headerlink" title="action.destructive_requires_name"></a>action.destructive_requires_name</h1><p><code>action.destructive_requires_name</code>是Elasticsearch配置文件中的一个选项，用于要求在执行危险操作（如删除索引）时显式指定操作名称。</p><p>以下是对<code>action.destructive_requires_name</code>选项的详细解释：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">action.destructive_requires_name:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ul><li><p><code>action.destructive_requires_name</code>用于控制在执行危险操作时是否要求显式指定操作名称。默认情况下，它的值是<code>false</code><br>，即不要求指定操作名称。</p></li><li><p>危险操作包括删除索引、关闭集群、清除缓存等可能会导致数据丢失或集群不可用的操作。</p></li><li><p>当将<code>action.destructive_requires_name</code>设置为<code>true</code>时，执行危险操作时需要在请求中显式指定操作名称，以增加操作的安全性。</p></li><li><p>指定操作名称是一种避免意外执行危险操作的措施，因为它需要更明确的意图才能执行这些操作。</p></li><li><p>通过设置<code>action.destructive_requires_name</code>为<code>true</code>可以帮助防止意外的数据丢失或集群不可用，但同时需要确保在需要执行危险操作时能够正确指定操作名称。</p></li></ul><p>确保在配置Elasticsearch节点时，根据实际需求和安全要求，正确设置<code>action.destructive_requires_name</code><br>选项，以控制在执行危险操作时是否要求显式指定操作名称。这有助于提高操作的安全性和可靠性。</p><h1 id="xpack-security-enabled"><a href="#xpack-security-enabled" class="headerlink" title="xpack.security.enabled"></a>xpack.security.enabled</h1><p><code>xpack.security.enabled</code>是Elasticsearch配置文件中的一个选项，用于启用或禁用Elasticsearch的安全功能（X-Pack Security）。</p><p>以下是对<code>xpack.security.enabled</code>选项的详细解释：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">xpack.security.enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ul><li><p><code>xpack.security.enabled</code>用于启用或禁用Elasticsearch的安全功能。默认情况下，它的值是<code>false</code>，即未启用安全功能。</p></li><li><p>当将<code>xpack.security.enabled</code>设置为<code>true</code>时，Elasticsearch将启用安全功能，包括身份验证、授权、加密通信等。</p></li><li><p>启用安全功能可以保护Elasticsearch集群免受未经授权的访问，并提供更安全的数据传输和操作。</p></li><li><p>要启用安全功能，您需要安装和配置X-Pack Security插件，并设置适当的身份验证和授权机制，如内置用户、角色、权限等。</p></li><li><p>请注意，启用安全功能会对性能产生一定的影响，因为它会增加身份验证和授权的开销，并引入加密和解密的开销。</p></li></ul><p>确保在配置Elasticsearch节点时，根据实际需求和安全要求，正确设置<code>xpack.security.enabled</code><br>选项，以启用或禁用Elasticsearch的安全功能。请确保在启用安全功能之前，正确安装和配置X-Pack Security插件，并了解相关的身份验证和授权机制。</p><h1 id="xpack-security-authc-api-key-enabled"><a href="#xpack-security-authc-api-key-enabled" class="headerlink" title="xpack.security.authc.api_key.enabled"></a>xpack.security.authc.api_key.enabled</h1><p><code>xpack.security.authc.api_key.enabled</code>是Elasticsearch配置文件中的一个选项，用于启用或禁用API密钥身份验证方式。</p><p>以下是对<code>xpack.security.authc.api_key.enabled</code>选项的详细解释：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">xpack.security.authc.api_key.enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ul><li><p><code>xpack.security.authc.api_key.enabled</code>用于启用或禁用API密钥身份验证方式。默认情况下，它的值是<code>false</code>，即禁用API密钥身份验证。</p></li><li><p>当将<code>xpack.security.authc.api_key.enabled</code>设置为<code>true</code>时，Elasticsearch将启用API密钥身份验证方式。</p></li><li><p>API密钥是一种轻量级的身份验证方式，它允许客户端使用预生成的密钥来进行身份验证，而无需提供用户名和密码。</p></li><li><p>启用API密钥身份验证可以在不暴露实际用户名和密码的情况下，为客户端提供一种安全的身份验证方式。</p></li><li><p>要使用API密钥身份验证，需要创建和管理API密钥，并为客户端提供相应的密钥和权限。</p></li><li><p>请注意，启用API密钥身份验证方式需要启用X-Pack Security功能，并进行适当的配置。</p></li></ul><p>确保在配置Elasticsearch节点时，根据实际需求和安全要求，正确设置<code>xpack.security.authc.api_key.enabled</code><br>选项，以启用或禁用API密钥身份验证方式。请确保在启用API密钥身份验证之前，正确配置和管理API密钥，并了解相关的权限和安全机制。</p><h1 id="logger-org-elasticsearch-transport"><a href="#logger-org-elasticsearch-transport" class="headerlink" title="logger.org.elasticsearch.transport"></a>logger.org.elasticsearch.transport</h1><p><code>logger.org.elasticsearch.transport</code>是Elasticsearch配置文件中用于配置Elasticsearch传输模块的日志记录器。</p><p>以下是对<code>logger.org.elasticsearch.transport</code>的详细解释：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logger.org.elasticsearch.transport:</span> <span class="string">debug</span></span><br></pre></td></tr></table></figure><ul><li><p><code>logger.org.elasticsearch.transport</code>用于配置Elasticsearch传输模块的日志记录级别。默认情况下，它的值是<code>info</code>。</p></li><li><p>通过设置不同的日志记录级别，可以控制Elasticsearch传输模块产生的日志消息的详细程度。</p></li><li><p>可用的日志记录级别包括：<code>trace</code>、<code>debug</code>、<code>info</code>、<code>warn</code>和<code>error</code>。级别从最详细的<code>trace</code>到最简要的<code>error</code>逐渐减少。</p></li><li><p>设置<code>logger.org.elasticsearch.transport</code>的值为<code>debug</code>将启用详细的调试日志记录，有助于追踪和调试与传输模块相关的问题。</p></li><li><p>请注意，启用详细的日志记录级别可能会产生大量的日志输出，因此在生产环境中应谨慎使用，并根据需要进行调整。</p></li></ul><p>确保在配置Elasticsearch节点时，根据实际需求和调试要求，正确设置<code>logger.org.elasticsearch.transport</code><br>选项，以配置Elasticsearch传输模块的日志记录级别。请注意在生产环境中谨慎使用详细的日志记录级别，以避免过多的日志输出。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 配置文件 </tag>
            
            <tag> es7 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Java Stream排序的实现方式</title>
      <link href="/56aad10f.html"/>
      <url>/56aad10f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h1 id="如何使用Java-Stream进行排序"><a href="#如何使用Java-Stream进行排序" class="headerlink" title="如何使用Java Stream进行排序"></a>如何使用Java Stream进行排序</h1><p>在Java中，使用Stream进行排序可以通过<code>sorted()</code>方法来实现。<code>sorted()</code>方法用于对Stream中的元素进行排序操作。具体实现如下：</p><ol><li><p>对基本类型元素的排序：</p><ul><li><p>使用<code>sorted()</code>方法对Stream进行排序，默认是按照自然顺序进行排序。例如，对一个<code>Stream&lt;Integer&gt;</code>进行排序可以如下操作：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; stream = Arrays.stream(<span class="keyword">new</span> <span class="title class_">Integer</span>[] &#123;<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>&#125;);</span><br><span class="line">Stream&lt;Integer&gt; sortedStream = stream.sorted();</span><br><span class="line">sortedStream.forEach(System.out::println);</span><br></pre></td></tr></table></figure><p>输出结果是：1, 2, 3。</p></li><li><p>如果想要按照特定的顺序进行排序，可以使用<code>sorted(Comparator)</code><br>方法，并传入一个自定义的比较器。例如，对一个<code>Stream&lt;String&gt;</code>按照长度进行排序可以如下操作：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; stream = Stream.of(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>);</span><br><span class="line">Stream&lt;String&gt; sortedStream = stream.sorted(Comparator.comparingInt(String::length));</span><br><span class="line">sortedStream.forEach(System.out::println);</span><br></pre></td></tr></table></figure><p>输出结果是：apple, cherry, banana。</p></li></ul></li><li><p>对自定义对象的排序：</p><ul><li><p>对于自定义对象，可以通过实现<code>Comparable</code>接口来定义对象的自然排序方式。然后，在<code>sorted()</code>方法中直接调用，就会按照自然排序进行排序。</p></li><li><p>如果想要按照其他方式进行排序，可以使用<code>sorted(Comparator)</code>方法，并传入一个自定义的比较器。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Person&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 省略构造方法和其他代码</span></span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Person other)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Integer.compare(<span class="built_in">this</span>.age, other.age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 使用自然排序方式</span></span><br><span class="line">Stream&lt;Person&gt; stream = persons.stream();</span><br><span class="line">Stream&lt;Person&gt; sortedStream = stream.sorted();</span><br><span class="line">sortedStream.forEach(System.out::println);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 使用自定义比较器进行排序</span></span><br><span class="line">Stream&lt;Person&gt; stream = persons.stream();</span><br><span class="line">Stream&lt;Person&gt; sortedStream = stream.sorted(Comparator.comparingInt(Person::getAge));</span><br><span class="line">sortedStream.forEach(System.out::println);</span><br></pre></td></tr></table></figure></li></ul></li></ol><p>以上就是使用Java Stream进行排序的基本实现方式。可以根据具体的排序需求，选择合适的排序方法和比较器。</p><h1 id="内部是什么算法实现的"><a href="#内部是什么算法实现的" class="headerlink" title="内部是什么算法实现的"></a>内部是什么算法实现的</h1><p>Java Stream中的排序操作使用了一种稳定的归并排序算法来实现。归并排序是一种分治算法，将待排序的元素序列递归地分成两半，然后对每个子序列进行排序，最后将两个有序的子序列合并成一个有序的序列。</p><p>具体来说，Java Stream的排序操作使用了一种优化的归并排序算法，被称为”timsort”。”timsort”算法结合了归并排序和插入排序的优点，以提高排序效率和性能。</p><p>“timsort”算法的主要特点包括：</p><ol><li><p>自适应的排序策略：”timsort”算法会根据待排序的数据特征，自动选择合适的排序策略。对于已经部分有序的序列，”timsort”<br>算法会利用已有的有序信息，采用插入排序来加速排序过程。</p></li><li><p>分段排序：”timsort”算法首先将待排序的序列划分为若干个较小的块，然后对每个块使用插入排序进行排序。这样可以减少插入排序的比较和交换次数，提高排序效率。</p></li><li><p>归并操作：”timsort”算法使用归并操作将排序后的小块合并成较大的块，直到最终将整个序列合并成一个有序序列。归并操作保证了最终结果的有序性。</p></li></ol><p>“timsort”算法在处理大规模数据时具有较高的效率和稳定性，尤其适用于处理已经部分有序或具有重复元素的序列。</p><p>需要注意的是，Java<br>Stream的排序操作默认使用自然排序（自定义对象需要实现Comparable接口），但也可以通过传入自定义的比较器来指定其他排序方式。无论使用哪种排序方式，底层的排序算法都是基于”<br>timsort”实现的。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java Stream </tag>
            
            <tag> 排序 </tag>
            
            <tag> 归并排序 </tag>
            
            <tag> timsort </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Redis如何实现分布式锁</title>
      <link href="/71270883.html"/>
      <url>/71270883.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>Redis可以使用分布式锁来实现多个进程或多个线程之间的并发控制，以确保在给定时间内只有一个进程或线程可以访问临界资源。以下是一种使用Redis实现分布式锁的常见方法：</p><ol><li><p>获取锁：</p><ul><li>客户端尝试使用<code>SETNX</code>命令在Redis中设置一个特定的键（作为锁）和一个唯一的标识符（例如，客户端ID）。</li><li>如果<code>SETNX</code>成功，即键之前不存在，客户端获得锁并可以执行相应的操作。</li><li>如果<code>SETNX</code>失败，即键已经存在，表示锁已经被其他客户端持有，客户端可以选择等待一段时间后重新尝试获取锁，或者放弃获取锁。</li></ul></li><li><p>释放锁：</p><ul><li>客户端使用<code>DEL</code>命令从Redis中删除之前设置的键，释放锁。</li><li>释放锁的时候需要确保只有持有锁的客户端可以释放锁，可以使用Lua脚本来保证原子性。</li></ul></li></ol><p>需要注意的是，分布式锁需要处理一些特殊情况和边界条件，如锁的超时时间、锁的可重入性、锁的自动续期等。以下是一些常见的技巧和注意事项：</p><ul><li>设置锁的超时时间：可以为锁设置一个过期时间，防止锁在某些情况下无法被释放。可以使用<code>EXPIRE</code>命令为锁设置一个合理的过期时间。</li><li>锁的可重入性：可以在锁的值中保存客户端的唯一标识符，并在释放锁时检查标识符是否匹配，以确保只有持有锁的客户端可以释放锁。</li><li>锁的自动续期：可以使用Redis的<code>EXPIRE</code>命令和定时器机制来定期续期锁的过期时间，防止持有锁的客户端在执行较长操作时锁过期。</li><li>使用Lua脚本：为了保证获取锁和释放锁的操作的原子性，可以使用Redis的Lua脚本来执行这些操作。</li></ul><p>需要注意的是，使用Redis的分布式锁仍然需要注意正确处理并发和竞争条件，并且在特殊情况下可能会出现死锁或活锁的情况。因此，在使用分布式锁时，需要仔细考虑并测试各种场景和边界条件，以确保系统的正确性和可靠性。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> 分布式锁 </tag>
            
            <tag> 并发控制 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Mysql系列】（一）MySQL语句执行流程</title>
      <link href="/62d41321.html"/>
      <url>/62d41321.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/Mysql/">系列文章地址</a></p><p><a href="https://time.geekbang.org/column/article/68319">参考文章</a></p><hr><h1 id="MySQL-逻辑架构"><a href="#MySQL-逻辑架构" class="headerlink" title="MySQL 逻辑架构"></a>MySQL 逻辑架构</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-02/94838158913100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-02/94838158913100.png"></a></p><h1 id="连接器"><a href="#连接器" class="headerlink" title="连接器"></a>连接器</h1><p>连接命令一般是这么写的</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h$ip -P$port -u$user -p</span><br></pre></td></tr></table></figure><p>那么</p><h2 id="什么是连接器？"><a href="#什么是连接器？" class="headerlink" title="什么是连接器？"></a>什么是连接器？</h2><p>MySQL 连接器（MySQL Connector）是用于连接和与 MySQL 数据库进行交互的驱动程序。它提供了与 MySQL<br>数据库服务器通信的功能，包括建立连接、执行查询、更新数据等。</p><p>MySQL 提供了多种连接器，常用的有以下几种：</p><ol><li><p>JDBC 连接器：JDBC（Java Database<br>Connectivity）是 Java 语言的一种标准 API，用于连接和操作各种数据库。MySQL 提供了一个 JDBC 驱动程序，可以通过 JDBC 连接器在<br>Java 应用程序中连接和操作 MySQL 数据库。</p></li><li><p>ODBC 连接器：ODBC（Open Database<br>Connectivity）是一种通用的数据库访问接口，可以在不同的编程语言和操作系统中连接和操作多种数据库。MySQL 提供了一个 ODBC<br>驱动程序，可以通过 ODBC 连接器在支持 ODBC 的应用程序中连接和操作 MySQL 数据库。</p></li><li><p>.NET 连接器：MySQL 提供了一个专门用于.NET 平台的连接器，可以在.NET 应用程序中连接和操作 MySQL 数据库。它提供了与 ADO.NET<br>兼容的接口，可以方便地在.NET 开发环境中使用 MySQL 数据库。</p></li><li><p>Python 连接器：MySQL 提供了一个 Python 连接器，可以在 Python 应用程序中连接和操作 MySQL 数据库。该连接器是通过 Python<br>的标准数据库 API（Python<br>DB API）实现的。</p></li></ol><p>使用 MySQL 连接器，可以通过配置连接参数（如主机名、端口号、用户名、密码等）来建立与 MySQL 数据库的连接。连接器还提供了执行 SQL<br>语句、获取查询结果、处理事务等功能，可以方便地进行数据库的操作。</p><p>以下是一个使用 JDBC 连接器连接 MySQL 数据库的示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySQLExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/mydatabase&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;password&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 加载MySQL JDBC驱动程序</span></span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 建立与MySQL数据库的连接</span></span><br><span class="line">            <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 执行SQL查询</span></span><br><span class="line">            <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line">            <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> stmt.executeQuery(<span class="string">&quot;SELECT * FROM users&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 处理查询结果</span></span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;id: &quot;</span> + id + <span class="string">&quot;, name: &quot;</span> + name);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 关闭连接</span></span><br><span class="line">            rs.close();</span><br><span class="line">            stmt.close();</span><br><span class="line">            conn.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面的示例中，通过加载 MySQL<br>JDBC 驱动程序，使用 JDBC 连接器建立了与 MySQL 数据库的连接。然后执行了一个查询语句，并处理了查询结果。最后关闭了连接。通过<br>JDBC 连接器，可以方便地在 Java 应用程序中连接和操作 MySQL 数据库。</p><h1 id="连接器连接流程"><a href="#连接器连接流程" class="headerlink" title="连接器连接流程"></a>连接器连接流程</h1><p><code>mysql -h$ip -P$port -u$user -p</code> 是一个连接到 MySQL 服务器的命令，其中 <code>$ip</code> 是要连接的 MySQL 服务器的主机名或 IP<br>地址，<code>$port</code><br>是 MySQL 服务器的端口号，<code>$user</code> 是要连接的用户名，<code>-p</code> 表示需要输入密码。</p><p>下面是使用 <code>mysql -h$ip -P$port -u$user -p</code> 命令进行连接的详细流程：</p><ol><li><p>当我们在终端或命令提示符中输入 <code>mysql -h$ip -P$port -u$user -p</code> 命令后，操作系统会启动一个新的进程来执行该命令。</p></li><li><p>操作系统会在系统的可执行程序路径中搜索 <code>mysql</code> 可执行文件，并找到它。</p></li><li><p>执行 <code>mysql</code> 可执行文件后，会启动一个 MySQL 客户端程序。这个程序是用 C 或 C++编写的，负责与 MySQL 服务器进行通信。</p></li><li><p>MySQL 客户端程序会解析命令行参数，并找到 <code>-h$ip</code> 参数指定的主机名或 IP 地址，<code>-P$port</code> 参数指定的端口号，<code>-u$user</code><br>参数指定的用户名。</p></li><li><p>MySQL 客户端程序会尝试与指定的 MySQL 服务器建立网络连接，使用<code>$ip</code> 和 <code>$port</code> 参数指定的主机名（或 IP 地址）和端口号。</p></li><li><p>如果网络连接成功建立，MySQL 客户端程序会发送一条连接请求给 MySQL 服务器，请求包括用户名和密码。</p></li><li><p>MySQL 服务器收到连接请求后，会进行身份验证，检查用户名和密码是否正确。如果验证通过，服务器会返回一个成功的连接响应。</p></li><li><p>MySQL 客户端程序接收到连接响应后，连接建立成功，此时会提示输入密码。</p></li><li><p>我们需要输入与 <code>$user</code> 参数指定的用户名对应的密码，按下回车键确认。</p></li><li><p>如果密码正确，MySQL 客户端程序会发送验证密码的请求给 MySQL 服务器。</p></li><li><p>MySQL 服务器收到密码验证请求后，会进行验证。如果密码验证通过，服务器会返回一个成功的验证响应。</p></li><li><p>MySQL 客户端程序接收到验证响应后，连接成功建立。此时，我们可以在命令行中输入 SQL 语句，并将其发送给 MySQL 服务器进行执行。</p></li><li><p>MySQL 服务器接收到 SQL 语句后，会执行相应的操作，比如查询、插入、更新等。</p></li><li><p>MySQL 服务器执行完 SQL 语句后，会将结果返回给 MySQL 客户端程序。</p></li><li><p>MySQL 客户端程序接收到结果后，会将结果显示在命令行中供我们查看和处理。</p></li><li><p>当我们退出 MySQL 客户端程序或输入 <code>quit</code> 命令关闭连接时，MySQL 客户端程序会发送一个断开连接的请求给 MySQL<br>服务器，服务器会关闭与客户端的连接。</p></li></ol><p>以上是使用 <code>mysql -h$ip -P$port -u$user -p</code> 命令进行连接的详细流程。通过这个流程，我们可以在终端或命令提示符中连接到指定的<br>MySQL 服务器，并进行数据库操作。</p><p>这里需要注意的有两点：</p><ol><li>不要直接将密码跟在-p 命令后面，不安全</li><li>**一个用户成功建立连接后，即使你用管理员账号对这个用户的权限做了修改，也不会影响已经存在连接的权限。修改完成后，只有再新建的连接才会使用新的权限设置<br>**</li></ol><h2 id="如何查看连接状态"><a href="#如何查看连接状态" class="headerlink" title="如何查看连接状态"></a>如何查看连接状态</h2><p>要查看当前连接到 MySQL 服务器的会话和连接信息，可以使用以下方法：</p><ol><li><p>通过 MySQL 命令行客户端：在命令行中输入 <code>mysql</code> 命令，连接到 MySQL 服务器。然后使用以下命令查看连接信息：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> PROCESSLIST;</span><br></pre></td></tr></table></figure><p>这个命令将显示当前所有活动的 MySQL 连接和会话的详细信息，包括连接的 ID、主机名、用户、执行的 SQL 语句等。</p></li><li><p>通过 MySQL 管理工具：如果使用 MySQL 的管理工具，如 phpMyAdmin、MySQL Workbench<br>等，可以使用这些工具提供的界面来查看连接信息。通常会有一个“当前连接”或类似的选项，点击即可显示当前连接的详细信息。</p></li><li><p>通过查询系统表：可以使用以下 SQL 查询语句查看连接信息：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> information_schema.processlist;</span><br></pre></td></tr></table></figure><p>这个查询语句将返回一个包含当前连接和会话信息的结果集，包括连接的 ID、主机名、用户、执行的 SQL 语句等。</p></li></ol><p>通过以上方法，您可以方便地查看当前连接到 MySQL 服务器的会话和连接信息。这对于监控和调试数据库连接非常有用。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-03/95558098647100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-03/95558098647100.png"></a></p><h2 id="什么是-MySQL-长连接"><a href="#什么是-MySQL-长连接" class="headerlink" title="什么是 MySQL 长连接"></a>什么是 MySQL 长连接</h2><p>MySQL 长连接是指在应用程序与 MySQL 服务器之间保持持久的连接，而不是每次执行操作都建立和断开连接。相对于短连接，长连接可以减少连接和断开的开销，提高性能。</p><p>在 MySQL 中，长连接可以通过以下方式实现：</p><ol><li><p>在应用程序中使用连接池：连接池是一组预先创建的、可重复使用的数据库连接。应用程序从连接池中获取连接，并在使用完毕后将连接返回到连接池中，而不是每次操作都创建和关闭连接。连接池可以在应用程序启动时初始化，并在应用程序关闭时销毁。</p></li><li><p>调整 MySQL 服务器的参数：MySQL 服务器有一些参数可以调整来支持长连接。其中一个关键参数是<code>wait_timeout</code><br>，它定义了一个连接在空闲一段时间后被服务器关闭的时间。默认情况下，<code>wait_timeout</code>较短，适用于短连接。可以将<code>wait_timeout</code><br>设置为较大的值，以支持长连接。</p></li></ol><p>长连接的优点包括：</p><ul><li>减少连接和断开的开销：长连接避免了频繁的连接建立和断开，减少了网络开销和服务器负担。</li><li>快速响应：使用长连接，应用程序可以更快地执行数据库操作，因为不需要重新建立连接。</li><li>资源利用率高：长连接可以重复使用数据库连接，减少了服务器资源的占用。</li></ul><p>然而，长连接也有一些注意事项：</p><ul><li>连接资源占用：长连接占用了 MySQL 服务器的连接资源，因此需要确保服务器的连接数限制和资源配置合理。</li><li>内存泄漏：长时间运行的应用程序可能会导致内存泄漏，因为连接没有及时释放。因此，应该定期检查和清理不再使用的连接。</li></ul><p>要使用长连接，请确保应用程序中正确配置连接池，并根据需要调整 MySQL 服务器的参数。这样可以充分利用长连接的优势，提高应用程序的性能和效率。</p><p>需要注意的是，<strong>MySQL 默认长连接时间是 8 小时</strong></p><h2 id="因为长连接导致-OOM-怎么办"><a href="#因为长连接导致-OOM-怎么办" class="headerlink" title="因为长连接导致 OOM 怎么办"></a>因为长连接导致 OOM 怎么办</h2><p>如果长连接导致了内存不足（OOM），可以考虑以下几种方式来解决该问题：</p><ol><li><p>减少连接池中的连接数：如果连接数过多导致内存不足，可以尝试减少连接池中的连接数。通过调整连接池的配置参数，例如最大连接数（max<br>connections），可以限制连接的数量。</p></li><li><p>设置连接超时时间：增加连接的空闲超时时间（idle<br>timeout），使得空闲的连接在一段时间后被自动关闭，释放内存资源。可以通过设置 MySQL 服务器的<code>wait_timeout</code>参数或连接池的相关配置来实现。</p></li><li><p>定期清理无效连接：定期检查连接池中的连接，清理掉长时间未使用或已关闭的连接，释放内存资源。可以编写一个定时任务或使用连接池提供的相关机制来实现。</p></li><li><p>考虑使用短连接：如果长连接仍然导致 OOM，可以考虑使用短连接的方式。在每次数据库操作之后，立即关闭连接，避免长时间占用连接资源。不过，这样会引入连接建立和断开的开销，可能会降低性能。</p></li><li><p>增加服务器内存：如果以上方法无法解决 OOM 问题，可以考虑增加服务器的内存容量，以提供更多的资源来支持长连接。</p></li></ol><p>在解决 OOM 问题时，需要根据具体情况进行调整和优化。可以根据应用程序的负载情况、数据库连接的使用情况以及服务器的资源配置来选择合适的方法。同时，也建议进行性能测试和监控，以及仔细分析和调优应用程序和数据库的性能瓶颈。</p><h1 id="查询缓存"><a href="#查询缓存" class="headerlink" title="查询缓存"></a>查询缓存</h1><h2 id="什么是-MySQL-查询缓存"><a href="#什么是-MySQL-查询缓存" class="headerlink" title="什么是 MySQL 查询缓存"></a>什么是 MySQL 查询缓存</h2><p>MySQL 查询缓存是 MySQL 数据库的一项功能，用于缓存查询的结果集。它可以在执行查询语句时，将查询结果缓存到内存中，以便后续相同的查询可以直接从缓存中获取结果，而不需要再次执行相同的查询操作。</p><p>MySQL 查询缓存的工作原理如下：</p><ol><li><p>当执行一个查询语句时，MySQL 会首先检查查询缓存，看看是否有与当前查询语句完全匹配的缓存结果。</p></li><li><p>如果有匹配的缓存结果，MySQL 会直接从缓存中获取结果，并将其返回给客户端，而不需要再次执行查询。</p></li><li><p>如果没有匹配的缓存结果，MySQL 会执行查询操作，获取查询结果，并将其存储到缓存中，以备后续相同的查询使用。</p></li></ol><p>MySQL 查询缓存的优点包括：</p><ul><li>提高查询性能：对于相同的查询语句，可以直接从缓存中获取结果，避免了再次执行查询的开销，提高了查询性能。</li><li>减少服务器负载：查询缓存可以减少数据库服务器的负载，因为相同的查询不需要再次执行，减少了 CPU 和 IO 的消耗。</li></ul><p>然而，MySQL 查询缓存也有一些限制和注意事项：</p><ul><li>查询缓存的匹配粒度：MySQL 查询缓存是根据完全匹配查询语句的方式进行缓存的，即查询语句的文本完全相同。如果查询语句中有任何微小的差异，比如空格、大小写等，就无法从缓存中获取结果。</li><li>缓存的更新频率：当对某个表进行更新操作（插入、更新、删除）时，与该表相关的缓存会被清空，需要重新执行查询。这可能导致缓存的频繁失效，降低了缓存的效果。</li><li>内存消耗：查询缓存需要占用一定的内存空间来存储缓存结果，如果缓存的数据量较大，可能会占用大量的内存资源。此外，查询缓存是基于查询语句进行缓存的，对于相同的查询语句，即使查询结果不同，也会使用相同的缓存空间。</li></ul><p>由于一些限制和性能问题，MySQL 5.7 版本开始移除了查询缓存功能。在较新的 MySQL 版本中，通常建议通过其他手段（如索引优化、查询优化）来提高查询性能，而不是依赖查询缓存。</p><h2 id="为什么不建议使用查询缓存"><a href="#为什么不建议使用查询缓存" class="headerlink" title="为什么不建议使用查询缓存"></a>为什么不建议使用查询缓存</h2><p>查询缓存在过去是 MySQL 的一个功能，用于提高查询性能。然而，随着时间的推移，查询缓存的使用逐渐被认为不再是一个推荐的数据库优化策略。以下是一些原因，解释为什么不建议使用查询缓存：</p><ol><li><p>锁粒度和高并发问题：MySQL 查询缓存的实现方式导致在高并发环境下存在锁粒度问题。当对某个表进行更新操作时，相关的查询缓存会被锁定，从而导致其他查询被阻塞，降低了并发性能。</p></li><li><p>缓存失效频繁：MySQL 查询缓存的缓存失效频率较高。**一旦对某个表进行了更新操作，与该表相关的缓存都会被清空，需要重新执行查询<br>**。这导致缓存的命中率较低，而缓存失效的开销却很高。</p></li><li></li></ol><p>内存消耗和不可扩展：查询缓存需要占用一定的内存空间来存储缓存结果，如果缓存的数据量较大，可能会占用大量的内存资源。而且，查询缓存是基于查询语句进行缓存的，对于相同的查询语句，即使查询结果不同，也会使用相同的缓存空间。这导致了内存的浪费，并且不适用于大规模数据库和高并发环境。</p><ol start="4"><li><p>缓存一致性和数据更新问题：由于 MySQL<br>查询缓存是以查询语句为基础进行缓存的，当有数据更新操作时，缓存的一致性可能会受到影响。如果多个客户端同时对同一表进行更新操作，会导致查询缓存中的数据与实际数据不一致。</p></li><li><p>查询优化器限制：使用查询缓存后，MySQL<br>查询优化器的选择余地受到限制。查询缓存只适用于完全匹配的查询语句，如果查询语句有微小差异（如空格、大小写等），无法从缓存中获取结果。这可能会导致查询优化器无法灵活选择最佳的查询计划。</p></li></ol><p>考虑到以上问题，MySQL 5.7 版本开始移除了查询缓存功能，并且在更高版本中不再推荐使用。现代的数据库优化策略更侧重于调整索引、查询优化、缓存层、硬件升级等方面来提高性能和可扩展性。</p><p><strong>需要注意 MySQL8.0 版本已经删掉了查询缓存的功能</strong></p><h1 id="分析器"><a href="#分析器" class="headerlink" title="分析器"></a>分析器</h1><h2 id="什么是-MySQL-分析器"><a href="#什么是-MySQL-分析器" class="headerlink" title="什么是 MySQL 分析器"></a>什么是 MySQL 分析器</h2><p>MySQL 分析器（MySQL Analyzer）是指用于分析和优化 MySQL 数据库性能的工具或技术。它可以帮助开发人员和数据库管理员识别数据库查询的瓶颈，并提出性能优化建议。</p><p>MySQL 分析器通常提供以下功能：</p><ol><li><p>查询执行计划分析：分析器可以解析和分析数据库查询的执行计划。执行计划描述了 MySQL<br>查询优化器将如何执行查询，包括使用哪些索引、连接方式、排序方式等。通过分析执行计划，可以确定查询的性能瓶颈和潜在优化点。</p></li><li><p>查询性能评估：分析器可以评估查询的性能，并提供查询的执行时间、扫描的行数、使用的索引等关键指标。通过比较不同查询的性能评估结果，可以确定哪些查询需要优化以提高性能。</p></li><li><p>索引分析与优化：分析器可以帮助识别数据库表中缺失或不合适的索引。它可以分析查询的执行情况，检查哪些查询没有使用索引，或者哪些查询使用了慢速索引。基于这些分析结果，可以提出创建、修改或删除索引的建议。</p></li><li><p>SQL 语句优化建议：分析器可以分析 SQL 语句，提供优化建议。它可以检查 SQL 语句的语法、查询结构和性能问题，并提供有关如何重写查询、使用更有效的查询方式的建议。</p></li><li><p>系统性能监控：一些分析器还提供系统性能监控功能，可以收集和分析数据库服务器的性能指标，如 CPU 利用率、内存使用情况、磁盘 IO<br>等。这些指标可以帮助识别系统瓶颈和资源瓶颈，并进行性能调优。</p></li></ol><p>常见的 MySQL 分析器工具包括 Explain、pt-query-digest、Percona Toolkit、MySQL Enterprise<br>Monitor 等。这些工具提供了丰富的分析和优化功能，可以帮助开发人员和数据库管理员更好地优化 MySQL 数据库的性能。</p><p>如果你的语句不对，就会收到<code>You have an error in your SQL syntax</code>的错误提醒，比如下面这个语句 select 少打了开头的字母“s”。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">elect * from t <span class="built_in">where</span> ID=1;</span></span><br><span class="line"></span><br><span class="line">ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;elect * from t where ID=1&#x27; at line 1</span><br></pre></td></tr></table></figure><h1 id="优化器"><a href="#优化器" class="headerlink" title="优化器"></a>优化器</h1><h2 id="什么是-MySQL-优化器"><a href="#什么是-MySQL-优化器" class="headerlink" title="什么是 MySQL 优化器"></a>什么是 MySQL 优化器</h2><p>MySQL 优化器（MySQL Optimizer）是 MySQL 数据库中的一个组件，负责分析和优化查询语句的执行计划，以提高查询性能。它根据查询语句的结构和表的统计信息，选择最佳的查询执行策略和访问路径。</p><p>MySQL 优化器的主要功能包括：</p><ol><li><p>查询重写：MySQL 优化器会对查询语句进行重写，以便更好地利用索引、避免全表扫描等。它可以通过改变查询的连接顺序、引入临时表、使用覆盖索引等方式来优化查询。</p></li><li><p>查询优化：MySQL 优化器会分析查询语句的结构和表的统计信息，以选择最佳的执行策略。它会考虑索引的选择、连接类型（如嵌套循环连接、哈希连接、排序连接）、排序方式、聚合操作等因素，以尽量减少查询的成本和执行时间。</p></li><li><p>索引选择：MySQL 优化器会根据查询条件和表的索引信息，选择最适合的索引来加速查询。它会考虑索引的选择性、覆盖度、排序方式等因素，以提高索引的效率和查询的性能。</p></li><li><p>统计信息收集：MySQL 优化器会定期收集和更新表的统计信息，如行数、索引分布、列的基数等。这些统计信息对于优化器选择最佳执行计划至关重要，它可以根据统计信息来估计查询的成本和选择最佳的执行路径。</p></li></ol><p>MySQL 优化器是一个智能的查询执行计划生成器，它会根据查询语句和表的信息，通过优化算法来选择最佳的查询执行策略。但有时候，优化器的决策可能不是最优的，因此，对于特定的查询场景，可能需要手动干预和优化查询语句、索引设计等方面。</p><p>优化器是在表里面有多个索引的时候，决定使用哪个索引；或者在一个语句有多表关联（join）的时候，决定各个表的连接顺序。比如你执行下面这样的语句，这个语句是执行两个表的<br>join：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql</span><br><span class="line"><span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line">    <span class="keyword">from</span> t1</span><br><span class="line">             <span class="keyword">join</span> t2 <span class="keyword">using</span> (ID)</span><br><span class="line">    <span class="keyword">where</span> t1.c <span class="operator">=</span> <span class="number">10</span></span><br><span class="line">      <span class="keyword">and</span> t2.d <span class="operator">=</span> <span class="number">20</span>;</span><br></pre></td></tr></table></figure><ul><li>既可以先从表 t1 里面取出 c&#x3D;10 的记录的 ID 值，再根据 ID 值关联到表 t2，再判断 t2 里面 d 的值是否等于 20。</li><li>也可以先从表 t2 里面取出 d&#x3D;20 的记录的 ID 值，再根据 ID 值关联到 t1，再判断 t1 里面 c 的值是否等于 10。</li></ul><p>这两种执行方法的逻辑结果是一样的，但是执行的效率会有不同，而优化器的作用就是决定选择使用哪一个方案。</p><h1 id="执行器"><a href="#执行器" class="headerlink" title="执行器"></a>执行器</h1><h2 id="什么是-MySQL-执行器"><a href="#什么是-MySQL-执行器" class="headerlink" title="什么是 MySQL 执行器"></a>什么是 MySQL 执行器</h2><p>MySQL 执行器（MySQL Executor）是 MySQL 数据库的一个组件，负责执行查询语句并返回结果。它是 MySQL<br>查询处理的最后一步，负责将优化器生成的查询执行计划转换为具体的操作和结果。</p><p>MySQL 执行器的主要功能包括：</p><ol><li><p>查询解析和预处理：执行器首先对查询语句进行解析，识别查询类型、表名、列名等元素，并对其中的占位符进行替换。然后，执行器会进行查询预处理，检查和验证查询语句的语法和语义是否正确。</p></li><li><p>权限验证：在执行查询之前，执行器会进行权限验证，检查当前用户是否具有执行查询所需的权限。它会检查用户是否具有访问特定数据库、表或列的权限，以及执行特定操作（如<br>SELECT、INSERT、UPDATE、DELETE）的权限。</p></li><li><p>查询执行：执行器会根据优化器生成的查询执行计划，执行具体的操作。它会根据查询的类型（如<br>SELECT、INSERT、UPDATE、DELETE）和所需的操作，进行表的扫描、索引的搜索、数据的读取、修改等操作。</p></li><li><p>数据传输和结果返回：在执行查询操作时，执行器会从磁盘或内存中读取数据，并将结果传输给客户端。它负责处理查询结果的封装和传输，以及处理数据的排序、分页等需求。</p></li><li><p>事务管理：执行器还负责事务的管理，包括事务的启动、提交、回滚等操作。它会根据查询操作的需要，自动开始、提交或回滚事务，并确保查询的一致性和隔离性。</p></li></ol><p>MySQL 执行器是 MySQL 查询处理的核心组件之一，负责实际执行查询操作，并将结果返回给客户端。它与优化器、存储引擎等组件协同工作，完成数据库查询的全过程。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 深入理解Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> 连接器 </tag>
            
            <tag> 长连接 </tag>
            
            <tag> OOM </tag>
            
            <tag> 查询缓存 </tag>
            
            <tag> 分析器 </tag>
            
            <tag> 执行器 </tag>
            
            <tag> 优化器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>给Hexo添加说说功能</title>
      <link href="/82b271f.html"/>
      <url>/82b271f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://artitalk.js.org/doc.html">官网地址</a></p><hr><h1 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-02/78606840375800.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-02/78606840375800.png"></a></p><h1 id="👀-前言"><a href="#👀-前言" class="headerlink" title="👀 前言"></a>👀 前言</h1><hr><p>GitHub 仓库：<a href="https://github.com/ArtitalkJS/Artitalk">Artitalk.js</a></p><h2 id="🎉-特性"><a href="#🎉-特性" class="headerlink" title="🎉 特性"></a>🎉 特性</h2><ul><li>增删查改全方面支持</li><li>支持针对每条说说的评论</li><li>支持 Markdown&#x2F;html 语法</li><li>支持图片上传</li></ul><h1 id="🚀-快速使用"><a href="#🚀-快速使用" class="headerlink" title="🚀 快速使用"></a>🚀 快速使用</h1><hr><p>下列主题已将本项目整合进去，可以直接使用。 感谢以下主题对本项目的支持~</p><h2 id="hexo-theme-volantis"><a href="#hexo-theme-volantis" class="headerlink" title="hexo-theme-volantis"></a><a href="https://github.com/xaoxuu/hexo-theme-volantis/">hexo-theme-volantis</a></h2><h2 id="hexo-theme-cards"><a href="#hexo-theme-cards" class="headerlink" title="hexo-theme-cards"></a><a href="https://github.com/ChrAlpha/hexo-theme-cards">hexo-theme-cards</a></h2><h2 id="hexo-theme-butterfly"><a href="#hexo-theme-butterfly" class="headerlink" title="hexo-theme-butterfly"></a><a href="https://github.com/jerryc127/hexo-theme-butterfly">hexo-theme-butterfly</a></h2><h2 id="hexo-theme-matery"><a href="#hexo-theme-matery" class="headerlink" title="hexo-theme-matery"></a><a href="https://github.com/blinkfox/hexo-theme-matery/">hexo-theme-matery</a></h2><h2 id="gridea-theme-dark"><a href="#gridea-theme-dark" class="headerlink" title="gridea-theme-dark"></a><a href="https://github.com/jalenchuh/gridea-theme-dark">gridea-theme-dark</a></h2><h2 id="hexo-theme-MengD"><a href="#hexo-theme-MengD" class="headerlink" title="hexo-theme-MengD"></a><a href="https://github.com/lete114/hexo-theme-mengd/">hexo-theme-MengD</a></h2><h1 id="🚀-开始使用"><a href="#🚀-开始使用" class="headerlink" title="🚀 开始使用"></a>🚀 开始使用</h1><hr><h2 id="🌈-LeanCloud-的相关准备"><a href="#🌈-LeanCloud-的相关准备" class="headerlink" title="🌈 LeanCloud 的相关准备"></a>🌈 LeanCloud 的相关准备</h2><p>TIP</p><p><strong>🎃 与 Valine 在同一个页面使用</strong></p><p>如果迫切需要将 Artitalk 与 Valine 在同一个页面使用，可以通过 Artitalk 与 Valine 使用同一个 LeanCloud 的应用来解决。</p><p><strong>🌍 建议使用国际版的 LeanCloud</strong></p><p>因为国际版的 LeanCloud 不需要配置 serverurl，所以推荐使用国际版，速度没有区别，如果使用国内版的 LeanCloud 别忘了填写<br>serverurl 即可</p><p>👀 与valine在同一页面使用</p><p>如果有这个需要，可以将 artitalk 与 valine 存放在同一个应用中。可以有效避免同一个页面使用两个leancloud应用所产生的冲突。</p><ol><li>前往 <a href="https://leancloud.app/">LeanCloud 国际版</a>，注册账号。</li><li>注册完成之后根据 LeanCloud 的提示绑定手机号和邮箱。</li><li>绑定完成之后点击<code>创建应用</code>，应用名称随意，接着在<code>结构化数据</code>中创建 <code>class</code>，命名为 <code>shuoshuo</code>。</li><li>在你新建的应用中找到<code>结构化数据</code>下的<code>用户</code>。点击<code>添加用户</code>，输入想用的用户名及密码。</li><li>回到<code>结构化数据</code>中，点击 <code>class</code> 下的 <code>shuoshuo</code>。找到权限，在 <code>Class 访问权限</code>中将 <code>add_fields</code> 以及 <code>create</code><br>权限设置为指定用户，输入你刚才输入的用户名会自动匹配。为了安全起见，将 <code>delete</code> 和 <code>update</code> 也设置为跟它们一样的权限。</li><li>然后新建一个名为<code>atComment</code>的class，权限什么的使用默认的即可。</li><li>点击 <code>class</code> 下的 <code>_User</code> 添加列，列名称为 <code>img</code><br>，默认值填上你这个账号想要用的发布说说的头像url，这一项不进行配置，说说头像会显示为默认头像 —— Artitalk 的 logo。</li><li>在最菜单栏中找到设置-&gt; 应用 keys，记下来 <code>AppID</code> 和 <code>AppKey</code> ，一会会用。</li><li>最后将 <code>_User</code> 中的权限全部调为指定用户，或者数据创建者，为了保证不被篡改用户数据以达到强制发布说说。</li></ol><p>❗ 关于设置权限的这几步</p><p>这几步一定要设置好，才可以保证不被 “闲人” 破解发布说说的验证</p><h2 id="🌼-开始使用"><a href="#🌼-开始使用" class="headerlink" title="🌼 开始使用"></a>🌼 开始使用</h2><h2 id="🎅-配置项的说明"><a href="#🎅-配置项的说明" class="headerlink" title="🎅 配置项的说明"></a>🎅 配置项的说明</h2><p>可以通过修改配置项快捷更改部分功能，<a href="https://artitalk.js.org/settings.html">点我查看详细说明</a></p><h2 id="🔨-测试使用"><a href="#🔨-测试使用" class="headerlink" title="🔨 测试使用"></a>🔨 测试使用</h2><p>如果上面的配置没有问题，打开你的页面，点击页面右下角的登录输入用户密码后，在输入框中输入说说，点击发布即可。</p><h2 id="🔨-说说内容的删除"><a href="#🔨-说说内容的删除" class="headerlink" title="🔨 说说内容的删除"></a>🔨 说说内容的删除</h2><p>登录后点击说说内容框右上角的 x，点击确定删除即可。</p><h2 id="🔨-说说内容的修改"><a href="#🔨-说说内容的修改" class="headerlink" title="🔨 说说内容的修改"></a>🔨 说说内容的修改</h2><p>点击想要修改的那条说说的头像，会自动跳转到只有一条提示语以及输入框的界面，在输入框中编辑完之后点击保存即可</p><p>注：说说内容的修改与删除在 LeanCloud 后台也可进行操作</p><h2 id="🔨-评论的使用"><a href="#🔨-评论的使用" class="headerlink" title="🔨 评论的使用"></a>🔨 评论的使用</h2><p>点击每条说说右下角的评论图标即可查看针对本条说说的评论或者对本条说说发起评论，再次点击会刷新页面已达到返回的作用</p><p>填写邮箱以获得 gravatar 的头像</p><h2 id="🦄-在-Typecho-中使用"><a href="#🦄-在-Typecho-中使用" class="headerlink" title="🦄 在 Typecho 中使用"></a>🦄 在 Typecho 中使用</h2><hr><ol><li><p>登陆后台后新增独立页面</p></li><li><p>标题随意填，内容填为</p></li><li><p>发布页面</p></li></ol><h2 id="🍖-在-Vue-单页项目中使用"><a href="#🍖-在-Vue-单页项目中使用" class="headerlink" title="🍖 在 Vue 单页项目中使用"></a>🍖 在 Vue 单页项目中使用</h2><hr><p>例如 vuepress Gridsome 等博客框架是由 Vue 构建的。</p><p>在Gridsome中的准备</p><p>在<code>gridsome.config.js</code>中引入 artitalk</p><p>在普通Vue项目中的准备</p><p>在<code>&lt;YOUR_PROJ&gt;/public/index.html</code>中引入 artitalk</p><p>新建 <code>src/components/Artitalk.vue</code>（VuePress: <code>.vuepress/components/Artitalk.vue</code>），添加以下内容</p><p>如果需要加入 Artitalk 的页面为 <code>.md</code>（例如 VuePress），直接在其中写入 <code>&lt;Artitalk /&gt;</code> 即可。</p><p>如果为 <code>.vue</code> （开发项目） 除了写入 <code>&lt;Artitalk /&gt;</code>，还需要加入以下内容</p><h2 id="🚀-安全性"><a href="#🚀-安全性" class="headerlink" title="🚀 安全性"></a>🚀 安全性</h2><hr><p>由于 leancloud 的机制，应用的 Appid 以及 Appkey 均会暴漏在前端，可能会遭受到其他人的恶意攻击。<br>如果你在担心这个问题，你可以使用<a href="https://artitalk.js.org/settings.html/Artitalk_SafeMode">Artitalk_SafeMode</a></p><h2 id="🕸-使用-cdn"><a href="#🕸-使用-cdn" class="headerlink" title="🕸 使用 cdn"></a>🕸 使用 cdn</h2><hr><h3 id="🕸-UNPKG"><a href="#🕸-UNPKG" class="headerlink" title="🕸 UNPKG"></a>🕸 UNPKG</h3><h4 id="⭐-获取最新"><a href="#⭐-获取最新" class="headerlink" title="⭐ 获取最新"></a>⭐ 获取最新</h4><h4 id="🍳-获取指定版本"><a href="#🍳-获取指定版本" class="headerlink" title="🍳 获取指定版本"></a>🍳 获取指定版本</h4><p>使用指定版本，在版本号填上对应版本即可，例如：<a href="https://unpkg.com/artitalk@1.1.15/artitalk.js">https:&#x2F;&#x2F;unpkg.com&#x2F;artitalk@1.1.15/artitalk.js</a></p><p>关于版本可查看：<a href="https://unpkg.com/artitalk/">https://unpkg.com/artitalk/</a></p><h3 id="🕸-JsDelivr（国内无法使用！！！）"><a href="#🕸-JsDelivr（国内无法使用！！！）" class="headerlink" title="🕸 JsDelivr（国内无法使用！！！）"></a>🕸 JsDelivr（国内无法使用！！！）</h3><h4 id="⭐-获取最新-1"><a href="#⭐-获取最新-1" class="headerlink" title="⭐ 获取最新"></a>⭐ 获取最新</h4><h4 id="🍳-获取指定版本-1"><a href="#🍳-获取指定版本-1" class="headerlink" title="🍳 获取指定版本"></a>🍳 获取指定版本</h4><p>使用指定版本，在版本号填上对应版本即可，例如：<a href="https://cdn.jsdelivr.net/npm/artitalk@1.1.15">https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;artitalk@1.1.15</a></p><p>关于版本可查看：<a href="https://cdn.jsdelivr.net/npm/artitalk/">https://cdn.jsdelivr.net/npm/artitalk/</a></p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 插件 </tag>
            
            <tag> 说说功能 </tag>
            
            <tag> 文章 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Linux系列】vmware虚拟机网络配置详解</title>
      <link href="/9f426eea.html"/>
      <url>/9f426eea.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="非原创"><a href="#非原创" class="headerlink" title="非原创"></a>非原创</h1><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.51cto.com/u_15169172/2710721">原文地址</a></p><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/Linux/">系列文章地址</a></p><div class="bilibili">    <iframe src="//player.bilibili.com/player.html?bvid=BV1sw411D758&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe></div><hr><p>vmware为我们提供了三种网络工作模式，它们分别是：Bridged（桥接模式）、NAT（网络地址转换模式）、Host-Only（仅主机模式）。</p><p>打开vmware虚拟机，我们可以在选项栏的“编辑”下的“虚拟网络编辑器”中看到VMnet0（桥接模式）、VMnet1（仅主机模式）、VMnet8（NAT模式），那么这些都是有什么作用呢？其实，我们现在看到的VMnet0表示的是用于桥接模式下的虚拟交换机；VMnet1表示的是用于仅主机模式下的虚拟交换机；VMnet8表示的是用于NAT模式下的虚拟交换机。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/5960714725700.png" title="虚拟网络编辑器" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/5960714725700.png" alt="虚拟网络编辑器"></a></p><p>同时，在主机上对应的有VMware Network Adapter VMnet1和VMware Network Adapter<br>VMnet8两块虚拟网卡，它们分别作用于仅主机模式与NAT模式下。在“网络连接”中我们可以看到这两块虚拟网卡，如果将这两块卸载了，可以在vmware的“编辑”下的“虚拟网络编辑器”中点击“还原默认设置”，可重新将虚拟网卡还原。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/5967761524000.png" title="网络连接" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/5967761524000.png" alt="网络连接"></a></p><p>小伙伴看到这里，肯定有疑问，为什么在真机上没有VMware Network Adapter VMnet0虚拟网卡呢？那么接下来，我们就一起来看一下这是为什么。</p><h2 id="一、Bridged（桥接模式）"><a href="#一、Bridged（桥接模式）" class="headerlink" title="一、Bridged（桥接模式）"></a>一、Bridged（桥接模式）</h2><p>什么是桥接模式？桥接模式就是将主机网卡与虚拟机虚拟的网卡利用虚拟网桥进行通信。在桥接的作用下，类似于把物理主机虚拟为一个交换机，所有桥接设置的虚拟机连接到这个交换机的一个接口上，物理主机也同样插在这个交换机当中，所以所有桥接下的网卡与网卡都是交换模式的，相互可以访问而不干扰。在桥接模式下，虚拟机ip地址需要与主机在同一个网段，如果需要联网，则网关与DNS需要与主机网卡一致。其网络结构如下图所示：</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/5973760178000.png" title="桥接模式网络结构" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/5973760178000.png" alt="桥接模式网络结构"></a></p><p>接下来，我们就来实际操作，如何设置桥接模式。</p><p>首先，安装完系统之后，在开启系统之前，点击“编辑虚拟机设置”来设置网卡模式。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/5978642150000.png" title="编辑虚拟机设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/5978642150000.png" alt="编辑虚拟机设置"></a></p><p>点击“网络适配器”，选择“桥接模式”，然后“确定”</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/5984337565100.png" title="网络适配器设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/5984337565100.png" alt="网络适配器设置"></a></p><p>在进入系统之前，我们先确认一下主机的ip地址、网关、DNS等信息。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/5989889378200.png" title="主机网络信息" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/5989889378200.png" alt="主机网络信息"></a></p><p>然后，进入系统编辑网卡配置文件，命令为vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-eth0</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/5994883520000.png" title="编辑网卡配置文件" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/5994883520000.png" alt="编辑网卡配置文件"></a></p><p>添加内容如下：</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6007919478800.png" title="网卡配置内容" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6007919478800.png" alt="网卡配置内容"></a></p><p>编辑完成，保存退出，然后重启虚拟机网卡，使用ping命令ping外网ip，测试能否联网。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6024462401300.png" title="测试联网" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6024462401300.png" alt="测试联网"></a></p><p>能ping通外网ip，证明桥接模式设置成功。</p><p>那主机与虚拟机之间的通信是否正常呢？我们就用远程工具来测试一下。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6029584946300.png" title="远程连接测试" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6029584946300.png" alt="远程连接测试"></a></p><p>主机与虚拟机通信正常。</p><p>这就是桥接模式的设置步骤，相信大家应该学会了如何去设置桥接模式了。桥接模式配置简单，但如果你的网络环境是ip资源很缺少或对ip管理比较严格的话，那桥接模式就不太适用了。如果真是这种情况的话，我们该如何解决呢？接下来，我们就来认识vmware的另一种网络模式：NAT模式。</p><h2 id="二、NAT（地址转换模式）"><a href="#二、NAT（地址转换模式）" class="headerlink" title="二、NAT（地址转换模式）"></a>二、NAT（地址转换模式）</h2><p>刚刚我们说到，如果你的网络ip资源紧缺，但是你又希望你的虚拟机能够联网，这时候NAT模式是最好的选择。NAT模式借助虚拟NAT设备和虚拟DHCP服务器，使得虚拟机可以联网。其网络结构如下图所示：</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6035968995200.png" title="NAT模式网络结构" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6035968995200.png" alt="NAT模式网络结构"></a></p><p>在NAT模式中，主机网卡直接与虚拟NAT设备相连，然后虚拟NAT设备与虚拟DHCP服务器一起连接在虚拟交换机VMnet8上，这样就实现了虚拟机联网。那么我们会觉得很奇怪，为什么需要虚拟网卡VMware<br>Network Adapter VMnet8呢？原来我们的VMware Network Adapter VMnet8虚拟网卡主要是为了实现主机与虚拟机之间的通信。在之后的设置步骤中，我们可以加以验证。</p><p>首先，设置虚拟机中NAT模式的选项，打开vmware，点击“编辑”下的“虚拟网络编辑器”，设置NAT参数及DHCP参数。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6043494112400.png" title="虚拟网络编辑器设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6043494112400.png" alt="虚拟网络编辑器设置"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6049162678300.png" title="NAT参数设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6049162678300.png" alt="NAT参数设置"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6053258105700.png" title="DHCP参数设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6053258105700.png" alt="DHCP参数设置"></a></p><p>将虚拟机的网络连接模式修改成NAT模式，点击“编辑虚拟机设置”。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6058861930000.png" title="编辑虚拟机设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6058861930000.png" alt="编辑虚拟机设置"></a></p><p>点击“网络适配器”，选择“NAT模式”</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6063504767100.png" title="网络适配器设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6063504767100.png" alt="网络适配器设置"></a></p><p>然后开机启动系统，编辑网卡配置文件，命令为vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-eth0</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6068343930700.png" title="编辑网卡配置文件" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6068343930700.png" alt="编辑网卡配置文件"></a></p><p>具体配置如下：</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6073885786700.png" title="网卡配置内容" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6073885786700.png" alt="网卡配置内容"></a></p><p>编辑完成，保存退出，然后重启虚拟机网卡，动态获取ip地址，使用ping命令ping外网ip，测试能否联网。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6078542213900.png" title="测试联网" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6078542213900.png" alt="测试联网"></a></p><p>之前，我们说过VMware Network Adapter VMnet8虚拟网卡的作用，那我们现在就来测试一下。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6083304294500.png" title="测试虚拟机与主机通信" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6083304294500.png" alt="测试虚拟机与主机通信"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6088117378000.png" title="测试主机与虚拟机通信" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6088117378000.png" alt="测试主机与虚拟机通信"></a></p><p>如此看来，虚拟机能联通外网，确实不是通过VMware Network Adapter VMnet8虚拟网卡，那么为什么要有这块虚拟网卡呢？</p><p>之前我们就说VMware Network Adapter VMnet8的作用是主机与虚拟机之间的通信，接下来，我们就用远程连接工具来测试一下。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6098186139200.png" title="测试主机与虚拟机通信" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6098186139200.png" alt="测试主机与虚拟机通信"></a></p><p>然后，将VMware Network Adapter VMnet8启用之后，发现远程工具可以连接上虚拟机了。</p><p>那么，这就是NAT模式，利用虚拟的NAT设备以及虚拟DHCP服务器来使虚拟机连接外网，而VMware Network Adapter VMnet8虚拟网卡是用来与虚拟机通信的。</p><h2 id="三、Host-Only（仅主机模式）"><a href="#三、Host-Only（仅主机模式）" class="headerlink" title="三、Host-Only（仅主机模式）"></a>三、Host-Only（仅主机模式）</h2><p>Host-Only模式其实就是NAT模式去除了虚拟NAT设备，然后使用VMware Network Adapter<br>VMnet1虚拟网卡连接VMnet1虚拟交换机来与虚拟机通信的，Host-Only模式将虚拟机与外网隔开，使得虚拟机成为一个独立的系统，只与主机相互通讯。其网络结构如下图所示：</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6111249157000.png" title="Host-Only模式网络结构" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6111249157000.png" alt="Host-Only模式网络结构"></a></p><p>通过上图，我们可以发现，如果要使得虚拟机能联网，我们可以将主机网卡共享给VMware Network Adapter<br>VMnet1网卡，从而达到虚拟机联网的目的。接下来，我们就来测试一下。</p><p>首先设置“虚拟网络编辑器”，可以设置DHCP的起始范围。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6115975454400.png" title="虚拟网络编辑器设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6115975454400.png" alt="虚拟网络编辑器设置"></a></p><p>设置虚拟机为Host-Only模式。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6121015083300.png" title="虚拟机网络适配器设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6121015083300.png" alt="虚拟机网络适配器设置"></a></p><p>开机启动系统，然后设置网卡文件。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6126811658100.png" title="编辑网卡配置文件" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6126811658100.png" alt="编辑网卡配置文件"></a></p><p>保存退出，然后重启网卡，利用远程工具测试能否与主机通信。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6131882074200.png" title="测试主机与虚拟机通信" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6131882074200.png" alt="测试主机与虚拟机通信"></a></p><p>主机与虚拟机之间可以通信，现在设置虚拟机联通外网。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6138450708700.png" title="虚拟网络编辑器设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6138450708700.png" alt="虚拟网络编辑器设置"></a></p><p>我们可以看到上图有一个提示，强制将VMware Network Adapter<br>VMnet1的ip设置成192.168.137.1，那么接下来，我们就要将虚拟机的DHCP的子网和起始地址进行修改，点击“虚拟网络编辑器”</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6143159381500.png" title="虚拟网络编辑器设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6143159381500.png" alt="虚拟网络编辑器设置"></a></p><p>重新配置网卡，将VMware Network Adapter VMnet1虚拟网卡作为虚拟机的路由。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6147585896400.png" title="虚拟机网络适配器设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6147585896400.png" alt="虚拟机网络适配器设置"></a></p><p>重启网卡，然后通过远程工具测试能否联通外网以及与主机通信。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6152230457600.png" title="测试联网和通信" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-01/6152230457600.png" alt="测试联网和通信"></a></p><p>测试结果证明可以使得虚拟机连接外网。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> vmware </tag>
            
            <tag> 虚拟机 </tag>
            
            <tag> 网络配置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】SpringBoot的传播机制详解</title>
      <link href="/29182850.html"/>
      <url>/29182850.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p><a href="https://blog.zysicyj.top/" title="首发博客地址">首发博客地址</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/" title="系列文章地址">系列文章地址</a></p><hr><p>Spring Boot 是基于 Spring 框架的快速开发框架，提供了许多便捷的特性和机制来简化开发过程。在 Spring Boot<br>中，事务的传播机制是通过@Transactional 注解来实现的。</p><p>@Transactional 注解可以用于方法、类或接口上，用于标识方法或类中的所有方法需要进行事务管理。通过设置@Transactional 注解的<br>propagation 属性，可以指定事务的传播行为。</p><p>事务的传播行为分为以下几种：</p><ol><li><p>REQUIRED：表示当前方法必须在一个事务内运行。如果当前已经存在事务，则加入该事务；如果当前不存在事务，则创建一个新的事务。</p></li><li><p>SUPPORTS：表示当前方法支持事务。如果当前存在事务，则加入该事务；如果当前不存在事务，则以非事务方式运行。</p></li><li><p>MANDATORY：表示当前方法必须在一个事务内运行。如果当前不存在事务，则抛出异常。</p></li><li><p>REQUIRES_NEW：表示当前方法必须在一个新的事务内运行。如果当前存在事务，则挂起该事务并创建一个新的事务。</p></li><li><p>NOT_SUPPORTED：表示当前方法不支持事务。如果当前存在事务，则挂起该事务。</p></li><li><p>NEVER：表示当前方法不支持事务。如果当前存在事务，则抛出异常。</p></li><li><p>NESTED：表示当前方法必须在一个嵌套事务内运行。如果当前存在事务，则在嵌套事务内运行；如果当前不存在事务，则创建一个新的事务。</p></li></ol><p>下面是一个使用 Spring Boot 传播机制的示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional(propagation = Propagation.REQUIRED)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">createUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="comment">// 保存用户信息</span></span><br><span class="line">        userRepository.save(user);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用其他方法，如果其他方法也有@Transactional注解，则会参与到当前事务中</span></span><br><span class="line">        updateUserStatus(user.getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional(propagation = Propagation.REQUIRED)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateUserStatus</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">        <span class="comment">// 更新用户状态</span></span><br><span class="line">        userRepository.updateStatus(userId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的示例中，UserService 类的 createUser 方法使用了@Transactional 注解，并设置了传播行为为<br>REQUIRED，表示该方法必须在一个事务内运行。在该方法中，先保存用户信息到数据库，然后调用了 updateUserStatus 方法。由于<br>updateUserStatus 方法也使用了@Transactional 注解，并且传播行为也为 REQUIRED，所以它会参与到当前事务中，保证了两个方法的操作在同一个事务内执行。</p><p>通过使用@Transactional 注解，我们可以方便地控制事务的传播行为，实现对数据库操作的事务管理。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 事务管理 </tag>
            
            <tag> Spring Boot </tag>
            
            <tag> 传播机制 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】今日面试题计划</title>
      <link href="/5988a9c0.html"/>
      <url>/5988a9c0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><h1 id="简单介绍下自己"><a href="#简单介绍下自己" class="headerlink" title="简单介绍下自己"></a>简单介绍下自己</h1><h1 id="SpringMvc解析流程"><a href="#SpringMvc解析流程" class="headerlink" title="SpringMvc解析流程"></a>SpringMvc解析流程</h1><p>Spring MVC 的请求处理流程可以简要描述为以下几个步骤：</p><ol><li><p><strong>请求到达 DispatcherServlet</strong>：当客户端发送一个请求时，请求首先被 Servlet 容器（如 Tomcat）接收。在 Servlet 容器中，请求被转发给配置的<br>DispatcherServlet。</p></li><li><p><strong>HandlerMapping 选择处理器</strong>：DispatcherServlet 通过 HandlerMapping 来确定请求的处理器（即控制器）。HandlerMapping 根据请求的<br>URL 路径和其他配置规则，将请求映射到对应的处理器。</p></li><li><p><strong>处理器执行</strong>：一旦确定了处理器，DispatcherServlet 就会调用对应的处理器方法来处理请求。处理器方法会根据请求的内容进行业务逻辑处理，可能包括数据查询、处理、验证等操作。</p></li><li><p><strong>参数解析</strong>：在处理器方法中，Spring MVC 使用参数解析器（Argument<br>Resolvers）来解析请求中的参数，并将它们绑定到处理器方法的参数上。参数解析器的选择是根据方法签名和注解来确定的，它们可以解析路径参数、查询参数、请求体等。</p></li><li><p><strong>处理器执行完毕</strong>：一旦处理器方法执行完成，它会返回一个结果对象（如数据模型、视图名称等）。</p></li><li><p><strong>视图解析器选择视图</strong>：DispatcherServlet 根据处理器方法的返回结果选择对应的视图。它使用视图解析器（View<br>Resolvers）来解析视图名称，并将其转换为具体的视图对象。</p></li><li><p><strong>视图渲染</strong>：选定的视图对象负责将模型数据渲染成最终的响应内容。视图可以是 JSP、Thymeleaf、Freemarker 等模板引擎生成的页面，也可以是<br>JSON、XML 等格式的数据。</p></li><li><p><strong>响应返回给客户端</strong>：最后，DispatcherServlet 将生成的响应返回给 Servlet 容器，然后 Servlet 容器将响应发送回客户端。</p></li></ol><p>在整个请求处理流程中，Spring MVC 提供了许多扩展点和配置选项，允许开发者根据需求进行自定义。你可以通过配置拦截器、异常处理器、视图解析器等来增强和定制请求处理流程。这种灵活性使得<br>Spring MVC 成为一个强大而可扩展的 Web 框架。</p><h1 id="SpringBoot"><a href="#SpringBoot" class="headerlink" title="SpringBoot"></a>SpringBoot</h1><h2 id="说说SpringBoot启动注解"><a href="#说说SpringBoot启动注解" class="headerlink" title="说说SpringBoot启动注解"></a>说说SpringBoot启动注解</h2><p>在 Spring Boot 中，可以使用以下注解来启动应用程序：</p><ol><li><p><strong>@SpringBootApplication</strong>：这是一个组合注解，它包含了 <code>@Configuration</code>、<code>@EnableAutoConfiguration</code> 和 <code>@ComponentScan</code><br>注解。通常将它放在应用程序的主类上，使用它来启动 Spring Boot 应用程序。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAppApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MyAppApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>@SpringBootApplication</code> 注解会自动扫描并注册 Spring 组件，启用自动配置，并设置适当的配置。</p></li><li><p><strong>@EnableAutoConfiguration</strong>：这个注解启用了 Spring Boot 的自动配置机制，根据项目的依赖和配置自动配置应用程序。</p></li><li><p><strong>@ComponentScan</strong>：这个注解指定了要扫描的组件的基础包。默认情况下，它扫描主类所在的包及其子包。你可以使用它来自定义扫描的包。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;com.example.myapp&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAppApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MyAppApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>以上是启动 Spring Boot 应用程序的常用注解。通过这些注解，你可以简化应用程序的启动配置，并利用 Spring Boot<br>的自动配置和组件扫描机制来加速开发过程。</p><h2 id="SpringBoot启动流程"><a href="#SpringBoot启动流程" class="headerlink" title="SpringBoot启动流程"></a>SpringBoot启动流程</h2><p>更详细地描述 Spring Boot 应用程序的启动流程如下：</p><ol><li><p><strong>执行 main 方法</strong>：应用程序的入口是一个包含 <code>main</code> 方法的主类。在 <code>main</code><br>方法中，创建主类的实例，并调用 <code>SpringApplication.run()</code> 方法来启动应用程序。</p></li><li><p><strong>创建 SpringApplication 实例</strong>：<code>SpringApplication</code> 是 Spring Boot<br>应用程序的核心类，它负责初始化和启动应用程序。在 <code>SpringApplication.run()</code> 方法中，会创建一个 <code>SpringApplication</code> 实例。</p></li><li><p><strong>加载应用程序配置</strong>：<code>SpringApplication</code> 会读取应用程序的配置，并将其加载到内部的 <code>Environment</code><br>中。配置可以包括 <code>application.properties</code> 或 <code>application.yml</code> 文件中的属性，以及其他自定义配置。</p></li><li><p><strong>创建 Spring 容器</strong>：<code>SpringApplication</code> 根据应用程序的配置和依赖关系，创建一个 Spring 容器（<code>ApplicationContext</code><br>）。Spring 容器是管理应用程序中的 Bean（组件）的核心容器。</p></li><li><p><strong>执行 Spring Boot 自动配置</strong>：Spring Boot 会根据应用程序的依赖关系和配置，自动配置各种功能和组件。它会根据类路径上的依赖，自动配置数据库连接池、Web<br>容器、消息队列等常见的功能。</p><ul><li><p>自动配置是通过条件化配置实现的，根据类路径上的依赖和已有的配置来决定是否应用某个自动配置。</p></li><li><p>自动配置类是通过 <code>@EnableAutoConfiguration</code> 注解来启用的，它会根据配置和条件来决定要应用哪些自动配置。</p></li><li><p>可以使用 <code>spring-boot-starter-*</code> 系列的依赖来引入特定功能的自动配置。</p></li></ul></li><li><p><strong>执行自定义配置和初始化</strong>：除了自动配置外，你还可以添加自定义的配置类和初始化器来进一步定制应用程序。</p><ul><li><p>可以使用 <code>@Configuration</code> 注解标记配置类，使用 <code>@Bean</code> 注解定义自定义的 Bean，并使用 <code>@ComponentScan</code> 注解扫描和注册其他组件。</p></li><li><p>可以使用 <code>SpringApplication</code> 的 <code>addInitializers()</code> 方法添加自定义的初始化器（<code>ApplicationContextInitializer</code>）。</p></li></ul></li><li><p><strong>执行 SpringApplicationListeners</strong>：可以通过自定义 <code>SpringApplicationListener</code> 来监听应用程序的启动事件，例如监听应用程序启动前后的事件。</p></li><li><p><strong>启动应用程序</strong>：一旦所有的配置和初始化工作完成，<code>SpringApplication</code> 将启动应用程序。</p><ul><li><p>在启动过程中，将创建 Spring 容器，实例化和装配所有的 Bean，并准备好处理来自客户端的请求。</p></li><li><p>启动过程中会触发 Spring 容器的初始化过程，包括实例化 Bean、依赖注入、执行生命周期回调等。</p></li></ul></li><li><p><strong>运行应用程序</strong>：应用程序启动后，它会开始监听来自客户端的请求。</p><ul><li><p>根据请求的 URL 路径和请求方法，调用相应的控制器方法进行处理。</p></li><li><p>处理完成后，将生成响应并返回给客户端。</p></li></ul></li></ol><p>在整个启动流程中，Spring Boot 提供了许多扩展点和配置选项，允许开发者根据需求进行自定义。你可以通过配置文件、注解、自定义 Bean<br>等方式来修改和增强应用程序的行为。这种灵活性使得 Spring Boot 成为一个强大而可扩展的应用程序开发框架。</p><h2 id="有哪些方法能在方法初始化前自定义操作"><a href="#有哪些方法能在方法初始化前自定义操作" class="headerlink" title="有哪些方法能在方法初始化前自定义操作"></a>有哪些方法能在方法初始化前自定义操作</h2><p>在方法初始化前进行自定义操作的方法有以下几种：</p><ol><li><p><strong>BeanPostProcessor 接口</strong>：实现 BeanPostProcessor 接口，并重写 <code>postProcessBeforeInitialization</code> 方法。该方法在每个<br>Bean 的初始化前被调用，你可以在此处对 Bean 进行自定义操作。</p></li><li><p><strong>@PostConstruct 注解</strong>：使用 <code>@PostConstruct</code> 注解标记一个方法，该方法会在 Bean 初始化完成后被调用。你可以在该方法中执行自定义的初始化操作。</p></li><li><p><strong>InitializingBean 接口</strong>：实现 InitializingBean 接口，并重写 <code>afterPropertiesSet</code> 方法。该方法会在 Bean<br>的属性设置完成后、初始化前被调用，你可以在此处执行自定义的初始化逻辑。</p></li><li><p><strong>@EventListener 注解</strong>：使用 <code>@EventListener</code> 注解标记一个方法，该方法可以监听特定的事件，并在事件发生时执行自定义操作。可以使用<br>Spring 的事件机制来实现该功能。</p></li><li><p><strong>自定义注解 + AOP</strong>：创建一个自定义的注解，然后使用 AOP（面向切面编程）来拦截方法，并在方法执行前执行自定义操作。你可以在<br>AOP 中定义切点和通知，并根据自定义注解来匹配方法。</p></li></ol><p>这些方法可以让你在方法初始化前执行自定义操作。你可以根据具体的需求和场景选择适合的方法来实现自己的逻辑。</p><h2 id="说说springboot中的事务传播机制"><a href="#说说springboot中的事务传播机制" class="headerlink" title="说说springboot中的事务传播机制"></a>说说springboot中的事务传播机制</h2><p>Spring Boot 中的事务传播机制是基于 Spring Framework 的事务管理机制实现的。事务传播机制定义了在多个事务方法相互调用时，事务应该如何传播和管理的规则。</p><p>在 Spring Boot 中，可以使用 <code>@Transactional</code> 注解来声明事务属性，并指定事务的传播行为。以下是常见的事务传播行为：</p><ol><li><p><strong>REQUIRED（默认）</strong>：如果当前方法没有事务，则创建一个新的事务；如果当前方法已经存在事务，则加入到当前事务中。</p></li><li><p><strong>REQUIRES_NEW</strong>：每次调用该方法时，都会创建一个新的事务，暂停当前事务（如果存在），并在方法执行完毕后恢复当前事务。</p></li><li><p><strong>SUPPORTS</strong>：如果当前方法在事务中被调用，则加入到当前事务中；如果当前方法不在事务中，则以非事务的方式执行。</p></li><li><p><strong>NOT_SUPPORTED</strong>：当前方法将以非事务的方式执行，即使当前方法在事务中被调用。</p></li><li><p><strong>MANDATORY</strong>：当前方法必须在事务中执行，如果当前方法不在事务中，则抛出异常。</p></li><li><p><strong>NEVER</strong>：当前方法必须以非事务方式执行，如果当前方法在事务中被调用，则抛出异常。</p></li><li><p><strong>NESTED</strong>：如果当前方法没有事务，则创建一个新的事务；如果当前方法已经存在事务，则在嵌套事务中执行。嵌套事务是当前事务的子事务，它可以独立于父事务进行提交或回滚。</p></li></ol><p>要使用事务传播机制，只需在需要进行事务管理的方法上添加 <code>@Transactional</code> 注解，并指定适当的传播行为。例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional(propagation = Propagation.REQUIRED)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="comment">// 更新用户信息的业务逻辑</span></span><br><span class="line">        userRepository.save(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">        <span class="comment">// 删除用户的业务逻辑</span></span><br><span class="line">        userRepository.deleteById(userId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的示例中，<code>updateUser</code> 方法使用默认的传播行为 <code>REQUIRED</code>，而 <code>deleteUser</code> 方法使用 <code>REQUIRES_NEW</code> 传播行为。</p><p>通过合理使用事务传播机制，可以确保事务在多个方法之间正确地传播和管理，从而保持数据的一致性和完整性。请根据具体的业务需求和场景选择适当的传播行为。</p><h2 id="如何在Spring-Boot中实现定时任务？"><a href="#如何在Spring-Boot中实现定时任务？" class="headerlink" title="如何在Spring Boot中实现定时任务？"></a>如何在Spring Boot中实现定时任务？</h2><p>在 Spring Boot 中，你可以使用 <code>@Scheduled</code> 注解来实现定时任务。<code>@Scheduled</code> 注解可以用于方法上，用于标记一个方法作为定时任务，并指定任务的触发时间。</p><p>以下是在 Spring Boot 中实现定时任务的步骤：</p><ol><li><p><strong>启用定时任务</strong>：在应用程序的主类上添加 <code>@EnableScheduling</code> 注解，以启用定时任务的支持。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAppApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MyAppApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>创建定时任务方法</strong>：在一个 Spring 管理的 Bean 中创建一个方法，并使用 <code>@Scheduled</code> 注解标记它作为定时任务。这个方法将在指定的时间间隔或固定的时间点触发。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTask</span> &#123;</span><br><span class="line">    <span class="meta">@Scheduled(fixedRate = 5000)</span> <span class="comment">// 每隔 5 秒触发一次</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doTask</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 定时任务的逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的示例中，<code>doTask</code> 方法将每隔 5 秒触发一次。</p></li><li><p><strong>指定定时任务的触发时间</strong>：<code>@Scheduled</code> 注解提供了多种方式来指定定时任务的触发时间，例如：</p><ul><li><code>fixedRate</code>：指定任务执行的时间间隔，以毫秒为单位。</li><li><code>fixedDelay</code>：指定任务执行的延迟时间，以毫秒为单位。</li><li><code>cron</code>：使用 Cron 表达式指定任务执行的时间点。</li></ul><p>例如，以下示例演示了使用 <code>fixedDelay</code> 和 <code>cron</code> 的方式：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTask</span> &#123;</span><br><span class="line">    <span class="meta">@Scheduled(fixedDelay = 5000)</span> <span class="comment">// 上一次任务结束后延迟 5 秒触发下一次</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doTask</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 定时任务的逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Scheduled(cron = &quot;0 0 1 * * ?&quot;)</span> <span class="comment">// 每天凌晨 1 点触发</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAnotherTask</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 定时任务的逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>通过以上步骤，你就可以在 Spring Boot 中实现定时任务。定时任务将按照指定的时间间隔或时间点触发，并执行相应的任务逻辑。请根据实际需求选择合适的触发时间方式，并编写相应的定时任务方法。</p><h1 id="Spring-Cloud-Alibaba"><a href="#Spring-Cloud-Alibaba" class="headerlink" title="Spring Cloud Alibaba"></a>Spring Cloud Alibaba</h1><h2 id="你用过哪些微服务组件"><a href="#你用过哪些微服务组件" class="headerlink" title="你用过哪些微服务组件"></a>你用过哪些微服务组件</h2><p>Spring Cloud Alibaba 是为了提供微服务架构下的一揽子解决方案而开发的一组组件。以下是 Spring Cloud Alibaba 提供的一些核心组件：</p><ol><li><p><strong>Nacos</strong>：一个用于动态服务发现、配置管理和服务元数据的开源平台。它提供了服务注册与发现、配置管理、动态路由、服务熔断、流量控制等功能。</p></li><li><p><strong>Sentinel</strong>：一个强大的流量控制和熔断降级库，提供实时监控、控制和保护微服务的能力。Sentinel<br>支持多种流量控制规则和熔断策略，并提供了实时的服务监控和告警功能。</p></li><li><p><strong>RocketMQ</strong>：一个分布式消息中间件，提供可靠的消息传递和数据同步能力。它支持发布&#x2F;订阅模式和点对点模式，并具有高吞吐量、低延迟和高可用性的特性。</p></li><li><p><strong>Dubbo</strong>：一个高性能的分布式服务框架，支持远程调用、负载均衡、服务注册与发现等功能。Spring Cloud Alibaba 提供了与 Dubbo<br>的集成，使得开发者可以使用 Spring Cloud 的编程模型来开发和管理 Dubbo 服务。</p></li></ol><p>除了以上核心组件，Spring Cloud Alibaba 还提供了其他一些有用的组件和工具，例如：</p><ul><li><strong>Seata</strong>：一个易于使用的高性能微服务分布式事务解决方案。</li><li><strong>Alibaba Cloud SDK</strong>：基于 Spring Cloud Alibaba 集成的阿里云服务开发工具包，用于访问和使用阿里云提供的各种云服务。</li></ul><p>通过使用 Spring Cloud Alibaba 的这些组件，开发者可以更轻松地构建和管理微服务架构下的应用程序，实现服务注册与发现、流量控制、熔断降级、消息传递等功能。</p><h2 id="分布式事务怎么做的"><a href="#分布式事务怎么做的" class="headerlink" title="分布式事务怎么做的"></a>分布式事务怎么做的</h2><p>Spring Cloud Alibaba 提供了 Seata（Simple Extensible Autonomous Transaction Architecture）来实现分布式事务。Seata<br>是一个易于使用的高性能微服务分布式事务解决方案，它提供了一套完整的事务管理能力，包括事务协调、分布式事务日志、事务恢复等。</p><p>以下是在 Spring Cloud Alibaba 中使用 Seata 实现分布式事务的步骤：</p><ol><li><p><strong>引入 Seata 依赖</strong>：在项目的 <code>pom.xml</code> 文件中引入 Spring Cloud Alibaba Seata 相关的依赖。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.seata<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>seata-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>配置 Seata 信息</strong>：在项目的配置文件（如 <code>application.properties</code> 或 <code>application.yml</code>）中配置 Seata 的相关信息，包括<br>Seata 服务器地址、端口等。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">alibaba:</span></span><br><span class="line">      <span class="attr">seata:</span></span><br><span class="line">        <span class="attr">tx-service-group:</span> <span class="string">my_tx_group</span> <span class="comment"># 事务组名称</span></span><br></pre></td></tr></table></figure></li><li><p><strong>配置数据源代理</strong>：在使用 Seata 进行分布式事务管理时，需要使用 Seata 提供的数据源代理来替换原有的数据源。你需要将数据源的配置改为<br>Seata 的代理数据源。</p></li><li><p><strong>配置分布式事务管理器</strong>：在 Spring Boot 应用程序中，需要配置一个分布式事务管理器（<code>TransactionManager</code>）来管理分布式事务。你可以使用<br>Seata 提供的 <code>SeataTransactionManager</code> 类来实现。</p></li><li><p><strong>使用 <code>@GlobalTransactional</code> 注解</strong>：在需要执行分布式事务的方法上，使用 <code>@GlobalTransactional</code><br>注解来标记。这个注解会开启一个全局事务，并将被注解的方法作为事务的参与者。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderDao orderDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ProductService productService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GlobalTransactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">createOrder</span><span class="params">(Order order)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建订单的业务逻辑</span></span><br><span class="line">        orderDao.create(order);</span><br><span class="line">        productService.reduceStock(order.getProductId(), order.getQuantity());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>在上面的示例中，<code>createOrder</code> 方法使用 <code>@GlobalTransactional</code> 注解标记为一个全局事务，其中包括了创建订单和减少产品库存的操作。</p><p>通过以上步骤，你就可以在 Spring Cloud Alibaba 中使用 Seata 来实现分布式事务。Seata<br>将负责事务的协调、日志记录和恢复等操作，确保分布式事务的一致性和可靠性。你可以使用 Seata 提供的控制台来查看和管理分布式事务的状态。</p><h2 id="服务注册与发现怎么做的"><a href="#服务注册与发现怎么做的" class="headerlink" title="服务注册与发现怎么做的"></a>服务注册与发现怎么做的</h2><p>在 Spring Cloud Alibaba 中，服务注册与发现主要通过 Nacos 来实现。Nacos<br>是一个用于动态服务发现、配置管理和服务元数据的开源平台，它提供了服务注册、服务发现和服务元数据管理的功能。</p><p>以下是在 Spring Cloud Alibaba 中实现服务注册与发现的步骤：</p><ol><li><p><strong>引入依赖</strong>：在项目的 <code>pom.xml</code> 文件中引入 Spring Cloud Alibaba Nacos 相关的依赖。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>配置 Nacos 信息</strong>：在项目的配置文件（如 <code>application.properties</code> 或 <code>application.yml</code>）中配置 Nacos 的相关信息，包括<br>Nacos 服务器地址、端口、命名空间等。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">$&#123;nacos.server-addr&#125;</span> <span class="comment"># Nacos 服务器地址</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">$&#123;nacos.namespace&#125;</span> <span class="comment"># 命名空间</span></span><br></pre></td></tr></table></figure></li><li><p><strong>使用 <code>@EnableDiscoveryClient</code> 注解</strong>：在应用程序的主类上添加 <code>@EnableDiscoveryClient</code> 注解，以启用服务注册与发现功能。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAppApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MyAppApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>注册服务</strong>：在需要注册的服务上添加 <code>@Service</code> 注解，以将其注册到 Nacos 服务器上。例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">// 服务实现逻辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>发现服务</strong>：在需要发现服务的地方，使用 <code>@Autowired</code> 注解注入 <code>DiscoveryClient</code> 对象，并使用它来发现服务。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DiscoveryClient discoveryClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/users&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;ServiceInstance&gt; <span class="title function_">getUsers</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> discoveryClient.getInstances(<span class="string">&quot;user-service&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的示例中，通过 <code>discoveryClient.getInstances(&quot;user-service&quot;)</code> 方法来获取名为 “user-service” 的服务的实例列表。</p></li></ol><p>通过以上步骤，你就可以在 Spring Cloud Alibaba 中实现服务注册与发现。Nacos 将负责将服务注册到服务器，并提供发现服务的功能。你可以使用<br>Nacos 的控制台来管理服务和实例，以及监控服务的健康状况。</p><h1 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h1><h2 id="MyBatis的一级缓存和二级缓存有什么区别？"><a href="#MyBatis的一级缓存和二级缓存有什么区别？" class="headerlink" title="MyBatis的一级缓存和二级缓存有什么区别？"></a>MyBatis的一级缓存和二级缓存有什么区别？</h2><p>MyBatis 中的一级缓存和二级缓存是两种不同级别的缓存机制。</p><p><strong>一级缓存</strong>是 MyBatis 默认开启的缓存机制，它是在 SqlSession 层面上的缓存。当执行查询操作时，查询的结果会被缓存在<br>SqlSession 的内部缓存中。当再次执行相同的查询操作时，MyBatis 会首先查找一级缓存，如果缓存中存在相同的查询结果，则直接从缓存中返回结果，而不再执行数据库查询。一级缓存的生命周期与<br>SqlSession 相同，当 SqlSession 关闭或清空缓存时，一级缓存也会被清空。</p><p><strong>二级缓存</strong>是在 Mapper 层面上的缓存机制，它是全局共享的缓存。当开启了二级缓存后，Mapper 的查询结果会被缓存在二级缓存中，然后其他的<br>SqlSession 可以共享这个缓存。当执行相同的查询操作时，MyBatis<br>会首先查找二级缓存，如果缓存中存在相同的查询结果，则直接从缓存中返回结果，而不再执行数据库查询。二级缓存的生命周期与整个应用程序相同，当应用程序关闭时，二级缓存才会被清空。</p><p>一级缓存和二级缓存在以下方面有区别：</p><ol><li><p><strong>作用范围</strong>：一级缓存是 SqlSession 级别的缓存，而二级缓存是 Mapper 级别的缓存。</p></li><li><p><strong>生命周期</strong>：一级缓存的生命周期与 SqlSession 相同，而二级缓存的生命周期与整个应用程序相同。</p></li><li><p><strong>共享性</strong>：一级缓存是 SqlSession 私有的缓存，不共享给其他 SqlSession 使用，而二级缓存是全局共享的缓存，多个 SqlSession<br>可以共享同一个缓存。</p></li><li><p><strong>更新策略</strong>：一级缓存对于增、删、改操作会自动清空，而二级缓存需要手动刷新或配置合适的缓存策略。</p></li></ol><p>在使用 MyBatis 进行开发时，可以根据具体的需求和场景来决定是否开启二级缓存，并合理使用一级缓存和二级缓存来提升查询性能。</p><h2 id="现在有个excel有100万数据量，如果是你，你会怎么导入"><a href="#现在有个excel有100万数据量，如果是你，你会怎么导入" class="headerlink" title="现在有个excel有100万数据量，如果是你，你会怎么导入"></a>现在有个excel有100万数据量，如果是你，你会怎么导入</h2><p>如果要导入一个拥有 100 万数据量的 Excel 文件，以下是一种可能的导入方式：</p><ol><li><p><strong>分批导入</strong>：由于数据量较大，一次性读取和处理整个 Excel 文件可能会占用大量内存并导致性能问题。因此，可以考虑将 Excel<br>文件分成多个较小的批次逐批导入。</p></li><li><p><strong>使用流式读取</strong>：使用 Apache POI 或其他类似的库，使用流式读取的方式逐行读取 Excel 文件。这样可以避免一次性将整个 Excel<br>文件加载到内存中。</p></li><li><p><strong>批量插入数据库</strong>：在读取每行数据后，将数据存储到一个临时数据结构中（例如列表），并在达到一定批次（如 1000<br>条数据）时，批量插入到数据库中。这样可以减少数据库的连接次数，并提高导入的效率。</p></li><li><p><strong>并发处理</strong>：如果导入的时间允许，可以考虑使用多线程或异步任务来并发处理导入过程。例如，可以使用线程池来并发读取 Excel<br>数据和插入数据库，提高导入速度。</p></li><li><p><strong>异常处理</strong>：在导入过程中，需要考虑处理可能出现的异常情况，例如格式错误、重复数据等。可以使用合适的方式对异常进行捕获和处理，保证导入的数据的准确性和完整性。</p></li><li><p><strong>性能优化</strong>：如果导入过程较慢，可以考虑对性能进行优化。例如，使用批量插入、合适的索引、适当的数据库配置等方式来提高导入的效率。</p></li></ol><p>在导入过程中，还需要考虑导入的并发性、数据校验、日志记录等方面的需求。根据具体的业务场景和需求，可以进行适当的调整和扩展。</p><h2 id="MyBatis如何进行分页查询？"><a href="#MyBatis如何进行分页查询？" class="headerlink" title="MyBatis如何进行分页查询？"></a>MyBatis如何进行分页查询？</h2><p>在 MyBatis 中进行分页查询可以使用两种方式：基于物理分页和基于逻辑分页。</p><p><strong>基于物理分页</strong>是在数据库层面进行分页查询，通过 SQL 的 LIMIT 子句来限制查询结果的数量。这种方式适用于数据量较大的情况。</p><p>在 MyBatis 中，可以使用 <code>RowBounds</code> 类或者 <code>PageHelper</code> 插件来实现基于物理分页的查询。</p><ol><li><p>使用 <code>RowBounds</code> 类：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;User&gt; <span class="title function_">getUsersByPage</span><span class="params">(<span class="type">int</span> offset, <span class="type">int</span> limit)</span>;</span><br></pre></td></tr></table></figure><p>在映射文件中，通过 <code>RowBounds</code> 对象设置查询的偏移量和限制条数：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUsersByPage&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.User&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM users</span><br><span class="line">    LIMIT #&#123;offset&#125;, #&#123;limit&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在调用方法时，传入偏移量和限制条数：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;User&gt; users = userDao.getUsersByPage(<span class="number">0</span>, <span class="number">10</span>); <span class="comment">// 查询第一页，每页10条数据</span></span><br></pre></td></tr></table></figure></li><li><p>使用 <code>PageHelper</code> 插件：<code>PageHelper</code> 是一个 MyBatis 分页插件，提供了丰富的分页功能。首先，需要引入 <code>PageHelper</code><br>的依赖，并配置插件。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在查询方法前调用 <code>PageHelper.startPage()</code> 方法来开启分页：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PageHelper.startPage(pageNum, pageSize);</span><br><span class="line">List&lt;User&gt; <span class="title function_">getUsers</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><p>在查询方法中，不需要手动设置偏移量和限制条数，<code>PageHelper</code> 插件会自动为 SQL 添加 LIMIT 子句。</p></li></ol><p><strong>基于逻辑分页</strong>是在应用程序层面进行分页查询，通过查询全部数据后在内存中进行分页处理。这种方式适用于数据量较小的情况。</p><p>在 MyBatis 中，可以使用 <code>List.subList()</code> 方法进行基于逻辑分页的查询。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;User&gt; <span class="title function_">getUsers</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><p>在查询方法中，获取全部数据后，根据页码和每页条数使用 <code>List.subList()</code> 方法进行分页处理。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;User&gt; allUsers=userDao.getUsers();</span><br><span class="line">        List&lt;User&gt; users=allUsers.subList(offset,offset+limit);</span><br></pre></td></tr></table></figure><p>以上是在 MyBatis 中进行分页查询的常见方式。根据具体的需求和场景，选择适合的分页方式来进行查询。</p><h2 id="MyBatis如何处理乐观锁和悲观锁？"><a href="#MyBatis如何处理乐观锁和悲观锁？" class="headerlink" title="MyBatis如何处理乐观锁和悲观锁？"></a>MyBatis如何处理乐观锁和悲观锁？</h2><p>在 MyBatis 中，可以使用乐观锁和悲观锁来处理并发访问时的数据一致性问题。</p><p><strong>乐观锁</strong>是一种乐观的并发控制策略，它假设并发访问的数据冲突较少，因此不加锁，而是在更新数据时进行版本号的比对。在 MyBatis<br>中，可以通过以下方式实现乐观锁：</p><ol><li><p><strong>使用版本号字段</strong>：在数据表中添加一个版本号字段，每次更新数据时，将版本号加1。在更新时，通过比对版本号来判断数据是否被其他线程修改。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在 SQL 更新语句中，使用版本号进行比对：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.example.User&quot;</span>&gt;</span></span><br><span class="line">    UPDATE users</span><br><span class="line">    SET name = #&#123;name&#125;, version = #&#123;version + 1&#125;</span><br><span class="line">    WHERE id = #&#123;id&#125; AND version = #&#123;version&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在进行更新操作时，MyBatis 会自动检查版本号是否匹配，如果不匹配，则更新失败。</p></li><li><p><strong>使用 <code>@Version</code> 注解</strong>：在实体类的版本号字段上添加 <code>@Version</code> 注解，表示该字段为版本号字段。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Version</span></span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在进行更新操作时，MyBatis 会自动检查版本号是否匹配，如果不匹配，则更新失败。</p></li></ol><p><strong>悲观锁</strong>是一种悲观的并发控制策略，它假设并发访问的数据冲突较多，因此加锁来确保数据的一致性。在 MyBatis 中，可以通过以下方式实现悲观锁：</p><ol><li><p>**使用 <code>FOR UPDATE</code>**：在查询语句中使用 <code>FOR UPDATE</code> 语句，锁定查询结果。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserForUpdate&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.User&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM users</span><br><span class="line">    WHERE id = #&#123;id&#125;</span><br><span class="line">    FOR UPDATE</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在进行查询操作时，MyBatis 会自动加上悲观锁，保证查询结果在事务提交前不会被其他线程修改。</p></li><li><p><strong>使用数据库的悲观锁机制</strong><br>：根据具体的数据库，使用相应的悲观锁机制，例如使用 <code>SELECT ... FOR UPDATE</code>、<code>SELECT ... LOCK IN SHARE MODE</code> 等语句。</p></li></ol><p>需要注意的是，乐观锁和悲观锁的选择应该根据具体的业务需求和场景来决定。乐观锁适用于并发冲突较少的情况，而悲观锁适用于并发冲突较多的情况。同时，使用乐观锁时需要确保版本号的正确性，而使用悲观锁时需要考虑锁的粒度和性能影响。</p><h2 id="mybatis-和-区别"><a href="#mybatis-和-区别" class="headerlink" title="mybatis # 和 $区别"></a>mybatis # 和 $区别</h2><p>在 MyBatis 中，<code>#</code> 和 <code>$</code> 是两种不同的参数占位符，用于在 SQL 语句中引用动态参数。</p><p><strong><code>#</code> 占位符</strong>：<code>#</code> 占位符表示一个预编译的参数占位符，它会将传入的参数转义并且使用 PreparedStatement 进行预编译。<code>#</code><br>占位符可以防止 SQL 注入攻击，并且对传入的参数进行安全处理。在使用 <code>#</code> 占位符时，MyBatis 会自动将参数转义、拼接到 SQL<br>语句中，并执行预编译的操作。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;long&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.User&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM users WHERE id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在上述示例中，<code>#&#123;id&#125;</code> 是一个 <code>#</code> 占位符，表示将传入的 <code>id</code> 参数拼接到 SQL 语句中，并通过预编译执行查询。</p><p><strong><code>$</code> 占位符</strong>：<code>$</code> 占位符表示一个文本替换的占位符，它会将传入的参数直接拼接到 SQL<br>语句中，不会进行任何转义或预编译操作。在使用 <code>$</code> 占位符时，需要注意 SQL 注入攻击的风险，并自行保证传入的参数的安全性。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByUsername&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;string&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.User&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM users WHERE username = &#x27;$&#123;username&#125;&#x27;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在上述示例中，<code>&#39;$&#123;username&#125;&#39;</code> 是一个 <code>$</code> 占位符，表示将传入的 <code>username</code> 参数直接拼接到 SQL 语句中。需要确保传入的参数没有潜在的安全风险。</p><p>需要注意的是，使用 <code>#</code> 占位符可以有效防止 SQL 注入攻击，并且更加安全。而使用 <code>$</code><br>占位符可以提供更大的灵活性，但需要自行保证参数的安全性。因此，在使用占位符时，应根据具体的需求和安全性要求来选择适合的占位符。</p><h1 id="MybatisPlus"><a href="#MybatisPlus" class="headerlink" title="MybatisPlus"></a>MybatisPlus</h1><h2 id="如何使用MyBatis-Plus进行多表关联查询？"><a href="#如何使用MyBatis-Plus进行多表关联查询？" class="headerlink" title="如何使用MyBatis-Plus进行多表关联查询？"></a>如何使用MyBatis-Plus进行多表关联查询？</h2><p>MyBatis-Plus 是 MyBatis 的增强工具，提供了更便捷的 CRUD 操作和查询功能。在 MyBatis-Plus 中进行多表关联查询可以使用以下几种方式：</p><ol><li><p><strong>使用注解方式</strong>：使用 MyBatis-Plus 提供的注解来实现多表关联查询。通过 <code>@TableName</code> 注解和 <code>@TableField</code><br>注解来指定实体类与数据库表的映射关系，然后使用 <code>@TableId</code> 注解来指定主键，最后通过 <code>@JoinTable</code> 注解来指定多表关联查询的条件。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(&quot;id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@TableField(&quot;username&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@TableName(&quot;order&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Order</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(&quot;id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@TableField(&quot;user_id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long userId;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;SELECT u.*, o.* FROM user u LEFT JOIN order o ON u.id = o.user_id WHERE u.id = #&#123;userId&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;id&quot;, property = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;username&quot;, property = &quot;username&quot;),</span></span><br><span class="line"><span class="meta">        // ...</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;order_id&quot;, property = &quot;order.id&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;order_name&quot;, property = &quot;order.name&quot;),</span></span><br><span class="line"><span class="meta">        // ...</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    User <span class="title function_">getUserWithOrder</span><span class="params">(<span class="meta">@Param(&quot;userId&quot;)</span> Long userId)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，通过 <code>@JoinTable</code> 注解指定了 <code>user</code> 表和 <code>order</code> 表的关联条件，然后使用 <code>@Results</code> 注解来指定查询结果的映射关系。</p></li><li><p><strong>使用 Wrapper 查询</strong>：使用 MyBatis-Plus 提供的 <code>Wrapper</code> 类来构建关联查询的条件，然后通过调用 MyBatis-Plus<br>提供的查询方法进行查询。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;SELECT u.*, o.* FROM user u LEFT JOIN order o ON u.id = o.user_id WHERE u.id = #&#123;userId&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;id&quot;, property = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;username&quot;, property = &quot;username&quot;),</span></span><br><span class="line"><span class="meta">        // ...</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;order_id&quot;, property = &quot;order.id&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;order_name&quot;, property = &quot;order.name&quot;),</span></span><br><span class="line"><span class="meta">        // ...</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    User <span class="title function_">getUserWithOrder</span><span class="params">(<span class="meta">@Param(&quot;userId&quot;)</span> Long userId, <span class="meta">@Param(&quot;ew&quot;)</span> Wrapper&lt;User&gt; wrapper)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用方法</span></span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.getUserWithOrder(userId, Wrappers.&lt;User&gt;lambdaQuery().eq(User::getId, userId));</span><br></pre></td></tr></table></figure><p>在上述示例中，通过构建 <code>Wrapper</code> 对象来指定查询条件，然后通过调用 <code>getUserWithOrder</code> 方法进行查询。</p></li></ol><p>以上是使用 MyBatis-Plus 进行多表关联查询的两种常见方式。根据具体的业务需求和场景，选择适合的方式来进行多表关联查询。</p><h2 id="MyBatis-Plus和MyBatis有什么区别？"><a href="#MyBatis-Plus和MyBatis有什么区别？" class="headerlink" title="MyBatis-Plus和MyBatis有什么区别？"></a>MyBatis-Plus和MyBatis有什么区别？</h2><p>MyBatis-Plus（简称 MP）是在 MyBatis 的基础上开发的一款增强工具，它提供了一系列的增强功能和便捷的操作方式，旨在简化开发过程并提高开发效率。以下是<br>MyBatis-Plus 和 MyBatis 的几个区别：</p><ol><li><p><strong>CRUD 操作</strong>：MyBatis-Plus 提供了更便捷的 CRUD 操作，通过继承 <code>BaseMapper</code> 接口，可以直接使用 MyBatis-Plus<br>提供的方法来完成数据的增删改查操作，不再需要手写 SQL。</p></li><li><p><strong>分页插件</strong>：MyBatis-Plus 内置了分页插件，可以方便地进行分页查询操作。通过调用分页插件提供的方法，可以实现分页查询，并且支持各种数据库的分页查询。</p></li><li><p><strong>代码生成器</strong>：MyBatis-Plus 提供了代码生成器，可以根据数据库表结构自动生成实体类、Mapper 接口和 XML<br>映射文件，大大减少了编写重复代码的工作量。</p></li><li><p><strong>多租户支持</strong>：MyBatis-Plus 提供了多租户的支持，可以方便地实现多租户系统的数据隔离。通过设置租户信息解析器和租户 SQL<br>解析器，可以在 SQL 执行前进行租户信息的解析和 SQL 的自动修改。</p></li><li><p><strong>性能优化</strong>：MyBatis-Plus 在底层进行了一系列的性能优化，例如批量插入、批量更新、乐观锁、懒加载等方面，提高了系统的性能和效率。</p></li><li><p><strong>注解支持</strong>：MyBatis-Plus 支持使用注解进行数据库操作。可以使用注解方式来完成实体类与数据库表的映射和关联查询等操作，简化了<br>XML 配置的工作。</p></li></ol><p>尽管 MyBatis-Plus 提供了许多增强功能，但它仍然是基于 MyBatis 的，依然保留了 MyBatis 的灵活性和强大的 SQL 编写能力。因此，对于熟悉<br>MyBatis 的开发者来说，使用 MyBatis-Plus 可以更加方便地进行开发，减少了重复劳动和提高了开发效率。</p><h1 id="Jenkins的主要功能是什么？"><a href="#Jenkins的主要功能是什么？" class="headerlink" title="Jenkins的主要功能是什么？"></a>Jenkins的主要功能是什么？</h1><p>Jenkins 是一个开源的持续集成（Continuous Integration）和持续交付（Continuous<br>Delivery）工具，它提供了一系列功能来帮助开发团队自动化构建、测试和部署软件。Jenkins 的主要功能包括：</p><ol><li><p><strong>自动化构建</strong>：Jenkins 可以根据预定义的构建脚本或配置文件，自动拉取代码、编译、打包和生成可执行文件或部署包。</p></li><li><p><strong>持续集成</strong>：Jenkins 支持持续集成，即在代码提交到版本控制库后，自动触发构建和测试过程，以快速发现和解决代码集成问题。</p></li><li><p><strong>测试和质量控制</strong>：Jenkins 提供了丰富的测试工具和插件，可以执行单元测试、集成测试、性能测试等各种类型的测试，并生成测试报告和测试覆盖率报告。</p></li><li><p><strong>自动化部署和发布</strong>：Jenkins 可以自动化处理软件的部署和发布过程，将构建好的软件包或容器镜像部署到目标环境中，实现快速和可靠的部署流程。</p></li><li><p><strong>版本控制和代码管理</strong>：Jenkins 可以与各种版本控制系统（如 Git、Subversion）集成，实现代码的自动拉取、检查和管理。</p></li><li><p><strong>任务调度和定时触发</strong>：Jenkins 支持任务调度和定时触发功能，可以按照预定的时间表和触发条件来执行构建、测试和部署任务。</p></li><li><p><strong>可扩展性和插件生态</strong>：Jenkins 提供了丰富的插件生态系统，可以根据需要安装和配置各种插件，扩展其功能和适应不同的应用场景。</p></li></ol><p>通过使用 Jenkins，开发团队可以实现持续集成和持续交付的目标，提高软件开发的效率和质量，并减少人工操作和人为错误的发生。Jenkins<br>是一个非常流行和广泛使用的持续集成工具，适用于各种规模和类型的软件开发项目。</p><h1 id="Jenkins如何构建一个作业"><a href="#Jenkins如何构建一个作业" class="headerlink" title="Jenkins如何构建一个作业"></a>Jenkins如何构建一个作业</h1><p>在 Jenkins 上创建一个新的作业（Job）可以按照以下步骤进行操作：</p><ol><li><p><strong>登录 Jenkins</strong>：使用浏览器打开 Jenkins 的 Web 界面，并使用有效的用户名和密码登录。</p></li><li><p><strong>进入 Jenkins 主页</strong>：登录后，进入 Jenkins 的主页，可以看到已存在的作业列表。</p></li><li><p><strong>点击创建新作业</strong>：在 Jenkins 主页的左侧导航栏中，点击 “New Item”（或类似的按钮），进入创建作业的页面。</p></li><li><p><strong>输入作业名称</strong>：在创建作业的页面，输入作业的名称，例如 “MyJob”。</p></li><li><p><strong>选择作业类型</strong>：根据需要选择适合的作业类型。Jenkins 提供了多种作业类型，例如构建一个自由风格的软件项目、构建一个 Maven<br>项目、构建一个多配置项目等。</p></li><li><p><strong>配置作业</strong>：根据所选的作业类型，配置作业的详细信息。例如，对于自由风格的软件项目，可以配置源代码管理、构建步骤、构建触发器、构建后操作等。</p></li><li><p><strong>保存作业</strong>：完成作业的配置后，点击 “Save”（或类似的按钮），保存作业配置。</p></li><li><p><strong>运行作业</strong>：在作业的页面中，点击 “Build Now”（或类似的按钮），运行作业。</p></li></ol><p>以上是在 Jenkins 上创建一个新的作业的基本步骤。根据具体的需求和场景，可以进一步配置作业的参数、触发条件、后续操作等。Jenkins<br>提供了丰富的配置选项和插件，可以根据需要进行灵活的配置和扩展。</p><h1 id="简单介绍下SkyWalking"><a href="#简单介绍下SkyWalking" class="headerlink" title="简单介绍下SkyWalking"></a>简单介绍下SkyWalking</h1><p>Apache SkyWalking（简称 SkyWalking）是一个开源的分布式系统跟踪和性能监控工具。它提供了一套完整的解决方案，可以帮助开发团队实时监控、分析和优化分布式系统的性能和健康状况。</p><p>SkyWalking 的主要特点包括：</p><ol><li><p><strong>分布式追踪</strong>：SkyWalking 可以追踪分布式系统中各个组件之间的调用链，帮助开发人员快速定位和解决问题。它支持多种主流的编程语言和框架，包括<br>Java、.NET、Go、Node.js、Python 等。</p></li><li><p><strong>性能指标监控</strong>：SkyWalking 可以监控分布式系统的关键性能指标，如请求响应时间、吞吐量、错误率等。通过可视化的仪表板和报告，开发人员可以实时了解系统的性能状况，并进行性能优化。</p></li><li><p><strong>自动化拓扑图</strong>：SkyWalking 可以自动生成分布式系统的拓扑图，展示系统中各个组件之间的依赖关系。开发人员可以通过拓扑图来了解系统的架构和调用关系，帮助进行故障定位和性能优化。</p></li><li><p><strong>告警和警报</strong>：SkyWalking 可以根据设定的阈值和规则，实时监控系统的性能和健康状况，并生成告警和警报。开发人员可以及时发现和解决系统的问题，避免潜在的故障和性能退化。</p></li><li><p><strong>插件扩展</strong>：SkyWalking 提供了丰富的插件机制，可以方便地扩展和定制功能。开发人员可以根据需要开发自定义的插件，与其他监控工具和数据源进行集成。</p></li></ol><p>SkyWalking 是一个功能强大、易于使用和可扩展的分布式系统跟踪和性能监控工具。它可以帮助开发人员实时了解分布式系统的性能和健康状况，快速定位和解决问题，提高系统的可靠性和性能。</p><h1 id="怎么配置的SkyWalking"><a href="#怎么配置的SkyWalking" class="headerlink" title="怎么配置的SkyWalking"></a>怎么配置的SkyWalking</h1><p>配置 SkyWalking 可以按照以下步骤进行操作：</p><ol><li><p><strong>下载 SkyWalking</strong>：首先，从 SkyWalking 官方网站（<a href="https://skywalking.apache.org/downloads/%EF%BC%89%E4%B8%8B%E8%BD%BD%E9%80%82%E7%94%A8%E4%BA%8E%E4%BD%A0%E7%9A%84%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%E7%9A%84">https://skywalking.apache.org/downloads/）下载适用于你的系统的最新版本的</a><br>SkyWalking 发行包。</p></li><li><p><strong>解压发行包</strong>：将下载的发行包解压到你的目标位置。</p></li><li><p><strong>配置 Agent</strong>：进入 SkyWalking 发行包中的 <code>agent</code> 目录，根据你的应用程序类型选择相应的 Agent。根据 Agent<br>的文档，编辑 <code>config/agent.config</code> 文件，配置 Agent 的相关参数，如应用名称、日志路径、数据上报地址等。</p></li><li><p><strong>启动 Agent</strong>：根据你的应用程序类型和启动命令，将 SkyWalking Agent 加入到启动命令中，以启动应用程序和 Agent。</p><ul><li><p>对于 Java 应用程序，可以通过设置 <code>-javaagent</code> 参数来启动 Agent。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -javaagent:/path/to/skywalking-agent.jar -jar your-application.jar</span><br></pre></td></tr></table></figure></li><li><p>对于其他语言的应用程序，可以根据 Agent 的文档，配置相应的启动参数。</p></li></ul></li><li><p><strong>配置和启动 Collector</strong>：进入 SkyWalking 发行包中的 <code>collector</code> 目录，根据你的需求编辑 <code>config/application.yml</code> 文件，配置<br>Collector 的相关参数，如端口、存储方式、数据库等。然后执行启动命令来启动 Collector。</p></li><li><p><strong>访问 SkyWalking Web UI</strong>：打开浏览器，访问 SkyWalking Web UI 的地址，默认为 <code>http://localhost:8080</code>。根据需要进行登录和配置。</p></li><li><p><strong>查看监控数据</strong>：在 SkyWalking Web UI 中，你可以查看应用程序的性能指标、拓扑图、调用链等监控数据。你还可以根据需要配置告警规则和仪表板等。</p></li></ol><p>需要注意的是，SkyWalking 的详细配置和使用方法可能因版本和具体需求而有所不同。因此，在配置 SkyWalking<br>时，最好参考官方文档和示例，并根据具体情况进行配置。官方文档和社区资源提供了更多关于 SkyWalking 的详细配置和使用信息。</p><h1 id="你说你熟悉ChatGpt，你说你熟悉chatgpt，我现在让你写一个提示词，实现让gpt在你的tags标签后面总结文章的所有标签"><a href="#你说你熟悉ChatGpt，你说你熟悉chatgpt，我现在让你写一个提示词，实现让gpt在你的tags标签后面总结文章的所有标签" class="headerlink" title="你说你熟悉ChatGpt，你说你熟悉chatgpt，我现在让你写一个提示词，实现让gpt在你的tags标签后面总结文章的所有标签"></a>你说你熟悉ChatGpt，你说你熟悉chatgpt，我现在让你写一个提示词，实现让gpt在你的tags标签后面总结文章的所有标签</h1><h1 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h1><h2 id="mysql有哪些隔离级别"><a href="#mysql有哪些隔离级别" class="headerlink" title="mysql有哪些隔离级别"></a>mysql有哪些隔离级别</h2><p>MySQL 提供了四种隔离级别，用于控制并发事务之间的相互影响程度。这些隔离级别分别是：</p><ol><li><p><strong>读未提交（Read Uncommitted）</strong>：最低的隔离级别，允许一个事务读取其他事务未提交的数据。该级别下存在脏读（Dirty<br>Read）的问题，可能导致读取到不正确的数据。</p></li><li><p><strong>读已提交（Read Committed）</strong>：每个事务只能读取其他已提交事务的数据。在该级别下，可以避免脏读，但可能出现不可重复读（Non-Repeatable<br>Read）和幻读（Phantom Read）的问题。</p></li><li><p><strong>可重复读（Repeatable Read）</strong>：保证在同一个事务中多次读取同一行数据的结果是一致的。在该级别下，可以避免脏读和不可重复读，但可能出现幻读的问题。</p></li><li><p><strong>串行化（Serializable）</strong>：最高的隔离级别，通过强制事务串行执行来避免并发问题。在该级别下，可以避免脏读、不可重复读和幻读的问题，但会牺牲并发性能。</p></li></ol><p>隔离级别的选择需要根据实际业务需求和数据一致性要求来确定。较低的隔离级别可以提高并发性能，但可能导致一些数据不一致性的问题；较高的隔离级别可以保证数据的一致性，但可能降低并发性能。</p><p>可以使用以下语句来设置隔离级别：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET TRANSACTION ISOLATION LEVEL &lt;隔离级别&gt;;</span><br></pre></td></tr></table></figure><p>需要注意的是，更高的隔离级别通常会带来更多的锁定和资源消耗。因此，在选择隔离级别时，需要综合考虑并发性能和数据一致性之间的平衡，并根据具体需求进行调整。</p><h2 id="说说mysql索引实现"><a href="#说说mysql索引实现" class="headerlink" title="说说mysql索引实现"></a>说说mysql索引实现</h2><p>MySQL 使用 B+ 树作为索引的实现方式。B+ 树是一种平衡多路查找树，它的特点有助于高效地进行索引查找和范围查询操作。</p><p>在 MySQL 中，可以为表的列创建索引，以加快数据的检索速度。MySQL 支持多种类型的索引，包括主键索引、唯一索引、普通索引和全文索引等。</p><p>索引的创建和管理是由 MySQL 引擎负责的，常见的 MySQL 存储引擎包括 InnoDB、MyISAM、Memory 等。不同的存储引擎在索引的实现和性能上可能有所差异。</p><p>在创建索引时，MySQL 会根据列的值构建 B+ 树索引结构。B+ 树索引的叶子节点存储了真实数据的引用（如行的物理地址），而非实际的数据本身。这样可以减少索引的大小，并提高查询的效率。</p><p>通过使用索引，MySQL 可以快速定位到符合查询条件的数据所在的位置，从而快速返回查询结果。当查询涉及到索引列时，MySQL 可以利用<br>B+ 树索引结构快速地进行查找、排序和范围查询等操作。</p><p>需要注意的是，索引的设计和使用需要根据具体的业务需求和查询场景来进行优化。过多或不合理的索引可能会导致索引失效、增加存储空间和降低写操作的性能。因此，在使用索引时，需要根据实际情况进行评估和调整，以获得最佳的查询性能。</p><h2 id="mysql有哪些索引，说说他们的区别"><a href="#mysql有哪些索引，说说他们的区别" class="headerlink" title="mysql有哪些索引，说说他们的区别"></a>mysql有哪些索引，说说他们的区别</h2><p>抱歉给你带来困惑。以下是更全面的MySQL索引类型：</p><ol><li><p><strong>B-Tree 索引</strong>：B-Tree 索引是最常见的索引类型，适用于对于等值查找、范围查找和排序操作。它是通过B-Tree数据结构存储索引的，可以高效地进行数据的查找和插入操作。</p></li><li><p><strong>哈希索引</strong>：哈希索引使用哈希表存储索引信息，适合于等值匹配的查询。它通过哈希函数来计算索引值，因此在等值查找时速度非常快，但不支持范围查询和排序。</p></li><li><p><strong>全文索引</strong>：全文索引用于对文本数据进行全文搜索，适合于模糊查询。它使用倒排索引（Inverted<br>Index）的方式来存储词汇与文档的映射关系，可用于关键字匹配、排序和分页查询。</p></li><li><p><strong>空间索引</strong>：空间索引用于对空间数据进行查询，例如地理位置数据。空间索引使用R-Tree数据结构来存储索引信息，可以进行空间范围查询和最近邻查询。</p></li><li><p><strong>全文空间索引</strong>：全文空间索引是MySQL 5.7版本引入的一种索引类型，结合了全文索引和空间索引的功能。它适用于同时对文本和空间数据进行查询，如地理位置的描述和搜索。</p></li><li><p><strong>前缀索引</strong>：前缀索引是一种对索引列的前缀进行索引的方式，可以减小索引的存储空间和提高索引的效率。前缀索引适用于长文本或大字段的情况。</p></li><li><p><strong>多列索引</strong>：多列索引是将多个列组合为一个索引，可以提高复合查询的性能。在执行查询时，MySQL可以使用多列索引来匹配查询条件中的多个列，减少磁盘IO和索引之间的切换。</p></li><li><p><strong>覆盖索引</strong><br>：覆盖索引是一种特殊的索引类型，它包含了查询中所需的所有列，可以直接从索引中获取查询结果，而无需再去访问数据行。覆盖索引可以大大提高查询性能，减少了磁盘IO和数据缓存的使用。通过使用覆盖索引，可以避免查询需要的列不在索引中而导致的额外的IO操作。</p></li></ol><p>覆盖索引适用于以下场景：</p><ul><li>当查询只需要从索引中获取数据，而不需要访问表中的其他列时；</li><li>当索引列的数据类型较小，可以减少磁盘IO和内存占用时；</li><li>当表中的其他列较大，不适合放入索引中时。</li></ul><p>要创建覆盖索引，可以在创建索引时包含查询所需的所有列。例如，如果查询需要列A和列B，可以创建一个包含列A、列B和其他查询条件所需列的复合索引，这样查询就可以直接从索引中获取结果。</p><p>需要注意的是，覆盖索引并非在所有情况下都适用。在选择创建覆盖索引时，需要综合考虑查询的频率、索引和表的大小、存储和性能需求等因素。过多的覆盖索引可能会增加索引的维护成本和存储空间，影响写操作的性能。因此，根据具体情况进行评估和决策。</p><p>总结起来，MySQL提供了多种类型的索引，每种索引类型都有其适用的场景和优势。在设计和使用索引时，需要考虑到查询类型、数据特点和性能需求，选择合适的索引类型来提高数据库的查询效率和性能。</p><h2 id="mysql连表查询有哪几种方式，区别"><a href="#mysql连表查询有哪几种方式，区别" class="headerlink" title="mysql连表查询有哪几种方式，区别"></a>mysql连表查询有哪几种方式，区别</h2><p>在 MySQL 中，进行连表查询的常见方式有以下几种：</p><ol><li><p><strong>内连接（INNER JOIN）</strong>：内连接是最常见的连表查询方式，默认使用 INNER JOIN<br>关键字进行连接。内连接返回两个表中匹配的行，即只返回两个表中根据连接条件匹配的行。内连接只保留连接条件满足的行，其他不满足条件的行将被过滤掉。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM table1 INNER JOIN table2 ON table1.column = table2.column;</span><br></pre></td></tr></table></figure></li><li><p><strong>左连接（LEFT JOIN）</strong>：左连接返回左表中的所有行，以及与左表匹配的右表中的行。如果右表中没有匹配的行，则右表的结果为<br>NULL。左连接使用 LEFT JOIN 关键字进行连接。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM table1 LEFT JOIN table2 ON table1.column = table2.column;</span><br></pre></td></tr></table></figure></li><li><p><strong>右连接（RIGHT JOIN）</strong>：右连接返回右表中的所有行，以及与右表匹配的左表中的行。如果左表中没有匹配的行，则左表的结果为<br>NULL。右连接使用 RIGHT JOIN 关键字进行连接。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM table1 RIGHT JOIN table2 ON table1.column = table2.column;</span><br></pre></td></tr></table></figure></li><li><p><strong>全连接（FULL JOIN）</strong>：全连接返回左表和右表中的所有行，如果某个表中没有匹配的行，则对应的结果为 NULL。全连接使用 FULL<br>JOIN 或者 UNION JOIN 关键字进行连接。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM table1 FULL JOIN table2 ON table1.column = table2.column;</span><br></pre></td></tr></table></figure></li></ol><p>这些连表查询方式的区别在于返回的结果集不同：</p><ul><li>内连接只返回两个表中匹配的行，不满足连接条件的行将被过滤掉。</li><li>左连接返回左表中的所有行，并且与左表匹配的右表中的行，如果右表中没有匹配的行，则右表的结果为 NULL。</li><li>右连接返回右表中的所有行，并且与右表匹配的左表中的行，如果左表中没有匹配的行，则左表的结果为 NULL。</li><li>全连接返回左表和右表中的所有行，如果某个表中没有匹配的行，则对应的结果为 NULL。</li></ul><p>在选择使用哪种连表查询方式时，需要根据具体的业务需求和数据关系来确定。不同的连表查询方式可以满足不同的查询需求，并且可以根据需要进行组合和嵌套使用。</p><h2 id="mysql优化你了解多少"><a href="#mysql优化你了解多少" class="headerlink" title="mysql优化你了解多少"></a>mysql优化你了解多少</h2><h2 id="mysql事务隔离是怎么实现的"><a href="#mysql事务隔离是怎么实现的" class="headerlink" title="mysql事务隔离是怎么实现的"></a>mysql事务隔离是怎么实现的</h2><p>非常抱歉之前的回答不够详细。以下是关于 MySQL MVCC 机制的更详细解释：</p><p>MySQL 的 MVCC 机制是通过在每条记录上创建一个版本链来实现的。当一个事务开始时，MySQL 会为该事务创建一个唯一的事务 ID，并将该事务<br>ID 分配给事务中的每个查询。在执行查询时，MySQL 使用查询开始时的事务 ID 来确定可见的版本。</p><p>MVCC 机制的核心组件包括：</p><ol><li><p><strong>Read View（读视图）</strong>：每个事务在开始时会创建一个读视图，读视图记录了事务开始时数据库中每个数据行的版本号。读视图是一个时间戳，用于标记事务开始时的快照。读视图决定了事务可以看到哪些数据版本。</p></li><li><p><strong>Transaction ID（事务 ID）</strong>：每个事务都有一个唯一的事务 ID，用于标识事务的顺序。</p></li><li><p><strong>Undo Log（回滚日志）</strong>：在事务进行修改操作时，MySQL 会生成一个回滚日志（undo<br>log），用于记录被修改数据的原始版本。如果事务需要回滚，可以利用回滚日志将数据恢复到事务开始之前的状态。</p></li></ol><p>MVCC 机制的工作流程如下：</p><ol><li><p>当一个事务开始时，MySQL 会为该事务创建一个唯一的事务 ID，并将其分配给该事务中的每个查询。</p></li><li><p>在执行查询时，MySQL 使用查询开始时的事务 ID 来确定可见的数据版本。只有那些在查询开始时间之前已经提交的数据版本才是可见的。</p></li><li><p>如果某个事务正在修改数据，MySQL 会为被修改的数据创建一个新的版本，并将新版本的事务 ID 设置为当前事务的<br>ID。其他事务仍然可以读取旧版本的数据。</p></li><li><p>当一个事务提交时，MySQL 将该事务的 ID 设置为已提交状态，并将该事务所修改的数据版本设置为可见。</p></li></ol><p>MVCC 机制带来了以下优势：</p><ul><li><p><strong>高并发性</strong>：MVCC 允许多个事务并发地读取和修改数据，提高了数据库的并发性能。</p></li><li><p><strong>读写分离</strong>：MVCC 的读操作不会被写操作所阻塞，读操作可以并发地进行。</p></li><li><p><strong>事务隔离性</strong>：MVCC 为每个事务创建独立的读视图，确保事务之间的隔离性，避免了脏读、不可重复读和幻读等问题。</p></li></ul><p>需要注意的是，MVCC 机制会增加存储空间的需求，因为每个数据行都可能有多个版本。因此，在设计数据库的时候，需要根据实际需求权衡空间和性能的平衡。</p><p>此外，MVCC 机制在不同的存储引擎中的实现方式有所差异。例如，InnoDB 存储引擎使用 MVCC 来实现事务隔离性，而 MyISAM 存储引擎则不支持<br>MVCC。因此，在选择存储引擎时，需要考虑其对 MVCC 的支持程度。</p><h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h1><h2 id="Redis有哪些数据类型以及他们的使用场景"><a href="#Redis有哪些数据类型以及他们的使用场景" class="headerlink" title="Redis有哪些数据类型以及他们的使用场景"></a>Redis有哪些数据类型以及他们的使用场景</h2><h2 id="Redis持久化机制有哪些"><a href="#Redis持久化机制有哪些" class="headerlink" title="Redis持久化机制有哪些"></a>Redis持久化机制有哪些</h2><h2 id="如何使用Redis实现分布式锁？"><a href="#如何使用Redis实现分布式锁？" class="headerlink" title="如何使用Redis实现分布式锁？"></a>如何使用Redis实现分布式锁？</h2><h2 id="Redis的内存淘汰策略有哪些？"><a href="#Redis的内存淘汰策略有哪些？" class="headerlink" title="Redis的内存淘汰策略有哪些？"></a>Redis的内存淘汰策略有哪些？</h2><h2 id="Redis缓存雪崩如何处理"><a href="#Redis缓存雪崩如何处理" class="headerlink" title="Redis缓存雪崩如何处理"></a>Redis缓存雪崩如何处理</h2><p>Redis 缓存雪崩指的是在缓存中大量的缓存数据同时过期或者在同一时间失效，导致大量的请求直接落到后端数据库，从而引起数据库负载激增，甚至导致数据库崩溃的现象。</p><p>缓存雪崩通常发生在以下情况下：</p><ol><li><p><strong>缓存数据同时过期</strong>：如果大量的缓存数据在同一时间过期，那么所有的请求都会直接访问后端数据库，造成数据库压力过大。</p></li><li><p><strong>缓存服务器宕机</strong>：如果缓存服务器宕机或者发生故障，导致所有的请求无法从缓存中获取数据，直接访问后端数据库，引起数据库负载激增。</p></li></ol><p>为了避免Redis缓存雪崩，可以采取以下策略：</p><ol><li><p><strong>合理设置缓存过期时间</strong>：将缓存数据的过期时间设置为随机值，避免大量的缓存数据同时过期。</p></li><li><p><strong>使用热点数据永不过期策略</strong>：对于一些热点数据，可以将其过期时间设置为永不过期，避免缓存雪崩对这些重要数据的影响。</p></li><li><p><strong>实施缓存预热</strong>：在系统启动时，提前加载热门数据到缓存中，避免大量请求同时落到后端数据库。</p></li><li><p><strong>限流和熔断</strong>：对于大量的请求，可以通过限流和熔断的方式来控制请求的并发量，避免数据库负载过高。</p></li><li><p><strong>高可用架构设计</strong>：使用Redis的主从复制和哨兵模式或者集群模式，保证Redis的高可用性，避免单点故障。</p></li><li><p><strong>多级缓存策略</strong>：使用多级缓存，如本地缓存和分布式缓存的组合，保证数据的高可用和高并发。</p></li><li><p><strong>数据库优化</strong>：对于瞬时的请求高峰，可以通过数据库优化来提高数据库的性能，如优化SQL查询语句、增加索引等。</p></li></ol><p>综上所述，通过合理的缓存策略、高可用架构设计和数据库优化等手段，可以有效避免Redis缓存雪崩问题的发生。</p><h2 id="Redis如何处理热点数据访问的问题？"><a href="#Redis如何处理热点数据访问的问题？" class="headerlink" title="Redis如何处理热点数据访问的问题？"></a>Redis如何处理热点数据访问的问题？</h2><p>Redis可以通过以下几种方式来处理热点数据访问的问题：</p><ol><li><p><strong>增加缓存命中率</strong>：通过合理的缓存设计和使用，可以提高缓存命中率，从而减少对后端数据库的访问。可以根据业务需求选择合适的缓存策略，如读写分离、分片缓存等。</p></li><li><p><strong>使用热点数据永不过期策略</strong>：对于一些热点数据，可以将其过期时间设置为永不过期，使其一直保存在缓存中，避免缓存失效导致的访问压力。</p></li><li><p><strong>使用分布式锁</strong>：对于热点数据的写操作，可以使用分布式锁来保证数据的一致性和并发安全。通过加锁的方式，只允许一个线程对数据进行写操作，避免并发写入导致的数据不一致。</p></li><li><p><strong>使用缓存预热</strong>：在系统启动时，可以提前加载热门数据到缓存中，避免大量请求落到后端数据库。通过缓存预热，可以在系统运行期间减少对数据库的访问，提高系统性能和响应速度。</p></li><li><p><strong>使用缓存穿透处理机制</strong>：缓存穿透是指访问不存在于缓存和数据库中的数据，为了避免频繁访问数据库，可以使用布隆过滤器或者空值缓存等机制来处理缓存穿透问题。</p></li><li><p><strong>使用分布式缓存</strong>：如果单个Redis节点无法满足热点数据的访问需求，可以使用分布式缓存架构，如Redis<br>Cluster或者使用Redis作为缓存的中间件，配合其他缓存系统（如Memcached）一起使用。</p></li><li><p><strong>使用内存淘汰策略</strong>：通过合理选择内存淘汰策略，可以保证热点数据在缓存中得到优先保留，避免因为内存不足而导致热点数据被淘汰出缓存。</p></li></ol><p>通过以上策略的综合应用，可以有效处理热点数据访问的问题，提高系统的性能和可扩展性。但在应用中需要根据具体业务场景和需求选择合适的策略，并进行适当的测试和优化。</p><h2 id="Redis如何实现分布式锁"><a href="#Redis如何实现分布式锁" class="headerlink" title="Redis如何实现分布式锁"></a>Redis如何实现分布式锁</h2><p>Redis可以通过以下两种方式来实现分布式锁：</p><ol><li><p><strong>基于SETNX命令的实现</strong>：SETNX（SET if Not eXists）命令可以设置一个键的值，仅当该键不存在时。利用SETNX命令的特性，可以将一个键作为锁，当某个客户端成功执行SETNX命令，即获取到了锁。</p><ul><li>客户端在获取锁之前，先使用SETNX命令尝试设置锁键，如果返回1，表示成功获取到锁。</li><li>客户端在释放锁之前，使用DEL命令删除锁键，释放锁。</li></ul><p>需要注意的是，为了避免死锁的问题，获取锁和释放锁的操作需要在同一个客户端中进行。</p></li><li><p><strong>基于RedLock算法的实现</strong>：RedLock算法是一个基于多个独立Redis实例的分布式锁算法。它通过在不同的Redis实例上创建多个锁，来提高分布式锁的安全性和可靠性。</p><ul><li>客户端在获取锁之前，尝试在多个Redis实例上创建锁，即使用SETNX命令。</li><li>客户端在释放锁之前，使用DEL命令从所有的Redis实例上删除锁。</li></ul><p>RedLock算法要求至少在N&#x2F;2+1个Redis实例上成功获取到锁，才认为获取锁成功。这样可以保证在部分Redis实例出现故障或网络延迟的情况下，仍然可以保证分布式锁的可用性。</p></li></ol><p>需要注意的是，分布式锁的实现需要考虑以下几个问题：</p><ul><li><strong>锁的过期时间</strong>：为了避免死锁的问题，需要为锁设置一个适当的过期时间。在获取锁时，可以使用带有EX参数的SETNX命令设置锁的过期时间。</li><li><strong>锁的可重入性</strong>：如果需要支持同一个客户端对同一个锁的多次获取，可以在锁的value中保存一个客户端标识，以判断锁的归属。</li><li><strong>锁的可靠性</strong>：在处理锁的释放过程中，需要确保锁的释放操作的原子性，避免因为网络或其他故障导致锁无法正常释放。</li></ul><p>分布式锁是在分布式系统中保证数据一致性和并发控制的重要机制之一，但需要在实际应用中根据具体需求和场景进行合理设计和使用。</p><h2 id="Redis如何实现消息队列"><a href="#Redis如何实现消息队列" class="headerlink" title="Redis如何实现消息队列"></a>Redis如何实现消息队列</h2><p>Redis可以通过以下两种方式来实现简单的消息队列：</p><ol><li><p><strong>使用List数据结构</strong>：Redis的List数据结构非常适合作为消息队列的基础。可以通过<code>LPUSH</code>命令将消息推入队列的左侧，通过<code>RPOP</code><br>命令从队列的右侧弹出消息。生产者向队列中推送消息，消费者从队列中弹出消息进行处理。</p><ul><li>生产者：使用<code>LPUSH</code>命令将消息推送到队列中。</li><li>消费者：使用<code>RPOP</code>命令从队列中获取消息进行处理。</li></ul><p>这种方式简单直接，但是消息的持久化和消息确认机制需要自行实现。</p></li><li><p><strong>使用Redis Streams</strong>：Redis 5.0版本引入了Streams数据结构，可以更方便地实现消息队列。Streams是一个日志型数据结构，可以按照时间顺序存储和读取消息。</p><ul><li>生产者：使用<code>XADD</code>命令将消息添加到Stream中。</li><li>消费者：使用<code>XREAD</code>命令从Stream中读取消息。</li></ul><p>Redis Streams提供了更多的功能，如持久化、消息确认、消费者组、消息分组等，可以更好地支持消息队列的需求。</p></li></ol><p>除了上述的基本实现方式，还可以结合其他技术和工具来实现更复杂的消息队列，如使用Redis<br>Pub&#x2F;Sub实现发布-订阅模式，或者使用Redis和消息中间件（如RabbitMQ、Kafka）进行结合。</p><p>需要注意的是，Redis作为消息队列的实现方式适用于简单的场景，对于高吞吐量和严格的消息可靠性要求，可能需要考虑更专业的消息中间件来实现。另外，对于消息队列的使用，还需要考虑消息的持久化、消费者的负载均衡、消息的重试和死信队列等问题。</p><h2 id="如果maven仓库没有找到jar包，或者说三方jar包怎么引入项目"><a href="#如果maven仓库没有找到jar包，或者说三方jar包怎么引入项目" class="headerlink" title="如果maven仓库没有找到jar包，或者说三方jar包怎么引入项目"></a>如果maven仓库没有找到jar包，或者说三方jar包怎么引入项目</h2><h2 id="如何进入docker容器"><a href="#如何进入docker容器" class="headerlink" title="如何进入docker容器"></a>如何进入docker容器</h2><h2 id="如何查看docker日志"><a href="#如何查看docker日志" class="headerlink" title="如何查看docker日志"></a>如何查看docker日志</h2><h2 id="docker启动如何指定端口映射，如何指定磁盘映射"><a href="#docker启动如何指定端口映射，如何指定磁盘映射" class="headerlink" title="docker启动如何指定端口映射，如何指定磁盘映射"></a>docker启动如何指定端口映射，如何指定磁盘映射</h2><h2 id="linux如何查找指定端口是否开启"><a href="#linux如何查找指定端口是否开启" class="headerlink" title="linux如何查找指定端口是否开启"></a>linux如何查找指定端口是否开启</h2><h2 id="linux如何查找进程"><a href="#linux如何查找进程" class="headerlink" title="linux如何查找进程"></a>linux如何查找进程</h2><h2 id="linux如何让进程后台执行"><a href="#linux如何让进程后台执行" class="headerlink" title="linux如何让进程后台执行"></a>linux如何让进程后台执行</h2><h1 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h1><h2 id="说说HashMap的扩容机制"><a href="#说说HashMap的扩容机制" class="headerlink" title="说说HashMap的扩容机制"></a>说说HashMap的扩容机制</h2><p>HashMap 是 Java 中常用的散列表数据结构，其扩容机制是为了保持较低的负载因子，提高散列表的性能和效率。</p><p>HashMap 的扩容机制主要包括以下几个步骤：</p><ol><li><p><strong>初始容量和加载因子</strong>：创建 HashMap 时，需要指定初始容量和加载因子。初始容量是指散列表的初始大小，加载因子是指当散列表中元素数量达到容量乘以加载因子时，触发扩容操作。</p></li><li><p><strong>元素插入</strong>：当向 HashMap 中插入键值对时，首先会根据键的哈希值计算出散列桶的索引位置。</p></li><li><p><strong>判断扩容</strong>：在插入元素之后，会检查当前的元素数量是否达到加载因子的阈值。如果达到阈值，则会触发扩容操作。</p></li><li><p><strong>扩容过程</strong>：扩容会创建新的散列表，其容量是当前容量的两倍。然后，遍历原散列表中的每个元素，将其重新计算哈希值并插入到新散列表中。</p><ul><li>重新计算哈希值：由于容量扩大了两倍，原来的元素需要重新计算哈希值，以便放置到新的散列桶中。</li><li>插入新散列表：根据新的哈希值，将元素插入到新的散列表中。</li></ul></li><li><p><strong>替换散列表</strong>：扩容完成后，新的散列表会替换原来的散列表，成为 HashMap 的底层数据结构。</p></li></ol><p>扩容操作会在一定程度上增加时间和空间的开销，但它可以保持较低的负载因子，避免散列表容量过大或过小带来的性能问题。通过动态扩容，HashMap<br>可以有效地处理数据量的增加和散列冲突的问题，提供更好的性能和效率。</p><p>需要注意的是，HashMap 的扩容是一个相对耗时的操作，因此在设计应用程序时，需要合理选择初始容量和加载因子，以及避免频繁的插入和删除操作，以减少扩容的频率和开销。</p><h2 id="Java容器区别"><a href="#Java容器区别" class="headerlink" title="Java容器区别"></a>Java容器区别</h2><p>在 Java 中，有多种容器用于存储和组织数据。下面列举了几种常见的 Java 容器及其主要区别：</p><ol><li><p><strong>ArrayList vs LinkedList</strong>：</p><ul><li>ArrayList 是基于数组实现的动态数组，支持随机访问，适用于频繁读取数据的场景。</li><li>LinkedList 是基于链表实现的双向链表，支持高效的插入和删除操作，适用于频繁插入和删除数据的场景。</li></ul></li><li><p><strong>HashSet vs TreeSet</strong>：</p><ul><li>HashSet 是基于哈希表实现的，不保证元素的顺序，允许存储空值，查找效率较高。</li><li>TreeSet 是基于红黑树实现的有序集合，元素按照自然排序或自定义排序进行排序，不允许存储空值，查找效率较高。</li></ul></li><li><p><strong>HashMap vs TreeMap</strong>：</p><ul><li>HashMap 是基于哈希表实现的键值对集合，不保证元素的顺序，允许存储空键和空值，查找效率较高。</li><li>TreeMap 是基于红黑树实现的有序键值对集合，元素按照键的自然排序或自定义排序进行排序，不允许存储空键，查找效率较高。</li></ul></li><li><p><strong>Hashtable vs ConcurrentHashMap</strong>：</p><ul><li>Hashtable 是线程安全的哈希表，效率较低，已被 ConcurrentHashMap 替代。</li><li>ConcurrentHashMap 是线程安全的哈希表，通过分段锁（Segment）实现高效的并发访问，适用于高并发环境。</li></ul></li><li><p><strong>Stack vs LinkedList</strong>：</p><ul><li>Stack 是基于数组实现的栈，后进先出（LIFO）的数据结构。</li><li>LinkedList 也可以用作栈，同时也可以用作队列等其他数据结构。</li></ul></li></ol><p>需要根据具体的使用场景和需求选择适合的容器。同时，Java 还提供了其他的容器类，如Vector、PriorityQueue等，每种容器都有其特定的优点和适用场景。</p><h2 id="线程池启动参数"><a href="#线程池启动参数" class="headerlink" title="线程池启动参数"></a>线程池启动参数</h2><p>在 Java 中，可以使用 <code>ThreadPoolExecutor</code> 类来创建和管理线程池。当创建线程池时，可以通过设置不同的参数来配置线程池的行为和性能。</p><p>以下是常用的线程池启动参数：</p><ol><li><p><strong>corePoolSize</strong>：核心线程数，表示线程池中保持活动状态的线程数量。即使线程处于空闲状态，核心线程也不会被回收。</p></li><li><p><strong>maximumPoolSize</strong>：最大线程数，表示线程池中允许存在的最大线程数量。当任务数量超过核心线程数并且工作队列已满时，线程池可以创建新的线程，直到达到最大线程数。</p></li><li><p><strong>keepAliveTime</strong>：线程的空闲时间，表示当线程处于空闲状态且超过核心线程数时，多长时间会被回收。空闲线程超过该时间，会被终止并从线程池中移除。</p></li><li><p><strong>unit</strong>：空闲时间的单位，可以是毫秒、秒、分钟等。</p></li><li><p><strong>workQueue</strong>：工作队列，用于存储待执行的任务。线程池根据核心线程数和工作队列的状态来决定是否创建新线程。</p></li><li><p><strong>threadFactory</strong>：线程工厂，用于创建新的线程对象。</p></li><li><p><strong>handler</strong>：拒绝策略，当线程池无法处理新的任务时，用于决定如何处理新任务的策略。</p></li></ol><p>这些参数可以通过构造方法或者相应的设置方法来进行配置。例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ThreadPoolExecutor executor=<span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(corePoolSize,maximumPoolSize,keepAliveTime,unit,workQueue,threadFactory,handler);</span><br></pre></td></tr></table></figure><p>需要根据具体的应用场景和需求来合理配置线程池的启动参数，以提供适当的并发性能和资源管理。使用合理的线程池配置可以避免线程创建和销毁的开销，提高应用程序的性能和效率。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>关闭浏览器的跨域校验</title>
      <link href="/cf8f03ee.html"/>
      <url>/cf8f03ee.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><hr><h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>当你访问资源失败，并遇到以下类似提示时：</p><p><code>Access to script at &#39;资源路径&#39; from origin &#39;null&#39; has been blocked by CORS policy: Cross origin requests are only supported for protocol schemes: http, data, isolated-app, chrome-extension, chrome-untrusted, https, edge</code></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/105148446178000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/105148446178000.png"></a></p><h1 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h1><ol><li><p>复制一份你的 Edge 快捷方式，并重命名以与原 Edge 区分</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/105203155349000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/105203155349000.png"></a></p></li><li><p>在本地任意位置新建一个文件夹，例如在 C 盘新建文件夹 <strong><em>edgeDevData</em></strong></p></li><li><p>右击“跨域”快捷方式，选择“属性”</p></li><li><p>在“目标”字段的”C:\Program Files (x86)\Microsoft\Edge\Application\msedge.exe”后面添加 –disable-web-security<br>–user-data-dir&#x3D;C:\edgeDevData（你在步骤2中新建的文件夹），然后点击确定<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/105243991510000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/105243991510000.png"></a></p></li><li><p>通过该快捷方式打开 Edge，如果顶部出现如下提示，则说明设置成功。再次尝试之前访问失败的资源，看看在当前浏览器环境下是否可以成功访问。</p></li></ol><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/105259502458200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/105259502458200.png"></a></p><p><em><strong>注意，在步骤4中添加的字符串之前有一个空格哦~</strong></em></p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 跨域 </tag>
            
            <tag> 浏览器 </tag>
            
            <tag> 解决方法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Linux系列】离线安装openjdk17的rpm包</title>
      <link href="/6a27ead0.html"/>
      <url>/6a27ead0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/Linux/">系列文章地址</a></p><div class="bilibili">   <iframe src="//player.bilibili.com/player.html?bvid=BV1Lu4y1Q73x&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe></div><h2 id="准备RPM包"><a href="#准备RPM包" class="headerlink" title="准备RPM包"></a>准备RPM包</h2><p>请从官网下载：<a href="https://www.oracle.com/java/technologies/downloads/#java17">https://www.oracle.com/java/technologies/downloads/#java17</a></p><p>如需不限速下载，请关注【程序员朱永胜】并回复1020获取。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/96087357359900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/96087357359900.png"></a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum localinstall jdk-17_linux-x64_bin.rpm</span><br></pre></td></tr></table></figure><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/99225422297200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/99225422297200.png"></a></p><h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/99250449167000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/99250449167000.png"></a></p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Linux </tag>
            
            <tag> RPM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Linux系列】使用虚拟机安装Linux系统</title>
      <link href="/4e7b516e.html"/>
      <url>/4e7b516e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="首发博客地址"><a href="#首发博客地址" class="headerlink" title="首发博客地址"></a>首发博客地址</h1><p><a href="https://blog.zysicyj.top/" title="首发博客地址">首发博客地址</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/Linux/" title="系列文章地址">系列文章地址</a></p><hr><h1 id="下载虚拟机"><a href="#下载虚拟机" class="headerlink" title="下载虚拟机"></a>下载虚拟机</h1><p>请从官网下载：<br><a href="https://customerconnect.vmware.com/en/downloads/info/slug/desktop_end_user_computing/vmware_workstation_player/17_0">https://customerconnect.vmware.com/en/downloads/info/slug/desktop_end_user_computing/vmware_workstation_player/17_0</a></p><p>如需不限速下载，请关注【程序员朱永胜】并回复 1018 获取。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82463672484200.png" title="下载页面截图" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82463672484200.png" alt="下载页面截图"></a></p><h1 id="安装虚拟机"><a href="#安装虚拟机" class="headerlink" title="安装虚拟机"></a>安装虚拟机</h1><p>全部使用默认设置，点击下一步即可。</p><h1 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h1><p>如需不限速下载，请关注【程序员朱永胜】并回复 1019 获取。</p><h1 id="安装镜像"><a href="#安装镜像" class="headerlink" title="安装镜像"></a>安装镜像</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82606553882100.png" title="镜像安装页面截图" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82606553882100.png" alt="镜像安装页面截图"></a></p><p>点击创建虚拟机。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82638523988100.png" title="选择镜像页面截图" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82638523988100.png" alt="选择镜像页面截图"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82658284659600.png" title="虚拟机名称随意取" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82658284659600.png" alt="虚拟机名称随意取"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82681313455400.png" title="保持默认设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82681313455400.png" alt="保持默认设置"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82694384392000.png" title="保持默认设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82694384392000.png" alt="保持默认设置"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82724928934500.png" title="选择第一个选项" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82724928934500.png" alt="选择第一个选项"></a></p><p>稍等片刻。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82938594783400.png" title="选择中文语言" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82938594783400.png" alt="选择中文语言"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82983688771900.png" title="点击网络和主机名" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/82983688771900.png" alt="点击网络和主机名"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/83006553796800.png" title="启用以太网并完成设置" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/83006553796800.png" alt="启用以太网并完成设置"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/83055746173600.png" title="点击安装位置，进入后不进行任何操作，直接点击完成" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/83055746173600.png" alt="点击安装位置，进入后不进行任何操作，直接点击完成"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/83112233352100.png" title="点击开始安装，然后设置Root密码" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/83112233352100.png" alt="点击开始安装，然后设置Root密码"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/83145462843800.png" title="输入任意密码，例如123456" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/83145462843800.png" alt="输入任意密码，例如123456"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/83168523299400.png" title="点击完成，然后等待安装完成" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/83168523299400.png" alt="点击完成，然后等待安装完成"></a></p><p>加载中。。。。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/83984891048000.png" title="安装完成后点击重启" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/83984891048000.png" alt="安装完成后点击重启"></a></p><p>选择第一个选项进入，第一次加载会稍慢一些。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/84077505535300.png" title="输入用户名和密码，例如我的是root和123456" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/84077505535300.png" alt="输入用户名和密码，例如我的是root和123456"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/84127315893600.png" title="通过ping命令测试是否能够连接到百度，确认网络连接正常" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/84127315893600.png" alt="通过ping命令测试是否能够连接到百度，确认网络连接正常"></a></p><p>初步安装完成！</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 虚拟机 </tag>
            
            <tag> 安装 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【ES系列】(一)简介与安装</title>
      <link href="/b977578a.html"/>
      <url>/b977578a.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/ES/">系列文章地址</a></p><div class="bilibili">    <iframe src="//player.bilibili.com/player.html?bvid=BV1nF411k76r&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">     </iframe></div><hr><h1 id="为什么要学习ES"><a href="#为什么要学习ES" class="headerlink" title="为什么要学习ES?"></a>为什么要学习ES?</h1><ol><li><p><strong>强大的全文搜索和检索功能</strong><br>：Elasticsearch是一个开源的分布式搜索和分析引擎，使用倒排索引和分布式计算等技术，提供了强大的全文搜索和检索功能。学习ES可以掌握如何构建复杂的查询、使用各种过滤器和聚合操作来优化搜索结果。</p></li><li><p><strong>实时数据分析和处理</strong>：ES支持实时数据的索引和查询，可用于处理大规模的实时数据。学习ES可以了解如何使用ES进行实时数据的分析和处理，包括日志分析、事件处理、实时监控等。</p></li><li><p><strong>分布式存储和扩展性</strong>：ES是一个分布式系统，可以将数据分布在多个节点上，以提高存储容量和查询性能。学习ES可以帮助了解如何搭建和管理分布式ES集群，以及如何优化集群的性能和可靠性。</p></li><li><p><strong>文档导入和处理</strong>：ES支持各种数据源的导入和处理，包括数据库、文件、API等。学习ES可以掌握如何将不同数据源的数据导入到ES中，并进行相应的处理和转换。</p></li><li><p><strong>日志分析和搜索引擎优化</strong>：ES在日志分析和搜索引擎优化方面有很大的应用价值。学习ES可以学会如何利用ES进行日志的实时分析和搜索，以及如何优化搜索引擎的性能和相关性。</p></li><li><p><strong>全文搜索引擎的开发和应用</strong>：ES是一个非常流行的全文搜索引擎，许多企业和项目都在使用ES构建全文搜索功能。学习ES可以提供开发全文搜索引擎的技能和经验，为职业发展增添竞争力。</p></li></ol><p>总结起来大概就是：</p><ul><li>分布式搜索引擎</li><li>大数据实时分析引擎</li></ul><h1 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h1><p><a href="https://www.elastic.co/cn/">官网地址</a></p><h1 id="ES发展历史"><a href="#ES发展历史" class="headerlink" title="ES发展历史"></a>ES发展历史</h1><p>Elasticsearch (ES)的发展历史可以追溯到2004年，当时Shay Banon创建了一个名为Compass的开源项目，作为一个基于Lucene的全文搜索引擎库。</p><p>随着时间的推移，Compass逐渐发展成为一个独立的搜索引擎，但在2009年，Shay<br>Banon决定重新设计和重构该项目，以解决一些困扰他的设计和架构问题。于是，他创建了一个新的项目，命名为”elasticsearch”<br>，并于2010年开源发布。</p><p>以下是ES的主要发展里程碑：</p><ul><li><p><strong>2010年</strong>：Elasticsearch首次开源发布。它基于Apache Lucene构建，提供了一个分布式搜索和分析引擎，用于实时数据的索引和查询。</p></li><li><p><strong>2013年</strong>：Elasticsearch正式成为Elastic公司的核心产品，并开始受到广泛关注和采用。此时，Elasticsearch已经成为开源搜索引擎的领导者之一。</p></li><li><p><strong>2014年</strong>：Elasticsearch发布了1.0版本，这是一个重要的里程碑，标志着ES的稳定性和成熟度。1.0版本引入了一些重要的特性和改进，如聚合操作和索引别名等。</p></li><li><p><strong>2015年</strong>：Elasticsearch发布了2.0版本，引入了许多重要的功能和改进，包括复合索引、文档级别的更新和删除、分布式索引排序等。</p></li><li><p><strong>2016年</strong>：Elasticsearch发布了5.0版本，这是一个重要的版本发布，引入了许多重大的改进和变化。5.0版本引入了新的分布式文档存储方式，并且废弃了一些旧的功能和API。</p></li><li><p><strong>2019年</strong><br>：Elasticsearch发布了7.0版本，这是一个重要的版本发布，引入了许多重要的功能和改进。7.0版本引入了Elasticsearch的新分布式协调引擎，称为”<br>Zen 2”，以提高集群的稳定性和性能。</p></li><li><p><strong>2022年</strong>：Elasticsearch发布了8.0版本，这是一个重要的版本发布，引入了许多重要的功能和改进。原生支持NLP，速度、扩展和检索相关性提升，通过原生矢量搜索提高搜索相关性，默认开启安全功能</p></li></ul><p>随着时间的推移，Elasticsearch不断发展壮大，成为一个功能强大、可靠性高的分布式搜索和分析引擎。它被广泛应用于各种场景，包括日志分析、实时数据处理、全文搜索和商业智能等。并且，Elastic公司也推出了其他产品，如Kibana、Logstash和Beats等，构建了一个完整的数据分析和可视化平台，被称为”<br>Elastic Stack”或”ELK Stack”。</p><p>去官网上瞄了一眼，还支持GPT了..牛逼，大概看了文章说的是，通过插件可以访问ES内容，厉害了，有兴趣可以点击下面链接看看：</p><p><a href="https://www.elastic.co/cn/blog/chatgpt-elasticsearch-plugin-elastic-data">【ChatGPT】Elasticsearch插件：将ChatGPT引入Elasticsearch</a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/80328249534200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/80328249534200.png"></a></p><h1 id="安装虚拟机"><a href="#安装虚拟机" class="headerlink" title="安装虚拟机"></a>安装虚拟机</h1><p>如果你是本地练习，可以参考这篇文章安装Linux系统环境： <a href="https://blog.zysicyj.top/4e7b516e">https://blog.zysicyj.top/4e7b516e</a></p><h1 id="环境兼容性检查"><a href="#环境兼容性检查" class="headerlink" title="环境兼容性检查"></a>环境兼容性检查</h1><p>这里一定要确认好jdk版本，比如8.8支持jdk19，8.9不支持jdk19，但是所有8.x都是支持17的，因为17是LTS版本。</p><p>所以建议大家安装jdk17，兼容性比较高</p><p><a href="https://www.elastic.co/cn/support/matrix#matrix_jvm&#enterprise-search-and-jvm">兼容性检查</a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/93551938259900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/93551938259900.png"></a></p><h1 id="准备安装包"><a href="#准备安装包" class="headerlink" title="准备安装包"></a>准备安装包</h1><p>官网下载：<a href="https://www.elastic.co/cn/downloads/elasticsearch">https://www.elastic.co/cn/downloads/elasticsearch</a></p><p>关注【程序员朱永胜】回复【1021】不限速下载</p><h1 id="安装es"><a href="#安装es" class="headerlink" title="安装es"></a>安装es</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install elasticsearch-8.9.1-x86_64.rpm</span><br></pre></td></tr></table></figure><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/116755842524400.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/116755842524400.png"></a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl enable elasticsearch.service</span><br></pre></td></tr></table></figure><h1 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h1><p><code>vi /etc/elasticsearch/elasticsearch.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ======================== Elasticsearch Configuration =========================</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># <span class="doctag">NOTE:</span> Elasticsearch comes with reasonable defaults for most settings.</span></span><br><span class="line"><span class="comment">#       Before you set out to tweak and tune the configuration, make sure you</span></span><br><span class="line"><span class="comment">#       understand what are you trying to accomplish and the consequences.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The primary way of configuring a node is via this file. This template lists</span></span><br><span class="line"><span class="comment"># the most important settings you may want to configure for a production cluster.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Please consult the documentation for further information on configuration options:</span></span><br><span class="line"><span class="comment"># [https://www.elastic.co/guide/en/elasticsearch/reference/index.html](https://www.elastic.co/guide/en/elasticsearch/reference/index.html)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Cluster -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Use a descriptive name for your cluster:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">cluster.name:</span> <span class="string">my-application</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ------------------------------------ Node ------------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Use a descriptive name for the node:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">node.name:</span> <span class="string">node-1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Add custom attributes to the node:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#node.attr.rack: r1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ----------------------------------- Paths ------------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Path to directory where to store the data (separate multiple locations by comma):</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">path.data:</span> <span class="string">/var/lib/elasticsearch</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Path to log files:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">path.logs:</span> <span class="string">/var/log/elasticsearch</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ----------------------------------- Memory -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Lock the memory on startup:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#bootstrap.memory_lock: true</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Make sure that the heap size is set to about half the memory available</span></span><br><span class="line"><span class="comment"># on the system and that the owner of the process is allowed to use this</span></span><br><span class="line"><span class="comment"># limit.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Elasticsearch performs poorly when the system is swapping the memory.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Network -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># By default Elasticsearch is only accessible on localhost. Set a different</span></span><br><span class="line"><span class="comment"># address here to expose this node on the network:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">network.host:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># By default Elasticsearch listens for HTTP traffic on the first free port it</span></span><br><span class="line"><span class="comment"># finds starting at 9200. Set a specific HTTP port here:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">http.port:</span> <span class="number">9200</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For more information, consult the network module documentation.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># --------------------------------- Discovery ----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Pass an initial list of hosts to perform discovery when this node is started:</span></span><br><span class="line"><span class="comment"># The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#discovery.seed_hosts: [&quot;host1&quot;, &quot;host2&quot;]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Bootstrap the cluster using an initial set of master-eligible nodes:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#cluster.initial_master_nodes: [&quot;node-1&quot;, &quot;node-2&quot;]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For more information, consult the discovery and cluster formation module documentation.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Various -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Allow wildcard deletion of indices:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#action.destructive_requires_name: false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#----------------------- BEGIN SECURITY AUTO CONFIGURATION -----------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The following settings, TLS certificates, and keys have been automatically      </span></span><br><span class="line"><span class="comment"># generated to configure Elasticsearch security features on 31-08-2023 09:48:01</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># --------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable security features</span></span><br><span class="line"><span class="attr">xpack.security.enabled:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">xpack.ml.enabled:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">xpack.security.enrollment.enabled:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable encryption for HTTP API client connections, such as Kibana, Logstash, and Agents</span></span><br><span class="line"><span class="attr">xpack.security.http.ssl:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">keystore.path:</span> <span class="string">certs/http.p12</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable encryption and mutual authentication between cluster nodes</span></span><br><span class="line"><span class="attr">xpack.security.transport.ssl:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">verification_mode:</span> <span class="string">certificate</span></span><br><span class="line">  <span class="attr">keystore.path:</span> <span class="string">certs/transport.p12</span></span><br><span class="line">  <span class="attr">truststore.path:</span> <span class="string">certs/transport.p12</span></span><br><span class="line"><span class="comment"># Create a new cluster with the current node only</span></span><br><span class="line"><span class="comment"># Additional nodes can still join the cluster later</span></span><br><span class="line"><span class="attr">cluster.initial_master_nodes:</span> [ <span class="string">&quot;localhost.localdomain&quot;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Allow HTTP API connections from anywhere</span></span><br><span class="line"><span class="comment"># Connections are encrypted and require user authentication</span></span><br><span class="line"><span class="attr">http.host:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Allow other nodes to join the cluster from anywhere</span></span><br><span class="line"><span class="comment"># Connections are encrypted and mutually authenticated</span></span><br><span class="line"><span class="comment">#transport.host: 0.0.0.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#----------------------- END SECURITY AUTO CONFIGURATION -------------------------</span></span><br></pre></td></tr></table></figure><h1 id="启动并校验es"><a href="#启动并校验es" class="headerlink" title="启动并校验es"></a>启动并校验es</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start elasticsearch</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status elasticsearch</span><br></pre></td></tr></table></figure><p>出现这个画面基本是没问题了</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/116812044639400.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-31/116812044639400.png"></a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost elasticsearch]# curl -X GET &quot;http://localhost:9200/&quot;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot; : &quot;node-1&quot;,</span><br><span class="line">  &quot;cluster_name&quot; : &quot;my-application&quot;,</span><br><span class="line">  &quot;cluster_uuid&quot; : &quot;XAGRLef2SayyXzuNHPgX2Q&quot;,</span><br><span class="line">  &quot;version&quot; : &#123;</span><br><span class="line">    &quot;number&quot; : &quot;8.9.1&quot;,</span><br><span class="line">    &quot;build_flavor&quot; : &quot;default&quot;,</span><br><span class="line">    &quot;build_type&quot; : &quot;rpm&quot;,</span><br><span class="line">    &quot;build_hash&quot; : &quot;a813d015ef1826148d9d389bd1c0d781c6e349f0&quot;,</span><br><span class="line">    &quot;build_date&quot; : &quot;2023-08-10T05:02:32.517455352Z&quot;,</span><br><span class="line">    &quot;build_snapshot&quot; : false,</span><br><span class="line">    &quot;lucene_version&quot; : &quot;9.7.0&quot;,</span><br><span class="line">    &quot;minimum_wire_compatibility_version&quot; : &quot;7.17.0&quot;,</span><br><span class="line">    &quot;minimum_index_compatibility_version&quot; : &quot;7.0.0&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;tagline&quot; : &quot;You Know, for Search&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Elasticsearch </tag>
            
            <tag> 全文搜索引擎 </tag>
            
            <tag> 实时数据分析引擎 </tag>
            
            <tag> 分布式搜索引擎 </tag>
            
            <tag> 大数据实时分析引擎 </tag>
            
            <tag> 分布式存储 </tag>
            
            <tag> 扩展性 </tag>
            
            <tag> 文档导入和处理 </tag>
            
            <tag> 日志分析 </tag>
            
            <tag> 搜索引擎优化 </tag>
            
            <tag> 全文搜索引擎开发 </tag>
            
            <tag> ELK Stack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题精讲】Spring Framework有哪些模块？</title>
      <link href="/d2bacce5.html"/>
      <url>/d2bacce5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B2%BE%E8%AE%B2/">系列文章地址</a></p><hr><p>Spring Framework是一个广泛使用的开源应用程序框架，用于构建企业级Java应用程序。它提供了许多不同的模块，用于支持各种不同的应用程序开发需求。以下是Spring<br>Framework的一些核心模块：</p><ol><li><p><strong>Spring Core Container</strong>: 这是Spring框架的核心模块，提供了IoC（控制反转）和DI（依赖注入）功能。它包括以下子模块：</p><ul><li><strong>Beans</strong>: 提供了BeanFactory和ApplicationContext等核心容器的实现，用于管理应用程序中的对象（Bean）。</li><li><strong>Core</strong>: 提供了核心功能，如依赖注入、Bean的生命周期管理等。</li></ul></li><li><p><strong>Spring AOP</strong>: 提供了面向切面编程（AOP）的支持，用于在应用程序中实现横切关注点，如日志记录、事务管理等。</p></li><li><p><strong>Spring Data Access&#x2F;Integration</strong>: 提供了与数据库和其他数据源集成的支持，包括JDBC、ORM（对象关系映射）、JMS（Java消息服务）等。</p><ul><li><strong>JDBC</strong>: 简化了与数据库的交互，并提供了异常处理和资源管理。</li><li><strong>ORM</strong>: 提供了对多种ORM框架（如Hibernate、JPA等）的集成支持。</li><li><strong>JMS</strong>: 提供了与消息中间件的集成，支持消息驱动的应用程序。</li></ul></li><li><p><strong>Spring Web</strong>: 提供了构建Web应用程序的支持。</p><ul><li><strong>Web MVC</strong>: 实现了MVC（Model-View-Controller）模式，用于构建Web应用程序的控制器和视图层。</li><li><strong>Web WebSocket</strong>: 提供了对WebSocket协议的支持。</li><li><strong>Web WebSocket Client</strong>: 提供了WebSocket客户端的支持。</li><li><strong>Web WebSocket Servlet</strong>: 提供了用于处理WebSocket请求的Servlet。</li></ul></li><li><p><strong>Spring Security</strong>: 提供了身份验证、授权和安全性功能，用于保护应用程序的资源。</p></li><li><p><strong>Spring Test</strong>: 提供了测试Spring应用程序的支持，包括单元测试和集成测试。</p></li><li><p><strong>Spring Data</strong>: 提供了更高级的数据访问和操作功能，包括对NoSQL数据库和云服务的支持。</p></li><li><p><strong>Spring Boot</strong>: 虽然不是Spring Framework的核心模块，但是Spring Boot提供了快速构建基于Spring的应用程序的工具，自动配置和简化了应用程序的开发和部署。</p></li></ol><p>这些只是Spring Framework中的一些核心模块，还有许多其他模块用于提供不同类型的功能和集成支持。你可以根据应用程序的需求选择适当的模块来构建和扩展你的应用程序。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Framework </tag>
            
            <tag> 模块 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【开发规范系列】（四）前端开发规范</title>
      <link href="/e821a36.html"/>
      <url>/e821a36.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/">系列文章地址</a></p><hr><p>引自《阿里规约》的开头片段：</p><p>现代软件架构的复杂性需要协同开发完成，如何高效地协同呢？无规矩不成方圆，无规范难以协同，比如，制订交通法规表面上是要限制行车权，实际上是保障公众的人身安全，试想如果没有限速，没有红绿灯，谁还敢上路行驶。对软件来说，适当的规范和标准绝不是消灭代码内容的创造性、优雅性，而是限制过度个性化，以一种普遍认可的统一方式一起做事，提升协作效率，降低沟通成本。代码的字里行间流淌的是软件系统的血液，质量的提升是尽可能少踩坑，杜绝踩重复的坑，切实提升系统稳定性，码出质量。</p><h3 id="一-命名规范"><a href="#一-命名规范" class="headerlink" title="(一)命名规范"></a>(一)命名规范</h3><h4 id="1-1-1-项目命名"><a href="#1-1-1-项目命名" class="headerlink" title="1.1.1 项目命名"></a>1.1.1 项目命名</h4><p>全部采用小写方式，以中划线分隔。</p><p>正例：<code>mall-management-system</code></p><p>反例：<code>mall_management-system / mallManagementSystem</code></p><h4 id="1-1-2-目录命名"><a href="#1-1-2-目录命名" class="headerlink" title="1.1.2 目录命名"></a>1.1.2 目录命名</h4><p>全部采用小写方式，以中划线分隔，有复数结构时，要采用复数命名法，缩写不用复数。</p><p>正例：<code>scripts / styles / components / images / utils / layouts / demo-styles / demo-scripts / img / doc</code></p><p>反例：<code>script / style / demo_scripts / demoStyles / imgs / docs</code></p><p>【特殊】VUE 的项目中的 components 中的组件目录，使用 kebab-case 命名。</p><p>正例：<code>head-search / page-loading / authorized / notice-icon</code></p><p>反例：<code>HeadSearch / PageLoading</code></p><p>【特殊】VUE 的项目中的除 components 组件目录外的所有目录也使用 kebab-case 命名。</p><p>正例：<code>page-one / shopping-car / user-management</code></p><p>反例：<code>ShoppingCar / UserManagement</code></p><h4 id="1-1-3-JS、CSS、SCSS、HTML、PNG-文件命名"><a href="#1-1-3-JS、CSS、SCSS、HTML、PNG-文件命名" class="headerlink" title="1.1.3 JS、CSS、SCSS、HTML、PNG 文件命名"></a>1.1.3 JS、CSS、SCSS、HTML、PNG 文件命名</h4><p>全部采用小写方式，以中划线分隔。</p><p>正例：<code>render-dom.js / signup.css / index.html / company-logo.png</code></p><p>反例：<code>renderDom.js / UserManagement.html</code></p><h4 id="1-1-4-命名严谨性"><a href="#1-1-4-命名严谨性" class="headerlink" title="1.1.4 命名严谨性"></a>1.1.4 命名严谨性</h4><p>代码中的命名严禁使用拼音与英文混合的方式，更不允许直接使用中文的方式。说明：正确的英文拼写和语法可以让阅读者易于理解，避免歧义。注意，即使纯拼音命名方式也要避免采用。</p><p>正例：<code>henan / luoyang / rmb</code> 等国际通用的名称，可视同英文。</p><p>反例：<code>DaZhePromotion [打折] / getPingfenByName() [评分] / int 某变量 = 3</code></p><p><strong>杜绝完全不规范的缩写，避免望文不知义：</strong></p><p>反例：AbstractClass“缩写”命名成 AbsClass；condition“缩写”命名成 condi，此类随意缩写严重降低了代码的可阅读性。</p><h3 id="二-HTML-规范-（Vue-Template-同样适用）"><a href="#二-HTML-规范-（Vue-Template-同样适用）" class="headerlink" title="(二)HTML 规范 （Vue Template 同样适用）"></a>(二)HTML 规范 （Vue Template 同样适用）</h3><h4 id="1-2-1-HTML-类型"><a href="#1-2-1-HTML-类型" class="headerlink" title="1.2.1 HTML 类型"></a>1.2.1 HTML 类型</h4><p>推荐使用 HTML5 的文档类型声明。建议使用 text&#x2F;html 格式的 HTML，避免使用 XHTML。XHTML 以及它的属性，比如<br>application&#x2F;xhtml+xml 在浏览器中的应用支持与优化空间都十分有限。</p><ul><li>规定字符编码</li><li>IE 兼容模式</li><li>规定字符编码</li><li>doctype 大写</li></ul><p>正例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=Edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Page title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/company-logo.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Company&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-2-2-缩进"><a href="#1-2-2-缩进" class="headerlink" title="1.2.2 缩进"></a>1.2.2 缩进</h4><p>缩进使用 2 个空格（一个 tab）。</p><p>嵌套的节点应该缩进。</p><h4 id="1-2-3-分块注释"><a href="#1-2-3-分块注释" class="headerlink" title="1.2.3 分块注释"></a>1.2.3 分块注释</h4><p>在每一个块状元素，列表元素和表格元素后，加上一对 HTML 注释。注释格式：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 英文 中文 start --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 英文 中文 end --&gt;</span></span><br></pre></td></tr></table></figure><p>正例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/header.jpg&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-2-4-语义化标签"><a href="#1-2-4-语义化标签" class="headerlink" title="1.2.4 语义化标签"></a>1.2.4 语义化标签</h4><p>HTML5 中新增很多语义化标签，所以优先使用语义化标签，避免一个页面都是 div 或者 p 标签。</p><p>正例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-2-5-引号"><a href="#1-2-5-引号" class="headerlink" title="1.2.5 引号"></a>1.2.5 引号</h4><p>使用双引号(“ “) 而不是单引号(‘ ‘)。</p><p>正例： <code>&lt;div class=&quot;news-div&quot;&gt;&lt;/div&gt;</code></p><p>反例： <code>&lt;div class=&#39;news-div&#39;&gt;&lt;/div&gt;</code></p><h3 id="三-CSS-规范"><a href="#三-CSS-规范" class="headerlink" title="(三) CSS 规范"></a>(三) CSS 规范</h3><h4 id="1-3-1-命名"><a href="#1-3-1-命名" class="headerlink" title="1.3.1 命名"></a>1.3.1 命名</h4><ul><li>类名使用小写字母，以中划线分隔。</li><li>id 采用驼峰式命名。</li><li>scss 中的变量、函数、混合、placeholder 采用驼峰式命名。</li></ul><p>ID 和 class 的名称总是使用可以反应元素目的和用途的名称，或其他通用的名称，代替表象和晦涩难懂的名称。</p><p>不推荐：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.fw-800</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.red</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>推荐：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.heavy</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.important</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-3-2-选择器"><a href="#1-3-2-选择器" class="headerlink" title="1.3.2 选择器"></a>1.3.2 选择器</h4><p>1)css 选择器中避免使用标签名。从结构、表现、行为分离的原则来看，应该尽量避免 css 中出现 HTML 标签，并且在 css<br>选择器中出现标签名会存在潜在的问题。</p><p>2)很多前端开发人员写选择器链的时候不使用<br>直接子选择器（注：直接子选择器和后代选择器的区别）。有时，这可能会导致疼痛的设计问题并且有时候可能会很耗性能。然而，在任何情况下，这是一个非常不好的做法。如果你不写很通用的，需要匹配到<br>DOM 末端的选择器，你应该总是考虑直接子选择器。</p><p>不推荐：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.content</span> <span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>推荐：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.content</span> &gt; <span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-3-3-尽量使用缩写属性"><a href="#1-3-3-尽量使用缩写属性" class="headerlink" title="1.3.3 尽量使用缩写属性"></a>1.3.3 尽量使用缩写属性</h4><p>不推荐：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">border-top-style</span>: none;</span><br><span class="line"><span class="attribute">font-family</span>: palatino, georgia, serif;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">1.6</span>;</span><br><span class="line"><span class="attribute">padding-bottom</span>: <span class="number">2em</span>;</span><br><span class="line"><span class="attribute">padding-left</span>: <span class="number">1em</span>;</span><br><span class="line"><span class="attribute">padding-right</span>: <span class="number">1em</span>;</span><br><span class="line"><span class="attribute">padding-top</span>: <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p>推荐：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">border-top</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">font</span>: <span class="number">100%</span>/<span class="number">1.6</span> palatino, georgia, serif;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span> <span class="number">1em</span> <span class="number">2em</span>;</span><br></pre></td></tr></table></figure><h4 id="1-3-4-每个选择器及属性独占一行"><a href="#1-3-4-每个选择器及属性独占一行" class="headerlink" title="1.3.4 每个选择器及属性独占一行"></a>1.3.4 每个选择器及属性独占一行</h4><p>不推荐：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">button</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">100px</span>;<span class="attribute">height</span>:<span class="number">50px</span>;<span class="attribute">color</span>:<span class="number">#fff</span>;<span class="attribute">background</span>:<span class="number">#00a0e9</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>推荐：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">button</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background</span>:<span class="number">#00a0e9</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-3-5-省略-0-后面的单位"><a href="#1-3-5-省略-0-后面的单位" class="headerlink" title="1.3.5 省略 0 后面的单位"></a>1.3.5 省略 0 后面的单位</h4><p>不推荐：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>推荐：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-3-6-避免使用-ID-选择器及全局标签选择器防止污染全局样式"><a href="#1-3-6-避免使用-ID-选择器及全局标签选择器防止污染全局样式" class="headerlink" title="1.3.6 避免使用 ID 选择器及全局标签选择器防止污染全局样式"></a>1.3.6 避免使用 ID 选择器及全局标签选择器防止污染全局样式</h4><p>不推荐：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#header</span>&#123;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>推荐：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.header</span>&#123;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="四-LESS-规范"><a href="#四-LESS-规范" class="headerlink" title="(四) LESS 规范"></a>(四) LESS 规范</h3><h4 id="1-4-1-代码组织"><a href="#1-4-1-代码组织" class="headerlink" title="1.4.1 代码组织"></a>1.4.1 代码组织</h4><p>1)将公共 less 文件放置在 style&#x2F;less&#x2F;common 文件夹。</p><p>例：&#x2F;&#x2F; color.less,common.less</p><p>2)按以下顺序组织：</p><p>1、@import;</p><p>2、变量声明;</p><p>3、样式声明;</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;mixins/size.less&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">@default-text-color:</span> <span class="number">#333</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.page</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-4-2-避免嵌套层级过多"><a href="#1-4-2-避免嵌套层级过多" class="headerlink" title="1.4.2 避免嵌套层级过多"></a>1.4.2 避免嵌套层级过多</h4><p>将嵌套深度限制在 3 级。对于超过 4 级的嵌套，给予重新评估。这可以避免出现过于详实的 CSS<br>选择器。避免大量的嵌套规则。当可读性受到影响时，将之打断。推荐避免出现多于 20 行的嵌套规则出现。</p><p>不推荐：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span>&#123;</span><br><span class="line">  <span class="selector-class">.title</span>&#123;</span><br><span class="line">    <span class="selector-class">.name</span>&#123;</span><br><span class="line">       <span class="attribute">color</span>:<span class="number">#fff</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>推荐：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main-title</span>&#123;</span><br><span class="line">   <span class="selector-class">.name</span>&#123;</span><br><span class="line">      <span class="attribute">color</span>:<span class="number">#fff</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="五-JavaScript-规范"><a href="#五-JavaScript-规范" class="headerlink" title="(五) JavaScript 规范"></a>(五) JavaScript 规范</h3><h4 id="1-5-1-命名"><a href="#1-5-1-命名" class="headerlink" title="1.5.1 命名"></a>1.5.1 命名</h4><p>1)采用小写驼峰命名 lowerCamelCase，代码中的命名均不能以下划线，也不能以下划线或美元符号结束。</p><p>反例： <code>_name / name_ / name$</code></p><p>2)方法名、参数名、成员变量、局部变量都统一使用 lowerCamelCase 风格，必须遵从驼峰形式。</p><p>正例： <code>localValue / getHttpMessage() / inputUserId</code></p><p>其中 method 方法命名必须是动词或者动词+名词形式。</p><p>正例：<code>saveShopCarData / openShopCarInfoDialog</code></p><p>反例：<code>save / open / show / go</code></p><p>特此说明，增删查改，详情统一使用如下 5 个单词，不得使用其他（目的是为了统一各个端）。</p><p><code>add / update / delete / detail / get</code></p><p>附：函数方法常用的动词：</p><p>get 获取&#x2F;set 设置,<br>add 增加&#x2F;remove 删除<br>create 创建&#x2F;destory 移除<br>start 启动&#x2F;stop 停止<br>open 打开&#x2F;close 关闭,<br>read 读取&#x2F;write 写入<br>load 载入&#x2F;save 保存,<br>create 创建&#x2F;destroy 销毁<br>begin 开始&#x2F;end 结束,<br>backup 备份&#x2F;restore 恢复<br>import 导入&#x2F;export 导出,<br>split 分割&#x2F;merge 合并<br>inject 注入&#x2F;extract 提取,<br>attach 附着&#x2F;detach 脱离<br>bind 绑定&#x2F;separate 分离,<br>view 查看&#x2F;browse 浏览<br>edit 编辑&#x2F;modify 修改,<br>select 选取&#x2F;mark 标记<br>copy 复制&#x2F;paste 粘贴,<br>undo 撤销&#x2F;redo 重做<br>insert 插入&#x2F;delete 移除,<br>add 加入&#x2F;append 添加<br>clean 清理&#x2F;clear 清除,<br>index 索引&#x2F;sort 排序<br>find 查找&#x2F;search 搜索,<br>increase 增加&#x2F;decrease 减少<br>play 播放&#x2F;pause 暂停,<br>launch 启动&#x2F;run 运行<br>compile 编译&#x2F;execute 执行,<br>debug 调试&#x2F;trace 跟踪<br>observe 观察&#x2F;listen 监听,<br>build 构建&#x2F;publish 发布<br>input 输入&#x2F;output 输出,<br>encode 编码&#x2F;decode 解码<br>encrypt 加密&#x2F;decrypt 解密,<br>compress 压缩&#x2F;decompress 解压缩<br>pack 打包&#x2F;unpack 解包,<br>parse 解析&#x2F;emit 生成<br>connect 连接&#x2F;disconnect 断开,<br>send 发送&#x2F;receive 接收<br>download 下载&#x2F;upload 上传,<br>refresh 刷新&#x2F;synchronize 同步<br>update 更新&#x2F;revert 复原,<br>lock 锁定&#x2F;unlock 解锁<br>check out 签出&#x2F;check in 签入,<br>submit 提交&#x2F;commit 交付<br>push 推&#x2F;pull 拉,<br>expand 展开&#x2F;collapse 折叠<br>begin 起始&#x2F;end 结束,<br>start 开始&#x2F;finish 完成<br>enter 进入&#x2F;exit 退出,<br>abort 放弃&#x2F;quit 离开<br>obsolete 废弃&#x2F;depreciate 废旧,<br>collect 收集&#x2F;aggregate 聚集</p><h4 id="1-5-2-代码格式"><a href="#1-5-2-代码格式" class="headerlink" title="1.5.2 代码格式"></a>1.5.2 代码格式</h4><p>1)使用 2 个空格进行缩进。</p><p>正例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (x &lt; y) &#123;</span><br><span class="line">  x += <span class="number">10</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  x += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2)不同逻辑、不同语义、不同业务的代码之间插入一个空行分隔开来以提升可读性。</p><blockquote><p>说明：任何情形，没有必要插入多个空行进行隔开。</p></blockquote><h4 id="1-5-3-字符串"><a href="#1-5-3-字符串" class="headerlink" title="1.5.3 字符串"></a>1.5.3 字符串</h4><p>统一使用单引号(‘)，不使用双引号(“)。这在创建 HTML 字符串非常有好处。</p><p>正例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;foo&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> testDiv = <span class="string">&#x27;&lt;div id=&quot;test&quot;&gt;&lt;/div&gt;&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="1-5-4-对象声明"><a href="#1-5-4-对象声明" class="headerlink" title="1.5.4 对象声明"></a>1.5.4 对象声明</h4><p>1)使用字面值创建对象。</p><p>正例： <code>let user = &#123;&#125;;</code></p><p>反例： <code>let user = new Object();</code></p><p>2)使用字面量来代替对象构造器。</p><p>正例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> user = &#123;</span><br><span class="line">  <span class="attr">age</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">city</span>: <span class="number">3</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> user = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">user.<span class="property">age</span> = <span class="number">0</span>;</span><br><span class="line">user.<span class="property">name</span> = <span class="number">0</span>;</span><br><span class="line">user.<span class="property">city</span> = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><h4 id="1-5-5-使用-ES6-7"><a href="#1-5-5-使用-ES6-7" class="headerlink" title="1.5.5 使用 ES6,7"></a>1.5.5 使用 ES6,7</h4><p>必须优先使用 ES6,7 中新增的语法糖和函数。这将简化你的程序，并让你的代码更加灵活和可复用。</p><blockquote><p>必须强制使用 ES6, ES7 的新语法，比如箭头函数、await&#x2F;async ， 解构， let ， for…of 等等</p></blockquote><h4 id="1-5-6-括号"><a href="#1-5-6-括号" class="headerlink" title="1.5.6 括号"></a>1.5.6 括号</h4><p>下列关键字后必须有大括号（即使代码块的内容只有一行）：if, else, for, while, do, switch, try, catch, finally, with。</p><p>正例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">  <span class="title function_">doSomething</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition) <span class="title function_">doSomething</span>();</span><br></pre></td></tr></table></figure><h4 id="1-5-7-undefined-判断"><a href="#1-5-7-undefined-判断" class="headerlink" title="1.5.7 undefined 判断"></a>1.5.7 undefined 判断</h4><p>永远不要直接使用 undefined 进行变量判断；使用 typeof 和字符串 ‘undefined’ 对变量进行判断。</p><p>正例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> person === <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (person === <span class="literal">undefined</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-5-8-条件判断和循环最多三层"><a href="#1-5-8-条件判断和循环最多三层" class="headerlink" title="1.5.8 条件判断和循环最多三层"></a>1.5.8 条件判断和循环最多三层</h4><p>条件判断能使用三目运算符和逻辑运算符解决的，就不要使用条件判断，但是谨记不要写太长的三目运算符。如果超过 3 层请抽成函数，并写清楚注释。</p><h4 id="1-5-9-this-的转换命名"><a href="#1-5-9-this-的转换命名" class="headerlink" title="1.5.9 this 的转换命名"></a>1.5.9 this 的转换命名</h4><p>对上下文 this 的引用只能使用 ‘self’ 来命名。</p><h4 id="1-5-10-慎用-console-log"><a href="#1-5-10-慎用-console-log" class="headerlink" title="1.5.10 慎用 console.log"></a>1.5.10 慎用 console.log</h4><p>因 console.log 大量使用会有性能问题，所以在非 webpack 项目中谨慎使用 log 功能。</p><h3 id="一-Vue-编码基础"><a href="#一-Vue-编码基础" class="headerlink" title="(一) Vue 编码基础"></a>(一) Vue 编码基础</h3><p>vue 项目规范以 Vue<br>官方规范（<a href="https://xie.infoq.cn/link?target=https://cn.vuejs.org/v2/style-guide/%25EF%25BC%2589">https://cn.vuejs.org/v2/style-guide/）</a><br>中的 A 规范为基础，在其上面进行项目开发，故所有代码均遵守该规范。</p><p>请仔细阅读 Vue 官方规范，切记，此为第一步。</p><h4 id="2-1-1-组件规范"><a href="#2-1-1-组件规范" class="headerlink" title="2.1.1 组件规范"></a>2.1.1 组件规范</h4><h5 id="1-组件名为多个单词。"><a href="#1-组件名为多个单词。" class="headerlink" title="1) 组件名为多个单词。"></a>1) 组件名为多个单词。</h5><p>组件名应该始终由多个单词组成，且命名规范为<code>KebabCase</code>格式。这样做可以避免与现有和未来的 HTML 元素冲突，因为所有 HTML<br>元素名称都是由单个单词组成的。</p><p>正例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;TodoItem&#x27;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;Todo&#x27;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;todo-item&#x27;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="2-组件文件名为-PascalCase-格式"><a href="#2-组件文件名为-PascalCase-格式" class="headerlink" title="2) 组件文件名为 PascalCase 格式"></a>2) 组件文件名为 PascalCase 格式</h5><p>正例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- MyComponent.vue</span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- myComponent.vue</span><br><span class="line">|- MyComponent.vue</span><br></pre></td></tr></table></figure><h5 id="3-基础组件文件名以-base-开头，使用完整单词而不是缩写。"><a href="#3-基础组件文件名以-base-开头，使用完整单词而不是缩写。" class="headerlink" title="3) 基础组件文件名以 base 开头，使用完整单词而不是缩写。"></a>3) 基础组件文件名以 base 开头，使用完整单词而不是缩写。</h5><p>正例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- base-button.vue</span><br><span class="line">|- base-table.vue</span><br><span class="line">|- base-icon.vue</span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- MyButton.vue</span><br><span class="line">|- VueTable.vue</span><br><span class="line">|- Icon.vue</span><br></pre></td></tr></table></figure><h5 id="4-和父组件紧密耦合的子组件应该以父组件名作为前缀命名"><a href="#4-和父组件紧密耦合的子组件应该以父组件名作为前缀命名" class="headerlink" title="4) 和父组件紧密耦合的子组件应该以父组件名作为前缀命名"></a>4) 和父组件紧密耦合的子组件应该以父组件名作为前缀命名</h5><p>正例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- todo-list.vue</span><br><span class="line">|- todo-list-item.vue</span><br><span class="line">|- todo-list-item-button.vue</span><br><span class="line">|- user-profile-options.vue （完整单词）</span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- TodoList.vue</span><br><span class="line">|- TodoItem.vue</span><br><span class="line">|- TodoButton.vue</span><br><span class="line">|- UProfOpts.vue （使用了缩写）</span><br></pre></td></tr></table></figure><h5 id="5-在-Template-模板中使用组件，应使用-PascalCase-格式，并使用自闭合组件。"><a href="#5-在-Template-模板中使用组件，应使用-PascalCase-格式，并使用自闭合组件。" class="headerlink" title="5) 在 Template 模板中使用组件，应使用 PascalCase 格式，并使用自闭合组件。"></a>5) 在 Template 模板中使用组件，应使用 PascalCase 格式，并使用自闭合组件。</h5><p>正例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyComponent /&gt;</span><br><span class="line">&lt;Row&gt;&lt;table :column=&quot;data&quot;/&gt;&lt;/Row&gt;</span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component /&gt; &lt;row&gt;&lt;table :column=&quot;data&quot;/&gt;&lt;/row&gt;</span><br></pre></td></tr></table></figure><h5 id="6-组件的-data-必须是一个函数"><a href="#6-组件的-data-必须是一个函数" class="headerlink" title="6) 组件的 data 必须是一个函数"></a>6) 组件的 data 必须是一个函数</h5><p>当在组件中使用 data 属性时（除了 new Vue 外的任何地方），它的值必须是一个返回对象的函数。因为如果直接是一个对象，子组件之间的属性值会相互影响。</p><p>正例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &#x27;jack&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    name: &#x27;jack&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="7-Prop-定义应该尽量详细"><a href="#7-Prop-定义应该尽量详细" class="headerlink" title="7) Prop 定义应该尽量详细"></a>7) Prop 定义应该尽量详细</h5><ul><li>必须使用 camelCase 驼峰命名</li><li>必须指定类型</li><li>必须加上注释，表明其含义</li><li>必须加上 required 或者 default，两者二选其一</li><li>如果有业务需要，必须加上 validator 验证</li></ul><p>正例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">  status: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    required: true,</span><br><span class="line">    validator: function (value) &#123;</span><br><span class="line">      return [</span><br><span class="line">        &#x27;succ&#x27;,</span><br><span class="line">        &#x27;info&#x27;,</span><br><span class="line">        &#x27;error&#x27;</span><br><span class="line">      ].indexOf(value) !== -1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  userLevel: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    required: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="8-为组件样式设置作用域"><a href="#8-为组件样式设置作用域" class="headerlink" title="8) 为组件样式设置作用域"></a>8) 为组件样式设置作用域</h5><p>正例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button class=&quot;btn btn-close&quot;&gt;X&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .btn-close &#123;</span><br><span class="line">    background-color: red;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button class=&quot;btn btn-close&quot;&gt;X&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  .btn-close &#123;</span><br><span class="line">    background-color: red;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h5 id="9-如果特性元素较多，应主动换行。"><a href="#9-如果特性元素较多，应主动换行。" class="headerlink" title="9) 如果特性元素较多，应主动换行。"></a>9) 如果特性元素较多，应主动换行。</h5><p>正例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyComponent foo=&quot;a&quot; bar=&quot;b&quot; baz=&quot;c&quot;</span><br><span class="line">    foo=&quot;a&quot; bar=&quot;b&quot; baz=&quot;c&quot;</span><br><span class="line">    foo=&quot;a&quot; bar=&quot;b&quot; baz=&quot;c&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyComponent foo=&quot;a&quot; bar=&quot;b&quot; baz=&quot;c&quot; foo=&quot;a&quot; bar=&quot;b&quot; baz=&quot;c&quot; foo=&quot;a&quot; bar=&quot;b&quot; baz=&quot;c&quot; foo=&quot;a&quot; bar=&quot;b&quot; baz=&quot;c&quot;/&gt;</span><br></pre></td></tr></table></figure><h4 id="2-1-2-模板中使用简单的表达式"><a href="#2-1-2-模板中使用简单的表达式" class="headerlink" title="2.1.2 模板中使用简单的表达式"></a>2.1.2 模板中使用简单的表达式</h4><p>组件模板应该只包含简单的表达式，复杂的表达式应重构为计算属性或方法。复杂表达式会使你的模板变得不那么声明式。我们应该尽量描述应该出现的是什么，而不是如何计算那个值。而且计算属性和方法使得代码可以重用。</p><p>正例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123; normalizedFullName &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">computed: &#123;</span><br><span class="line">  normalizedFullName: function () &#123;</span><br><span class="line">    return this.fullName.split(&#x27; &#x27;).map(function (word) &#123;</span><br><span class="line">      return word[0].toUpperCase() + word.slice(1)</span><br><span class="line">    &#125;).join(&#x27; &#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    &#123;&#123;</span><br><span class="line">      fullName.split(&#x27; &#x27;).map(function (word) &#123;</span><br><span class="line">        return word[0].toUpperCase() + word.slice(1)</span><br><span class="line">      &#125;).join(&#x27; &#x27;)</span><br><span class="line">    &#125;&#125;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h4 id="2-1-3-指令都使用缩写形式"><a href="#2-1-3-指令都使用缩写形式" class="headerlink" title="2.1.3 指令都使用缩写形式"></a>2.1.3 指令都使用缩写形式</h4><p>指令推荐使用缩写形式，用 : 表示 v-bind: ，用 @ 表示 v-on: ，用 # 表示 v-slot:</p><p>正例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  @input=&quot;onInput&quot;</span><br><span class="line">  @focus=&quot;onFocus&quot;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  v-on:input=&quot;onInput&quot;</span><br><span class="line">  @focus=&quot;onFocus&quot;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure><h4 id="2-1-4-标签顺序保持一致"><a href="#2-1-4-标签顺序保持一致" class="headerlink" title="2.1.4 标签顺序保持一致"></a>2.1.4 标签顺序保持一致</h4><p>单文件组件应该始终按照 <code>&lt;template&gt;</code>、<code>&lt;script&gt;</code>、<code>&lt;style&gt;</code> 的顺序排列。</p><p>正例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;...&lt;/template&gt;</span><br><span class="line">&lt;script&gt;...&lt;/script&gt;</span><br><span class="line">&lt;style&gt;...&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>反例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;...&lt;/template&gt;</span><br><span class="line">&lt;style&gt;...&lt;/style&gt;</span><br><span class="line">&lt;script&gt;...&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="2-1-5-必须为-v-for-设置键值-key"><a href="#2-1-5-必须为-v-for-设置键值-key" class="headerlink" title="2.1.5 必须为 v-for 设置键值 key"></a>2.1.5 必须为 v-for 设置键值 key</h4><h4 id="2-1-6-v-show-与-v-if-选择"><a href="#2-1-6-v-show-与-v-if-选择" class="headerlink" title="2.1.6 v-show 与 v-if 选择"></a>2.1.6 v-show 与 v-if 选择</h4><p>如果需要频繁切换元素的可见性，使用 v-show ；如果在运行时条件很少改变，使用 v-if。</p><h4 id="2-1-7-script-标签内部结构顺序"><a href="#2-1-7-script-标签内部结构顺序" class="headerlink" title="2.1.7 script 标签内部结构顺序"></a>2.1.7 script 标签内部结构顺序</h4><p>components &gt; props &gt; data &gt; computed &gt; watch &gt; filter &gt; 钩子函数（按执行顺序排列） &gt; methods</p><h4 id="2-1-8-Vue-Router-规范"><a href="#2-1-8-Vue-Router-规范" class="headerlink" title="2.1.8 Vue Router 规范"></a>2.1.8 Vue Router 规范</h4><h5 id="1-页面跳转数据传递使用路由参数"><a href="#1-页面跳转数据传递使用路由参数" class="headerlink" title="1) 页面跳转数据传递使用路由参数"></a>1) 页面跳转数据传递使用路由参数</h5><p>页面跳转，例如从 A 页面跳转到 B 页面，需要将 A 页面的数据传递到 B 页面，推荐使用路由参数进行传参，而不是将需要传递的数据保存在<br>vuex，然后在 B 页面取出 vuex 中的数据，因为如果在 B 页面刷新会导致 vuex 数据丢失，导致 B 页面无法正常显示数据。</p><p>正例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let id = &#x27;123&#x27;;</span><br><span class="line">this.$router.push(&#123; name: &#x27;userCenter&#x27;, query: &#123; id: id &#125; &#125;);</span><br></pre></td></tr></table></figure><h5 id="2-使用路由懒加载（延迟加载）机制"><a href="#2-使用路由懒加载（延迟加载）机制" class="headerlink" title="2) 使用路由懒加载（延迟加载）机制"></a>2) 使用路由懒加载（延迟加载）机制</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: &#x27;/uploadAttachment&#x27;,</span><br><span class="line">  name: &#x27;uploadAttachment&#x27;,</span><br><span class="line">  meta: &#123;</span><br><span class="line">    title: &#x27;上传附件&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  component: () =&gt; import(&#x27;@/view/components/uploadAttachment/index.vue&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3-router-中的命名规范"><a href="#3-router-中的命名规范" class="headerlink" title="3) router 中的命名规范"></a>3) router 中的命名规范</h5><p>path、childrenPoints 命名规范采用<code>kebab-case</code>命名规范（尽量保持 vue 文件的目录结构一致，因为目录和文件名都是<code>kebab-case</code><br>，这样很方便找到对应的文件）</p><p>name 命名规范采用<code>KebabCase</code>命名规范且与 component 组件名保持一致！（要保持 keep-alive 特性，keep-alive 按照 component 的<br>name 进行缓存，所以两者必须高度保持一致）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">export const reload = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#x27;/reload&#x27;,</span><br><span class="line">    name: &#x27;reload&#x27;,</span><br><span class="line">    component: Main,</span><br><span class="line">    meta: &#123;</span><br><span class="line">      title: &#x27;动态加载&#x27;,</span><br><span class="line">      icon: &#x27;icon iconfont&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: &#x27;/reload/smart-reload-list&#x27;,</span><br><span class="line">        name: &#x27;SmartReloadList&#x27;,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          title: &#x27;SmartReload&#x27;,</span><br><span class="line">          childrenPoints: [</span><br><span class="line">            &#123;</span><br><span class="line">              title: &#x27;查询&#x27;,</span><br><span class="line">              name: &#x27;smart-reload-search&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              title: &#x27;执行reload&#x27;,</span><br><span class="line">              name: &#x27;smart-reload-update&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              title: &#x27;查看执行结果&#x27;,</span><br><span class="line">              name: &#x27;smart-reload-result&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;,</span><br><span class="line">        component: () =&gt;</span><br><span class="line">          import(&#x27;@/views/reload/smart-reload/smart-reload-list.vue&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h5 id="4-router-中的-path-命名规范"><a href="#4-router-中的-path-命名规范" class="headerlink" title="4) router 中的 path 命名规范"></a>4) router 中的 path 命名规范</h5><p>path 应采用<code>kebab-case</code>命名规范，并以 &#x2F; 开头，即使是 children 中的 path 也要以 &#x2F; 开头。例如：</p><ul><li>目的：经常需要找到某个 vue 文件时，可以立即找到它。如果 path 不以 &#x2F; 开头，由 parent 和 children 组成，可能需要在 router<br>文件中多次搜索才能找到。而以 &#x2F; 开头，可以立即搜索到对应的组件。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: &#x27;/file&#x27;,</span><br><span class="line">  name: &#x27;File&#x27;,</span><br><span class="line">  component: Main,</span><br><span class="line">  meta: &#123;</span><br><span class="line">    title: &#x27;文件服务&#x27;,</span><br><span class="line">    icon: &#x27;ios-cloud-upload&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  children: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: &#x27;/file/file-list&#x27;,</span><br><span class="line">      name: &#x27;FileList&#x27;,</span><br><span class="line">      component: () =&gt; import(&#x27;@/views/file/file-list.vue&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: &#x27;/file/file-add&#x27;,</span><br><span class="line">      name: &#x27;FileAdd&#x27;,</span><br><span class="line">      component: () =&gt; import(&#x27;@/views/file/file-add.vue&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: &#x27;/file/file-update&#x27;,</span><br><span class="line">      name: &#x27;FileUpdate&#x27;,</span><br><span class="line">      component: () =&gt; import(&#x27;@/views/file/file-update.vue&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="二-Vue-项目目录规范"><a href="#二-Vue-项目目录规范" class="headerlink" title="(二) Vue 项目目录规范"></a>(二) Vue 项目目录规范</h3><h4 id="2-2-1-基础"><a href="#2-2-1-基础" class="headerlink" title="2.2.1 基础"></a>2.2.1 基础</h4><ul><li>Vue 项目中的所有命名必须与后端命名保持一致。</li><li>比如权限：后端 privilege，前端无论是 router、store、api 等都必须使用 privilege 单词！</li></ul><h4 id="2-2-2-使用-Vue-CLI-脚手架"><a href="#2-2-2-使用-Vue-CLI-脚手架" class="headerlink" title="2.2.2 使用 Vue CLI 脚手架"></a>2.2.2 使用 Vue CLI 脚手架</h4><ul><li>使用 Vue CLI 3 来初始化项目，项目名按照上述命名规范命名。</li></ul><h4 id="2-2-3-目录说明"><a href="#2-2-3-目录说明" class="headerlink" title="2.2.3 目录说明"></a>2.2.3 目录说明</h4><ul><li>目录名按照上述命名规范，其中 components 组件使用大写驼峰命名，其余目录（除 components 组件目录外）使用 kebab-case 命名。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">src                               源码目录</span><br><span class="line">|-- api                              所有 API 接口</span><br><span class="line">|-- assets                           静态资源，包括 images、icons、styles 等</span><br><span class="line">|-- components                       公共组件</span><br><span class="line">|-- config                           配置信息</span><br><span class="line">|-- constants                        常量信息，项目中的所有枚举、全局常量等</span><br><span class="line">|-- directives                       自定义指令</span><br><span class="line">|-- filters                          过滤器，全局工具</span><br><span class="line">|-- datas                            模拟数据，临时存放</span><br><span class="line">|-- lib                              外部引用的插件存放及修改文件</span><br><span class="line">|-- mock                             模拟接口，临时存放</span><br><span class="line">|-- plugins                          插件，全局使用</span><br><span class="line">|-- router                           路由，统一管理</span><br><span class="line">|-- store                            Vuex，统一管理</span><br><span class="line">|-- themes                           自定义样式主题</span><br><span class="line">|-- views                            视图目录</span><br><span class="line">|   |-- role                             role 模块</span><br><span class="line">|   |-- |-- role-list.vue                    role 列表页面</span><br><span class="line">|   |-- |-- role-add.vue                     role 新建页面</span><br><span class="line">|   |-- |-- role-update.vue                  role 更新页面</span><br><span class="line">|   |-- |-- index.less                      role 模块样式</span><br><span class="line">|   |-- |-- components                      role 模块通用组件文件夹</span><br><span class="line">|   |-- employee                         employee 模块</span><br></pre></td></tr></table></figure><h5 id="1-api-目录"><a href="#1-api-目录" class="headerlink" title="1) api 目录"></a>1) api 目录</h5><ul><li><p>文件和变量命名要与后端保持一致。</p></li><li><p>此目录对应后端的 API 接口，按照每个 controller 一个 API JS 文件的方式组织。如果项目较大，可以根据业务进行子目录划分，但与后端保持一致。</p></li><li><p>API 文件中的方法名应与后端 API URL 尽量保持语义一致。</p></li><li><p>每个 API 方法都应添加注释，注释与后端的 Swagger 文档保持一致。</p></li></ul><p>正例：</p><p>后端 URL：EmployeeController.java</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/employee/add</span><br><span class="line">/employee/delete/&#123;id&#125;</span><br><span class="line">/employee/update</span><br></pre></td></tr></table></figure><p>前端：employee.js</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">addEmployee: (data) =&gt; &#123;</span><br><span class="line">  return postAxios(&#x27;/employee/add&#x27;, data)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">updateEmployee: (data) =&gt; &#123;</span><br><span class="line">  return postAxios(&#x27;/employee/update&#x27;, data)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">deleteEmployee: (employeeId) =&gt; &#123;</span><br><span class="line">  return postAxios(&#x27;/employee/delete/&#x27; + employeeId)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h5 id="2-assets-目录"><a href="#2-assets-目录" class="headerlink" title="2) assets 目录"></a>2) assets 目录</h5><ul><li>assets 目录存放静态资源，包括 images、styles、icons 等静态资源，静态资源命名格式为 kebab-case。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">|assets</span><br><span class="line">|-- icons</span><br><span class="line">|-- images</span><br><span class="line">|   |-- background-color.png</span><br><span class="line">|   |-- upload-header.png</span><br><span class="line">|-- styles</span><br></pre></td></tr></table></figure><h5 id="3-components-目录"><a href="#3-components-目录" class="headerlink" title="3) components 目录"></a>3) components 目录</h5><ul><li>此目录按组件进行目录划分，目录命名为 KebabCase，组件命名规则也为 KebabCase。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">|components</span><br><span class="line">|-- error-log</span><br><span class="line">|   |-- index.vue</span><br><span class="line">|   |-- index.less</span><br><span class="line">|-- markdown-editor</span><br><span class="line">|   |-- index.vue</span><br><span class="line">|   |-- index.js</span><br><span class="line">|-- kebab-case</span><br></pre></td></tr></table></figure><h5 id="4-constants-目录"><a href="#4-constants-目录" class="headerlink" title="4) constants 目录"></a>4) constants 目录</h5><ul><li>此目录存放项目中的所有常量。如果常量在 Vue 中使用，请使用 Vue-enum<br>插件（<a href="https://xie.infoq.cn/link?target=https://www.npmjs.com/package/vue-enum">https://www.npmjs.com/package/vue-enum</a>）。</li></ul><p>目录结构：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|constants</span><br><span class="line">|-- index.js</span><br><span class="line">|-- role.js</span><br><span class="line">|-- employee.js</span><br></pre></td></tr></table></figure><p>示例：employee.js</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">export const EMPLOYEE_STATUS = &#123;</span><br><span class="line">  NORMAL: &#123;</span><br><span class="line">    value: 1,</span><br><span class="line">    desc: &#x27;正常&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  DISABLED: &#123;</span><br><span class="line">    value: 1,</span><br><span class="line">    desc: &#x27;禁用&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  DELETED: &#123;</span><br><span class="line">    value: 2,</span><br><span class="line">    desc: &#x27;已删除&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export const EMPLOYEE_ACCOUNT_TYPE = &#123;</span><br><span class="line">  QQ: &#123;</span><br><span class="line">    value: 1,</span><br><span class="line">    desc: &#x27;QQ登录&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  WECHAT: &#123;</span><br><span class="line">    value: 2,</span><br><span class="line">    desc: &#x27;微信登录&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  DINGDING: &#123;</span><br><span class="line">    value: 3,</span><br><span class="line">    desc: &#x27;钉钉登录&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  USERNAME: &#123;</span><br><span class="line">    value: 4,</span><br><span class="line">    desc: &#x27;用户名密码登录&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  EMPLOYEE_STATUS,</span><br><span class="line">  EMPLOYEE_ACCOUNT_TYPE</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="5-router-与-store-目录"><a href="#5-router-与-store-目录" class="headerlink" title="5) router 与 store 目录"></a>5) router 与 store 目录</h5><ul><li><p>这两个目录必须根据业务进行拆分，不能放在一个 JS 文件中。</p></li><li><p>router 应与 views 目录的结构保持一致。</p></li><li><p>store 按业务进行拆分为不同的 JS 文件。</p></li></ul><h5 id="6-views-目录"><a href="#6-views-目录" class="headerlink" title="6) views 目录"></a>6) views 目录</h5><ul><li><p>命名要与后端、router、api 等保持一致。</p></li><li><p>components 中的组件应使用 PascalCase 规则。</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">|-- views                            视图目录</span><br><span class="line">|   |-- role                             role 模块</span><br><span class="line">|   |   |-- role-list.vue                    role 列表页面</span><br><span class="line">|   |   |-- role-add.vue                     role 新建页面</span><br><span class="line">|   |   |-- role-update.vue                  role 更新页面</span><br><span class="line">|   |   |-- index.less                      role 模块样式</span><br><span class="line">|   |   |-- components                      role 模块通用组件文件夹</span><br><span class="line">|   |   |   |-- role-header.vue                        role 头部组件</span><br><span class="line">|   |   |   |-- role-modal.vue                         role 弹出框组件</span><br><span class="line">|   |-- employee                         employee 模块</span><br><span class="line">|   |-- behavior-log                      行为日志 log 模块</span><br><span class="line">|   |-- code-generator                    代码生成器模块</span><br></pre></td></tr></table></figure><h4 id="2-2-4-注释说明"><a href="#2-2-4-注释说明" class="headerlink" title="2.2.4 注释说明"></a>2.2.4 注释说明</h4><ul><li>需要添加注释的地方包括：<ul><li>公共组件的使用说明</li><li>api 目录中的接口 JS 文件必须添加注释</li><li>store 中的 state、mutation、action 等必须添加注释</li><li>Vue 文件中的 template 必须添加注释，如果文件较大，可以添加 start 和 end 注释</li><li>Vue 文件的 methods，每个 method 必须添加注释</li><li>Vue 文件的 data，非常见单词必须添加注释</li></ul></li></ul><h4 id="2-2-5-其他"><a href="#2-2-5-其他" class="headerlink" title="2.2.5 其他"></a>2.2.5 其他</h4><h5 id="1-尽量避免手动操作-DOM"><a href="#1-尽量避免手动操作-DOM" class="headerlink" title="1) 尽量避免手动操作 DOM"></a>1) 尽量避免手动操作 DOM</h5><p>由于使用了 Vue 框架，所以在项目开发中尽量使用 Vue 的数据驱动更新 DOM，避免（除非万不得已）手动操作 DOM，包括增删改 DOM<br>元素、更改样式、添加事件等。</p><h5 id="2-删除无用代码"><a href="#2-删除无用代码" class="headerlink" title="2) 删除无用代码"></a>2) 删除无用代码</h5><p>由于使用了 Git&#x2F;SVN 等版本控制工具，必须及时删除无用代码，例如调试时的 console 语句、废弃的功能代码等。</p><p>规范的目的是为了编写高质量的代码，让团队成员每天都有愉悦的心情，让大家在一起感到快乐。</p><blockquote><p>参考：<a href="https://xie.infoq.cn/article/2048f2116f8df30115fca44c1%E3%80%82">https://xie.infoq.cn/article/2048f2116f8df30115fca44c1。</a></p></blockquote><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 开发规范 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发规范 </tag>
            
            <tag> 前端开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【开发规范系列】（三）代码提交规范</title>
      <link href="/8e340800.html"/>
      <url>/8e340800.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/">系列文章地址</a></p><hr><h2 id="规范"><a href="#规范" class="headerlink" title="规范"></a>规范</h2><ol><li>切忌一次大量提交代码，每次fix或feat一个功能即需要提交到本地，可以不提交到远程</li><li>提交代码前必须先拉代码</li><li>一般情况下<strong>不得强制提交</strong></li><li>一个新功能拉取单独的分支开发，开发完后再合并到主分支上</li><li>禁止无意义说明提交</li><li>通常需要每天下班前推送本地仓库到远程仓库中</li></ol><h2 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h2><p>每次提交代码到Git仓库时，都需要写commit message。通常情况下，commit message应该清晰明了，说明本次提交的目的和具体操作等。然而，在日常开发中，开发者们提交的commit<br>message千差万别，中英文混用，导致后续代码维护成本很高，有时候甚至自己都不知道修复的是什么问题。因此，为了解决这些问题，我们希望通过一种方式来监控用户的git<br>commit message，以提高代码规范，提高开发效率。</p><h2 id="二、约定"><a href="#二、约定" class="headerlink" title="二、约定"></a>二、约定</h2><p>我们要求所有项目的Commit Log都遵循一个精确的格式，以增加可读性，便于查看变更历史，并养成良好的git使用习惯。我们将这个规范作为git<br>hook的commit-msg和pre-receive执行，不符合规范的commit无法提交。全面执行后，可以自动执行以下操作：</p><ul><li>平台工具包可以直接根据commit log生成每次版本的changelog。</li><li>上线申请系统可以自动附带本次上线的commit log。</li><li>要求每次提交都认真思考，保持commit log的整洁性，每次commit都要具有局部完整性。</li></ul><h2 id="三、Commit-Log-Format"><a href="#三、Commit-Log-Format" class="headerlink" title="三、Commit Log Format"></a>三、Commit Log Format</h2><p>Commit Log包含三个部分：header、body、footer。其中，header是必需的，格式固定，body在必要时用于详细解释变更。</p><p>commit log格式如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;types&gt;(&lt;scopes&gt;): &lt;subject&gt;</span><br><span class="line"></span><br><span class="line">&lt;空行&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;空行&gt;</span><br><span class="line"></span><br><span class="line">&lt;footer&gt;</span><br></pre></td></tr></table></figure><p>注意：冒号后面必须有一个小写空格，types和scopes可以是多个，中间用逗号分隔。</p><p>举例：</p><ol><li>仅header：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fix(service,dao): 修改产品类型时不过滤产品Type</span><br><span class="line"></span><br><span class="line">仅header，涉及模块较多用*代替</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">refactor(*): 修改DTO模型前缀</span><br><span class="line"></span><br><span class="line">有header和body</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fix(language-service): Improve signature selection for pipes with args</span><br><span class="line"></span><br><span class="line">Pipes with arguments like `slice:0` or `slice:0:1` should not produce</span><br><span class="line"></span><br><span class="line">diagnostic errors.</span><br><span class="line"></span><br><span class="line">有header、body、footer</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">func(core,logic): 添加礼包审核</span><br><span class="line"></span><br><span class="line">添加商品编辑审核状态和回调，blablablabla</span><br><span class="line"></span><br><span class="line">PRD：https://km.sankuai.com/page/194127085</span><br></pre></td></tr></table></figure><h3 id="1、Type"><a href="#1、Type" class="headerlink" title="1、Type"></a>1、Type</h3><p>英文，小写。必须是以下中的一个或多个：</p><ul><li>func: function，小功能。注意：feat改成func了，避免大家按feature这个大粒度来提交，期望是按小功能点分批提交，另外避免跟feature分支规范混淆。</li><li>fix: bug修复，包括编码过程中的逻辑修复，不特指线上bug修复。</li><li>refactor: 重构代码，非bug修复和性能优化，包括编码过程中的代码结构调整，不特指重构项目。</li><li>impr: improvement，小的代码设计改进。</li><li>perf: 性能优化。</li><li>apm: 仅监控打点、异常日志处理相关。</li><li>chore: 无关紧要的改动，例如删除用不到的注解、调整日志内容等。</li><li>jvm: 仅JVM参数变更。</li><li>pom: 仅依赖和版本变化。</li><li>conf: 仅配置变化，Spring配置、properties文件。</li><li>docs: 仅文档变更。</li><li>style: 代码格式调整，如import清理，代码格式化。</li><li>test: 单测和自动化case相关。</li><li>typo: 修复小的拼写错误。</li><li>wip: work in progress，少用，用于开发中的不完整提交，新工程开始时偶尔使用。</li></ul><h3 id="2、Scope"><a href="#2、Scope" class="headerlink" title="2、Scope"></a>2、Scope</h3><p>英文，小写。表示变更的包或模块范围，可以是多个组合，如果涉及范围较大，可以用*代替。各服务可以自行定义，组内同学可以轻易理解。通用scope列表如下：</p><ul><li>dto: dto结构变化。</li><li>core: core包。</li><li>service: service层代码。</li><li>dao: dao层代码。</li><li>sql: sql代码变更。</li></ul><p>除了上述通用字段外，各方向可以自行定义关键字。例如，以下是商品平台中定义的字段：</p><ul><li>price: 价格相关。</li><li>stock: 库存相关。</li><li>product: 商品相关。</li><li>idl: IDL文件变化。</li></ul><h3 id="3、Subject"><a href="#3、Subject" class="headerlink" title="3、Subject"></a>3、Subject</h3><p>中文。简要描述修改，结尾不要有句号。</p><h3 id="4、Body"><a href="#4、Body" class="headerlink" title="4、Body"></a>4、Body</h3><p>中文。修改的背景（为什么做这次修改），说明修改逻辑。</p><h3 id="5、Footer"><a href="#5、Footer" class="headerlink" title="5、Footer"></a>5、Footer</h3><p>中文。可以放置需求wiki或task链接，对以后其他同学查看很有用。</p><h1 id="四、使用插件生成日志"><a href="#四、使用插件生成日志" class="headerlink" title="四、使用插件生成日志"></a>四、使用插件生成日志</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/14151883891100.png" title="commitizen" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/14151883891100.png" alt="commitizen"></a></p><p>安装该插件后，在提交页面会有一个按钮</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/14175704484600.png" title="commitizen button" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/14175704484600.png" alt="commitizen button"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/14351329253100.png" title="commitizen prompt" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/14351329253100.png" alt="commitizen prompt"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/14376424535900.png" title="commitizen example" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/14376424535900.png" alt="commitizen example"></a></p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 开发规范 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发规范 </tag>
            
            <tag> 代码提交规范 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【深入解读Redis系列】Redis系列（五）：切片集群详解</title>
      <link href="/750dce7c.html"/>
      <url>/750dce7c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p><a href="https://blog.zysicyj.top/">首发博客地址</a></p><p><a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">面试题手册</a></p><p><a href="https://blog.zysicyj.top/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0/Redis/">系列文章地址</a></p><hr><h1 id="如果Redis内存很大怎么办？"><a href="#如果Redis内存很大怎么办？" class="headerlink" title="如果Redis内存很大怎么办？"></a>如果Redis内存很大怎么办？</h1><p>假设一台32G内存的服务器部署了一个Redis，内存占用了25G，会发生什么？</p><p>此时最明显的表现是Redis的响应变慢，甚至非常慢。</p><p>这是因为RDB快照是通过fork子线程来实现的，fork操作时间和Redis数据量成正相关，而fork时会阻塞主线程。</p><p>随着数据量的增加，fork耗时也会增加。所以，当对25G的文件进行fork时，Redis的响应就会变慢。</p><p>针对这种大数据量的存储，有什么其他的方案呢？</p><h1 id="什么是切片集群？"><a href="#什么是切片集群？" class="headerlink" title="什么是切片集群？"></a>什么是切片集群？</h1><p>Redis分片集群是一种将Redis数据库分散到多个节点上的方式，以提供更高的性能和可伸缩性。在分片集群中，数据被分为多个片段，每个片段存储在不同的节点上，这些节点可以是物理服务器或虚拟服务器。</p><p>Redis分片集群的主要目的是将数据分布在多个节点上，以便可以通过并行处理来提高读写吞吐量。每个节点负责处理一部分数据，并且在需要时可以进行扩展以适应更多的负载。此外，分片集群还提供了故障容错和高可用性的功能，即使其中一个节点发生故障，其他节点仍然可以继续工作。</p><p>比如我们将25GB的数据平均分成5份（当然，也可以不做均分），使用5个实例来保存，每个实例只需要保存5GB的数据。如下图所示：</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/1126545260900.png" title="切片集群架构图" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/1126545260900.png" alt="切片集群架构图"></a></p><p>这样，每个实例只有5GB内存，执行fork的时候就快得多，不会阻塞主线程。</p><p>实际业务中，大数据量通常是无法避免的。而切片集群，就是一个非常好的方案。</p><h1 id="如何保存更多数据？"><a href="#如何保存更多数据？" class="headerlink" title="如何保存更多数据？"></a>如何保存更多数据？</h1><p>我们可以纵向扩展也可以横向扩展</p><h2 id="纵向扩展"><a href="#纵向扩展" class="headerlink" title="纵向扩展"></a>纵向扩展</h2><p>即升级单个Redis实例的配置，如内存、硬盘、带宽、CPU等</p><h2 id="横向扩展"><a href="#横向扩展" class="headerlink" title="横向扩展"></a>横向扩展</h2><p>即增加Redis实例的个数</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/1796725224800.png" title="纵向扩展和横向扩展对比图" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/1796725224800.png" alt="纵向扩展和横向扩展对比图"></a></p><p>那么，纵向扩展和横向扩展的区别是什么呢？</p><p>纵向扩展（Scale Up）和横向扩展（Scale Out）是常见的两种扩展方式，用于提升系统的性能和处理能力。它们有着不同的特点和适用场景。</p><ol><li>纵向扩展：<br>纵向扩展是通过增加单个节点的硬件资源来提升系统性能。具体来说，是增加服务器的处理能力、存储容量或内存大小等。这可以通过升级服务器的CPU、内存、硬盘等硬件设备来实现。</li></ol><p>优点：</p><ul><li>简单方便：纵向扩展只需要升级现有的服务器，不需要进行系统的重构和数据迁移。</li><li>成本相对较低：相对于横向扩展，纵向扩展的成本通常更低，因为只需要购买更高配置的硬件设备。</li></ul><p>缺点：</p><ul><li>有限的扩展能力：纵向扩展的扩展能力受限于单个节点的硬件资源，无法无限扩展。</li><li>单点故障：如果纵向扩展的节点发生故障，整个系统的可用性将会受到影响。</li></ul><p>适用场景：</p><ul><li>对于单个节点负载较高、需要处理大量并发请求的应用场景，纵向扩展可以提供更好的性能和响应能力。</li><li>当数据集较小，可以被一个节点的硬件资源容纳时，纵向扩展是一种经济有效的方式。</li></ul><ol start="2"><li>横向扩展：<br>横向扩展是通过增加多个节点来提升系统的性能和处理能力。每个节点可以是一台独立的服务器或者虚拟机。数据在多个节点上进行分片存储，各个节点共同处理请求，并共享负载。</li></ol><p>优点：</p><ul><li>无限扩展能力：横向扩展可以通过增加更多节点来实现无限的扩展能力，可以根据需求动态添加或移除节点。</li><li>高可用性：由于数据分布在多个节点上，即使其中一个节点发生故障，其他节点仍然可以继续工作，提供高可用性。</li></ul><p>缺点：</p><ul><li>复杂性增加：横向扩展需要进行数据分片和负载均衡的设计和实现，增加了系统的复杂性。</li><li>成本较高：相对于纵向扩展，横向扩展需要购买更多的服务器或虚拟机，成本较高。</li></ul><p>适用场景：</p><ul><li>对于需要处理大量并发请求、数据集较大的应用场景，横向扩展可以提供更好的性能和可伸缩性。</li><li>当需要保证系统的高可用性和故障容错能力时，横向扩展是一种可行的方案。</li></ul><p>纵向扩展和横向扩展是两种不同的扩展方式，各自有着不同的优点和适用场景。在实际应用中，应根据具体需求和限制，选择合适的扩展方式来提升系统性能和可伸缩性。</p><p><strong>在面向百万、千万级别的用户规模时，横向扩展的Redis切片集群会是一个非常好的选择。</strong></p><h1 id="Redis是如何做分片的"><a href="#Redis是如何做分片的" class="headerlink" title="Redis是如何做分片的"></a>Redis是如何做分片的</h1><p>Redis通过一种称为哈希槽（hash slot）的机制来实现分片集群。哈希槽将整个数据集分成固定数量的槽，每个槽都有一个唯一的编号，通常是从0到16383。</p><p>在Redis分片集群中，有多个节点（主节点和从节点），每个节点负责存储其中一部分的槽数据。节点之间通过集群间通信协议进行数据的交互和同步。</p><p>当一个客户端发送一个命令到Redis分片集群时，集群会根据命令涉及的键的哈希值将命令路由到正确的槽上。这个槽所在的节点负责处理这个命令并返回结果给客户端。</p><p>具体的分片过程如下：</p><ol><li>客户端发送命令到Redis分片集群中的任意一个节点。</li><li>节点根据命令涉及的键的哈希值计算出对应的槽号。</li><li>节点根据槽号确定该槽所在的节点，并将命令路由到该节点。</li><li>该节点处理命令并返回结果给客户端。</li></ol><p>当节点加入或离开集群时，Redis分片集群会自动进行数据的重新分片和迁移，以保持数据的均衡和高可用性。具体的过程如下：</p><ol><li>当一个新节点加入集群时，集群会将一部分槽从现有节点迁移到新节点上，以平衡数据负载。</li><li>当一个节点离开集群时，集群会将该节点负责的槽迁移到其他可用节点上，以保证数据的可用性。</li></ol><p>通过哈希槽的机制，Redis分片集群实现了数据的分片和自动迁移，以提供高可用性、扩展性和容错性。同时，节点间的通信和数据同步保证了集群的一致性和可用性。</p><h1 id="详细说说哈希槽"><a href="#详细说说哈希槽" class="headerlink" title="详细说说哈希槽"></a>详细说说哈希槽</h1><p>Redis哈希槽是Redis集群中用于分片数据的一种机制。哈希槽的概念可以简单理解为一种数据分片的方式，将所有的数据分散存储在多个节点上，以实现数据的高可用和扩展性。</p><p>Redis集群中共有16384个哈希槽，每个槽可以存储一个键值对。当有新的键值对需要存储时，Redis使用一致性哈希算法将键映射到一个哈希槽中。每个Redis节点负责管理一部分哈希槽，节点之间通过Gossip协议来进行信息交换，以保证集群的一致性。</p><p>在Redis集群中，当一个节点宕机或者新增加一个节点时，哈希槽会重新分配。集群会自动将宕机节点上的槽重新分配给其他节点，并且保证每个节点分配的槽数尽量均等。这样可以保证数据的高可用性和负载均衡。</p><p>使用Redis哈希槽的好处是可以方便地扩展集群的容量，当数据量增大时，可以通过增加节点来分担数据的存储压力。同时，由于哈希槽的分配是自动的，所以对于应用程序而言是透明的，不需要额外的逻辑来处理数据分片。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/2427759491400.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/2427759491400.png"></a></p><h1 id="手动分配哈希槽"><a href="#手动分配哈希槽" class="headerlink" title="手动分配哈希槽"></a>手动分配哈希槽</h1><p>示意图中的切片集群一共有3个实例，假设有5个哈希槽，我们可以通过下面的命令手动分配哈希槽：实例1保存哈希槽0和1，实例2保存哈希槽2和3，实例3保存哈希槽4。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h 172.16.19.3 –p 6379 cluster addslots 0,1</span><br><span class="line">redis-cli -h 172.16.19.4 –p 6379 cluster addslots 2,3</span><br><span class="line">redis-cli -h 172.16.19.5 –p 6379 cluster addslots 4</span><br></pre></td></tr></table></figure><p>在集群运行的过程中，key1和key2计算完CRC16值后，对哈希槽总个数5取模，再根据各自的模数结果，就可以被映射到对应的实例1和实例3上了。</p><blockquote><p>在手动分配哈希槽时，需要把16384个槽都分配完，否则Redis集群无法正常工作。</p></blockquote><h1 id="客户端如何定位数据？"><a href="#客户端如何定位数据？" class="headerlink" title="客户端如何定位数据？"></a>客户端如何定位数据？</h1><p>在Redis集群中，客户端定位数据的过程如下：</p><ol><li>客户端根据键使用一致性哈希算法（Consistent Hashing）计算哈希值。</li><li>根据哈希值，客户端将键映射到某个哈希槽。</li><li>客户端向集群的其中一个节点发送命令请求。</li><li>接收到请求的节点根据哈希槽的分配信息，确定哪个节点负责管理该哈希槽。</li><li>负责该哈希槽的节点将命令请求转发给对应的数据节点。</li><li>数据节点执行命令，将结果返回给负责该哈希槽的节点。</li><li>负责该哈希槽的节点将结果返回给客户端。</li></ol><p>通过这个过程，客户端可以定位到存储在Redis集群中的数据，并且可以与集群进行交互。这种方式使得客户端可以直接与任意一个节点进行通信，而不需要知道具体的数据分布和节点拓扑。</p><p>一致性哈希算法是用来解决数据分片和负载均衡的常用方法，它可以将数据均匀地分布到不同的节点上，避免某个节点负载过高。同时，当节点发生故障或者新增节点时，一致性哈希算法可以最小化数据的迁移量，使得集群可以快速调整和恢复。</p><p>需要注意的是，Redis集群的客户端不需要手动实现一致性哈希算法，因为该算法已经由Redis集群内部实现。客户端只需要使用对应的库或驱动程序，如<code>redis-py-cluster</code><br>库，来连接Redis集群，并且直接使用普通的Redis命令进行数据操作。库会自动处理数据的定位和节点间的转发。</p><h1 id="Moved重定向命令"><a href="#Moved重定向命令" class="headerlink" title="Moved重定向命令"></a>Moved重定向命令</h1><p>在Redis集群中，当客户端向一个节点发送命令请求时，如果该节点不负责处理该命令所涉及的哈希槽，它会返回一个MOVED重定向错误。</p><p>MOVED重定向错误包含了正确的节点信息，告诉客户端应该向哪个节点重新发送命令。客户端可以根据MOVED错误中的信息，更新自己的节点映射表，然后重新发送命令到正确的节点。</p><p>以下是一个使用Python的redis-py库处理MOVED重定向错误的示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建Redis集群连接</span></span><br><span class="line">cluster = redis.RedisCluster(host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="number">7000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 存储数据</span></span><br><span class="line">cluster.<span class="built_in">set</span>(<span class="string">&#x27;key1&#x27;</span>, <span class="string">&#x27;value1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取数据</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    value = cluster.get(<span class="string">&#x27;key1&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(value)</span><br><span class="line"><span class="keyword">except</span> redis.exceptions.RedisClusterError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(e, redis.exceptions.ResponseError) <span class="keyword">and</span> e.args[<span class="number">0</span>].startswith(<span class="string">&#x27;MOVED&#x27;</span>):</span><br><span class="line">        <span class="comment"># 解析MOVED错误信息</span></span><br><span class="line">        _, slot, addr = e.args[<span class="number">0</span>].split()</span><br><span class="line">        host, port = addr.rsplit(<span class="string">&#x27;:&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">        <span class="comment"># 更新节点映射表</span></span><br><span class="line">        cluster.connection_pool.nodes.set_node(host, <span class="built_in">int</span>(port))</span><br><span class="line">        <span class="comment"># 重新发送命令</span></span><br><span class="line">        value = cluster.get(<span class="string">&#x27;key1&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(value)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭连接</span></span><br><span class="line">cluster.close()</span><br></pre></td></tr></table></figure><p>在以上示例中，如果客户端收到一个MOVED错误，它会解析错误信息，获取正确的节点地址，并更新节点映射表。然后，客户端可以重新发送命令到正确的节点进行数据操作。</p><p>需要注意的是，MOVED重定向错误只会在Redis集群模式下发生，单机模式不会出现该错误。因此，只有在使用Redis集群时，才需要处理MOVED重定向错误。在实际开发中，可以使用相应的库或驱动程序来自动处理MOVED错误，而无需手动编写处理逻辑。</p><h1 id="ASK命令"><a href="#ASK命令" class="headerlink" title="ASK命令"></a>ASK命令</h1><p>在Redis集群中，当客户端向一个节点发送一个不可处理的命令时，节点会返回一个ASK错误，指示客户端应该向指定的节点发送命令。客户端可以根据ASK错误中的信息，更新自己的节点映射表，并将命令发送到正确的节点上。</p><p>以下是一个使用Python的redis-py库处理ASK命令的示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建Redis集群连接</span></span><br><span class="line">cluster = redis.RedisCluster(host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="number">7000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 存储数据</span></span><br><span class="line">cluster.<span class="built_in">set</span>(<span class="string">&#x27;key1&#x27;</span>, <span class="string">&#x27;value1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取数据</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    value = cluster.get(<span class="string">&#x27;key1&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(value)</span><br><span class="line"><span class="keyword">except</span> redis.exceptions.RedisClusterError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(e, redis.exceptions.ResponseError) <span class="keyword">and</span> e.args[<span class="number">0</span>].startswith(<span class="string">&#x27;ASK&#x27;</span>):</span><br><span class="line">        <span class="comment"># 解析ASK错误信息</span></span><br><span class="line">        _, slot, addr = e.args[<span class="number">0</span>].split()</span><br><span class="line">        host, port = addr.rsplit(<span class="string">&#x27;:&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">        <span class="comment"># 更新节点映射表</span></span><br><span class="line">        cluster.connection_pool.nodes.set_node(host, <span class="built_in">int</span>(port))</span><br><span class="line">        <span class="comment"># 重新发送命令</span></span><br><span class="line">        value = cluster.get(<span class="string">&#x27;key1&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(value)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭连接</span></span><br><span class="line">cluster.close()</span><br></pre></td></tr></table></figure><p>在以上示例中，如果客户端收到一个ASK错误，它会解析错误信息，获取正确的节点地址，并更新节点映射表。然后，客户端可以重新发送命令到正确的节点进行数据操作。</p><p>需要注意的是，ASK命令只会在Redis集群模式下发生，单机模式不会出现该错误。因此，只有在使用Redis集群时，才需要处理ASK命令。在实际开发中，可以使用相应的库或驱动程序来自动处理ASK错误，而无需手动编写处理逻辑。</p><h1 id="举个例子"><a href="#举个例子" class="headerlink" title="举个例子"></a>举个例子</h1><p>可以看到，由于负载均衡，Slot 2 中的数据已经从实例 2 迁移到了实例 3，但是，客户端缓存仍然记录着“Slot 2 在实例 2”的信息，所以会给实例<br>2 发送命令。实例 2 给客户端返回一条 MOVED 命令，把 Slot 2 的最新位置（也就是在实例 3 上），返回给客户端，客户端就会再次向实例<br>3 发送请求，同时还会更新本地缓存，把 Slot 2 与实例的对应关系更新过来。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/2667132575500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/2667132575500.png"></a></p><p>需要注意的是，在上图中，当客户端给实例 2 发送命令时，Slot 2 中的数据已经全部迁移到了实例 3。在实际应用时，如果 Slot 2<br>中的数据比较多，就可能会出现一种情况：客户端向实例 2 发送请求，但此时，Slot 2 中的数据只有一部分迁移到了实例<br>3，还有部分数据没有迁移。在这种迁移部分完成的情况下，客户端就会收到一条 ASK 报错信息，如下所示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET hello:key</span><br><span class="line">(error) ASK 13320 172.16.19.5:6379</span><br></pre></td></tr></table></figure><p>这个结果中的 ASK 命令就表示，客户端请求的键值对所在的哈希槽 13320，在 172.16.19.5 这个实例上，但是这个哈希槽正在迁移。此时，客户端需要先给<br>172.16.19.5 这个实例发送一个 ASKING 命令。这个命令的意思是，让这个实例允许执行客户端接下来发送的命令。然后，客户端再向这个实例发送<br>GET 命令，以读取数据。</p><h1 id="ASK命令详解"><a href="#ASK命令详解" class="headerlink" title="ASK命令详解"></a>ASK命令详解</h1><p>在下图中，Slot 2 正在从实例 2 往实例 3 迁移，key1 和 key2 已经迁移过去，key3 和 key4 还在实例 2。客户端向实例 2 请求 key2<br>后，就会收到实例 2 返回的 ASK 命令。</p><p>ASK 命令表示两层含义：第一，表明 Slot 数据还在迁移中；第二，ASK 命令把客户端所请求数据的最新实例地址返回给客户端，此时，客户端需要给实例<br>3 发送 ASKING 命令，然后再发送操作命令。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/2785883782300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-30/2785883782300.png"></a></p><p>和 MOVED 命令不同，<strong>ASK 命令并不会更新客户端缓存的哈希槽分配信息</strong>。所以，在上图中，如果客户端再次请求 Slot 2 中的数据，它还是会给实例<br>2 发送请求。这也就是说，ASK 命令的作用只是让客户端能给新实例发送一次请求，而不像 MOVED 命令那样，会更改本地缓存，让后续所有命令都发往新实例。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，面试手册正式推出啦，打造全网最全，最细面试题</p></blockquote><p>支持艾宾浩斯记忆，卡片式记忆</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-26/1091289280100.png"></a></p><p>还支持学习统计，轻松查看每天记忆了多少，学习情况，了如指掌</p><p>购买地址：<a href="https://store.amazingmemo.com/chapterDetail/1685324709017001">https://store.amazingmemo.com/chapterDetail/1685324709017001</a></p><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 深入理解Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> 切片集群 </tag>
            
            <tag> 缓存 </tag>
            
            <tag> 分片 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【FLAG】老婆和我要减肥啦</title>
      <link href="/ddbf1a60.html"/>
      <url>/ddbf1a60.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="首发博客地址"><a href="#首发博客地址" class="headerlink" title="首发博客地址"></a>首发博客地址</h1><p><a href="https://blog.zysicyj.top/">https://blog.zysicyj.top/</a></p><p>老婆目标孕前体重，现在106，要减到90<br>我目标也是<strong>孕前</strong>体重，现在185，要减到140</p><p>不要怀疑啊。。结婚一年不到，涨了40多斤</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 八月 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>如何查看windows冲突的快捷键【未完】</title>
      <link href="/6978c061.html"/>
      <url>/6978c061.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="首发博客地址"><a href="#首发博客地址" class="headerlink" title="首发博客地址"></a>首发博客地址</h1><p><a href="https://blog.zysicyj.top/">https://blog.zysicyj.top/</a></p><h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p><a href="https://github.com/BlackINT3/OpenArk/releases">官网下载</a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-28/24473982253300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-28/24473982253300.png"></a></p><p><a href="">免费不限速下载</a><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-28/24629599457800.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-28/24629599457800.png"></a></p><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><p>一进来是这样子的</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-28/24699431276900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-28/24699431276900.png"></a></p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>今天去看看我姐（老婆）新开的超市</title>
      <link href="/648fb133.html"/>
      <url>/648fb133.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="首发博客地址"><a href="#首发博客地址" class="headerlink" title="首发博客地址"></a>首发博客地址</h1><p><a href="https://blog.zysicyj.top/">https://blog.zysicyj.top/</a></p><h1 id="1"><a href="#1" class="headerlink" title="1"></a>1</h1><p>昨晚写博客到12点多，今天困死了，比较意外的是，早上爸爸没有叫我，今天早上是爸爸和小舅送的葡萄。</p><p>所以呢，今早睡得很晚，然后6点多才醒，睡得真舒服，平时5点左右就要起床啦！</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/4957977491000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/4957977491000.png"></a></p><h1 id="2"><a href="#2" class="headerlink" title="2"></a>2</h1><p>上午也没干啥，开车带老婆去太乙菜场旁边的小区交易一个二手玩具，就是下面这个啦。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/5350305964900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/5350305964900.png"></a></p><p>老婆说这个火车还能动，要不然就值20块钱，嘿嘿！</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/5242119028000.jpg" title="我们家宝宝还有姐姐家儿子" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/5242119028000.jpg" alt="我们家宝宝还有姐姐家儿子"></a></p><h1 id="3"><a href="#3" class="headerlink" title="3"></a>3</h1><p>玩具拿回来之后，老婆在葡萄园和我爸唠叨，我去给闺女买梨，闺女和老婆这两天好像是被我传染了。都咳嗽和头疼</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/5527271416300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/5527271416300.png"></a></p><p>我小舅前两天也被我传染了，昨天还不舒服呢，今天已经差不多啦，身体真棒</p><p>可惜哦，我回来的路上老婆说，我妈已经买好了，emm。。<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/5630901268000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/5630901268000.png"></a></p><h1 id="4"><a href="#4" class="headerlink" title="4"></a>4</h1><p>上午最后一件事呀，就是接表弟（小舅儿子）过来吃个饭，唠唠嗑。</p><p>他这不是要开学了嘛，昨天回学校的，学校离这里又近，只有三公里左右，我就开车去接过来了。</p><p>他是在南新大上的大学，专业是机器人，这个专业吧当时还是我选的。想上计科的，可惜分数差了一点。。emm</p><p>今年已经大四了，努力备战考研中，目标是本校研究生，加油哦，希望你能考研成功！</p><h1 id="5"><a href="#5" class="headerlink" title="5"></a>5</h1><p>之后呢，就是吃饭啦，今天的午饭成员有这么几个：</p><ul><li>爸爸</li><li>妈妈</li><li>老婆</li><li>小舅</li><li>表弟</li><li>我</li></ul><p>实际吃饭的是几个呢。。</p><ul><li>爸爸</li><li>妈妈</li><li>老婆（才吃过不饿）</li><li>小舅</li><li>表弟（在学校才吃过没多久）</li><li>我（才吃过。。但是我还是想吃呀。。emm）</li></ul><h1 id="6"><a href="#6" class="headerlink" title="6"></a>6</h1><p>吃完饭就送表弟到他学校了，然后我们就出发去姐姐正在装修的超市。还是挺远的哦，小区是《紫樾府》，在栖霞星景路1号。到那要四五十分钟呢。。</p><p>超市名字是《蛙仔便利店》</p><p>老婆说，这个名字是因为想做成连锁店，她二姐和大姐都是开超市的，也都是在栖霞。二姐租了一个门面，然后买了一个门市。大姐租了一个门面，都是开的超市，姐姐也是跟着她们干的。</p><h1 id="7"><a href="#7" class="headerlink" title="7"></a>7</h1><p>小区是新校区，超市门口的马路也还在施工中，还没弄完。姐姐说还得半年吧，断头路才能打通。好长时间呢。。</p><h1 id="8"><a href="#8" class="headerlink" title="8"></a>8</h1><p>我姐夫瘦不瘦，最近忙死了，然后更瘦了，之前就很瘦。店铺还在上货中，还有很多货都没上齐呢，好在二姐和大姐夫都很热情，这两天都来帮忙的，轻松不少。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7103603471200.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7103603471200.jpg"></a></p><h1 id="9"><a href="#9" class="headerlink" title="9"></a>9</h1><p>闲暇之余，翻看了CSDN，收到推送才发现写博客已经好久了</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7230259584600.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7230259584600.jpg"></a></p><h1 id="10"><a href="#10" class="headerlink" title="10"></a>10</h1><p>姐姐和姐夫为了省房租，目前是在超市二楼隔了一间房睡觉。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7277036051400.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7277036051400.jpg"></a></p><p>宝宝睡得很香</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7294610701500.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7294610701500.jpg"></a></p><h1 id="11"><a href="#11" class="headerlink" title="11"></a>11</h1><p>我在吃冷饮呢，这时来了个销售，给我25块钱，让我去看下房。。闲来无事，那咱就去看看</p><p>算了下两个户型价格，好像和高新差不多，新房价格比高新低不少，这个销售呀把咱高新说的好废哦，咱也不懂，咱也不敢说不是。</p><p>说咱高新那个外国语高新分校很垃圾，在南京都排不上号。说这个小区的金陵小学分校是南京第二梯队中的前排，感觉很厉害的样子。。</p><p>我印象有几个学校还是不错的吧。。咱也不敢说。。确实也不懂呢。。</p><p>说小区是三个地铁交汇处，这个看着还是不错的，已经通车了一个，明年再通车一个，还有一个说是明年开始建，也很快了。这个还是挺加分的</p><p>然后就是医院。。听了半天，好像也是没建呢，没问是不是三甲。。。</p><p>正在唠嗑呢，老婆打电话催我回去，好吧，那咱就有机会再聊，嘿嘿！</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7366032905200.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7366032905200.jpg"></a></p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7370924201700.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7370924201700.jpg"></a></p><h1 id="12"><a href="#12" class="headerlink" title="12"></a>12</h1><p>老婆买的必胜客的券都好几天了， 今天晚上虽然下暴雨啊，但是咱还是冒雨把它给用了，嘿嘿！</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7816447046300.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7816447046300.jpg"></a></p><p>必胜客吃的不多，随便选了两个口味的，味道是真不错呀，好吃！</p><p>老婆就吃了差不多半个，剩下的1个半加两瓶饮料咱都给吃啦，有点小撑哦。</p><p>PS：老婆头疼，不敢喝凉的。。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7801606478900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7801606478900.png"></a></p><h1 id="13"><a href="#13" class="headerlink" title="13"></a>13</h1><p>写完这篇文章，再发表出去，9点左右吧，准备睡觉啦，晚安，宝子们。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7954871233400.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/7954871233400.png"></a></p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 八月 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 早上 </tag>
            
            <tag> 葡萄 </tag>
            
            <tag> 二手玩具 </tag>
            
            <tag> 火车 </tag>
            
            <tag> 闺女 </tag>
            
            <tag> 梨 </tag>
            
            <tag> 超市 </tag>
            
            <tag> 紫樾府 </tag>
            
            <tag> 蛙仔便利店 </tag>
            
            <tag> 装修 </tag>
            
            <tag> 房租 </tag>
            
            <tag> 销售 </tag>
            
            <tag> 房子 </tag>
            
            <tag> 必胜客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>聊聊近况，一个字【累】</title>
      <link href="/71f4c8f5.html"/>
      <url>/71f4c8f5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="首发博客地址"><a href="#首发博客地址" class="headerlink" title="首发博客地址"></a>首发博客地址</h1><p><a href="https://blog.zysicyj.top/">https://blog.zysicyj.top/</a></p><h1 id="1"><a href="#1" class="headerlink" title="1"></a>1</h1><p>最近的生活状态真的很糟糕。我们家承包了二十亩的葡萄园，但只有我爸妈在忙活。今年还好我小舅在这边帮忙，否则我的时间就更加紧张了，写博客和学习都不敢想了。</p><p>今年即使有我小舅帮忙，我还是需要帮忙的，但是干的就不用那么多了。我现在主要是负责<strong>送葡萄</strong>和<strong>搬葡萄</strong>。</p><h1 id="2"><a href="#2" class="headerlink" title="2"></a>2</h1><p>这个活一般是工作日的早上5点多到6点多，偶尔会很早。我一般学习加上写博客都是12点左右睡觉，前两天就是连续两天早上3点就起来了，到葡萄地搬葡萄然后送货，眼都睁不开，然后回来还要打扫卫生，这个时候差不多8点半左右了，出发上班，从家到公司开车和骑车时间差不多，20分钟左右，整个累得不行。</p><p>一般送完葡萄差不多7点出头，偶尔会到8点，一天正常是1~2趟。</p><p>11点半中午下班，中午嘛因为老婆在家带孩子不容易，所以我每天中午基本都是回家的，当然饭我不做，一般是买饭带回去，然后有时间就休息一会，1点半左右去上班。</p><p>下午下班呢是下午6点，到家差不多是6点半，然后会帮忙搬葡萄。前两年我爸还有精力，自己搬就行了。现在我爸身体不好了，年纪也大了，已经搬不了了。爸妈把葡萄剪好了放框里面，然后我去地里面把葡萄带到家里，然后我就可以回家了。</p><p>到家之后呢，也没啥事了，唠唠嗑，给宝宝洗澡，我老婆也差不多睡觉了，老婆睡觉之后我就可以自由活动了。这个时候脑子早不灵光了，属于半懵状态，学习不太合适，这个时间一般是写博客或者看视频。</p><h1 id="3"><a href="#3" class="headerlink" title="3"></a>3</h1><p>不得不说，写博客真的很累。比如我写的Redis系列，即使借助了GPT辅助，一篇文章也要花大约2个小时左右的时间。写完之后要发博客，发到各个媒体平台上，这个时候一般都已经是深夜12点左右。写Redis的时候，最迟是凌晨1点多发的，😔</p><h1 id="4"><a href="#4" class="headerlink" title="4"></a>4</h1><p>写博客这件事，个人感觉一时热乎比较多，很难坚持下去。几年前我就开始写博客了，但是都是断断续续的，每次坚持的时间都很短，个把月算多的了。</p><p>虽然写的不多，但是形式上还是很丰富的。博客网站不知道搭建过多少个了，域名也换了三四个，腾讯云、阿里云服务器都买了好几个。不过今年年中的时候我都退掉了，现在公司都是内网开发，实在用不上。腾讯之前买了一年，后来又买了三年，退了一年，还是挺给力的。阿里的云数据库不给退，我也是买了三年的，然后慢慢等它明年到期吧。</p><p>博客皮肤，我还是喜欢Halo博客的Joe主题，真的很好看。现在我的博客是用Hexo搭建的，主题是Butterfly，我觉得还不错，不打算换了，太麻烦了。</p><h1 id="5"><a href="#5" class="headerlink" title="5"></a>5</h1><p>晚上太累了，学习肯定不合适。所以我选择在早上开车送葡萄的时候学习，我会听语音课程。我感觉效率非常高，比阅读效率高多了。当然，要全神贯注，否则效果就不理想。</p><p>关于学习的平台，主要是微信读书和极客时间。前几年我买了很多极客时间的课程，但还有很多没看。微信读书暂时不看了，时间不够。现在我主要优先考虑面试相关的知识，需要随时准备。</p><h1 id="6"><a href="#6" class="headerlink" title="6"></a>6</h1><p>接下来的计划呢，首先，最近确实忙得睡眠严重不足，更新频率就不那么快了。预计是等到葡萄卖完了，时间上会充裕一些，再排一排更新计划。</p><p>目前有几个系列在进行中：</p><h2 id="Redis系列"><a href="#Redis系列" class="headerlink" title="Redis系列"></a>Redis系列</h2><p>这个系列更新会比较慢，因为最近要做开发规范和架构设计，耽误了大约一周的时间。等这两天那块的工作完成后，这个系列就会继续保持更新。</p><h2 id="代码规范系列"><a href="#代码规范系列" class="headerlink" title="代码规范系列"></a>代码规范系列</h2><p>这个系列推出的原因比较简单，领导让我制定一个代码开发规范，所以我顺便整理了一下。现在也快结束了，争取明天完成。</p><h2 id="日记"><a href="#日记" class="headerlink" title="日记"></a>日记</h2><p>原本计划是每天更新一篇的，但实际上我觉得内容并不是很丰富，记与不记差别不大。所以我偶尔会更新，只有有内容了我才会进行更新。这个并不是我关注的重点，大部分的文章也是直接从我来导出的Markdown文件。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/106344977741400.png" title="我来上的日记" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-27/106344977741400.png" alt="我来上的日记"></a></p><p>日记是每天都会写的，只是现在有点懒，不够勤快，记得不多。关于我来日记以及模板的部分，后续我也会考虑出详细的教程，这里就不多赘述了。</p><h1 id="7"><a href="#7" class="headerlink" title="7"></a>7</h1><p>这么累，为什么还坚持呢？</p><p>对我来说，涨粉和阅读量是最大的动力。另外一个原因是我希望通过写作来提高自己的能力，加深对知识点的记忆和理解。</p><p>CSDN设置了粉丝可读之后，涨粉非常快，只是阅读量有点低，但差别不大。</p><p>微信上很难涨粉，有点愁。</p><h1 id="8"><a href="#8" class="headerlink" title="8"></a>8</h1><p>最近打算以录播的形式出教学视频，还没有具体的头绪，之后再看看吧。</p><h1 id="9"><a href="#9" class="headerlink" title="9"></a>9</h1><p>我真的想在B站升到三级，这样就能上传32G的视频了，现在只有8G，完全不够。emm…</p><p>大家可以帮我在B站关注一下吗？非常感谢大家。</p><p><a href="https://space.bilibili.com/258577429">https://space.bilibili.com/258577429</a></p><h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>现在的博客，我还是希望能够坚持下去。这次希望能有所突破，加油！！！！</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 八月 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 更新 </tag>
            
            <tag> 忙碌 </tag>
            
            <tag> 计划 </tag>
            
            <tag> 状态 </tag>
            
            <tag> 学习 </tag>
            
            <tag> 动力 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【hibernate validator】（三）声明和验证方法约束</title>
      <link href="/9df1ab00.html"/>
      <url>/9df1ab00.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="首发博客地址"><a href="#首发博客地址" class="headerlink" title="首发博客地址"></a>首发博客地址</h1><p><a href="https://blog.zysicyj.top/">https://blog.zysicyj.top/</a></p><h1 id="一、声明方法约束"><a href="#一、声明方法约束" class="headerlink" title="一、声明方法约束"></a>一、声明方法约束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter03.parameter;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RentalStation</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RentalStation</span><span class="params">(<span class="meta">@NotNull</span> String name)</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rentCar</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@NotNull</span> Customer customer,</span></span><br><span class="line"><span class="params">            <span class="meta">@NotNull</span> <span class="meta">@Future</span> Date startDate,</span></span><br><span class="line"><span class="params">            <span class="meta">@Min(1)</span> <span class="type">int</span> durationInDays)</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>RentalStation的name不能为空</li><li>rentCar()，customer不能为空，startDate不能为空且必须在未来，durationInDays最少为1天</li></ol><h2 id="1-交叉参数约束"><a href="#1-交叉参数约束" class="headerlink" title="1. 交叉参数约束"></a>1. 交叉参数约束</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@LuggageCountMatchesPassengerCount(piecesOfLuggagePerPassenger = 2)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">load</span><span class="params">(List&lt;Person&gt; passengers, List&lt;PieceOfLuggage&gt; luggage)</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>该注解通过自动义确保乘客携带不超过2件行李</p></blockquote><h2 id="2-返回值约束"><a href="#2-返回值约束" class="headerlink" title="2. 返回值约束"></a>2. 返回值约束</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter03.returnvalue;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RentalStation</span> &#123;</span><br><span class="line">    <span class="meta">@ValidRentalStation</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RentalStation</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Size(min = 1)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;<span class="meta">@NotNull</span> Customer&gt; getCustomers() &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>任何新创建的<code>RentalStation</code>对象必须满足<code>@ValidRentalStation</code>约束</li><li>传回的客户清单<code>getCustomers()</code>不得为<code>null</code>并且必须至少包含元素</li><li>返回的客户清单<code>getCustomers()</code>不得包含任何<code>null</code>对象</li></ul><h2 id="3-级联验证"><a href="#3-级联验证" class="headerlink" title="3. 级联验证"></a>3. 级联验证</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter03.cascaded;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Garage</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Valid</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Garage</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">checkCar</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@NotNull</span> Car car)</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter03.cascaded;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> String manufacturer;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Size(min = 2, max = 14)</span></span><br><span class="line">    <span class="keyword">private</span> String licensePlate;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String manufacturer, String licencePlate)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.manufacturer = manufacturer;</span><br><span class="line">        <span class="built_in">this</span>.licensePlate = licencePlate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//getters and setters ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>验证checkCar()方法的参数时，还将Car评估对所传递对象的属性的约束。同样，在验证构造函数的返回值时@NotNull，Garage将检查对name字段的约束<br>Garage。</li><li>通常，级联验证对可执行文件的工作方式与对JavaBeans属性完全相同。</li><li>特别是，null在级联验证期间会忽略值，并且递归执行级联验证</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter03.cascaded.containerelement;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Garage</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">checkCars</span><span class="params">(<span class="meta">@NotNull</span> List&lt;<span class="meta">@Valid</span> Car&gt; cars)</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-继承层次结构中的方法约束"><a href="#4-继承层次结构中的方法约束" class="headerlink" title="4. 继承层次结构中的方法约束"></a>4. 继承层次结构中的方法约束</h2><ul><li>需要注意的规则<ul><li>方法的调用者必须满足的前提条件不能在子类型中得到加强</li><li>保证方法调用者的后置条件不会在子类型中减弱</li></ul></li><li>子类非法的方法参数约束</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter03.inheritance.parameter;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">drive</span><span class="params">(<span class="meta">@Max(75)</span> <span class="type">int</span> speedInMph)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter03.inheritance.parameter;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> <span class="keyword">implements</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drive</span><span class="params">(<span class="meta">@Max(55)</span> <span class="type">int</span> speedInMph)</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>次结构的并行类型中的非法方法参数约束</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter03.inheritance.parallel;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">drive</span><span class="params">(<span class="meta">@Max(75)</span> <span class="type">int</span> speedInMph)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter03.inheritance.parallel;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">drive</span><span class="params">(<span class="type">int</span> speedInMph)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter03.inheritance.parallel;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RacingCar</span> <span class="keyword">implements</span> <span class="title class_">Car</span>, Vehicle &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drive</span><span class="params">(<span class="type">int</span> speedInMph)</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>父类型和子类型方法的返回值约束</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter03.inheritance.returnvalue;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    List&lt;Person&gt; <span class="title function_">getPassengers</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter03.inheritance.returnvalue;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> <span class="keyword">implements</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Size(min = 1)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Person&gt; <span class="title function_">getPassengers</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="二、验证方法约束"><a href="#二、验证方法约束" class="headerlink" title="二、验证方法约束"></a>二、验证方法约束</h1><h2 id="再来一辆车"><a href="#再来一辆车" class="headerlink" title="再来一辆车"></a>再来一辆车</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car2</span><span class="params">(<span class="meta">@NotNull</span> String manufacturer)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    @自定义规则</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car2</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drive</span><span class="params">(<span class="meta">@Max(75)</span> <span class="meta">@Min(22)</span> <span class="type">int</span> speedInMph)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Size(min = 1)</span></span><br><span class="line">    <span class="keyword">public</span> List <span class="title function_">getParams</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="获取工具"><a href="#获取工具" class="headerlink" title="获取工具"></a>获取工具</h2><h2 id="1-校验普通方法参数"><a href="#1-校验普通方法参数" class="headerlink" title="1. 校验普通方法参数"></a>1. 校验普通方法参数</h2><h2 id="2-测试普通方法返回值"><a href="#2-测试普通方法返回值" class="headerlink" title="2. 测试普通方法返回值"></a>2. 测试普通方法返回值</h2><h2 id="3-测试构造方法参数"><a href="#3-测试构造方法参数" class="headerlink" title="3. 测试构造方法参数"></a>3. 测试构造方法参数</h2><h2 id="4-测试构造方法的返回值"><a href="#4-测试构造方法的返回值" class="headerlink" title="4. 测试构造方法的返回值"></a>4. 测试构造方法的返回值</h2><h1 id="三、内置方法约束"><a href="#三、内置方法约束" class="headerlink" title="三、内置方法约束"></a>三、内置方法约束</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter03.parameterscriptassert;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@ParameterScriptAssert(lang = &quot;javascript&quot;, script = &quot;luggage.size() &lt;= passengers.size() * 2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">load</span><span class="params">(List&lt;Person&gt; passengers, List&lt;PieceOfLuggage&gt; luggage)</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">```        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> Hibernate Validator </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 声明方法约束 </tag>
            
            <tag> 交叉参数约束 </tag>
            
            <tag> 返回值约束 </tag>
            
            <tag> 级联验证 </tag>
            
            <tag> 继承层次结构中的方法约束 </tag>
            
            <tag> 校验普通方法参数 </tag>
            
            <tag> 测试普通方法返回值 </tag>
            
            <tag> 测试构造方法参数 </tag>
            
            <tag> 测试构造方法的返回值 </tag>
            
            <tag> 内置方法约束 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【hibernate validator】（二）声明和验证Bean约束</title>
      <link href="/caa11a30.html"/>
      <url>/caa11a30.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><h1 id="一、声明bean约束"><a href="#一、声明bean约束" class="headerlink" title="一、声明bean约束"></a>一、声明bean约束</h1><h2 id="1-字段级别约束"><a href="#1-字段级别约束" class="headerlink" title="1. 字段级别约束"></a>1. 字段级别约束</h2><ol><li>不支持静态类型字段</li><li>验证引擎直接访问实例变量，不会调用属性的访问器</li><li>在验证字节码增强的对象时，应适用属性级别约束，因为字节码增库无法通过反射确定字段访问</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.fieldlevel;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> String manufacturer;</span><br><span class="line">    <span class="meta">@AssertTrue</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> isRegistered;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String manufacturer, <span class="type">boolean</span> isRegistered)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.manufacturer = manufacturer;</span><br><span class="line">        <span class="built_in">this</span>.isRegistered = isRegistered;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//getters and setters...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-属性级别约束"><a href="#2-属性级别约束" class="headerlink" title="2. 属性级别约束"></a>2. 属性级别约束</h2><ol><li>必须注释getter而不是setter，这样可以限制没有设置方法的只读属性</li><li>该级别将使用属性访问策略来访问验证的值，即验证引擎通过属性访问器来访问数据</li><li>不要字段和getter都加校验，这样会导致校验两次</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.propertylevel;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String manufacturer;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> isRegistered;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String manufacturer, <span class="type">boolean</span> isRegistered)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.manufacturer = manufacturer;</span><br><span class="line">        <span class="built_in">this</span>.isRegistered = isRegistered;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getManufacturer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> manufacturer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setManufacturer</span><span class="params">(String manufacturer)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.manufacturer = manufacturer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@AssertTrue</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isRegistered</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> isRegistered;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRegistered</span><span class="params">(<span class="type">boolean</span> isRegistered)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.isRegistered = isRegistered;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>容器元素约束</li></ol><h3 id="3-1-Iterable"><a href="#3-1-Iterable" class="headerlink" title="3.1 Iterable"></a>3.1 Iterable</h3><blockquote><p>在该类型上加约束时，将会校验每个元素</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.containerelement.set;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;<span class="meta">@ValidPart</span> String&gt; parts = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addPart</span><span class="params">(String part)</span> &#123;</span><br><span class="line">        parts.add( part );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">car.addPart( <span class="string">&quot;Wheel&quot;</span> );</span><br><span class="line">car.addPart( <span class="literal">null</span> );</span><br><span class="line">Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validate( car );</span><br><span class="line">assertEquals( <span class="number">1</span>, constraintViolations.size() );</span><br><span class="line">ConstraintViolation&lt;Car&gt; constraintViolation =</span><br><span class="line">        constraintViolations.iterator().next();</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;&#x27;null&#x27; is not a valid car part.&quot;</span>,</span><br><span class="line">        constraintViolation.getMessage()</span><br><span class="line">);</span><br><span class="line">assertEquals( <span class="string">&quot;parts[].&lt;iterable element&gt;&quot;</span>,</span><br><span class="line">        constraintViolation.getPropertyPath().toString() );</span><br></pre></td></tr></table></figure><h3 id="3-2-List"><a href="#3-2-List" class="headerlink" title="3.2 List"></a>3.2 List</h3><blockquote><p>也会校验每个元素</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.containerelement.list;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;<span class="meta">@ValidPart</span> String&gt; parts = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addPart</span><span class="params">(String part)</span> &#123;</span><br><span class="line">        parts.add( part );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">car.addPart( <span class="string">&quot;Wheel&quot;</span> );</span><br><span class="line">car.addPart( <span class="literal">null</span> );</span><br><span class="line">Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validate( car );</span><br><span class="line">assertEquals( <span class="number">1</span>, constraintViolations.size() );</span><br><span class="line">ConstraintViolation&lt;Car&gt; constraintViolation =</span><br><span class="line">        constraintViolations.iterator().next();</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;&#x27;null&#x27; is not a valid car part.&quot;</span>,</span><br><span class="line">        constraintViolation.getMessage()</span><br><span class="line">);</span><br><span class="line">assertEquals( <span class="string">&quot;parts[1].&lt;list element&gt;&quot;</span>,</span><br><span class="line">        constraintViolation.getPropertyPath().toString() );</span><br></pre></td></tr></table></figure><h3 id="3-3-Map"><a href="#3-3-Map" class="headerlink" title="3.3 Map"></a>3.3 Map</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.containerelement.map;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotNull;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">FuelConsumption</span> &#123;</span><br><span class="line">        CITY,</span><br><span class="line">        HIGHWAY</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;<span class="meta">@NotNull</span> FuelConsumption, <span class="meta">@MaxAllowedFuelConsumption</span> Integer&gt; fuelConsumption = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFuelConsumption</span><span class="params">(FuelConsumption consumption, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        fuelConsumption.put( consumption, value );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">car.setFuelConsumption( Car.FuelConsumption.HIGHWAY, <span class="number">20</span> );</span><br><span class="line">Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validate( car );</span><br><span class="line">assertEquals( <span class="number">1</span>, constraintViolations.size() );</span><br><span class="line">ConstraintViolation&lt;Car&gt; constraintViolation =</span><br><span class="line">        constraintViolations.iterator().next();</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;20 is outside the max fuel consumption.&quot;</span>,</span><br><span class="line">        constraintViolation.getMessage()</span><br><span class="line">);</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;fuelConsumption[HIGHWAY].&lt;map value&gt;&quot;</span>,</span><br><span class="line">        constraintViolation.getPropertyPath().toString()</span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">car.setFuelConsumption( <span class="literal">null</span>, <span class="number">5</span> );</span><br><span class="line">Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validate( car );</span><br><span class="line">assertEquals( <span class="number">1</span>, constraintViolations.size() );</span><br><span class="line">ConstraintViolation&lt;Car&gt; constraintViolation =</span><br><span class="line">        constraintViolations.iterator().next();</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;must not be null&quot;</span>,</span><br><span class="line">        constraintViolation.getMessage()</span><br><span class="line">);</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;fuelConsumption&lt;K&gt;[].&lt;map key&gt;&quot;</span>,</span><br><span class="line">        constraintViolation.getPropertyPath().toString()</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="3-4-Optional"><a href="#3-4-Optional" class="headerlink" title="3.4 Optional"></a>3.4 Optional</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.containerelement.optional;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Optional&lt;<span class="meta">@MinTowingCapacity(1000)</span> Integer&gt; towingCapacity = Optional.empty();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTowingCapacity</span><span class="params">(Integer alias)</span> &#123;</span><br><span class="line">        towingCapacity = Optional.of( alias );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">car.setTowingCapacity( <span class="number">100</span> );</span><br><span class="line">Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validate( car );</span><br><span class="line">assertEquals( <span class="number">1</span>, constraintViolations.size() );</span><br><span class="line">ConstraintViolation&lt;Car&gt; constraintViolation = constraintViolations.iterator().next();</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;Not enough towing capacity.&quot;</span>,</span><br><span class="line">        constraintViolation.getMessage()</span><br><span class="line">);</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;towingCapacity&quot;</span>,</span><br><span class="line">        constraintViolation.getPropertyPath().toString()</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="3-5-自定义容器"><a href="#3-5-自定义容器" class="headerlink" title="3.5 自定义容器"></a>3.5 自定义容器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.containerelement.custom;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> GearBox&lt;<span class="meta">@MinTorque(100)</span> Gear&gt; gearBox;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGearBox</span><span class="params">(GearBox&lt;Gear&gt; gearBox)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gearBox = gearBox;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.containerelement.custom;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GearBox</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Gear</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> T gear;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GearBox</span><span class="params">(T gear)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gear = gear;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Gear <span class="title function_">getGear</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.gear;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.containerelement.custom;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Gear</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer torque;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Gear</span><span class="params">(Integer torque)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.torque = torque;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getTorque</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> torque;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AcmeGear</span> <span class="keyword">extends</span> <span class="title class_">Gear</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">AcmeGear</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>( <span class="number">60</span> );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.containerelement.custom;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GearBoxValueExtractor</span> <span class="keyword">implements</span> <span class="title class_">ValueExtractor</span>&lt;GearBox&lt;<span class="meta">@ExtractedValue</span> ?&gt;&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">extractValues</span><span class="params">(GearBox&lt;<span class="meta">@ExtractedValue</span> ?&gt; originalValue, ValueExtractor.ValueReceiver receiver)</span> &#123;</span><br><span class="line">        receiver.value( <span class="literal">null</span>, originalValue.getGear() );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">car.setGearBox( <span class="keyword">new</span> <span class="title class_">GearBox</span>&lt;&gt;( <span class="keyword">new</span> <span class="title class_">Gear</span>.AcmeGear() ) );</span><br><span class="line">Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validate( car );</span><br><span class="line">assertEquals( <span class="number">1</span>, constraintViolations.size() );</span><br><span class="line">ConstraintViolation&lt;Car&gt; constraintViolation =</span><br><span class="line">        constraintViolations.iterator().next();</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;Gear is not providing enough torque.&quot;</span>,</span><br><span class="line">        constraintViolation.getMessage()</span><br><span class="line">);</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;gearBox&quot;</span>,</span><br><span class="line">        constraintViolation.getPropertyPath().toString()</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="3-6-嵌套容器元素"><a href="#3-6-嵌套容器元素" class="headerlink" title="3.6 嵌套容器元素"></a>3.6 嵌套容器元素</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.containerelement.nested;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotNull;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;<span class="meta">@NotNull</span> Part, List&lt;<span class="meta">@NotNull</span> Manufacturer&gt;&gt; partManufacturers =</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-类级别约束"><a href="#4-类级别约束" class="headerlink" title="4. 类级别约束"></a>4. 类级别约束</h2><ol><li>在这种情况下，验证的对象不是单个属性而是完整的对象</li><li>适合依赖于对象的多个属性之间的相关性很高的场景</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.classlevel;</span><br><span class="line"><span class="meta">@ValidPassengerCount</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> seatCount;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Person&gt; passengers;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-约束继承"><a href="#5-约束继承" class="headerlink" title="5. 约束继承"></a>5. 约束继承</h2><blockquote><p>在一个类实现接口或扩展另一个类时，在超类上声明的所有约束注释都以与该类本身上指定的约束相同的方式约束</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.inheritance;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String manufacturer;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getManufacturer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> manufacturer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.inheritance;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RentalCar</span> <span class="keyword">extends</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String rentalStation;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRentalStation</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rentalStation;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>RentalCar 不仅会校验getRentalStation，而且会校验父类的getManufacturer</li><li>若继承换成接口，也是会校验超类的</li></ol><h2 id="6-对象图"><a href="#6-对象图" class="headerlink" title="6. 对象图"></a>6. 对象图</h2><blockquote><p>不仅支持单个对象校验，还支持级联验证</p></blockquote><h4 id="对象的级联校验"><a href="#对象的级联校验" class="headerlink" title="对象的级联校验"></a>对象的级联校验</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.objectgraph;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Valid</span></span><br><span class="line">    <span class="keyword">private</span> Person driver;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.objectgraph;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>在校验Car的时候，会校验Person，因此若Car引用的Person的name为空，则会校验失败</p></blockquote><h4 id="容器的级联校验"><a href="#容器的级联校验" class="headerlink" title="容器的级联校验"></a>容器的级联校验</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.objectgraph.containerelement;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;<span class="meta">@NotNull</span> <span class="meta">@Valid</span> Person&gt; passengers = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Person&gt;();</span><br><span class="line">    <span class="keyword">private</span> Map&lt;<span class="meta">@Valid</span> Part, List&lt;<span class="meta">@Valid</span> Manufacturer&gt;&gt; partManufacturers = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.objectgraph.containerelement;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Part</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter02.objectgraph.containerelement;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Manufacturer</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>校验Person的名字是否存在为null的</li><li>校验Part的名字是否存在为null的</li><li>校验所有的Manufacturer是否存在名字为null的</li></ol><h1 id="二、验证Bean约束"><a href="#二、验证Bean约束" class="headerlink" title="二、验证Bean约束"></a>二、验证Bean约束</h1><h2 id="1-获取验证器"><a href="#1-获取验证器" class="headerlink" title="1. 获取验证器"></a>1. 获取验证器</h2><h2 id="2-验证的三种方式"><a href="#2-验证的三种方式" class="headerlink" title="2. 验证的三种方式"></a>2. 验证的三种方式</h2><h3 id="先来个车"><a href="#先来个车" class="headerlink" title="先来个车"></a>先来个车</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Size(min = 5,max = 20)</span></span><br><span class="line">    <span class="keyword">private</span> String manufacturer;</span><br><span class="line">    <span class="meta">@AssertTrue</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> isRegistered;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String manufacturer, <span class="type">boolean</span> isRegistered)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.manufacturer = manufacturer;</span><br><span class="line">        <span class="built_in">this</span>.isRegistered = isRegistered;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="bean全部验证"><a href="#bean全部验证" class="headerlink" title="bean全部验证"></a>bean全部验证</h3><h3 id="验证单个属性"><a href="#验证单个属性" class="headerlink" title="验证单个属性"></a>验证单个属性</h3><h3 id="对属性的值进行验证"><a href="#对属性的值进行验证" class="headerlink" title="对属性的值进行验证"></a>对属性的值进行验证</h3><h2 id="3-约束违规"><a href="#3-约束违规" class="headerlink" title="3. 约束违规"></a>3. 约束违规</h2><h3 id="内插的错误消息"><a href="#内插的错误消息" class="headerlink" title="内插的错误消息"></a><strong>内插的错误消息</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">09:<span class="number">35</span>:<span class="number">00.446</span> [main] INFO com.bm.validate.TestValidatorBean - 内插的错误消息：只能为<span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="非插补的错误消息"><a href="#非插补的错误消息" class="headerlink" title="非插补的错误消息"></a>非插补的错误消息</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">09:<span class="number">35</span>:<span class="number">00.446</span> [main] INFO com.bm.validate.TestValidatorBean - 非插补的错误消息：&#123;javax.validation.constraints.AssertTrue.message&#125;</span><br></pre></td></tr></table></figure><h3 id="正在验证的根Bean"><a href="#正在验证的根Bean" class="headerlink" title="正在验证的根Bean"></a>正在验证的根Bean</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">09:<span class="number">35</span>:<span class="number">00.446</span> [main] INFO com.bm.validate.TestValidatorBean - 正在验证的根Bean：com.bm.validate.Car@7c83dc97</span><br></pre></td></tr></table></figure><h3 id="如果是bean约束，则将约束应用到bean实例；如果是属性约束，则是托管该约束的属性的bean实例"><a href="#如果是bean约束，则将约束应用到bean实例；如果是属性约束，则是托管该约束的属性的bean实例" class="headerlink" title="如果是bean约束，则将约束应用到bean实例；如果是属性约束，则是托管该约束的属性的bean实例"></a>如果是bean约束，则将约束应用到bean实例；如果是属性约束，则是托管该约束的属性的bean实例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">09:<span class="number">35</span>:<span class="number">00.446</span> [main] INFO com.bm.validate.TestValidatorBean - 如果是bean约束，则将约束应用到bean实例；如果是属性约束，则是托管该约束的属性的bean实例：com.bm.validate.Car@7c83dc97</span><br></pre></td></tr></table></figure><h3 id="bean验证器值的属性路径"><a href="#bean验证器值的属性路径" class="headerlink" title="bean验证器值的属性路径"></a><strong>bean验证器值的属性路径</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">09:<span class="number">35</span>:<span class="number">00.447</span> [main] INFO com.bm.validate.TestValidatorBean - 根bean验证器值的属性路径：isRegistered</span><br></pre></td></tr></table></figure><h3 id="报告约束失败的原数据"><a href="#报告约束失败的原数据" class="headerlink" title="**报告约束失败的原数据"></a>**<strong>报告约束失败的原数据</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">09:<span class="number">35</span>:<span class="number">00.447</span> [main] INFO com.bm.validate.TestValidatorBean - 报告约束失败的原数据：<span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="告约束失败的元数据"><a href="#告约束失败的元数据" class="headerlink" title="告约束失败的元数据"></a><strong>告约束失败的元数据</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">09:<span class="number">35</span>:<span class="number">00.447</span> [main] INFO com.bm.validate.TestValidatorBean - 报告约束失败的元数据：ConstraintDescriptorImpl&#123;annotation=j.v.c.AssertTrue, payloads=[], hasComposingConstraints=<span class="literal">true</span>, isReportAsSingleInvalidConstraint=<span class="literal">false</span>, elementType=FIELD, definedOn=DEFINED_LOCALLY, groups=[<span class="keyword">interface</span> <span class="title class_">javax</span>.validation.groups.Default], attributes=&#123;groups=[Ljava.lang.Class;@60015ef5, message=&#123;javax.validation.constraints.AssertTrue.message&#125;, payload=[Ljava.lang.Class;@2f54a33d&#125;, constraintType=GENERIC, valueUnwrapping=DEFAULT&#125;</span><br></pre></td></tr></table></figure><h1 id="三、内置约束"><a href="#三、内置约束" class="headerlink" title="三、内置约束"></a>三、内置约束</h1><h3 id="AssertFalse"><a href="#AssertFalse" class="headerlink" title="@AssertFalse"></a>@AssertFalse</h3><blockquote><p>检查带注释元素的属性为false</p></blockquote><ul><li>Boolean, boolean</li></ul><h3 id="AssertTrue"><a href="#AssertTrue" class="headerlink" title="@AssertTrue"></a>@AssertTrue</h3><blockquote><p>检查带注释元素的属性为True</p></blockquote><ul><li>Boolean,boolean</li></ul><h3 id="DecimalMax-value-inclusive"><a href="#DecimalMax-value-inclusive" class="headerlink" title="@DecimalMax(value&#x3D;, inclusive&#x3D;)"></a>@DecimalMax(value&#x3D;, inclusive&#x3D;)</h3><ul><li>inclusive为false，检查带注释的值是否小于指定的最大值。否则，该值是否小于等于指定的最大值</li><li>BigDecimal,BigInteger,CharSequence,byte,short,int,long，原始数据包装类,Number,javax.money.MonetaryAmount任意子类</li></ul><h3 id="DecimalMin-value-inclusive"><a href="#DecimalMin-value-inclusive" class="headerlink" title="@DecimalMin(value&#x3D;, inclusive&#x3D;)"></a>@DecimalMin(value&#x3D;, inclusive&#x3D;)</h3><ul><li>inclusive为false，检查带注释的值是否大于指定的最小值。否则，该值是否大于等于指定的最小值</li><li>BigDecimal,BigInteger,CharSequence,byte,short,int,long，原始数据包装类,Number,javax.money.MonetaryAmount任意子类</li></ul><h3 id="Digits-integer-fraction"><a href="#Digits-integer-fraction" class="headerlink" title="@Digits(integer&#x3D;, fraction&#x3D;)"></a>@Digits(integer&#x3D;, fraction&#x3D;)</h3><ul><li>integer 指定整数位数限制，fraction指定小数位数限制</li><li>BigDecimal,BigInteger,CharSequence,byte,short,int,long，原始数据包装类,Number,javax.money.MonetaryAmount任意子类</li></ul><h3 id="Email"><a href="#Email" class="headerlink" title="@Email"></a>@Email</h3><ul><li>是否为有效的电子邮箱地址</li><li>regexp和flags参数指定正则规则，必须匹配的其它表达式</li><li>CharSequence</li></ul><h3 id="Future"><a href="#Future" class="headerlink" title="@Future"></a>@Future</h3><ul><li>检查是否是将来的日期</li><li></li></ul><p>java.util.Date，java.util.Calendar，java.time.Instant，java.time.LocalDate，java.time.LocalDateTime，java.time.LocalTime，java.time.MonthDay，java.time.OffsetDateTime，java.time.OffsetTime，java.time.Year，java.time.YearMonth，java.time.ZonedDateTime，java.time.chrono.HijrahDate，java.time.chrono.JapaneseDate，java.time.chrono.MinguoDate，java.time.chrono.ThaiBuddhistDate;<br>如果类路径上有Joda Time日期&#x2F;时间API ，则由HV额外支持：ReadablePartial和的任何实现ReadableInstant</p><h3 id="FutureOnPresent"><a href="#FutureOnPresent" class="headerlink" title="@FutureOnPresent"></a>@FutureOnPresent</h3><ul><li>检查日期是先在还是将来</li><li></li></ul><p>java.util.Date，java.util.Calendar，java.time.Instant，java.time.LocalDate，java.time.LocalDateTime，java.time.LocalTime，java.time.MonthDay，java.time.OffsetDateTime，java.time.OffsetTime，java.time.Year，java.time.YearMonth，java.time.ZonedDateTime，java.time.chrono.HijrahDate，java.time.chrono.JapaneseDate，java.time.chrono.MinguoDate，java.time.chrono.ThaiBuddhistDate;<br>如果类路径上有Joda Time日期&#x2F;时间API ，则由HV额外支持：ReadablePartial和的任何实现ReadableInstant</p><h3 id="Max-value"><a href="#Max-value" class="headerlink" title="@Max(value&#x3D;)"></a>@Max(value&#x3D;)</h3><ul><li>是否小于或等于该值</li><li>BigDecimal，BigInteger，byte，short，int，long和原始类型的相应的包装;<br>HV额外支持：的任何子类型CharSequence（评估字符序列表示的数值），Number和的任何子类型javax.money.MonetaryAmount</li></ul><h3 id="Min-value"><a href="#Min-value" class="headerlink" title="@Min(value&#x3D;)"></a>@Min(value&#x3D;)</h3><ul><li>是否大于或等于该值</li><li>BigDecimal，BigInteger，byte，short，int，long和原始类型的相应的包装;<br>HV额外支持：的任何子类型CharSequence（评估字符序列表示的数值），Number和的任何子类型javax.money.MonetaryAmount</li></ul><h3 id="NotBlank"><a href="#NotBlank" class="headerlink" title="@NotBlank"></a>@NotBlank</h3><ul><li>指定字符不为null并且长度大于0</li><li>CharSequence</li></ul><h3 id="NotEmpty"><a href="#NotEmpty" class="headerlink" title="@NotEmpty"></a>@NotEmpty</h3><ul><li>指定字符不为null或为空（去除尾随空格）</li><li>CharSequence，Collection，Map和数组</li></ul><h3 id="NotNull"><a href="#NotNull" class="headerlink" title="@NotNull"></a>@NotNull</h3><ul><li>检查注释的值不为null</li><li>所有类型均支持</li></ul><h3 id="Negative"><a href="#Negative" class="headerlink" title="@Negative"></a>@Negative</h3><ul><li>检查元素是否严格为负，零被视为无效</li><li>BigDecimal，BigInteger，byte，short，int，long和原始类型的相应的包装;<br>HV额外支持：的任何子类型CharSequence（评估字符序列表示的数值），Number和的任何子类型javax.money.MonetaryAmount</li></ul><h3 id="NegativeOrZero"><a href="#NegativeOrZero" class="headerlink" title="@NegativeOrZero"></a>@NegativeOrZero</h3><ul><li>检查元素是负数或0</li><li>BigDecimal，BigInteger，byte，short，int，long和原始类型的相应的包装;<br>HV额外支持：的任何子类型CharSequence（评估字符序列表示的数值），Number和的任何子类型javax.money.MonetaryAmount</li></ul><h3 id="Null"><a href="#Null" class="headerlink" title="@Null"></a>@Null</h3><ul><li>检查注释的值是null</li><li>所有类型均支持</li></ul><h3 id="Past"><a href="#Past" class="headerlink" title="@Past"></a>@Past</h3><ul><li>检查带注释的日期是否是过去的日期</li><li></li></ul><p>java.util.Date，java.util.Calendar，java.time.Instant，java.time.LocalDate，java.time.LocalDateTime，java.time.LocalTime，java.time.MonthDay，java.time.OffsetDateTime，java.time.OffsetTime，java.time.Year，java.time.YearMonth，java.time.ZonedDateTime，java.time.chrono.HijrahDate，java.time.chrono.JapaneseDate，java.time.chrono.MinguoDate，java.time.chrono.ThaiBuddhistDate;<br>如果类路径上有Joda Time日期&#x2F;时间API ，则由HV附加支持：ReadablePartial和的任何实现ReadableInstant</p><h3 id="PastOrPresent"><a href="#PastOrPresent" class="headerlink" title="@PastOrPresent"></a>@PastOrPresent</h3><ul><li>检查带注释的日期是过去还是现在</li><li></li></ul><p>java.util.Date，java.util.Calendar，java.time.Instant，java.time.LocalDate，java.time.LocalDateTime，java.time.LocalTime，java.time.MonthDay，java.time.OffsetDateTime，java.time.OffsetTime，java.time.Year，java.time.YearMonth，java.time.ZonedDateTime，java.time.chrono.HijrahDate，java.time.chrono.JapaneseDate，java.time.chrono.MinguoDate，java.time.chrono.ThaiBuddhistDate;<br>如果类路径上有Joda Time日期&#x2F;时间API ，则由HV附加支持：ReadablePartial和的任何实现ReadableInstant</p><h3 id="Pattern-regex-flags"><a href="#Pattern-regex-flags" class="headerlink" title="@Pattern(regex&#x3D;, flags&#x3D;)"></a>@Pattern(regex&#x3D;, flags&#x3D;)</h3><ul><li>regex考虑给定标志，检查带注释的字符串是否与正则表达式匹配match</li><li>CharSequence</li></ul><h3 id="Positive"><a href="#Positive" class="headerlink" title="@Positive"></a>@Positive</h3><ul><li>检查元素是否严格为正。零值被视为无效</li><li>BigDecimal，BigInteger，byte，short，int，long和原始类型的相应的包装;<br>HV额外支持：的任何子类型CharSequence（评估字符序列表示的数值），Number和的任何子类型javax.money.MonetaryAmount</li></ul><h3 id="PositiveOrZero"><a href="#PositiveOrZero" class="headerlink" title="@PositiveOrZero"></a>@PositiveOrZero</h3><ul><li>检查元素是否严格为正或零</li><li>BigDecimal，BigInteger，byte，short，int，long和原始类型的相应的包装;<br>HV额外支持：的任何子类型CharSequence（评估字符序列表示的数值），Number和的任何子类型javax.money.MonetaryAmount</li></ul><h3 id="Size-min-max"><a href="#Size-min-max" class="headerlink" title="@Size(min&#x3D;, max&#x3D;)"></a>@Size(min&#x3D;, max&#x3D;)</h3><ul><li>检查带注释的元素的大小是否介于min和之间max（包括）</li><li>CharSequence，Collection，Map和数组</li></ul><h3 id="CreditCardNumber-ignoreNonDigitCharacters"><a href="#CreditCardNumber-ignoreNonDigitCharacters" class="headerlink" title="@CreditCardNumber(ignoreNonDigitCharacters&#x3D;)"></a>@CreditCardNumber(ignoreNonDigitCharacters&#x3D;)</h3><ul><li>检查带注释的字符序列是否通过了Luhn校验和测试</li><li>ignoreNonDigitCharacters允许忽略非数字字符。默认值为false。</li><li>CharSequence</li></ul><h3 id="Currency-value"><a href="#Currency-value" class="headerlink" title="@Currency(value&#x3D;)"></a>@Currency(value&#x3D;)</h3><ul><li>检查带注释的货币单位javax.money.MonetaryAmount是否为指定货币单位的一部分。</li><li>javax.money.MonetaryAmount</li></ul><h3 id="DurationMax-days-hours-minutes-seconds-millis-nanos-inclusive"><a href="#DurationMax-days-hours-minutes-seconds-millis-nanos-inclusive" class="headerlink" title="@DurationMax(days&#x3D;, hours&#x3D;, minutes&#x3D;, seconds&#x3D;, millis&#x3D;, nanos&#x3D;, inclusive&#x3D;)"></a>@DurationMax(days&#x3D;, hours&#x3D;, minutes&#x3D;, seconds&#x3D;, millis&#x3D;, nanos&#x3D;, inclusive&#x3D;)</h3><ul><li>检查带注释的java.time.Duration元素不大于由注释参数构造的元素。如果将inclusiveflag设置为，则允许平等true</li><li>java.time.Duration</li></ul><h3 id="DurationMin-days-hours-minutes-seconds-millis-nanos-inclusive"><a href="#DurationMin-days-hours-minutes-seconds-millis-nanos-inclusive" class="headerlink" title="@DurationMin(days&#x3D;, hours&#x3D;, minutes&#x3D;, seconds&#x3D;, millis&#x3D;, nanos&#x3D;, inclusive&#x3D;)"></a>@DurationMin(days&#x3D;, hours&#x3D;, minutes&#x3D;, seconds&#x3D;, millis&#x3D;, nanos&#x3D;, inclusive&#x3D;)</h3><ul><li>检查带注释的java.time.Duration元素不少于由注释参数构造的元素。如果将inclusiveflag设置为，则允许平等true。</li><li>java.time.Duration</li></ul><h3 id="EAN"><a href="#EAN" class="headerlink" title="@EAN"></a>@EAN</h3><ul><li>检查带注释的字符序列是有效的EAN条形码。类型决定条形码的类型</li><li>CharSequence</li></ul><h3 id="ISBN"><a href="#ISBN" class="headerlink" title="@ISBN"></a>@ISBN</h3><ul><li>检查带注释的字符序列是有效的ISBN</li><li>CharSequence</li></ul><h3 id="Length-min-max"><a href="#Length-min-max" class="headerlink" title="@Length(min&#x3D;, max&#x3D;)"></a>@Length(min&#x3D;, max&#x3D;)</h3><ul><li>验证该注释字符序列是间min和max包含</li><li>CharSequence</li></ul><h3 id="Range-min-max"><a href="#Range-min-max" class="headerlink" title="@Range(min&#x3D;, max&#x3D;)"></a>@Range(min&#x3D;, max&#x3D;)</h3><ul><li>检查带注释的值是否介于（包括）指定的最小值和最大值之间</li><li>BigDecimal，BigInteger，CharSequence，byte，short，int，long和原始类型的相应的包装</li></ul><h3 id="UniqueElements"><a href="#UniqueElements" class="headerlink" title="@UniqueElements"></a>@UniqueElements</h3><ul><li>检查带注释的集合仅包含唯一元素。使用该equals()<br>方法确定相等性。默认消息不包括重复元素的列表，但是您可以通过覆盖消息并使用{duplicates}message参数来包括它。重复元素的列表也包含在约束违反的动态有效负载中。</li><li>Collection��负载中。</li><li>Collection</li></ul><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> Hibernate Validator </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Optional </tag>
            
            <tag> List </tag>
            
            <tag> 验证器 </tag>
            
            <tag> 字段级别约束 </tag>
            
            <tag> 属性级别约束 </tag>
            
            <tag> 校验 </tag>
            
            <tag> Map </tag>
            
            <tag> HibernateValidator </tag>
            
            <tag> 容器元素约束 </tag>
            
            <tag> Iterable </tag>
            
            <tag> 自定义容器 </tag>
            
            <tag> 嵌套容器元素 </tag>
            
            <tag> 类级别约束 </tag>
            
            <tag> 验证方式 </tag>
            
            <tag> 内置约束 </tag>
            
            <tag> AssertFalse </tag>
            
            <tag> AssertTrue </tag>
            
            <tag> DecimalMax </tag>
            
            <tag> DecimalMin </tag>
            
            <tag> Digits </tag>
            
            <tag> Email </tag>
            
            <tag> Future </tag>
            
            <tag> FutureOnPresent </tag>
            
            <tag> Max </tag>
            
            <tag> Min </tag>
            
            <tag> NotBlank </tag>
            
            <tag> NotEmpty </tag>
            
            <tag> NotNull </tag>
            
            <tag> Negative </tag>
            
            <tag> NegativeOrZero </tag>
            
            <tag> Past </tag>
            
            <tag> PastOrPresent </tag>
            
            <tag> Pattern </tag>
            
            <tag> Positive </tag>
            
            <tag> PositiveOrZero </tag>
            
            <tag> Size </tag>
            
            <tag> CreditCardNumber </tag>
            
            <tag> Currency </tag>
            
            <tag> DurationMax </tag>
            
            <tag> DurationMin </tag>
            
            <tag> EAN </tag>
            
            <tag> ISBN </tag>
            
            <tag> Length </tag>
            
            <tag> Range </tag>
            
            <tag> UniqueElements </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【hibernate validator】（五）分组约束</title>
      <link href="/7394ca34.html"/>
      <url>/7394ca34.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><h1 id="一、请求组"><a href="#一、请求组" class="headerlink" title="一、请求组"></a>一、请求组</h1><h2 id="1-人组"><a href="#1-人组" class="headerlink" title="1. 人组"></a>1. 人组</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter05;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// getters and setters ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-驱动组"><a href="#2-驱动组" class="headerlink" title="2. 驱动组"></a>2. 驱动组</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Driver</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="meta">@Min(</span></span><br><span class="line"><span class="meta">            value = 18,</span></span><br><span class="line"><span class="meta">            message = &quot;You have to be 18 to drive a car&quot;,</span></span><br><span class="line"><span class="meta">            groups = DriverChecks.class</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="meta">@AssertTrue(</span></span><br><span class="line"><span class="meta">            message = &quot;You first have to pass the driving test&quot;,</span></span><br><span class="line"><span class="meta">            groups = DriverChecks.class</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> hasDrivingLicense;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Driver</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>( name );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">passedDrivingTest</span><span class="params">(<span class="type">boolean</span> b)</span> &#123;</span><br><span class="line">        hasDrivingLicense = b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-汽车组"><a href="#3-汽车组" class="headerlink" title="3. 汽车组"></a>3. 汽车组</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> String manufacturer;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Size(min = 2, max = 14)</span></span><br><span class="line">    <span class="keyword">private</span> String licensePlate;</span><br><span class="line">    <span class="meta">@Min(2)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> seatCount;</span><br><span class="line">    <span class="meta">@AssertTrue(</span></span><br><span class="line"><span class="meta">            message = &quot;The car has to pass the vehicle inspection first&quot;,</span></span><br><span class="line"><span class="meta">            groups = CarChecks.class</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> passedVehicleInspection;</span><br><span class="line">    <span class="meta">@Valid</span></span><br><span class="line">    <span class="keyword">private</span> Driver driver;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String manufacturer, String licencePlate, <span class="type">int</span> seatCount)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.manufacturer = manufacturer;</span><br><span class="line">        <span class="built_in">this</span>.licensePlate = licencePlate;</span><br><span class="line">        <span class="built_in">this</span>.seatCount = seatCount;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPassedVehicleInspection</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> passedVehicleInspection;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassedVehicleInspection</span><span class="params">(<span class="type">boolean</span> passedVehicleInspection)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.passedVehicleInspection = passedVehicleInspection;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Driver <span class="title function_">getDriver</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> driver;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDriver</span><span class="params">(Driver driver)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.driver = driver;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// getters and setters ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-使用验证组"><a href="#4-使用验证组" class="headerlink" title="4. 使用验证组"></a>4. 使用验证组</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create a car and check that everything is ok with it.</span></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>( <span class="string">&quot;Morris&quot;</span>, <span class="string">&quot;DD-AB-123&quot;</span>, <span class="number">2</span> );</span><br><span class="line">Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validate( car );</span><br><span class="line">assertEquals( <span class="number">0</span>, constraintViolations.size() );</span><br><span class="line"><span class="comment">// but has it passed the vehicle inspection?</span></span><br><span class="line">constraintViolations = validator.validate( car, CarChecks.class );</span><br><span class="line">assertEquals( <span class="number">1</span>, constraintViolations.size() );</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;The car has to pass the vehicle inspection first&quot;</span>,</span><br><span class="line">        constraintViolations.iterator().next().getMessage()</span><br><span class="line">);</span><br><span class="line"><span class="comment">// let&#x27;s go to the vehicle inspection</span></span><br><span class="line">car.setPassedVehicleInspection( <span class="literal">true</span> );</span><br><span class="line">assertEquals( <span class="number">0</span>, validator.validate( car, CarChecks.class ).size() );</span><br><span class="line"><span class="comment">// now let&#x27;s add a driver. He is 18, but has not passed the driving test yet</span></span><br><span class="line"><span class="type">Driver</span> <span class="variable">john</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Driver</span>( <span class="string">&quot;John Doe&quot;</span> );</span><br><span class="line">john.setAge( <span class="number">18</span> );</span><br><span class="line">car.setDriver( john );</span><br><span class="line">constraintViolations = validator.validate( car, DriverChecks.class );</span><br><span class="line">assertEquals( <span class="number">1</span>, constraintViolations.size() );</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;You first have to pass the driving test&quot;</span>,</span><br><span class="line">        constraintViolations.iterator().next().getMessage()</span><br><span class="line">);</span><br><span class="line"><span class="comment">// ok, John passes the test</span></span><br><span class="line">john.passedDrivingTest( <span class="literal">true</span> );</span><br><span class="line">assertEquals( <span class="number">0</span>, validator.validate( car, DriverChecks.class ).size() );</span><br><span class="line"><span class="comment">// just checking that everything is in order now</span></span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="number">0</span>, validator.validate(</span><br><span class="line">        car,</span><br><span class="line">        Default.class,</span><br><span class="line">        CarChecks.class,</span><br><span class="line">        DriverChecks.class</span><br><span class="line">).size()</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h1 id="二、组继承-🐮"><a href="#二、组继承-🐮" class="headerlink" title="二、组继承(🐮)"></a>二、组继承(🐮)</h1><ul><li>定义一个超级跑车</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SuperCar</span> <span class="keyword">extends</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@AssertTrue(</span></span><br><span class="line"><span class="meta">            message = &quot;Race car must have a safety belt&quot;,</span></span><br><span class="line"><span class="meta">            groups = RaceCarChecks.class</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> safetyBelt;</span><br><span class="line">    <span class="comment">// getters and setters ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.validation.groups.Default;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RaceCarChecks</span> <span class="keyword">extends</span> <span class="title class_">Default</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>使用组继承</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create a supercar and check that it&#x27;s valid as a generic Car</span></span><br><span class="line"><span class="type">SuperCar</span> <span class="variable">superCar</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SuperCar</span>( <span class="string">&quot;Morris&quot;</span>, <span class="string">&quot;DD-AB-123&quot;</span>, <span class="number">1</span>  );</span><br><span class="line">assertEquals( <span class="string">&quot;must be greater than or equal to 2&quot;</span>, validator.validate( superCar ).iterator().next().getMessage() );</span><br><span class="line"><span class="comment">// check that this supercar is valid as generic car and also as race car</span></span><br><span class="line">Set&lt;ConstraintViolation&lt;SuperCar&gt;&gt; constraintViolations = validator.validate( superCar, RaceCarChecks.class );</span><br><span class="line">assertThat( constraintViolations ).extracting( <span class="string">&quot;message&quot;</span> ).containsOnly(</span><br><span class="line">        <span class="string">&quot;Race car must have a safety belt&quot;</span>,</span><br><span class="line">        <span class="string">&quot;must be greater than or equal to 2&quot;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h1 id="三、定义组序列（🐮）"><a href="#三、定义组序列（🐮）" class="headerlink" title="三、定义组序列（🐮）"></a>三、定义组序列（🐮）</h1><ul><li>定义序列组</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.validation.GroupSequence;</span><br><span class="line"><span class="keyword">import</span> javax.validation.groups.Default;</span><br><span class="line"><span class="meta">@GroupSequence(&#123; Default.class, CarChecks.class, DriverChecks.class &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OrderedChecks</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>使用序列组</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>( <span class="string">&quot;Morris&quot;</span>, <span class="string">&quot;DD-AB-123&quot;</span>, <span class="number">2</span> );</span><br><span class="line">car.setPassedVehicleInspection( <span class="literal">true</span> );</span><br><span class="line"><span class="type">Driver</span> <span class="variable">john</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Driver</span>( <span class="string">&quot;John Doe&quot;</span> );</span><br><span class="line">john.setAge( <span class="number">18</span> );</span><br><span class="line">john.passedDrivingTest( <span class="literal">true</span> );</span><br><span class="line">car.setDriver( john );</span><br><span class="line">assertEquals( <span class="number">0</span>, validator.validate( car, OrderedChecks.class ).size() );</span><br></pre></td></tr></table></figure><h1 id="四、重新定义默认的组顺序"><a href="#四、重新定义默认的组顺序" class="headerlink" title="四、重新定义默认的组顺序"></a>四、重新定义默认的组顺序</h1><h2 id="GroupSequence"><a href="#GroupSequence" class="headerlink" title="@GroupSequence"></a>@GroupSequence</h2><ul><li>定义一个具有重定义的默认组的类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GroupSequence(&#123; RentalChecks.class, CarChecks.class, RentalCar.class &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RentalCar</span> <span class="keyword">extends</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@AssertFalse(message = &quot;The car is currently rented out&quot;, groups = RentalChecks.class)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> rented;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RentalCar</span><span class="params">(String manufacturer, String licencePlate, <span class="type">int</span> seatCount)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>( manufacturer, licencePlate, seatCount );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isRented</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rented;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRented</span><span class="params">(<span class="type">boolean</span> rented)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rented = rented;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RentalChecks</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>使用重新定义的默认组</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RentalCar</span> <span class="variable">rentalCar</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RentalCar</span>( <span class="string">&quot;Morris&quot;</span>, <span class="string">&quot;DD-AB-123&quot;</span>, <span class="number">2</span> );</span><br><span class="line">rentalCar.setPassedVehicleInspection( <span class="literal">true</span> );</span><br><span class="line">rentalCar.setRented( <span class="literal">true</span> );</span><br><span class="line">Set&lt;ConstraintViolation&lt;RentalCar&gt;&gt; constraintViolations = validator.validate( rentalCar );</span><br><span class="line">assertEquals( <span class="number">1</span>, constraintViolations.size() );</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;Wrong message&quot;</span>,</span><br><span class="line">        <span class="string">&quot;The car is currently rented out&quot;</span>,</span><br><span class="line">        constraintViolations.iterator().next().getMessage()</span><br><span class="line">);</span><br><span class="line">rentalCar.setRented( <span class="literal">false</span> );</span><br><span class="line">constraintViolations = validator.validate( rentalCar );</span><br><span class="line">assertEquals( <span class="number">0</span>, constraintViolations.size() );</span><br></pre></td></tr></table></figure><h2 id="GroupSequenceProvider"><a href="#GroupSequenceProvider" class="headerlink" title="@GroupSequenceProvider"></a>@GroupSequenceProvider</h2><ul><li>实现和使用默认组序列</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RentalCarGroupSequenceProvider</span></span><br><span class="line">        <span class="keyword">implements</span> <span class="title class_">DefaultGroupSequenceProvider</span>&lt;RentalCar&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Class&lt;?&gt;&gt; getValidationGroups(RentalCar car) &#123;</span><br><span class="line">        List&lt;Class&lt;?&gt;&gt; defaultGroupSequence = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Class&lt;?&gt;&gt;();</span><br><span class="line">        defaultGroupSequence.add( RentalCar.class );</span><br><span class="line">        <span class="keyword">if</span> ( car != <span class="literal">null</span> &amp;&amp; !car.isRented() ) &#123;</span><br><span class="line">            defaultGroupSequence.add( CarChecks.class );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> defaultGroupSequence;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GroupSequenceProvider(RentalCarGroupSequenceProvider.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RentalCar</span> <span class="keyword">extends</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@AssertFalse(message = &quot;The car is currently rented out&quot;, groups = RentalChecks.class)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> rented;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RentalCar</span><span class="params">(String manufacturer, String licencePlate, <span class="type">int</span> seatCount)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>( manufacturer, licencePlate, seatCount );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isRented</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rented;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRented</span><span class="params">(<span class="type">boolean</span> rented)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rented = rented;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="五、组转换（🐮）"><a href="#五、组转换（🐮）" class="headerlink" title="五、组转换（🐮）"></a>五、组转换（🐮）</h1><ul><li>必须集合@Valid哦，否则报错</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Driver</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Min(</span></span><br><span class="line"><span class="meta">            value = 18,</span></span><br><span class="line"><span class="meta">            message = &quot;You have to be 18 to drive a car&quot;,</span></span><br><span class="line"><span class="meta">            groups = DriverChecks.class</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="meta">@AssertTrue(</span></span><br><span class="line"><span class="meta">            message = &quot;You first have to pass the driving test&quot;,</span></span><br><span class="line"><span class="meta">            groups = DriverChecks.class</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> hasDrivingLicense;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Driver</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">passedDrivingTest</span><span class="params">(<span class="type">boolean</span> b)</span> &#123;</span><br><span class="line">        hasDrivingLicense = b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// getters and setters ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GroupSequence(&#123; CarChecks.class, Car.class &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> String manufacturer;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Size(min = 2, max = 14)</span></span><br><span class="line">    <span class="keyword">private</span> String licensePlate;</span><br><span class="line">    <span class="meta">@Min(2)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> seatCount;</span><br><span class="line">    <span class="meta">@AssertTrue(</span></span><br><span class="line"><span class="meta">            message = &quot;The car has to pass the vehicle inspection first&quot;,</span></span><br><span class="line"><span class="meta">            groups = CarChecks.class</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> passedVehicleInspection;</span><br><span class="line">    <span class="meta">@Valid</span></span><br><span class="line">    <span class="meta">@ConvertGroup(from = Default.class, to = DriverChecks.class)</span></span><br><span class="line">    <span class="keyword">private</span> Driver driver;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String manufacturer, String licencePlate, <span class="type">int</span> seatCount)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.manufacturer = manufacturer;</span><br><span class="line">        <span class="built_in">this</span>.licensePlate = licencePlate;</span><br><span class="line">        <span class="built_in">this</span>.seatCount = seatCount;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPassedVehicleInspection</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> passedVehicleInspection;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassedVehicleInspection</span><span class="params">(<span class="type">boolean</span> passedVehicleInspection)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.passedVehicleInspection = passedVehicleInspection;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Driver <span class="title function_">getDriver</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> driver;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDriver</span><span class="params">(Driver driver)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.driver = driver;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// getters and setters ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create a car and validate. The Driver is still null and does not get validated</span></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>( <span class="string">&quot;VW&quot;</span>, <span class="string">&quot;USD-123&quot;</span>, <span class="number">4</span> );</span><br><span class="line">car.setPassedVehicleInspection( <span class="literal">true</span> );</span><br><span class="line">Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations = validator.validate( car );</span><br><span class="line">assertEquals( <span class="number">0</span>, constraintViolations.size() );</span><br><span class="line"><span class="comment">// create a driver who has not passed the driving test</span></span><br><span class="line"><span class="type">Driver</span> <span class="variable">john</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Driver</span>( <span class="string">&quot;John Doe&quot;</span> );</span><br><span class="line">john.setAge( <span class="number">18</span> );</span><br><span class="line"><span class="comment">// now let&#x27;s add a driver to the car</span></span><br><span class="line">car.setDriver( john );</span><br><span class="line">constraintViolations = validator.validate( car );</span><br><span class="line">assertEquals( <span class="number">1</span>, constraintViolations.size() );</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;The driver constraint should also be validated as part of the default group&quot;</span>,</span><br><span class="line">        constraintViolations.iterator().next().getMessage(),</span><br><span class="line">        <span class="string">&quot;You first have to pass the driving test&quot;</span></span><br><span class="line">);</span><br><span class="line">```ss the driving test<span class="string">&quot;</span></span><br><span class="line"><span class="string">);</span></span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> Hibernate Validator </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 校验 </tag>
            
            <tag> Hibernate Validator </tag>
            
            <tag> 分组约束 </tag>
            
            <tag> 人组 </tag>
            
            <tag> 驱动组 </tag>
            
            <tag> 汽车组 </tag>
            
            <tag> 使用验证组 </tag>
            
            <tag> 组继承 </tag>
            
            <tag> 组序列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【hibernate validator】（四）内插约束错误消息</title>
      <link href="/a3ee2715.html"/>
      <url>/a3ee2715.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="首发博客地址"><a href="#首发博客地址" class="headerlink" title="首发博客地址"></a>首发博客地址</h1><p><a href="https://blog.zysicyj.top/">https://blog.zysicyj.top/</a></p><h1 id="一、默认消息插值"><a href="#一、默认消息插值" class="headerlink" title="一、默认消息插值"></a>一、默认消息插值</h1><ul><li>替换默认提示消息</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter04;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;The manufacturer name must not be null&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String manufacturer;</span><br><span class="line">    <span class="comment">//constructor, getters and setters ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1-需要转义的字符"><a href="#1-需要转义的字符" class="headerlink" title="1. 需要转义的字符"></a>1. 需要转义的字符</h2><ul><li>{ 被认为是文字 {</li><li>} 被认为是文字 }</li><li>$ 被认为是文字 $</li><li>\ 被认为是文字 \</li></ul><h2 id="2-消息表达式插值替换"><a href="#2-消息表达式插值替换" class="headerlink" title="2. 消息表达式插值替换"></a>2. 消息表达式插值替换</h2><ul><li>指定消息描述符</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.hibernate.validator.referenceguide.chapter04.complete;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> String manufacturer;</span><br><span class="line">    <span class="meta">@Size(</span></span><br><span class="line"><span class="meta">            min = 2,</span></span><br><span class="line"><span class="meta">            max = 14,</span></span><br><span class="line"><span class="meta">            message = &quot;The license plate &#x27;$&#123;validatedValue&#125;&#x27; must be between &#123;min&#125; and &#123;max&#125; characters long&quot;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">private</span> String licensePlate;</span><br><span class="line">    <span class="meta">@Min(</span></span><br><span class="line"><span class="meta">            value = 2,</span></span><br><span class="line"><span class="meta">            message = &quot;There must be at least &#123;value&#125; seat$&#123;value &gt; 1 ? &#x27;s&#x27; : &#x27;&#x27;&#125;&quot;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> seatCount;</span><br><span class="line">    <span class="meta">@DecimalMax(</span></span><br><span class="line"><span class="meta">            value = &quot;350&quot;,</span></span><br><span class="line"><span class="meta">            message = &quot;The top speed $&#123;formatter.format(&#x27;%1$.2f&#x27;, validatedValue)&#125; is higher &quot; +</span></span><br><span class="line"><span class="meta">                    &quot;than &#123;value&#125;&quot;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> topSpeed;</span><br><span class="line">    <span class="meta">@DecimalMax(value = &quot;100000&quot;, message = &quot;Price must not be higher than $&#123;value&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal price;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(</span></span><br><span class="line"><span class="params">            String manufacturer,</span></span><br><span class="line"><span class="params">            String licensePlate,</span></span><br><span class="line"><span class="params">            <span class="type">int</span> seatCount,</span></span><br><span class="line"><span class="params">            <span class="type">double</span> topSpeed,</span></span><br><span class="line"><span class="params">            BigDecimal price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.manufacturer = manufacturer;</span><br><span class="line">        <span class="built_in">this</span>.licensePlate = licensePlate;</span><br><span class="line">        <span class="built_in">this</span>.seatCount = seatCount;</span><br><span class="line">        <span class="built_in">this</span>.topSpeed = topSpeed;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//getters and setters ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>预期的错误消息</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>( <span class="literal">null</span>, <span class="string">&quot;A&quot;</span>, <span class="number">1</span>, <span class="number">400.123456</span>, BigDecimal.valueOf( <span class="number">200000</span> ) );</span><br><span class="line"><span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> validator.validateProperty( car, <span class="string">&quot;manufacturer&quot;</span> )</span><br><span class="line">        .iterator()</span><br><span class="line">        .next()</span><br><span class="line">        .getMessage();</span><br><span class="line">assertEquals( <span class="string">&quot;must not be null&quot;</span>, message );</span><br><span class="line">message = validator.validateProperty( car, <span class="string">&quot;licensePlate&quot;</span> )</span><br><span class="line">        .iterator()</span><br><span class="line">        .next()</span><br><span class="line">        .getMessage();</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;The license plate &#x27;A&#x27; must be between 2 and 14 characters long&quot;</span>,</span><br><span class="line">        message</span><br><span class="line">);</span><br><span class="line">message = validator.validateProperty( car, <span class="string">&quot;seatCount&quot;</span> ).iterator().next().getMessage();</span><br><span class="line">assertEquals( <span class="string">&quot;There must be at least 2 seats&quot;</span>, message );</span><br><span class="line">message = validator.validateProperty( car, <span class="string">&quot;topSpeed&quot;</span> ).iterator().next().getMessage();</span><br><span class="line">assertEquals( <span class="string">&quot;The top speed 400.12 is higher than 350&quot;</span>, message );</span><br><span class="line">message = validator.validateProperty( car, <span class="string">&quot;price&quot;</span> ).iterator().next().getMessage();</span><br><span class="line">assertEquals( <span class="string">&quot;Price must not be higher than $100000&quot;</span>, message );</span><br></pre></td></tr></table></figure><h1 id="二、自定义消息插值"><a href="#二、自定义消息插值" class="headerlink" title="二、自定义消息插值"></a>二、自定义消息插值</h1><ul><li>必须实现javax.validation.MessageInterpolator接口并且实现必须是线程安全的</li><li></li><li>使用特定的资源包</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Validator</span> <span class="variable">validator</span> <span class="operator">=</span> Validation.byDefaultProvider()</span><br><span class="line">        .configure()</span><br><span class="line">        .messageInterpolator(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ResourceBundleMessageInterpolator</span>(</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">PlatformResourceBundleLocator</span>( <span class="string">&quot;MyMessages&quot;</span> )</span><br><span class="line">                )</span><br><span class="line">        )</span><br><span class="line">        .buildValidatorFactory()</span><br><span class="line">        .getValidator();</span><br></pre></td></tr></table></figure><ul><li>使用 AggregateResourceBundleLocator</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Validator</span> <span class="variable">validator</span> <span class="operator">=</span> Validation.byDefaultProvider()</span><br><span class="line">        .configure()</span><br><span class="line">        .messageInterpolator(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ResourceBundleMessageInterpolator</span>(</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">AggregateResourceBundleLocator</span>(</span><br><span class="line">                                Arrays.asList(</span><br><span class="line">                                        <span class="string">&quot;MyMessages&quot;</span>,</span><br><span class="line">                                        <span class="string">&quot;MyOtherMessages&quot;</span></span><br><span class="line">                                )</span><br><span class="line">                        )</span><br><span class="line">                )</span><br><span class="line">        )</span><br><span class="line">        .buildValidatorFactory()</span><br><span class="line">        .getValidator();</span><br><span class="line">```     .getValidator();</span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> Hibernate Validator </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 校验 </tag>
            
            <tag> Hibernate Validator </tag>
            
            <tag> 消息插值 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【hibernate validator】（六）创建自定义约束</title>
      <link href="/ce362f84.html"/>
      <url>/ce362f84.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><h1 id="一、创建一个简单的约束"><a href="#一、创建一个简单的约束" class="headerlink" title="一、创建一个简单的约束"></a>一、创建一个简单的约束</h1><h2 id="1-约束注释"><a href="#1-约束注释" class="headerlink" title="1. 约束注释"></a>1. 约束注释</h2><ul><li>枚举表示大小写</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">CaseMode</span> &#123;</span><br><span class="line">    UPPER,</span><br><span class="line">    LOWER;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>定义@CheckCase约束</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.ANNOTATION_TYPE;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.FIELD;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.METHOD;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.PARAMETER;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.TYPE_USE;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.RetentionPolicy.RUNTIME;</span><br><span class="line"><span class="meta">@Target(&#123; FIELD, METHOD, PARAMETER, ANNOTATION_TYPE, TYPE_USE &#125;)</span></span><br><span class="line"><span class="meta">@Retention(RUNTIME)</span></span><br><span class="line"><span class="meta">@Constraint(validatedBy = CheckCaseValidator.class)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Repeatable(List.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> CheckCase &#123;</span><br><span class="line">    String <span class="title function_">message</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&#123;org.hibernate.validator.referenceguide.chapter06.CheckCase.&quot;</span> +</span><br><span class="line">            <span class="string">&quot;message&#125;&quot;</span>;</span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Payload</span>&gt;[] payload() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line">    CaseMode <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">    <span class="meta">@Target(&#123; FIELD, METHOD, PARAMETER, ANNOTATION_TYPE &#125;)</span></span><br><span class="line">    <span class="meta">@Retention(RUNTIME)</span></span><br><span class="line">    <span class="meta">@Documented</span></span><br><span class="line">    <span class="meta">@interface</span> List &#123;</span><br><span class="line">        CheckCase[] value();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li>测试一下吧</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Severity</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Info</span> <span class="keyword">extends</span> <span class="title class_">Payload</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Error</span> <span class="keyword">extends</span> <span class="title class_">Payload</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ContactDetails</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;Name is mandatory&quot;, payload = Severity.Error.class)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;Phone number not specified, but not mandatory&quot;,</span></span><br><span class="line"><span class="meta">            payload = Severity.Info.class)</span></span><br><span class="line">    <span class="keyword">private</span> String phoneNumber;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><h4 id="Target-定义约束所支持的目标元素类型"><a href="#Target-定义约束所支持的目标元素类型" class="headerlink" title="@Target 定义约束所支持的目标元素类型"></a>@Target 定义约束所支持的目标元素类型</h4><h4 id="Retention-RUNTIME-：指定此类型的注释将在运行时通过反射方式提供"><a href="#Retention-RUNTIME-：指定此类型的注释将在运行时通过反射方式提供" class="headerlink" title="@Retention(RUNTIME)：指定此类型的注释将在运行时通过反射方式提供"></a>@Retention(RUNTIME)：指定此类型的注释将在运行时通过反射方式提供</h4><h4 id="Constraint-validatedBy-CheckCaseValidator-class-：将注释类型标记为约束注释，并指定用于验证元素的验证器"><a href="#Constraint-validatedBy-CheckCaseValidator-class-：将注释类型标记为约束注释，并指定用于验证元素的验证器" class="headerlink" title="@Constraint(validatedBy &#x3D; CheckCaseValidator.class)：将注释类型标记为约束注释，并指定用于验证元素的验证器"></a>@Constraint(validatedBy &#x3D; CheckCaseValidator.class)：将注释类型标记为约束注释，并指定用于验证元素的验证器</h4><h4 id="CheckCase。如果可以在几种数据类型上使用约束，则可以指定几个验证器，每种数据类型一个。"><a href="#CheckCase。如果可以在几种数据类型上使用约束，则可以指定几个验证器，每种数据类型一个。" class="headerlink" title="@CheckCase。如果可以在几种数据类型上使用约束，则可以指定几个验证器，每种数据类型一个。"></a>@CheckCase。如果可以在几种数据类型上使用约束，则可以指定几个验证器，每种数据类型一个。</h4><h4 id="Repeatable-List-class-：表示注释可以在同一位置重复多次，通常使用不同的配置"><a href="#Repeatable-List-class-：表示注释可以在同一位置重复多次，通常使用不同的配置" class="headerlink" title="@Repeatable(List.class)：表示注释可以在同一位置重复多次，通常使用不同的配置"></a>@Repeatable(List.class)：表示注释可以在同一位置重复多次，通常使用不同的配置</h4><h2 id="2-约束验证器"><a href="#2-约束验证器" class="headerlink" title="2. 约束验证器"></a>2. 约束验证器</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CheckCaseValidator</span> <span class="keyword">implements</span> <span class="title class_">ConstraintValidator</span>&lt;CheckCase, String&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> CaseMode caseMode;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">(CheckCase constraintAnnotation)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.caseMode = constraintAnnotation.value();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String object, ConstraintValidatorContext constraintContext)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ( object == <span class="literal">null</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ( caseMode == CaseMode.UPPER ) &#123;</span><br><span class="line">            <span class="keyword">return</span> object.equals( object.toUpperCase() );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> object.equals( object.toLowerCase() );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>自定义错误消息</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CheckCaseValidator</span> <span class="keyword">implements</span> <span class="title class_">ConstraintValidator</span>&lt;CheckCase, String&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> CaseMode caseMode;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">(CheckCase constraintAnnotation)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.caseMode = constraintAnnotation.value();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String object, ConstraintValidatorContext constraintContext)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ( object == <span class="literal">null</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">boolean</span> isValid;</span><br><span class="line">        <span class="keyword">if</span> ( caseMode == CaseMode.UPPER ) &#123;</span><br><span class="line">            isValid = object.equals( object.toUpperCase() );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            isValid = object.equals( object.toLowerCase() );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ( !isValid ) &#123;</span><br><span class="line">            constraintContext.disableDefaultConstraintViolation();</span><br><span class="line">            constraintContext.buildConstraintViolationWithTemplate(</span><br><span class="line">                    <span class="string">&quot;&#123;org.hibernate.validator.referenceguide.chapter06.&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;constraintvalidatorcontext.CheckCase.message&#125;&quot;</span></span><br><span class="line">            )</span><br><span class="line">            .addConstraintViolation();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> isValid;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>HibernateConstraintValidator（对原版进行扩展）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyFutureValidator</span> <span class="keyword">implements</span> <span class="title class_">HibernateConstraintValidator</span>&lt;MyFuture, Instant&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> Clock clock;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> orPresent;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">(ConstraintDescriptor&lt;MyFuture&gt; constraintDescriptor,</span></span><br><span class="line"><span class="params">            HibernateConstraintValidatorInitializationContext initializationContext)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.orPresent = constraintDescriptor.getAnnotation().orPresent();</span><br><span class="line">        <span class="built_in">this</span>.clock = initializationContext.getClockProvider().getClock();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(Instant instant, ConstraintValidatorContext constraintContext)</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="将有效负载传递给约束验证器"><a href="#将有效负载传递给约束验证器" class="headerlink" title="将有效负载传递给约束验证器"></a>将有效负载传递给约束验证器</h3><h3 id="在ValidatorFactory初始化期间定义约束验证器有效载荷"><a href="#在ValidatorFactory初始化期间定义约束验证器有效载荷" class="headerlink" title="- 在ValidatorFactory初始化期间定义约束验证器有效载荷"></a>- 在ValidatorFactory初始化期间定义约束验证器有效载荷</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ValidatorFactory</span> <span class="variable">validatorFactory</span> <span class="operator">=</span> Validation.byProvider( HibernateValidator.class )</span><br><span class="line">        .configure()</span><br><span class="line">        .constraintValidatorPayload( <span class="string">&quot;US&quot;</span> )</span><br><span class="line">        .buildValidatorFactory();</span><br><span class="line"><span class="type">Validator</span> <span class="variable">validator</span> <span class="operator">=</span> validatorFactory.getValidator();</span><br></pre></td></tr></table></figure><ul><li>使用Validator上下文定义约束验证器有效载荷</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">HibernateValidatorFactory</span> <span class="variable">hibernateValidatorFactory</span> <span class="operator">=</span> Validation.byDefaultProvider()</span><br><span class="line">        .configure()</span><br><span class="line">        .buildValidatorFactory()</span><br><span class="line">        .unwrap( HibernateValidatorFactory.class );</span><br><span class="line"><span class="type">Validator</span> <span class="variable">validator</span> <span class="operator">=</span> hibernateValidatorFactory.usingContext()</span><br><span class="line">        .constraintValidatorPayload( <span class="string">&quot;US&quot;</span> )</span><br><span class="line">        .getValidator();</span><br><span class="line"><span class="comment">// [...] US specific validation checks</span></span><br><span class="line">validator = hibernateValidatorFactory.usingContext()</span><br><span class="line">        .constraintValidatorPayload( <span class="string">&quot;FR&quot;</span> )</span><br><span class="line">        .getValidator();</span><br><span class="line"><span class="comment">// [...] France specific validation checks</span></span><br></pre></td></tr></table></figure><ul><li>在约束验证器中使用约束验证器有效载荷</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ZipCodeValidator</span> <span class="keyword">implements</span> <span class="title class_">ConstraintValidator</span>&lt;ZipCode, String&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> String countryCode;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String object, ConstraintValidatorContext constraintContext)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ( object == <span class="literal">null</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isValid</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">countryCode</span> <span class="operator">=</span> constraintContext</span><br><span class="line">                .unwrap( HibernateConstraintValidatorContext.class )</span><br><span class="line">                .getConstraintValidatorPayload( String.class );</span><br><span class="line">        <span class="keyword">if</span> ( <span class="string">&quot;US&quot;</span>.equals( countryCode ) ) &#123;</span><br><span class="line">            <span class="comment">// checks specific to the United States</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ( <span class="string">&quot;FR&quot;</span>.equals( countryCode ) ) &#123;</span><br><span class="line">            <span class="comment">// checks specific to France</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> isValid;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-错误讯息"><a href="#3-错误讯息" class="headerlink" title="3. 错误讯息"></a>3. 错误讯息</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.hibernate.validator.referenceguide.chapter06.CheckCase.message = 案例模式必须为&#123;value&#125;。</span><br></pre></td></tr></table></figure><h2 id="4-使用约束"><a href="#4-使用约束" class="headerlink" title="4. 使用约束"></a>4. 使用约束</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> String manufacturer;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Size(min = 2, max = 14)</span></span><br><span class="line">    <span class="meta">@CheckCase(CaseMode.UPPER)</span></span><br><span class="line">    <span class="keyword">private</span> String licensePlate;</span><br><span class="line">    <span class="meta">@Min(2)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> seatCount;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String manufacturer, String licencePlate, <span class="type">int</span> seatCount)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.manufacturer = manufacturer;</span><br><span class="line">        <span class="built_in">this</span>.licensePlate = licencePlate;</span><br><span class="line">        <span class="built_in">this</span>.seatCount = seatCount;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//getters and setters ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>使用约束验证对象</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//invalid license plate</span></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>( <span class="string">&quot;Morris&quot;</span>, <span class="string">&quot;dd-ab-123&quot;</span>, <span class="number">4</span> );</span><br><span class="line">Set&lt;ConstraintViolation&lt;Car&gt;&gt; constraintViolations =</span><br><span class="line">        validator.validate( car );</span><br><span class="line">assertEquals( <span class="number">1</span>, constraintViolations.size() );</span><br><span class="line">assertEquals(</span><br><span class="line">        <span class="string">&quot;Case mode must be UPPER.&quot;</span>,</span><br><span class="line">        constraintViolations.iterator().next().getMessage()</span><br><span class="line">);</span><br><span class="line"><span class="comment">//valid license plate</span></span><br><span class="line">car = <span class="keyword">new</span> <span class="title class_">Car</span>( <span class="string">&quot;Morris&quot;</span>, <span class="string">&quot;DD-AB-123&quot;</span>, <span class="number">4</span> );</span><br><span class="line">constraintViolations = validator.validate( car );</span><br><span class="line">assertEquals( <span class="number">0</span>, constraintViolations.size() );</span><br></pre></td></tr></table></figure><h1 id="二、类级别约束"><a href="#二、类级别约束" class="headerlink" title="二、类级别约束"></a>二、类级别约束</h1><ul><li>实现一个类级别约束</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123; TYPE, ANNOTATION_TYPE &#125;)</span></span><br><span class="line"><span class="meta">@Retention(RUNTIME)</span></span><br><span class="line"><span class="meta">@Constraint(validatedBy = &#123; ValidPassengerCountValidator.class &#125;)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ValidPassengerCount &#123;</span><br><span class="line">    String <span class="title function_">message</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&#123;org.hibernate.validator.referenceguide.chapter06.classlevel.&quot;</span> +</span><br><span class="line">            <span class="string">&quot;ValidPassengerCount.message&#125;&quot;</span>;</span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Payload</span>&gt;[] payload() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ValidPassengerCountValidator</span></span><br><span class="line">        <span class="keyword">implements</span> <span class="title class_">ConstraintValidator</span>&lt;ValidPassengerCount, Car&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">(ValidPassengerCount constraintAnnotation)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(Car car, ConstraintValidatorContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ( car == <span class="literal">null</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> car.getPassengers().size() &lt;= car.getSeatCount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自定义属性路径"><a href="#自定义属性路径" class="headerlink" title="自定义属性路径"></a>自定义属性路径</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ValidPassengerCountValidator</span></span><br><span class="line">        <span class="keyword">implements</span> <span class="title class_">ConstraintValidator</span>&lt;ValidPassengerCount, Car&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">(ValidPassengerCount constraintAnnotation)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(Car car, ConstraintValidatorContext constraintValidatorContext)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ( car == <span class="literal">null</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isValid</span> <span class="operator">=</span> car.getPassengers().size() &lt;= car.getSeatCount();</span><br><span class="line">        <span class="keyword">if</span> ( !isValid ) &#123;</span><br><span class="line">            constraintValidatorContext.disableDefaultConstraintViolation();</span><br><span class="line">            constraintValidatorContext</span><br><span class="line">                    .buildConstraintViolationWithTemplate( <span class="string">&quot;&#123;my.custom.template&#125;&quot;</span> )</span><br><span class="line">                    .addPropertyNode( <span class="string">&quot;passengers&quot;</span> ).addConstraintViolation();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> isValid;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="三、交叉级别约束"><a href="#三、交叉级别约束" class="headerlink" title="三、交叉级别约束"></a>三、交叉级别约束</h1><ul><li>交叉级别约束</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Constraint(validatedBy = ConsistentDateParametersValidator.class)</span></span><br><span class="line"><span class="meta">@Target(&#123; METHOD, CONSTRUCTOR, ANNOTATION_TYPE &#125;)</span></span><br><span class="line"><span class="meta">@Retention(RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ConsistentDateParameters &#123;</span><br><span class="line">    String <span class="title function_">message</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&#123;org.hibernate.validator.referenceguide.chapter04.&quot;</span> +</span><br><span class="line">            <span class="string">&quot;crossparameter.ConsistentDateParameters.message&#125;&quot;</span>;</span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Payload</span>&gt;[] payload() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>通用和交叉级别约束</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SupportedValidationTarget(ValidationTarget.PARAMETERS)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConsistentDateParametersValidator</span> <span class="keyword">implements</span></span><br><span class="line">        <span class="title class_">ConstraintValidator</span>&lt;ConsistentDateParameters, Object[]&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">(ConsistentDateParameters constraintAnnotation)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(Object[] value, ConstraintValidatorContext context)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ( value.length != <span class="number">2</span> ) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>( <span class="string">&quot;Illegal method signature&quot;</span> );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//leave null-checking to @NotNull on individual parameters</span></span><br><span class="line">        <span class="keyword">if</span> ( value[<span class="number">0</span>] == <span class="literal">null</span> || value[<span class="number">1</span>] == <span class="literal">null</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ( !( value[<span class="number">0</span>] <span class="keyword">instanceof</span> Date ) || !( value[<span class="number">1</span>] <span class="keyword">instanceof</span> Date ) ) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(</span><br><span class="line">                    <span class="string">&quot;Illegal method signature, expected two &quot;</span> +</span><br><span class="line">                            <span class="string">&quot;parameters of type Date.&quot;</span></span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ( (Date) value[<span class="number">0</span>] ).before( (Date) value[<span class="number">1</span>] );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Constraint(validatedBy = &#123;</span></span><br><span class="line"><span class="meta">        ScriptAssertObjectValidator.class,</span></span><br><span class="line"><span class="meta">        ScriptAssertParametersValidator.class</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="meta">@Target(&#123; TYPE, FIELD, PARAMETER, METHOD, CONSTRUCTOR, ANNOTATION_TYPE &#125;)</span></span><br><span class="line"><span class="meta">@Retention(RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ScriptAssert &#123;</span><br><span class="line">    String <span class="title function_">message</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&#123;org.hibernate.validator.referenceguide.chapter04.&quot;</span> +</span><br><span class="line">            <span class="string">&quot;crossparameter.ScriptAssert.message&#125;&quot;</span>;</span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Payload</span>&gt;[] payload() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line">    String <span class="title function_">script</span><span class="params">()</span>;</span><br><span class="line">    ConstraintTarget <span class="title function_">validationAppliesTo</span><span class="params">()</span> <span class="keyword">default</span> ConstraintTarget.IMPLICIT;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>指定通用和交叉参数约束的目标</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ScriptAssert(script = &quot;arg1.size() &lt;= arg0&quot;, validationAppliesTo = ConstraintTarget.PARAMETERS)</span></span><br><span class="line"><span class="keyword">public</span> Car <span class="title function_">buildCar</span><span class="params">(<span class="type">int</span> seatCount, List&lt;Passenger&gt; passengers)</span> &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="四、约束构成"><a href="#四、约束构成" class="headerlink" title="四、约束构成"></a>四、约束构成</h1><ul><li>创建一个合成约束 @ValidLicensePlate</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NotNull</span></span><br><span class="line"><span class="meta">@Size(min = 2, max = 14)</span></span><br><span class="line"><span class="meta">@CheckCase(CaseMode.UPPER)</span></span><br><span class="line"><span class="meta">@Target(&#123; METHOD, FIELD, ANNOTATION_TYPE, TYPE_USE &#125;)</span></span><br><span class="line"><span class="meta">@Retention(RUNTIME)</span></span><br><span class="line"><span class="meta">@Constraint(validatedBy = &#123; &#125;)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ValidLicensePlate &#123;</span><br><span class="line">    String <span class="title function_">message</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&#123;org.hibernate.validator.referenceguide.chapter06.&quot;</span> +</span><br><span class="line">            <span class="string">&quot;constraintcomposition.ValidLicensePlate.message&#125;&quot;</span>;</span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Payload</span>&gt;[] payload() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>组合约束的应用 ValidLicensePlate</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="meta">@ValidLicensePlate</span></span><br><span class="line">    <span class="keyword">private</span> String licensePlate;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>使用@ReportAsSingleViolation</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ReportAsSingleViolation</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ValidLicensePlate &#123;</span><br><span class="line">    String <span class="title function_">message</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&#123;org.hibernate.validator.referenceguide.chapter06.&quot;</span> +</span><br><span class="line">            <span class="string">&quot;constraintcomposition.reportassingle.ValidLicensePlate.message&#125;&quot;</span>;</span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Payload</span>&gt;[] payload() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line">&#125;</span><br><span class="line">```ayload() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> Hibernate Validator </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 校验 </tag>
            
            <tag> Hibernate Validator </tag>
            
            <tag> 校验注释 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【插件】Java开发规范配套Idea阿里巴巴代码扫描规范插件</title>
      <link href="/41f7cf00.html"/>
      <url>/41f7cf00.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code><br>s:&#x2F;&#x2F;blog.zysicyj.top&#x2F;</p></blockquote><h1 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h1><p>这个是三方优化版，如果不喜欢可以去下载官方的<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-26/100924704657900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-26/100924704657900.png"></a></p><p>插件官网地址<br><a href="https://plugins.jetbrains.com/plugin/22381-alibaba-java-coding-guidelines-fix-some-bug-">https://plugins.jetbrains.com/plugin/22381-alibaba-java-coding-guidelines-fix-some-bug-</a></p><h1 id="手动启动插件"><a href="#手动启动插件" class="headerlink" title="手动启动插件"></a>手动启动插件</h1><p>插件默认是开启自动实时扫描的，如果感觉太卡，可以关掉实时扫描<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-26/101423503727700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-26/101423503727700.png"></a></p><h1 id="查看问题清单"><a href="#查看问题清单" class="headerlink" title="查看问题清单"></a>查看问题清单</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-26/101522019517000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-26/101522019517000.png"></a></p><h1 id="快速修复"><a href="#快速修复" class="headerlink" title="快速修复"></a>快速修复</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-26/101573983608100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-26/101573983608100.png"></a></p><h1 id="git配置插件检测"><a href="#git配置插件检测" class="headerlink" title="git配置插件检测"></a>git配置插件检测</h1><p>保证必须通过代码扫描的代码才能提交<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-26/101741218435600.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-26/101741218435600.png"></a></p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Idea </tag>
            
            <tag> 插件 </tag>
            
            <tag> Java开发规范 </tag>
            
            <tag> 阿里巴巴代码扫描规范 </tag>
            
            <tag> 安装 </tag>
            
            <tag> 手动启动 </tag>
            
            <tag> 问题清单 </tag>
            
            <tag> 快速修复 </tag>
            
            <tag> git配置 </tag>
            
            <tag> 检测 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【开发规范系列】（二）：Java后台开发规范</title>
      <link href="/624f2c29.html"/>
      <url>/624f2c29.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>提到Java开发规范，那么大家能想到的基本就是<strong>阿里巴巴Java开发手册</strong><br>，这个手册的内容很丰富，但是呢篇幅太长，很多人都记不住，那么怎么办呢？好在阿里巴巴提供了代码扫描插件，方便我们开发时发现问题并及时修改。</p><h1 id="如何使用该插件？"><a href="#如何使用该插件？" class="headerlink" title="如何使用该插件？"></a>如何使用该插件？</h1><p><a href="https://blog.zysicyj.top/41f7cf00">参考这篇文章：【插件】Java开发规范配套Idea阿里巴巴代码扫描</a></p><h1 id="手册内容"><a href="#手册内容" class="headerlink" title="手册内容"></a>手册内容</h1><div class="row">    <embed src="/static/pdf/Java开发手册(黄山版).pdf" width="100%" height="550" type="application/pdf"></div><h1 id="项目统一规约"><a href="#项目统一规约" class="headerlink" title="项目统一规约"></a>项目统一规约</h1><ul><li>工具类统一使用Hutool，非必要不要自定义工具类</li><li>controller返回的每个实体需要新建一个Vo封装</li><li>controller接受的参数统一使用Param封装</li><li>Do类不允许添加额外字段</li><li>业务之间传输使用Dto类封装</li><li>跨模块，接口调用不允许直接传DO，需要封装成Dto</li><li>单机事务必须加上@Transactional注解</li><li>分布式事务必须加上@Seata注解</li><li>统一使用Mybatis语法，不要使用JPA</li><li>ID统一使用Leaf雪花算法获取</li><li>参数传递使用POJO传递，尽量不要使用Map</li><li>方法参数超出屏幕宽度（一般3到5个）封装成对象接收</li><li>方法命名规则<ul><li>删除：del***</li><li>更新：update***</li><li>添加：insert***</li><li>单个查询：select***</li><li>批量查询：list***</li><li>分页：page***</li><li>导出：export***</li><li>导入：import***</li><li>返回布尔值的方法：iz***</li><li>校验：check***</li><li>填充：fill***</li></ul></li><li>类名命名规则<ul><li>拦截器：***Handler</li><li>过滤器：***Filter</li><li>枚举：***Enum</li><li>常量：***Constant</li><li>监听器：***Listener</li><li>配置类：***Config</li></ul></li><li>变量命名规则（全部驼峰）<ul><li>静态常量：大写，下划线分隔 例如: USER_NAME_GLOBAL</li><li>局部常量：大写，下划线分隔 例如：USER_NAME</li><li>全局变量：***Global 例如：userNameGlobal</li><li>List类型：***List 例如：userList</li><li>Map类型： ***Map 例如：userByIdMap</li><li>Set类型： ***Set 例如：userSet</li><li>表示数量： ***Num 例如： userTotalNum</li><li>表示判断： iz**** 例如：izLeader</li></ul></li></ul><h1 id="建议阅读文章"><a href="#建议阅读文章" class="headerlink" title="建议阅读文章"></a>建议阅读文章</h1><h2 id="如何使用校验"><a href="#如何使用校验" class="headerlink" title="如何使用校验"></a>如何使用校验</h2><p><a href="https://blog.zysicyj.top/caa11a30">【hibernate validator】（二）声明和验证Bean约束</a><br><a href="https://blog.zysicyj.top/9df1ab00">【hibernate validator】（三）声明和验证方法约束</a><br><a href="https://blog.zysicyj.top/a3ee2715">【hibernate validator】（四）内插约束错误消息</a><br><a href="https://blog.zysicyj.top/7394ca34">【hibernate validator】（五）分组约束</a><br><a href="https://blog.zysicyj.top/ce362f84">【hibernate validator】（六）创建自定义约束</a></p><h2 id="开发规范"><a href="#开发规范" class="headerlink" title="开发规范"></a>开发规范</h2><ol><li><p><a href="https://blog.zysicyj.top/e1aecfe9">MySQL开发规范</a></p></li><li><p><a href="https://blog.zysicyj.top/624f2c29">后台开发规范</a></p></li><li><p><a href="https://blog.zysicyj.top/e821a36">前端开发规范</a></p></li><li><p><a href="https://blog.zysicyj.top/8e340800">代码提交规范</a></p></li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 开发规范 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leaf雪花算法 </tag>
            
            <tag> Java后台开发规范 </tag>
            
            <tag> 阿里巴巴Java开发手册 </tag>
            
            <tag> 代码扫描插件 </tag>
            
            <tag> Hutool工具类 </tag>
            
            <tag> Vo封装 </tag>
            
            <tag> Param封装 </tag>
            
            <tag> Do类 </tag>
            
            <tag> Dto类 </tag>
            
            <tag> Transactional注解 </tag>
            
            <tag> Seata注解 </tag>
            
            <tag> Mybatis语法 </tag>
            
            <tag> POJO传递参数 </tag>
            
            <tag> 方法命名规则 </tag>
            
            <tag> 类名命名规则 </tag>
            
            <tag> 变量命名规则 </tag>
            
            <tag> 校验 </tag>
            
            <tag> Hibernate Validator </tag>
            
            <tag> 分组约束 </tag>
            
            <tag> 自定义约束 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>某人事系统架构搭建设计记录</title>
      <link href="/7aaf60e.html"/>
      <url>/7aaf60e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="首发博客地址"><a href="#首发博客地址" class="headerlink" title="首发博客地址"></a>首发博客地址</h1><p><a href="https://blog.zysicyj.top/">https://blog.zysicyj.top/</a></p><h1 id="先大致列一下基础情况"><a href="#先大致列一下基础情况" class="headerlink" title="先大致列一下基础情况"></a>先大致列一下基础情况</h1><ul><li>架构必须是微服务</li><li>场景上涉及大量查询操作，分析操作</li><li>存在临时大量写入的场景</li><li>并发并不高</li><li>对高可用要求较高，不能挂掉</li><li>对安全要求高</li><li>要能过等保测试等三方测试</li><li>使用人数并不多，十万内</li><li>涉及很多在线编辑，预览等操作</li><li>对大屏展示有需求</li><li>数据库还不确定，如果要求高的话mysql必须换成达梦</li><li>中间件也不确定，要求高的话必须换成东方通</li><li>加密必须是国密</li></ul><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>好的代码，肯定最基本的有一套开发规范去约束的，不然堆砌的代码肯定成”屎山“。扩展性，性能啥的先不谈，单单维护代码成本就会很高，也很容易出BUG。</p><p>所以呀，我们必须先有一套开发规范，我这里拟了一套规范供内部使用：</p><ol><li><a href="https://blog.zysicyj.top/e1aecfe9">MySQL开发规范</a></li><li><a href="https://blog.zysicyj.top/624f2c29">后台开发规范</a></li><li><a href="https://blog.zysicyj.top/e821a36">前端开发规范</a></li><li><a href="https://blog.zysicyj.top/8e340800">代码提交规范</a></li></ol><h1 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h1><p>这里微服务框架我推荐直接使用Spring Cloud Alibaba体系组件，原因如下：</p><ol><li>Spring Cloud Alibaba 已经是国内实际上微服务标准</li><li>服务于阿里集团大大小小各种业务，生产使用稳定</li><li>社区庞大，遇到问题容易解决</li><li>文档齐全，中文文档详细，方便查阅</li><li>与 Spring Cloud 集成，可以充分使用 Spring Cloud 特性</li><li>组件丰富</li></ol><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-26/78785491774100.png" title="系统架构图" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-26/78785491774100.png" alt="系统架构图"></a></p><p>高清大图地址：<a href="https://www.processon.com/view/link/64ef11baa8c890267a8a023d">https://www.processon.com/view/link/64ef11baa8c890267a8a023d</a></p><h1 id="聊聊组件选型"><a href="#聊聊组件选型" class="headerlink" title="聊聊组件选型"></a>聊聊组件选型</h1><p>那么，具体我们需要哪些组件呢？这里的组件并不是必须的，需要后续综合考虑</p><ol><li><strong>ES</strong>：数据检索</li><li><strong>Redis</strong>：缓存</li><li><strong>JetCache</strong>：多级缓存</li><li><strong>MySQL</strong>，如果有国产化需求，考虑<strong>达梦</strong>数据库</li><li><strong>Druid</strong>：数据源管理框架</li><li><strong>ShardingSphere</strong>：对数据库进行增强，比如<strong>分库分表，加密</strong>的支持</li><li><strong>Minio</strong>：文件存储</li><li><strong>Seata</strong>：分布式事务</li><li><strong>Spring Cloud Gateway</strong>：由于并发量并不大，所以我们可以不需要<strong>Nginx</strong>网关</li><li><strong>Sentinel</strong>: 熔断限流</li><li><strong>Spring Cloud Alibaba Sidecar</strong>：项目中很有可能涉及其他非 Spring Cloud 应用，此时就需要将其接入 Spring Cloud</li><li>引入<strong>GraalVM</strong>，可以看到，对比 JVM<br>启动速度提升<a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-24/128986692919000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-24/128986692919000.png"></a></li><li><strong>JimuReport+EasyExcel</strong>：报表设计</li><li><strong>KkFileView</strong>：在线预览各种文件</li><li><strong>Activity</strong>：工作流支持</li><li><strong>Hutool</strong>：最全工具类库</li><li><strong>Nacos</strong>：服务注册和配置中心</li><li><strong>RocketMQ</strong>：消息队列，削峰填谷</li><li><strong>Docker</strong>：使用 Docker 进行容器化部署</li><li><strong>GitLab</strong>：源码管理</li><li><strong>Nexus</strong>：构建仓库</li><li><strong>Jenkins</strong>：部署平台</li><li><strong>SkyWalking</strong>：链路追踪</li><li><strong>SaToken</strong> 或 <strong>Spring Cloud Security+Oauth</strong>：授权</li><li><strong>Leaf</strong>：分布式 ID 生成器</li><li><strong>MybatisFlex</strong>：ORM 框架</li><li><strong>Dubbo</strong> 或 <strong>Feign</strong>：服务间通信</li></ol><h1 id="一些细节"><a href="#一些细节" class="headerlink" title="一些细节"></a>一些细节</h1><p>再次声明一点，业务上是读多写少，分析报表多，所以很多设计上要优化</p><ul><li>MySQL：读写分离，分库分表</li><li>Redis：主从从架构，哨兵集群</li><li>项目使用多级缓存</li><li>数据国密加密</li><li>账号最小权限分配，严格限制超级管理员账号</li><li>统一线程池使用</li></ul><h1 id="打任务量导入导出"><a href="#打任务量导入导出" class="headerlink" title="打任务量导入导出"></a>打任务量导入导出</h1><ul><li>通过优化线程池提高效率</li><li>通过逻辑过滤重复任务</li><li>使用消息队列削峰</li><li>使用缓存优化查询速度</li></ul><h1 id="查询流程"><a href="#查询流程" class="headerlink" title="查询流程"></a>查询流程</h1><ol><li>客户端发送请求</li><li>前端请求加密</li><li>请求发送到网关</li><li>网关校验请求合法性</li><li>网关根据路由规则转发到具体的服务器上处理</li><li>服务器解密请求数据</li><li>查询本地缓存</li><li>若无则查询 Redis</li><li>若无则进行业务流转，最终查询 MySQL</li><li>根据路由规则，查询只读 MySQL 节点并返回数据</li><li>数据本地缓存，然后 Redis 缓存</li><li>返回响应数据</li><li>对响应加密，转发到网关</li><li>网关转发给客户端</li><li>客户端解密，展示数据</li></ol><h1 id="部署流程"><a href="#部署流程" class="headerlink" title="部署流程"></a>部署流程</h1><h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><ol><li>开发提交代码</li><li>基于 GitLab CI&#x2F;CD 自动拉取代码生成 Docker 镜像并提供服务</li></ol><h2 id="测试环境"><a href="#测试环境" class="headerlink" title="测试环境"></a>测试环境</h2><ol><li>合并代码到测试分支</li><li>基于 GitLab CI&#x2F;CD 自动拉取代码生成 Docker 镜像并提供服务</li></ol><h2 id="生产环境"><a href="#生产环境" class="headerlink" title="生产环境"></a>生产环境</h2><ol><li>合并代码到生产分支</li><li>基于 GitLab，手动用 Jenkins 部署项目</li></ol><h1 id="详细部署策略"><a href="#详细部署策略" class="headerlink" title="详细部署策略"></a>详细部署策略</h1><p>如果中台能提供，那肯定是最好的，不用考虑那么多了</p><p>现在假设有10台服务器</p><ol><li><p>服务器1和服务器2：MySQL数据库服务器，部署主从复制架构。</p><ul><li>服务器1作为主数据库（Master），负责写入操作和部分读取操作。</li><li>服务器2作为从数据库（Slave），负责复制主数据库的数据，并提供读取操作，实现读写分离。</li><li>主从复制可以提高数据库的可用性和性能，当主数据库出现故障时，可以快速切换到从数据库。</li></ul></li><li><p>服务器3和服务器4：Redis缓存服务器，部署主从架构。</p><ul><li>服务器3作为主节点（Master），负责处理写入和读取操作。</li><li>服务器4作为从节点（Slave），复制主节点的数据，并提供读取操作。</li><li>Redis主从架构可以提高缓存的可用性和读取性能。</li></ul></li><li><p>服务器5：Minio文件存储服务器，用于存储上传的文件。</p><ul><li>Minio是一个开源的对象存储服务器，提供高可用性和可扩展性的存储解决方案。</li></ul></li><li><p>服务器6和服务器7：Nacos服务注册和配置中心，用于服务的注册和配置管理。</p><ul><li>Nacos提供了服务注册、发现和配置管理的功能，支持高可用和可靠的服务部署。</li></ul></li><li><p>服务器8：RocketMQ消息队列服务器，用于削峰填谷，异步处理导入任务。</p><ul><li>RocketMQ提供了高吞吐量、低延迟的消息传递能力，可以将导入任务放入消息队列中，由异步消费者进行处理。</li></ul></li><li><p>服务器9和服务器10：用于部署应用程序和其他中间件，如Spring Cloud Gateway、Sentinel、SkyWalking等。</p><ul><li>这些服务器用于部署应用程序和其他中间件，如API网关、熔断限流、链路追踪等，提供服务的访问和监控。</li></ul></li></ol><p>将MySQL数据库和Redis缓存部署为主从架构的原因如下：</p><ol><li>高可用性：主从复制可以提供故障容错能力，当主节点出现故障时，可以快速切换到从节点，保证服务的连续性和可用性。</li><li>读写分离：通过将读操作分发到从节点，可以减轻主节点的负载，提高数据库的读取性能。同时，从节点的复制过程对主节点的影响较小，不会对主节点的写入操作产生影响。</li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 开发规范 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 架构 </tag>
            
            <tag> 设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于TechGrow实现Hexo引流微信公众号</title>
      <link href="/3672160f.html"/>
      <url>/3672160f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><h2 id="前言-前言"><a href="#前言-前言" class="headerlink" title="#(#前言) 前言"></a>#(#前言) 前言</h2><p>Hexo 博客建议安装 <a href="https://github.com/rqh656418510/hexo-readmore">hexo-readmore (opens new window)</a><br>插件，将 <a href="https://open.techgrow.cn/">TechGrow (opens new window)</a> 的免费微信公众号引流工具整合到博客中，用户扫码关注微信公众号后可以解锁全站文章，让微信公众号的粉丝数躺着增长。</p><h2 id="特色功能-特色功能"><a href="#特色功能-特色功能" class="headerlink" title="#(#特色功能) 特色功能"></a>#(#特色功能) 特色功能</h2><ul><li>兼容主流的 Hexo 主题</li><li>支持随机为博客添加引流功能</li><li>支持关闭某篇文章的引流功能</li><li>支持查询用户解锁文章的历史记录</li><li>支持自定义或者动态计算文章内容的预览高度</li><li>支持自定义 CSS 样式，轻松适配不同风格的博客</li><li>支持开放 API，灵活接入第三方私有化部署的应用服务</li></ul><h2 id="注册博客-注册博客"><a href="#注册博客-注册博客" class="headerlink" title="#(#注册博客) 注册博客"></a>#(#注册博客) 注册博客</h2><p>浏览器访问 <a href="https://open.techgrow.cn/">TechGrow (opens new window)</a> 的官网<br>，注册并登录账号后，进入博客的后台管理页面。首先点击左侧的菜单 <code>博客注册</code>，然后点击 <code>新增</code><br>按钮，添加自己博客的信息。博客注册成功后，记录下 <code>博客 ID</code>，后面的步骤会使用到</p><p><a href="https://docs.techgrow.cn/v1/images/guide/717e14eb59dd44dea62d6a0b7549abfd.png" class="gallery-item"><img src="https://docs.techgrow.cn/v1/images/guide/717e14eb59dd44dea62d6a0b7549abfd.png"></a></p><h2 id="设置公众号-设置公众号"><a href="#设置公众号-设置公众号" class="headerlink" title="#(#设置公众号) 设置公众号"></a>#(#设置公众号) 设置公众号</h2><p>在微信公众号的后台管理页面，菜单栏里选择 <code>自动回复</code> - <code>关键词回复</code>，启用 <code>自动回复</code>，然后点击 <code>添加回复</code> 按钮</p><p><a href="https://docs.techgrow.cn/v1/images/guide/em64p7w8wlqtt0rsjop0jjeywx29m25w.png" class="gallery-item"><img src="https://docs.techgrow.cn/v1/images/guide/em64p7w8wlqtt0rsjop0jjeywx29m25w.png"></a></p><p>填写 <code>规则名称</code>、<code>关键词（当初你在 TechGrow 中设置的）</code>、<code>回复内容</code> 选择 <code>文字</code>，然后 <code>回复文字</code><br>的内容填写获取博客解锁验证码的链接，如下所示（请自行更改 <code>xxxxx-xxxxxxxxx-xxx</code> 为你申请到的博客 ID）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;https://open.techgrow.cn/#/readmore/captcha/generate?blogId=xxxxx-xxxxxxxxx-xxx&quot;&gt;点击链接，获取博客解锁验证码&lt;/a&gt; </span><br></pre></td></tr></table></figure><p><a href="https://docs.techgrow.cn/v1/images/guide/yd89wbdji196ixtwzgzamw37fbein1ia.png" class="gallery-item"><img src="https://docs.techgrow.cn/v1/images/guide/yd89wbdji196ixtwzgzamw37fbein1ia.png"></a></p><p>此时，当读者关注你的微信公众号，并输入关键词后（比如我设置的关键词就是 <code>tech</code>），那么读者就会自动接收到获取博客解锁验证码的链接</p><h2 id="安装插件-安装插件"><a href="#安装插件-安装插件" class="headerlink" title="#(#安装插件) 安装插件"></a>#(#安装插件) 安装插件</h2><ul><li>运行 <code>npm install</code> 命令安装插件</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-readmore --save </span><br></pre></td></tr></table></figure><h2 id="配置-hexo-配置-Hexo"><a href="#配置-hexo-配置-Hexo" class="headerlink" title="#(#配置-hexo) 配置 Hexo"></a>#(#配置-hexo) 配置 Hexo</h2><p>编辑 Hexo 自身的 <code>_config.yml</code> 配置文件，新增插件的配置信息（请自行更改博客相关的信息），如下所示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">readmore:</span><br><span class="line">  # 是否启用</span><br><span class="line">  enable: false</span><br><span class="line">  # 已申请的博客 ID</span><br><span class="line">  blogId: &#x27;18762-1609305354821-257&#x27;</span><br><span class="line">  # 已申请的微信公众号名称</span><br><span class="line">  name: &#x27;全栈技术驿站&#x27;</span><br><span class="line">  # 已申请的微信公众号回复关键词</span><br><span class="line">  keyword: &#x27;tech&#x27;</span><br><span class="line">  # 已申请的微信公众号二维码图片</span><br><span class="line">  qrcode: &#x27;https://www.techgrow.cn/img/wx_mp_qr.png&#x27;</span><br><span class="line">  # 自定义的 JS 资源链接，可用于 CDN 加速</span><br><span class="line">  libUrl: &#x27;https://qiniu.techgrow.cn/readmore/dist/readmore.js&#x27;</span><br><span class="line">  # 自定义的 CSS 资源链接，可用于适配不同风格的博客</span><br><span class="line">  cssUrl: &#x27;https://qiniu.techgrow.cn/readmore/dist/hexo.css&#x27;</span><br><span class="line">  # 命令行终端是否输出日志信息</span><br><span class="line">  debug: true</span><br><span class="line">  # 文章内容的预览高度（例如 300）</span><br><span class="line">  height: &#x27;auto&#x27;</span><br><span class="line">  # 文章解锁后凭证的有效天数</span><br><span class="line">  expires: 365</span><br><span class="line">  # 定时校验凭证有效性的时间间隔（秒）</span><br><span class="line">  interval: 60</span><br><span class="line">  # 是否添加微信公众号引流工具到移动端页面</span><br><span class="line">  allowMobile: false</span><br><span class="line">  # 获取文章主体内容的 JS 选择器，在博客启用了 Pjax 的情况下才需要根据不同的主题进行配置</span><br><span class="line">  pjaxSelector: &#x27;&#x27;</span><br><span class="line">  # Pjax 支持重载的 Css 类名（例如 &#x27;pjax&#x27;），在博客启用了 Pjax 的情况下才需要根据不同的主题进行配置</span><br><span class="line">  pjaxCssClass: &#x27;&#x27;</span><br><span class="line">  # 每篇文章随机添加微信公众号引流工具的概率，有效范围在 0.1 ~ 1 之间，1 则表示所有文章默认都自动添加引流工具</span><br><span class="line">  random: 1 </span><br></pre></td></tr></table></figure><p>或者打开 TechGrow 的<a href="https://open.techgrow.cn/#/readmore/website/register">博客后台管理页面 (opens new window)</a><br>，点击博客列表中右侧的 <code>使用</code> 链接，将窗口里的 YAML 配置内容复制到 Hexo 自身的 <code>_config.yml</code> 配置文件即可。</p><h2 id="参数说明-参数说明"><a href="#参数说明-参数说明" class="headerlink" title="#(#参数说明) 参数说明"></a>#(#参数说明) 参数说明</h2><table><thead><tr><th>参数</th><th>类型</th><th>必填</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>enable</td><td>Boolean</td><td>是</td><td><code>false</code></td><td>-</td></tr><tr><td>blogId</td><td>String</td><td>是</td><td></td><td>-</td></tr><tr><td>name</td><td>String</td><td>是</td><td></td><td>-</td></tr><tr><td>keyword</td><td>String</td><td>是</td><td></td><td>-</td></tr><tr><td>qrcode</td><td>String</td><td>是</td><td></td><td>-</td></tr><tr><td>libUrl</td><td>String</td><td>否</td><td><code>https://qiniu.techgrow.cn/readmore/dist/readmore.js</code></td><td>-</td></tr><tr><td>cssUrl</td><td>String</td><td>否</td><td><code>https://qiniu.techgrow.cn/readmore/dist/hexo.css</code></td><td>-</td></tr><tr><td>debug</td><td>Boolean</td><td>否</td><td><code>true</code></td><td>-</td></tr><tr><td>height</td><td>String &#x2F; Number</td><td>否</td><td><code>auto</code></td><td>-</td></tr><tr><td>expires</td><td>Number</td><td>否</td><td><code>365</code></td><td>-</td></tr><tr><td>interval</td><td>Number</td><td>否</td><td><code>60</code></td><td>-</td></tr><tr><td>allowMobile</td><td>Boolean</td><td>否</td><td><code>false</code></td><td>-</td></tr><tr><td>pjaxSelector</td><td>String</td><td>否</td><td></td><td>-</td></tr><tr><td>pjaxCssClass</td><td>String</td><td>否</td><td></td><td>-</td></tr><tr><td>random</td><td>Number</td><td>否</td><td><code>1</code></td><td>-</td></tr><tr><td>excludes</td><td>Array</td><td>否</td><td></td><td>-</td></tr></tbody></table><h2 id="构建-hexo-构建-Hexo"><a href="#构建-hexo-构建-Hexo" class="headerlink" title="#(#构建-hexo) 构建 Hexo"></a>#(#构建-hexo) 构建 Hexo</h2><ul><li><p>运行 <code>hexo clean</code> 命令清理本地博客</p></li><li><p>运行 <code>hexo generate</code> 命令构建本地博客</p></li><li><p>运行 <code>hexo server</code> 命令启动本地博客服务</p></li></ul><h2 id="验证插件效果-验证插件效果"><a href="#验证插件效果-验证插件效果" class="headerlink" title="#(#验证插件效果) 验证插件效果"></a>#(#验证插件效果) 验证插件效果</h2><p>打开文章页面，若文章自动隐藏了部分内容，并且出现了 <code>阅读全文</code> 按钮，则说明引流插件正常运行，如下图所示：</p><p><a href="https://docs.techgrow.cn/v1/images/guide/3f53ab36dfa84fb99a6508ae46e5373a.png" class="gallery-item"><img src="https://docs.techgrow.cn/v1/images/guide/3f53ab36dfa84fb99a6508ae46e5373a.png"></a></p><p>点击 <code>阅读全文</code> 按钮，会弹出微信公众号的二维码窗口，如下图所示：</p><p><a href="https://docs.techgrow.cn/v1/images/guide/202980a480fd463c814a31d5cc3fb2a1.png" class="gallery-item"><img src="https://docs.techgrow.cn/v1/images/guide/202980a480fd463c814a31d5cc3fb2a1.png"></a></p><h2 id="取消阅读限制-取消阅读限制"><a href="#取消阅读限制-取消阅读限制" class="headerlink" title="#(#取消阅读限制) 取消阅读限制"></a>#(#取消阅读限制) 取消阅读限制</h2><p>若希望关闭某篇文章的微信公众号导流功能，可以在文章的头模板中使用 <code>readmore: false</code> 配置属性，如下所示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:  Hexo版本升级教程</span><br><span class="line">tags: [Hexo]</span><br><span class="line">readmore: false</span><br><span class="line">keywords: [Hexo, 版本升级]</span><br><span class="line">date: 2022-01-12 22:25:49</span><br><span class="line">updated: 2022-01-12 22:25:49</span><br><span class="line">--- </span><br></pre></td></tr></table></figure><p>若希望关闭部分文章的微信公众号引流功能，可以使用插件的 <code>excludes</code> 参数来实现，支持使用路径、通配符的匹配规则。</p><ul><li>根据 URL 路径，关闭某篇文章的引流功能</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 排除 URL 为 `/notes/637e7b8f.html` 的文章</span><br><span class="line">readmore:</span><br><span class="line">  ....</span><br><span class="line">  excludes:</span><br><span class="line">    - &#x27;/notes/637e7b8f.html&#x27; </span><br></pre></td></tr></table></figure><ul><li>根据 URL 通配符，关闭某个目录下所有文章的引流功能</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 排除 URL 以 `/fontend` 开头的文章</span><br><span class="line"># 排除 URL 为 `/backend/python/io` 的文章</span><br><span class="line">readmore:</span><br><span class="line">  ....</span><br><span class="line">  excludes:</span><br><span class="line">    - &#x27;/fontend/*&#x27;</span><br><span class="line">    - &#x27;/backend/*/io&#x27; </span><br></pre></td></tr></table></figure><h2 id="pjax-的支持-Pjax-的支持"><a href="#pjax-的支持-Pjax-的支持" class="headerlink" title="#(#pjax-的支持) Pjax 的支持"></a>#(#pjax-的支持) Pjax 的支持</h2><p>如果博客启用了 Pjax，那么 Hexo 引流插件需要使用 <code>pjaxCssClass</code> 参数指定 Pjax 支持重载的 Css 类名（例如 <code>pjax</code><br>），同时需要使用 <code>pjaxSelector</code> 参数指定获取文章主体内容的 JS<br>选择器。否则在站点内（如首页、标签页、分类页、归档页等）通过链接访问文章页面时，引流工具不会生效，除非是手动刷新一次页面。值得一提的是，两者都需要根据不同的<br>Hexo 主题来配置，其中不同主题的配置示例如下：</p><table><thead><tr><th>主题</th><th>pjaxCssClass 配置</th><th>pjaxSelector 配置</th><th>说明</th></tr></thead><tbody><tr><td><a href="https://github.com/next-theme/hexo-theme-next">NexT (opens new window)</a></td><td><code>pjaxCssClass: &#39;pjax&#39;</code></td><td><code>pjaxSelector: &#39;div.main-inner&#39;</code></td><td></td></tr><tr><td><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly (opens new window)</a></td><td><code>pjaxCssClass: &#39;js-pjax&#39;</code></td><td><code>pjaxSelector: &#39;main.layout&#39;</code></td><td></td></tr></tbody></table><p>配置提示</p><p>值得一提的是，<code>pjaxCssClass</code> 参数的作用是让 Pjax 重载引流工具的代码段，而 <code>pjaxSelector</code> 参数的作用是通过 JS<br>选择器获取文章主体内容。当配置了 <code>pjaxSelector</code> 和 <code>pjaxCssClass</code> 参数之后，Hexo 引流插件会往所有渲染后的 HTML<br>页面自动添加引流代码段，包括 <code>page</code> 和 <code>post</code> 的页面类型。如果两者都不配置，则 Hexo 引流插件默认只会往渲染后的 <code>post</code><br>页面添加引流代码段。</p><p>特别注意</p><p>由于 Pjax 非常依赖页面布局的一致性，因此请确保通过 <code>pjaxSelector</code> 参数指定的 JS 选择器在所有页面（包括 <code>page</code> 和 <code>post</code><br>）都能够获取到唯一的 HTML 标签元素，否则会导致部分页面的 Pjax 或者引流功能不会生效。如果无法满足这一点，则需要手动更改 Hexo<br>主题的模板代码，使 JS 选择器在所有页面都能够获取到唯一的 HTML 标签元素。Hexo<br>主题模板代码的修改可以参考 <a href="https://github.com/rqh656418510/hexo-theme-next-8.x/commit/6e259889fdc867ccd8eb1163e9b1f0629493387a">NexT (opens new window)</a><br>，然后将 <code>pjaxSelector</code> 设置为 <code>div.post-container</code>。</p><h2 id="自定义样式-自定义样式"><a href="#自定义样式-自定义样式" class="headerlink" title="#(#自定义样式) 自定义样式"></a>#(#自定义样式) 自定义样式</h2><p>插件默认使用了定义在 <a href="https://qiniu.techgrow.cn/readmore/dist/hexo.css">hexo.css (opens new window)</a> 的 CSS<br>样式，你可以使用以下两种方式自定义自己的样式：</p><ul><li>第一种方式：更改博客主题的 CSS 源码文件，将自定义的那部分 CSS 样式添加到里面</li><li>第二种方式：根据 <a href="https://qiniu.techgrow.cn/readmore/dist/hexo.css">hexo.css (opens new window)</a> 创建自己的 CSS<br>文件（完整的），并将其存放在自己的博客里，同时通过插件的 <code>cssUrl</code> 配置参数来指定其访问的 URL 路径</li></ul><blockquote><p>提示：为了方便日后维护，强烈建议使用第二种方式来添加自定义样式</p></blockquote><h2 id="开放-api-开放-API"><a href="#开放-api-开放-API" class="headerlink" title="#(#开放-api) 开放 API"></a>#(#开放-api) 开放 API</h2><p>若不希望依赖 TechGrow 官方提供的系统服务，可以选择使用开放 API<br>的方式，让引流插件直接使用私有化部署的后端应用服务，详细介绍请看<a href="https://docs.techgrow.cn/v1/wechat/openapi/api/">这里</a>。</p><h2 id="已兼容的主题-已兼容的主题"><a href="#已兼容的主题-已兼容的主题" class="headerlink" title="#(#已兼容的主题) 已兼容的主题"></a>#(#已兼容的主题) 已兼容的主题</h2><table><thead><tr><th>主题</th><th>GitHub 仓库</th></tr></thead><tbody><tr><td>NexT</td><td><a href="https://github.com/next-theme/hexo-theme-next">https://github.com/next-theme/hexo-theme-next (opens new window)</a></td></tr><tr><td>Yilia</td><td><a href="https://github.com/litten/hexo-theme-yilia">https://github.com/litten/hexo-theme-yilia (opens new window)</a></td></tr><tr><td>Icarus</td><td><a href="https://github.com/ppoffice/hexo-theme-icarus">https://github.com/ppoffice/hexo-theme-icarus (opens new window)</a></td></tr><tr><td>Matery</td><td><a href="https://github.com/blinkfox/hexo-theme-matery">https://github.com/blinkfox/hexo-theme-matery (opens new window)</a></td></tr><tr><td>Fluid</td><td><a href="https://github.com/fluid-dev/hexo-theme-fluid">https://github.com/fluid-dev/hexo-theme-fluid (opens new window)</a></td></tr><tr><td>Stun</td><td><a href="https://github.com/liuyib/hexo-theme-stun">https://github.com/liuyib/hexo-theme-stun (opens new window)</a></td></tr><tr><td>Butterfly</td><td><a href="https://github.com/jerryc127/hexo-theme-butterfly">https://github.com/jerryc127/hexo-theme-butterfly (opens new window)</a></td></tr></tbody></table><h2 id="常见问题-常见问题"><a href="#常见问题-常见问题" class="headerlink" title="#(#常见问题) 常见问题"></a>#(#常见问题) 常见问题</h2><p>问题一</p><p>Hexo 安装插件后，浏览器的控制台输出警告或者错误信息，且引流工具无法生效</p><p>浏览器访问 Hexo 博客后，按下 <code>F12</code> 快捷键调出调试工具，然后切换到 <code>控制台</code><br>，最后将警告或者错误信息截图，并发送到 <a href="https://www.techgrow.cn/img/wx-group-qr-techgrow.png">官方微信群 (opens new window)</a><br>或者 <code>656418510@qq.com</code> 邮箱，建议留言备注 Hexo 与 Hexo 主题的版本号。</p><p>问题二</p><p>Hexo 安装插件后，移动端的引流工具无法生效，而 PC 端却生效</p><p>考虑到用户体验的问题，在移动端默认是关闭引流功能的。若希望在移动端启用引流功能，可以通过 Hexo<br>引流插件的 <code>allowMobile: true</code> 配置参数来实现。&#96; 配置参数来实现。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 引流 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IntelliJ IDEA 2023.2.1 修复版本日志</title>
      <link href="/5bae9190.html"/>
      <url>/5bae9190.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p><a href="https://secure.gravatar.com/avatar/5deb5fdbb1c42239bffe4344b40a55ce?s=200&r=g" class="gallery-item"><img src="https://secure.gravatar.com/avatar/5deb5fdbb1c42239bffe4344b40a55ce?s=200&r=g"></a></p><p>我们刚刚发布了 v2023.2 的第一个错误修复更新。</p><p>您可以从 IDE 内部、使用<a href="https://www.jetbrains.com/toolbox-app/">工具箱应用程序</a>或通过快照（如果您使用的是<br>Ubuntu）更新到此版本。您也可以<a href="https://www.jetbrains.com/idea/download/">直接从我们的网站下载</a>。</p><p>以下是最新版本中包含的最值得注意的改进和修复的列表：</p><ul><li>我们已经解决了主工具栏仅出现在第一个打开的项目上的问题，无论是在 WSL 上还是在 Linux<br>上使用平铺窗口管理器时，都通过恢复到本机标头。[<a href="https://youtrack.jetbrains.com/issue/IDEA-323700">IDEA-323700</a>]</li><li>现在可以在启用_“与操作系统同步_”选项的情况下从 Windows 同步设置后，在 Linux<br>上选择一个主题。[<a href="https://youtrack.jetbrains.com/issue/IDEA-283945/">IDEA-283945</a>]</li><li>“<em>服务”</em><br>工具窗口中的控制台不再意外地从其他工具窗口拉取焦点。[<a href="https://youtrack.jetbrains.com/issue/IDEA-219699/Database-console-takes-focus-in-Services-panel">IDEA-219699</a>]</li><li>当 Linux 本机标头关闭时，IDE<br>不再意外地在辅助监视器上进入全屏模式。 [<a href="https://youtrack.jetbrains.com/issue/IDEA-326021">IDEA-326021</a>]</li><li></li></ul><p>现在，将所选文本拖放到装订线将文本按预期移动到所选行，而不是复制它。[<a href="https://youtrack.jetbrains.com/issue/IDEA-324204">IDEA-324204</a>]</p><ul><li>当本机 Linux<br>标头关闭时，可以再次在辅助显示器上退出全屏模式。 [<a href="https://youtrack.jetbrains.com/issue/IDEA-323706">IDEA-323706</a>]</li><li>修复了在关闭本机标头的 Linux<br>上使用辅助显示器时导致窗口大小调整和拖放功能出现故障的问题。[IDEA-327169， <a href="https://youtrack.jetbrains.com/issue/IDEA-327169/">IDEA-327723</a><a href="https://youtrack.jetbrains.com/issue/IDEA-327723"></a>]</li><li>_“项目_”工具窗口中的目录列表将再次正确加载。[<a href="https://youtrack.jetbrains.com/issue/IDEA-326394">想法-326394</a>]</li><li>在 Groovy 中指定泛型类型参数时，IDE 不再冻结。[<a href="https://youtrack.jetbrains.com/issue/IDEA-316712">IDEA-316712</a>]</li><li>编辑 XHTML 文件时，IDE 不再冻结。[<a href="https://youtrack.jetbrains.com/issue/IDEA-238917">IDEA-238917</a>]</li><li>打印再次按预期工作。[<a href="https://youtrack.jetbrains.com/issue/IDEA-323747">IDEA-323747</a>]</li><li>更新捆绑的插件不再从 IDE<br>的安装文件夹中删除插件文件。[<a href="https://youtrack.jetbrains.com/issue/IDEA-326800">IDEA-326800</a>]</li><li>OpenAPI 规范插件在使用 OpenAPI 3.1.0<br>时不再错误地要求模式类型字段为数组。[<a href="https://youtrack.jetbrains.com/issue/IDEA-317690">IDEA-317690</a>]</li><li>IDE 现在支持 OpenAPI 3.1。[<a href="https://youtrack.jetbrains.com/issue/IDEA-322411">IDEA-322411</a>]</li><li>容器重新启动后，IDE 将再次正确显示所有 Docker<br>容器日志。[<a href="https://youtrack.jetbrains.com/issue/IDEA-318041">IDEA-318041</a>]</li><li>我们修复了在通过_“新建目录_<br>”对话框创建源文件夹时导致源条目重复的问题。[<a href="https://youtrack.jetbrains.com/issue/IDEA-310739">想法-310739</a>]</li><li>修复了导致 IDE<br>在编辑批注类型方法名称后错误忽略或错误地报告代码错误的问题。[<a href="https://youtrack.jetbrains.com/issue/IDEA-323331">IDEA-323331</a>]</li><li>再次可以在“_搜索所有位置”<br>_对话框的“文件”选项卡中同时选择和打开多个_文件_。[<a href="https://youtrack.jetbrains.com/issue/IDEA-326262">IDEA-326262</a>]</li><li>在关闭本机标头的 Linux<br>上使用_高对比度_主题时导致窗口控件被遮挡的问题已得到修复。[<a href="https://youtrack.jetbrains.com/issue/IDEA-326930">IDEA-326930</a>]</li><li>每次打开 JetBrains 客户端时，IDE 将不再显示许可证对话框。[<a href="https://youtrack.jetbrains.com/issue/GTW-5838">GTW-5838</a>]</li></ul><p>从 v2023.2.1 开始，IntelliJ IDEA 捆绑的 Android 插件提供了 Android Studio Giraffe Stable 的功能和错误修复，包括对 Android<br>Gradle 插件 （AGP） 版本 8.0.0 的支持。请注意，该支持不包括需要登录 Firebase 帐户的功能。</p><p>有关此错误修复更新中解决的问题的完整列表，请查看<a href="https://youtrack.jetbrains.com/articles/IDEA-A-2100661651/IntelliJ-IDEA-2023.2.1-232.9559.62-build-Release-Notes">发行说明</a><br>。请随时与我们分享您的反馈，或使用我们的<a href="https://youtrack.jetbrains.com/issues/IDEA">问题跟踪器</a>报告您遇到的任何错误。</p><p>祝您发展愉快！��</p><p>祝您发展愉快！</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
            <tag> 更新日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【面试题系列】（一）</title>
      <link href="/ca67f3be.html"/>
      <url>/ca67f3be.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="Redis有哪些数据结构？其底层是怎么实现的？"><a href="#Redis有哪些数据结构？其底层是怎么实现的？" class="headerlink" title="Redis有哪些数据结构？其底层是怎么实现的？"></a>Redis有哪些数据结构？其底层是怎么实现的？</h1><p><a href="https://blog.zysicyj.top/84392d3f">Redis 系列（一）：深入了解 Redis 数据类型和底层数据结构</a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/image.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/image.png"></a></p><ol><li><p><strong>字符串（String）：</strong> 用于存储文本或二进制数据。可以执行字符串的基本操作，如设置、获取、增加、减少等。</p></li><li><p><strong>哈希表（Hash）：</strong> 存储键值对集合，类似于关联数组。适用于存储对象属性或配置信息。</p></li><li><p><strong>列表（List）：</strong> 使用双向链表实现的有序集合，允许插入和删除元素。可以用于实现队列、栈等数据结构。</p></li><li><p><strong>集合（Set）：</strong> 存储不重复的无序元素集合。支持求交集、并集、差集等操作，适用于数据去重和关联性操作。</p></li><li><p><strong>有序集合（Sorted Set）：</strong> 类似于集合，但每个元素都有一个分数（score），并根据分数进行排序。适用于排行榜、优先级队列等场景。</p></li><li><p><strong>位图（Bitmap）：</strong> 使用字符串来表示位的数据结构，支持位操作。适用于标记、计数等场景。</p></li><li><p><strong>HyperLogLog：</strong> 用于估计集合中唯一元素的个数，占用固定的内存空间，适用于基数统计场景。</p></li><li><p><strong>地理空间（GeoSpatial）：</strong> 存储地理位置信息，支持距离计算和位置查询。</p></li></ol><h1 id="什么是缓存击穿？什么原因？如何解决？"><a href="#什么是缓存击穿？什么原因？如何解决？" class="headerlink" title="什么是缓存击穿？什么原因？如何解决？"></a>什么是缓存击穿？什么原因？如何解决？</h1><p>缓存击穿是指在高并发情况下，一个缓存中不存在但是频繁被请求的数据，导致请求直接打到数据库，增加数据库的负载和延迟。这通常发生在以下情况下：</p><ol><li><p><strong>热点数据失效：</strong> 当某个热点数据过期或被移除时，大量的并发请求同时访问该数据，导致请求绕过缓存直接访问数据库。</p></li><li><p><strong>分布式系统中的节点失效：</strong> 在分布式缓存环境下，如果一个或多个缓存节点失效，会导致请求无法命中缓存，从而打到后端数据库。</p></li></ol><p>解决缓存击穿的方法有多种，其中常见的包括：</p><ol><li><p><strong>设置热点数据永不过期：</strong> 对于热点数据，可以设置永不过期，确保数据始终可用。但要注意，这会占用缓存空间，可能导致其他数据的驱逐。</p></li><li><p><strong>使用互斥锁（Mutex Lock）：</strong> 在缓存失效时，使用互斥锁来控制只有一个请求能够从数据库加载数据，其他请求在等待中，避免并发访问数据库。</p></li><li><p><strong>提前异步加载：</strong> 在数据即将过期时，启动一个异步任务去加载数据到缓存，避免过期时直接请求数据库。</p></li><li><p><strong>使用分布式锁：</strong> 在分布式环境下，可以使用分布式锁来保护缓存数据的加载过程，确保只有一个节点进行加载。</p></li><li><p><strong>使用布隆过滤器：</strong> 布隆过滤器是一种用于判断元素是否存在于集合中的数据结构，可以用来判断某个数据是否需要去数据库加载，减少无效的请求。</p></li><li><p><strong>热点数据预加载：</strong> 提前在系统启动时加载热点数据到缓存，避免在运行时因为缓存失效而引起的问题。</p></li></ol><p>选择哪种方法取决于具体的业务场景和需求，通常需要根据系统的特点和访问模式来综合考虑。</p><h1 id="什么是缓存雪崩？什么原因？如何解决？"><a href="#什么是缓存雪崩？什么原因？如何解决？" class="headerlink" title="什么是缓存雪崩？什么原因？如何解决？"></a>什么是缓存雪崩？什么原因？如何解决？</h1><p>缓存雪崩是指缓存在某个时间段内大面积失效，导致大量请求直接访问后端数据库，造成数据库压力激增和系统性能下降的情况。通常发生在以下情况下：</p><ol><li><p><strong>大量缓存同时失效：</strong> 当多个缓存数据在同一个时间段内同时失效，导致大量请求直接打到后端数据库。</p></li><li><p><strong>缓存服务器宕机：</strong> 如果缓存服务器宕机，缓存数据不可用，请求会直接访问后端数据库。</p></li><li><p><strong>业务高峰期：</strong> 在业务高峰期，访问量剧增，缓存失效导致数据库请求激增。</p></li></ol><p>解决缓存雪崩的方法包括：</p><ol><li><p><strong>使用多级缓存：</strong> 引入多级缓存，将数据同时存储在多个缓存层，降低某个缓存层失效的风险。</p></li><li><p><strong>设置随机过期时间：</strong> 对于相同类型的数据，设置随机的过期时间，避免大量数据同时失效。</p></li><li><p><strong>缓存数据永不过期：</strong> 对于热点数据，可以设置永不过期，确保数据始终可用。</p></li><li><p><strong>异步加载缓存：</strong> 在缓存失效时，启动异步任务去加载数据，避免在缓存失效时直接访问数据库。</p></li><li><p><strong>限流降级：</strong> 在高峰期限制请求的并发数，将部分请求降级处理，避免对后端服务造成过大压力。</p></li><li><p><strong>熔断策略：</strong> 根据系统负载情况，实施熔断策略，避免系统崩溃。</p></li><li><p><strong>缓存预热：</strong> 在系统启动时，预先加载热点数据到缓存，避免系统启动时的大量请求。</p></li><li><p><strong>分布式部署：</strong> 将缓存服务器分布在不同的节点上，降低单点故障的风险。</p></li></ol><p>综合考虑业务需求和系统特点，可以采用上述方法来解决缓存雪崩问题，保障系统的稳定性和性能。</p><h1 id="Redis持久化机制了解吗？"><a href="#Redis持久化机制了解吗？" class="headerlink" title="Redis持久化机制了解吗？"></a>Redis持久化机制了解吗？</h1><p><a href="https://blog.zysicyj.top/52275545">Redis 系列（二）：深入解读 Redis 的两种持久化方式</a></p><p>是的，Redis具有两种主要的持久化机制：RDB（Redis Database）快照和AOF（Append-Only File）日志。这些机制用于将内存中的数据持久化到硬盘上，以防止数据丢失。</p><ol><li><p><strong>RDB快照：</strong></p><ul><li>RDB持久化通过将内存中的数据快照保存到一个二进制文件（例如<code>dump.rdb</code>）中来实现。</li><li>可以手动执行RDB快照，也可以通过配置项定期自动执行。</li><li>优点是文件小，适合备份和恢复，对性能影响较小。</li><li>缺点是数据可能在两次快照之间发生丢失，不适合数据实时性要求较高的场景。</li></ul></li><li><p><strong>AOF日志：</strong></p><ul><li>AOF持久化记录每个写操作（例如SET、DEL）到一个追加的日志文件（例如<code>appendonly.aof</code>）中。</li><li>AOF文件以文本方式记录，可以随时对其进行追加、更新和重写。</li><li>可以通过配置项设置不同的AOF策略：<code>always</code>（每次写操作都记录）、<code>everysec</code>（每秒记录一次）、<code>no</code>（不记录）。</li><li>优点是可以实现更高的数据实时性，适合对数据安全性要求较高的场景。</li><li>缺点是AOF文件相对较大，恢复速度可能较慢。</li></ul></li></ol><p>在实际应用中，可以根据业务需求选择合适的持久化机制，甚至可以同时使用RDB和AOF，以提高数据的安全性和可靠性。另外，Redis还提供了混合持久化的方式（默认使用AOF来恢复数据，而RDB用于备份），以充分发挥两种持久化机制的优势。</p><h1 id="Redis应用场景有哪些？"><a href="#Redis应用场景有哪些？" class="headerlink" title="Redis应用场景有哪些？"></a>Redis应用场景有哪些？</h1><ol><li><p><strong>缓存：</strong> 最常见的用途，将热门数据存储在内存中，以提高访问速度，减轻数据库负担。适用于读取频繁、数据量较大的场景。</p></li><li><p><strong>会话存储：</strong> 将用户会话数据存储在Redis中，实现分布式会话管理，以避免单点故障和状态共享问题。</p></li><li><p><strong>计数器和统计：</strong> Redis的原子操作可以实现计数器功能，用于统计页面访问、点赞、评论等。</p></li><li><p><strong>排行榜&#x2F;热门内容：</strong> 利用有序集合（Sorted Set）数据结构，存储并排名用户、文章、商品等，以实现排行榜或展示热门内容。</p></li><li><p><strong>发布订阅：</strong> Redis的发布订阅机制允许实时地将消息发布给订阅者，用于构建实时通知、聊天室等功能。</p></li><li><p><strong>分布式锁：</strong> 利用Redis的原子操作和过期时间设置，实现分布式环境下的锁机制，保障资源的互斥访问。</p></li><li><p><strong>限流器：</strong> 利用Redis的令牌桶或漏桶算法，实现请求的限流控制，防止突发流量影响系统稳定性。</p></li><li><p><strong>缓存穿透防护：</strong> 将空值或异常数据存储在缓存中，避免缓存穿透引起的数据库查询压力。</p></li><li><p><strong>地理位置服务：</strong> 利用Redis的地理位置数据类型，存储并查询地理位置信息，用于附近的人、地点等功能。</p></li><li><p><strong>任务队列：</strong> 利用列表数据结构，实现异步任务队列，处理后台任务、消息队列等。</p></li><li><p><strong>即时数据分析：</strong> 将实时产生的数据存储在Redis中，供数据分析使用，如实时监控、实时报表等。</p></li></ol><p>这些只是Redis应用场景的一部分，实际上，由于Redis的高性能、低延迟和丰富的数据结构，它在很多领域都有广泛的应用。根据具体的业务需求，可以灵活选择合适的场景来使用Redis。</p><h1 id="Redis为什么这么快？"><a href="#Redis为什么这么快？" class="headerlink" title="Redis为什么这么快？"></a>Redis为什么这么快？</h1><p>Redis之所以具有如此高的性能，主要是由于以下几个方面的设计和优化：</p><ol><li><p><strong>内存存储：</strong> Redis将数据存储在内存中，内存的读写速度远高于磁盘，因此能够实现极低的读写延迟。</p></li><li><p><strong>单线程模型：</strong> Redis采用单线程模型处理客户端请求，避免了多线程的锁竞争和上下文切换开销，减少了性能损耗。</p></li><li><p><strong>非阻塞IO：</strong> Redis使用非阻塞IO和事件驱动的方式来处理客户端连接和网络通信，有效利用了操作系统提供的异步IO机制，提高了并发能力。</p></li><li><p><strong>数据结构优化：</strong> Redis内置了多种高效的数据结构，如哈希表、有序集合、跳表等，针对不同的应用场景选择最合适的数据结构，提高了数据操作的效率。</p></li><li><p><strong>持久化策略：</strong> Redis支持多种持久化方式，如RDB快照和AOF日志，可以根据需求选择合适的持久化策略，保障数据的可靠性。</p></li><li><p><strong>多种网络协议支持：</strong> Redis支持多种网络协议，如HTTP、RESP（Redis Serialization Protocol）等，方便不同编程语言和应用程序与Redis进行交互。</p></li><li><p><strong>数据压缩：</strong> Redis在存储数据时进行了压缩，减小了内存占用，提高了数据的存储密度。</p></li><li><p><strong>预分配内存：</strong> Redis在启动时预先分配一定数量的内存，减少了内存分配的开销，提高了内存使用效率。</p></li><li><p><strong>管道技术：</strong> Redis的管道（Pipeline）技术允许客户端发送多个命令，在一个连接上连续执行，减少了网络通信的开销。</p></li><li><p><strong>高效的排序算法：</strong> 在有序集合（Sorted Set）中，Redis采用跳表（Skip List）作为底层数据结构，实现了高效的排序和检索。</p></li></ol><h1 id="Redis事务如何实现？"><a href="#Redis事务如何实现？" class="headerlink" title="Redis事务如何实现？"></a>Redis事务如何实现？</h1><p>Redis事务是一组命令的集合，可以在一个原子操作内执行多个命令。Redis的事务通过MULTI、EXEC、WATCH、DISCARD等命令来实现，它提供了类似于传统数据库的事务特性，但与传统数据库的事务有一些不同之处。</p><p>以下是Redis事务的实现流程：</p><ol><li><p><strong>MULTI命令：</strong> 事务开始时，客户端发送MULTI命令，告诉Redis开始记录后续的命令序列。</p></li><li><p><strong>多个命令：</strong> 在MULTI和EXEC之间的命令会被加入到事务队列中，但并不会立即执行。</p></li><li><p><strong>EXEC命令：</strong> 当客户端发送EXEC命令时，Redis会依次执行事务队列中的命令。在执行过程中，Redis会将事务队列中的命令依次执行，如果其中的某个命令执行失败，不会影响其他命令的执行。</p></li><li><p><strong>事务执行结果：</strong> EXEC命令执行完成后，Redis会返回事务中所有命令的执行结果，以数组形式返回。如果事务中的某个命令执行失败，对应的结果将是错误信息。</p></li><li><p><strong>DISCARD命令：</strong> 如果在MULTI和EXEC之间，客户端发送了DISCARD命令，那么事务队列中的所有命令都会被清除，事务被取消。</p></li><li><p><strong>WATCH命令：</strong> 为了实现乐观锁的机制，可以使用WATCH命令监视一个或多个键。如果在事务执行前，有其他客户端修改了被监视的键，整个事务会被取消。</p></li></ol><p>Redis事务的特点：</p><ul><li>Redis事务是原子性的：在EXEC执行期间，事务中的所有命令要么都被执行，要么都不被执行。</li><li>Redis事务是隔离的：事务的执行过程不会受到其他客户端的影响。</li><li>Redis事务是不支持回滚的：即使其中某个命令执行失败，不会回滚前面已经执行的命令。</li></ul><p>需要注意的是，虽然Redis事务提供了一种封装多个命令的方式，但是由于Redis的单线程模型，事务中的某些命令可能会因为特定的情况（如阻塞操作）导致整个事务执行的时间较长。因此，在使用Redis事务时，需要考虑事务执行期间可能的性能影响。</p><h1 id="Redis过期键删除策略？"><a href="#Redis过期键删除策略？" class="headerlink" title="Redis过期键删除策略？"></a>Redis过期键删除策略？</h1><p>在Redis中，有两种主要的过期键删除策略，分别是惰性删除和定期删除，还有一些淘汰策略用于释放内存空间。以下是这些策略的详细说明：</p><ol><li><p><strong>惰性删除（Lazy Expiration）：</strong> 这是Redis默认的过期键删除策略。当访问一个已经过期的键时，Redis会立即删除该键并返回空值。这种策略避免了在访问时才删除键，节省了内存和CPU资源。</p></li><li><p><strong>定期删除（定时任务删除）：</strong> Redis会随机抽取一些过期键，并检查它们是否过期。如果过期，就会删除这些键。这种策略通过定期任务进行删除，以避免删除大量过期键对性能造成影响。</p></li><li><p><strong>内存淘汰策略（Eviction Policies）：</strong> 当内存使用达到一定阈值（由<code>maxmemory</code>参数指定）时，Redis会触发淘汰策略来释放空间。常见的淘汰策略包括：</p><ul><li><code>noeviction</code>：当内存不足以容纳新写入数据时，写入操作会报错。</li><li><code>allkeys-lru</code>：从所有键中选择最近最少使用的键进行删除。</li><li><code>volatile-lru</code>：从设置了过期时间的键中选择最近最少使用的键进行删除。</li><li><code>allkeys-random</code>：随机选择一个键进行删除。</li><li><code>volatile-random</code>：从设置了过期时间的键中随机选择一个键进行删除。</li><li><code>volatile-ttl</code>：从设置了过期时间的键中选择剩余时间最短的键进行删除。</li></ul></li></ol><p>这些策略可以通过Redis的配置参数进行设置，例如：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置过期键删除策略为定期删除</span></span><br><span class="line">config set maxmemory-policy noeviction</span><br></pre></td></tr></table></figure><p>需要根据实际场景和需求来选择适合的策略和参数值，以平衡内存使用和性能。</p><h1 id="Redis怎么实现消息队列？"><a href="#Redis怎么实现消息队列？" class="headerlink" title="Redis怎么实现消息队列？"></a>Redis怎么实现消息队列？</h1><p>Redis可以用作轻量级的消息队列，实现基本的消息发布和订阅功能。以下是在Redis中如何实现消息队列的基本步骤：</p><ol><li><p><strong>发布消息：</strong> 在发布者端，使用<code>PUBLISH</code>命令将消息发布到指定的频道（通道）。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PUBLISH channel_name message_content</span><br></pre></td></tr></table></figure></li><li><p><strong>订阅消息：</strong> 在订阅者端，使用<code>SUBSCRIBE</code>命令订阅一个或多个频道，从中接收发布者发布的消息。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SUBSCRIBE channel_name</span><br></pre></td></tr></table></figure></li><li><p><strong>接收消息：</strong> 订阅者在订阅了频道后，会实时接收到发布者发布的消息。</p></li></ol><p>通过上述步骤，你可以实现基本的发布-订阅模式的消息队列。然而，需要注意以下几点：</p><ul><li>Redis的消息队列不支持消息持久化，即如果没有订阅者在线时，消息会丢失。</li><li>如果需要支持持久化、多个消费者、消息确认等高级特性，可能需要考虑使用专门的消息队列中间件，如RabbitMQ、Apache Kafka等。</li></ul><p>在实际应用中，如果需要更多的消息队列特性，可以使用Redis的LIST数据结构来实现简单的队列。将发布者发布的消息插入到LIST中，然后消费者从LIST中弹出消息进行处理。但需要注意的是，Redis并不是专门为消息队列设计的，更适合用于一些简单的消息发布-订阅场景。对于高性能、大规模的消息队列需求，建议使用专门的消息队列中间件。��息队列中间件。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> 数据结构 </tag>
            
            <tag> 缓存击穿 </tag>
            
            <tag> 缓存雪崩 </tag>
            
            <tag> Redis持久化 </tag>
            
            <tag> Redis应用场景 </tag>
            
            <tag> Redis性能优化 </tag>
            
            <tag> Redis事务 </tag>
            
            <tag> Redis过期键删除策略 </tag>
            
            <tag> Redis消息队列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo添加相册</title>
      <link href="/318af14d.html"/>
      <url>/318af14d.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><h1 id="视频教学地址"><a href="#视频教学地址" class="headerlink" title="视频教学地址"></a>视频教学地址</h1><div class="bilibili">  <iframe src="//player.bilibili.com/player.html?bvid=BV1Fw411Q7pS&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe></div><h1 id="打开butterfly配置文件，在menu处新增一行"><a href="#打开butterfly配置文件，在menu处新增一行" class="headerlink" title="打开butterfly配置文件，在menu处新增一行"></a>打开butterfly配置文件，在menu处新增一行</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  主页: / || fas fa-home</span><br><span class="line">  时间轴: /archives/ || fas fa-archive</span><br><span class="line">  标签: /tags/ || fas fa-tags</span><br><span class="line">  分类: /categories/ || fas fa-folder-open</span><br><span class="line">#   清单||fas fa-list:</span><br><span class="line">#     音乐: /music/ || fas fa-music</span><br><span class="line">#     电影: /movies/ || fas fa-video</span><br><span class="line">  相册: /gallery/ || fas fa-solid fa-image</span><br><span class="line">  友链: /link/ || fas fa-link</span><br><span class="line">  活动日历: /about/ || fas fa-calendar</span><br><span class="line">  Love: /love/static/index.html || fas fa-heart</span><br></pre></td></tr></table></figure><h1 id="在source目录下新建gallery目录，并新建index"><a href="#在source目录下新建gallery目录，并新建index" class="headerlink" title="在source目录下新建gallery目录，并新建index"></a>在source目录下新建gallery目录，并新建index</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-24/47660906878700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-24/47660906878700.png"></a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span><br><span class="line">    &#123;% galleryGroup &#x27;宝宝相册&#x27; &#x27;记录宝宝成长！&#x27; &#x27;/gallery/baby&#x27; http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/46201997695900.jpeg %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-24/47801912918300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-24/47801912918300.png"></a></p><h1 id="在gallery下新建baby-md文件"><a href="#在gallery下新建baby-md文件" class="headerlink" title="在gallery下新建baby.md文件"></a>在gallery下新建baby.md文件</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery true,220,20 %&#125;</span><br><span class="line">![](<span class="link">http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/46201997695900.jpeg</span>)</span><br><span class="line">![](<span class="link">http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/46974523049100.jpeg</span>)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><h1 id="生成并启动"><a href="#生成并启动" class="headerlink" title="生成并启动"></a>生成并启动</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line"></span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>ell<br>hexo g</p><p>hexo s</p><pre><code># 如果您喜欢我的内容，就点击关注吧&gt; 扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出&gt; 个人微信![请加个人微信备注【交流群】](https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg)&gt; 公众号![](https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430)</code></pre></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 首发博客地址 </tag>
            
            <tag> 相册 </tag>
            
            <tag> 视频教学地址 </tag>
            
            <tag> butterfly配置文件 </tag>
            
            <tag> menu </tag>
            
            <tag> source目录 </tag>
            
            <tag> gallery目录 </tag>
            
            <tag> index </tag>
            
            <tag> gallery-group-main </tag>
            
            <tag> galleryGroup </tag>
            
            <tag> 宝宝相册 </tag>
            
            <tag> 记录宝宝成长 </tag>
            
            <tag> baby.md文件 </tag>
            
            <tag> gallery true </tag>
            
            <tag> 生成并启动 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>报错sql_mode=only_full_group_by</title>
      <link href="/42248197.html"/>
      <url>/42248197.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="首发博客地址"><a href="#首发博客地址" class="headerlink" title="首发博客地址"></a>首发博客地址</h1><p><a href="https://blog.zysicyj.top/">https://blog.zysicyj.top/</a></p><h1 id="报错内容"><a href="#报错内容" class="headerlink" title="报错内容"></a>报错内容</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">### The error may exist in file[D:\code\cppCode20221025\leader-system\target\classes\mapper\system\TJsonDataMapper.xml]</span><br><span class="line">        ### The error may involve defaultParameterMap</span><br><span class="line">        ### The error occurred <span class="keyword">while</span> setting parameters</span><br><span class="line">        ### SQL:select <span class="title function_">ifnull</span><span class="params">(s.type,<span class="string">&#x27;&#x27;</span>)</span>type,ifnull(GROUP_CONCAT(s.yjzbname,<span class="string">&#x27;:&#x27;</span>,s.num),<span class="string">&#x27;0&#x27;</span>)nums <span class="title function_">from</span><span class="params">(select t.type,(select name from t_norm s where s.id=n.parentId)</span>yjzbname,count(*)num from t_org_ticket o left join t_ticket t on t.id=o.ticket_id and t.project_id=?left join t_norm n on n.model=t.modelid and n.project_id=?where o.org_id=?and t.type=?and n.type=<span class="string">&#x27;02&#x27;</span>GROUP BY parentId)s</span><br><span class="line">        ### Cause:java.sql.SQLSyntaxErrorException:In aggregated query without GROUP BY,expression #1of SELECT list contains nonaggregated column<span class="string">&#x27;s.type&#x27;</span>;<span class="built_in">this</span> is incompatible with sql_mode=only_full_group_by</span><br><span class="line">        ;bad SQL grammar[];nested exception is java.sql.SQLSyntaxErrorException:In aggregated query without GROUP BY,expression #1of SELECT list contains nonaggregated column<span class="string">&#x27;s.type&#x27;</span>;<span class="built_in">this</span> is incompatible with sql_mode=only_full_group_by</span><br></pre></td></tr></table></figure><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/4605477245600.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/4605477245600.png"></a></p><h1 id="如何解决"><a href="#如何解决" class="headerlink" title="如何解决"></a>如何解决</h1><ol><li><p><strong>调整GROUP BY子句和SELECT列表：</strong></p><p>保证查询的字段在group by中即可</p></li><li><p><strong>禁用only_full_group_by模式：</strong></p><p>如果你确定查询的逻辑和数据不会引起问题，可以在查询之前执行以下命令来临时禁用only_full_group_by模式：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> SESSION sql_mode<span class="operator">=</span><span class="string">&#x27;&#x27;</span>;</span><br></pre></td></tr></table></figure><p>这可能会导致一些数据不一致性问题，只有在你非常确定情况下才应该使用。</p><p>如果是需要永久写入，那就需要写到cnf或ini配置中</p><p>mysql中配置文件地址一般是<code>C:\Program Files\MySQL\MySQL Server 5.7\bin\my.ini </code><br>我的在这里额<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/5485190051400.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/5485190051400.png"></a></p></li></ol><p>查询已经有的sql_mode</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> @<span class="variable">@sql_mode</span></span><br></pre></td></tr></table></figure><p>在ini中添加查询出来的模式配置，然后去掉<code>only_full_group_by</code>模式即可</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">sql_mode</span>=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span><br></pre></td></tr></table></figure><ol start="3"><li><p><strong>重新设计查询：</strong></p><p>如果无法简单地调整GROUP<br>BY子句和SELECT列表，你可能需要重新设计查询逻辑。这可能涉及到使用子查询、临时表或其他方式来满足only_full_group_by模式的要求。<br>。p_by模式的要求。 。</p></li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> BUG </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
            <tag> 报错 </tag>
            
            <tag> sql_mode=only_full_group_by </tag>
            
            <tag> 解决 </tag>
            
            <tag> 调整GROUP BY子句和SELECT列表 </tag>
            
            <tag> 禁用only_full_group_by模式 </tag>
            
            <tag> 重新设计查询 </tag>
            
            <tag> MySQL </tag>
            
            <tag> 数据库 </tag>
            
            <tag> 错误 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2023年8月23日博客更新</title>
      <link href="/119629d3.html"/>
      <url>/119629d3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><h1 id="新增相册集和结婚相册"><a href="#新增相册集和结婚相册" class="headerlink" title="新增相册集和结婚相册"></a>新增相册集和结婚相册</h1><p><a href="https://blog.zysicyj.top/gallery/">https://blog.zysicyj.top/gallery/</a></p><p>相册整理不容易呀，后续有机会再慢慢整理吧，相册慢慢加上<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/134768908734000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/134768908734000.png"></a></p><p>我选择了大图展示，这种高清图片，我觉得还是大点的好，默认220有点小了，我设置的1000，然后设置了懒加载，点击一次加载5张，默认是10张。太多了，图片大，就会很慢。。。。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/134824576115100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/134824576115100.png"></a></p><h1 id="新增纪念日页面"><a href="#新增纪念日页面" class="headerlink" title="新增纪念日页面"></a>新增纪念日页面</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/134923622743699.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/134923622743699.png"></a></p><p><a href="https://blog.zysicyj.top/love/static/index.html">https://blog.zysicyj.top/love/static/index.html</a></p><p>主要是音乐好听，嘿嘿！</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/135019589258300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-23/135019589258300.png"></a><br>3-08-23&#x2F;135019589258300.png)</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 八月 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 更新 </tag>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo优化bilibili显示</title>
      <link href="/bb1facb3.html"/>
      <url>/bb1facb3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="首发博客地址"><a href="#首发博客地址" class="headerlink" title="首发博客地址"></a>首发博客地址</h1><p><a href="https://blog.zysicyj.top/">https://blog.zysicyj.top/</a></p><p>It has been 1086 days since the last update, the content of the article may be outdated.</p><p>这篇文章属于转载，原地址为<a href="https://hongcyu.cn/posts/hexo-bilibili.html">Hexo博客引用B站视频并自动适配</a></p><p>在进行引用B站用iframe方式引入视频时发现，通过默认的方式导入会使得屏幕很小</p><p><a href="https://cdn.jsdelivr.net/gh/PaddyLin-xum/photo@master/4hgds.jpg"><a href="https://cdn.jsdelivr.net/gh/PaddyLin-xum/photo@master/4hgds.jpg" class="gallery-item"><img src="https://cdn.jsdelivr.net/gh/PaddyLin-xum/photo@master/4hgds.jpg"></a></a></p><p>一般我们都是自己改width和height来修改大小，但是换成不同的设备就无法正常的显示了。如下</p><p>默认：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;//player.bilibili.com/player.html?aid=81148317&amp;cid=138878361&amp;page=1&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">framespacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">allowfullscreen</span>=<span class="string">&quot;true&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><p>修改后：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;//player.bilibili.com/player.html?aid=81148317&amp;cid=138878361&amp;page=1&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">framespacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">allowfullscreen</span>=<span class="string">&quot;true&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;720&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><p>即可较好的适配大屏幕，但是到手机上就不太好用了，不能自动适配，怎么办呢，看下面的两种办法：</p><p>外面包裹一个div标签，div标签自适应与屏幕的大小，包裹内iframe以100%顶边撑开。以butterfly主题为例子：在<code>source/css/_ global/function.styl</code><br>下底部添加以下css代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-class">.bilibili</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;              </span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">75%</span>;    </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bilibili</span> <span class="selector-tag">iframe</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>插入时写成如下形式即可：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bilibili&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;//player.bilibili.com/player.html?bvid=BV1hF411C7ks&amp;page=1&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">framespacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">allowfullscreen</span>=<span class="string">&quot;true&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下：</p><p>使用@media属性，对不同屏幕大小的设备，设置宽度和高度。@media可以查询到设备的以下属性</p><ol><li>设备屏幕的高度</li><li>设备的方向（如移动设备横屏）</li><li>可视窗口的宽高</li><li>屏幕解析度</li></ol><p>和上面一样，在指定位置插入css代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bilibili</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">767px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.bilibili</span> &#123;<span class="attribute">height</span>: <span class="number">15em</span>;<span class="attribute">max-width</span>: <span class="number">25em</span>;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">991px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.bilibili</span> &#123;<span class="attribute">height</span>: <span class="number">20em</span>;<span class="attribute">max-width</span>: <span class="number">30em</span>;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">992px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">1199px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.bilibili</span> &#123;<span class="attribute">height</span>: <span class="number">30em</span>;<span class="attribute">max-width</span>: <span class="number">40em</span>;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">1200px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.bilibili</span> &#123;<span class="attribute">height</span>: <span class="number">40em</span>;<span class="attribute">max-width</span>: <span class="number">50em</span>;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后直接引用B站的iframe代码加上<code>class=&quot;bilibili&quot;</code>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">class</span>=<span class="string">&quot;bilibili&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//player.bilibili.com/player.html?aid=81148317&amp;cid=138878361&amp;page=1&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">framespacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">allowfullscreen</span>=<span class="string">&quot;true&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="B站链接的参数"><a href="#B站链接的参数" class="headerlink" title="B站链接的参数"></a><a href="#B%E7%AB%99%E9%93%BE%E6%8E%A5%E7%9A%84%E5%8F%82%E6%95%B0" title="B站链接的参数"></a>B站链接的参数</h2><p>例如：<code>player.bilibili.com/player.html?aid=81148317&amp;cid=138878361&amp;page=1</code></p><table><thead><tr><th>key</th><th>说明</th></tr></thead><tbody><tr><td>aid</td><td>视频ID 就是B站的av号</td></tr><tr><td>cid</td><td>应该是客户端的id,clientid的缩写（推测） 测试表示不填也不会有什么问题</td></tr><tr><td>page</td><td>第几个视频 也就是分P的 默认是1</td></tr><tr><td>as_wide</td><td>是否宽屏 1：宽屏 0：小屏</td></tr><tr><td>high_quality</td><td>视频质量 1：最高视频质量 0：最低视频质量</td></tr><tr><td>danmaku</td><td>是否开启弹幕 1：开启（默认） 0：关闭</td></tr></tbody></table><h2 id="阻止跳转B站"><a href="#阻止跳转B站" class="headerlink" title="阻止跳转B站"></a><a href="#%E9%98%BB%E6%AD%A2%E8%B7%B3%E8%BD%ACB%E7%AB%99" title="阻止跳转B站"></a>阻止跳转B站</h2><p>在网页上, 用户选择清晰度, 或者点击视频上面的一些图标, 会跳转到B站. 这个可通过设置 iframe 的 sandbox 属性去禁止</p><p><code>sandbox=&quot;allow-top-navigation allow-same-origin allow-forms allow-scripts&quot;</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;//player.bilibili.com/player.html?aid=81148317&amp;cid=138878361&amp;page=1&amp;high_quality=1&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">framespacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">allowfullscreen</span>=<span class="string">&quot;true&quot;</span> <span class="attr">sandbox</span>=<span class="string">“allow-top-navigation</span> <span class="attr">allow-same-origin</span> <span class="attr">allow-forms</span> <span class="attr">allow-scripts</span>&gt;</span> <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="修改默认视频质量"><a href="#修改默认视频质量" class="headerlink" title="修改默认视频质量"></a><a href="#%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E8%A7%86%E9%A2%91%E8%B4%A8%E9%87%8F" title="修改默认视频质量"></a>修改默认视频质量</h2><p>B站默认视频质量是最低的，可以通过在src链接后面添加&amp;high_quality&#x3D;1来设置</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;//player.bilibili.com/player.html?aid=81148317&amp;cid=138878361&amp;page=1&amp;high_quality=1&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">framespacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">allowfullscreen</span>=<span class="string">&quot;true&quot;</span> <span class="attr">sandbox</span>=<span class="string">“allow-top-navigation</span> <span class="attr">allow-same-origin</span> <span class="attr">allow-forms</span> <span class="attr">allow-scripts</span>&gt;</span> <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">```low-scripts&gt; <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/123545407559600.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/123545407559600.png"></a></p><blockquote><p>公众号</p></blockquote><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/132424106168700.jpg" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/132424106168700.jpg"></a></p><blockquote><p>个人微信</p></blockquote><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/132126553740700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/132126553740700.png"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> bilibili </tag>
            
            <tag> 验证器 </tag>
            
            <tag> 字段级别约束 </tag>
            
            <tag> 属性级别约束 </tag>
            
            <tag> 默认消息插值 </tag>
            
            <tag> 转义字符 </tag>
            
            <tag> 统一规约 </tag>
            
            <tag> 工具类 </tag>
            
            <tag> Leaf雪花算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>老婆七夕快乐</title>
      <link href="/cb2b755d.html"/>
      <url>/cb2b755d.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><div class="bilibili">    <iframe src="//player.bilibili.com/player.html?bvid=BV1hF411C7ks&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe></div>llscreen="true"><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 八月 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Love </tag>
            
            <tag> 七夕 </tag>
            
            <tag> 家人 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>idea插件grep_console最佳实践</title>
      <link href="/3ff56bc4.html"/>
      <url>/3ff56bc4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p>参考博客：<a href="https://blog.csdn.net/ayunnuo/article/details/123997304">https://blog.csdn.net/ayunnuo/article/details/123997304</a></p><h1 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-22/79516097317200.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-22/79516097317200.png"></a></p><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-22/79425341807600.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-22/79425341807600.png"></a></p><h1 id="具体颜色"><a href="#具体颜色" class="headerlink" title="具体颜色"></a>具体颜色</h1><table><thead><tr><th>日志级别</th><th>前景色</th><th>背景色</th></tr></thead><tbody><tr><td>Error</td><td>#FF0000</td><td>#370000</td></tr><tr><td>Warn</td><td>#FFC033</td><td>#1A0037</td></tr><tr><td>Info</td><td>#00FFF3</td><td>无</td></tr><tr><td>Debug</td><td>#808080</td><td>无</td></tr><tr><td>Debug</td><td>#808080</td><td>无</td></tr></tbody></table><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 配置 </tag>
            
            <tag> 插件 </tag>
            
            <tag> idea </tag>
            
            <tag> grep_console </tag>
            
            <tag> 最佳实践 </tag>
            
            <tag> 工具 </tag>
            
            <tag> 日志级别 </tag>
            
            <tag> 前景色 </tag>
            
            <tag> 背景色 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win11fn上锁/关锁</title>
      <link href="/c6532956.html"/>
      <url>/c6532956.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fn + esc 即可切换</span><br><span class="line">```fn + esc 即可切换</span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows11 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis系列（四）：哨兵机制详解</title>
      <link href="/de091d57.html"/>
      <url>/de091d57.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p>前面我们说过，redis采用了读写分离的方式实现高可靠。后面我们说了，为了防止主节点压力过大，优化成了主-从-从模式</p><h1 id="思考一个问题，主节点此时挂了怎么办"><a href="#思考一个问题，主节点此时挂了怎么办" class="headerlink" title="思考一个问题，主节点此时挂了怎么办"></a>思考一个问题，主节点此时挂了怎么办</h1><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/32212058065400.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/32212058065400.png"></a></p><p>这里主从模式下涉及到的几个问题：</p><ol><li>主库真的挂了吗？</li><li>我们应当选择哪个从库作为主库？</li><li>怎样让其他从库知道新的主库信息呢？</li><li>中断的数据如何恢复？</li></ol><p>哨兵机制就完美的解决了以上问题。</p><h1 id="什么是哨兵机制？"><a href="#什么是哨兵机制？" class="headerlink" title="什么是哨兵机制？"></a>什么是哨兵机制？</h1><p>Redis引入哨兵（Sentinel）机制的主要目的是为了增强其高可用性和自动故障恢复能力。在分布式系统中，特别是用作数据存储的数据库系统中，保障高可用性是至关重要的，以确保系统在面对节点故障等情况时能够继续提供服务。</p><p>以下是引入Redis哨兵机制的原因：</p><ol><li><p><strong>故障检测和自动故障切换：</strong><br>哨兵允许您配置多个Redis节点，并监视它们的运行状况。如果主节点（Master）出现故障，哨兵可以自动检测到并执行故障切换，将一个可用的从节点（Slave）晋升为新的主节点，从而保证服务的可用性。</p></li><li><p><strong>自动配置更新：</strong> 当Redis节点的拓扑结构发生变化（比如添加或移除节点）时，哨兵能够自动地通知客户端和其他Redis节点进行配置更新，从而确保整个集群的正确配置。</p></li><li><p><strong>监控和报警：</strong> 哨兵不仅监视节点的健康状态，还可以提供有关节点运行状况的信息，例如主从复制是否正常、延迟情况等。这可以帮助管理员及时发现问题并采取措施。</p></li><li><p><strong>无需人工干预的恢复：</strong> 哨兵允许自动故障切换，这意味着当主节点出现问题时，系统可以自动将一个从节点提升为新的主节点，而无需管理员手动介入，从而缩短恢复时间。</p></li></ol><p>Redis引入哨兵机制使得在分布式环境中更容易实现高可用性和故障恢复，而无需太多手动操作。哨兵机制可以确保Redis集群在节点故障时继续提供稳定的服务，对于那些对于高可用性要求较高的应用场景非常有用。</p><h1 id="哨兵机制的基本流程"><a href="#哨兵机制的基本流程" class="headerlink" title="哨兵机制的基本流程"></a>哨兵机制的基本流程</h1><p>哨兵其实就是一个运行在特殊模式下的Redis进程，其随着主从实例同时运行。</p><p>那么哨兵负责哪些活呢？主要是以下三点：</p><ol><li>监控</li><li>选主（选择主库）</li><li>通知</li></ol><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/32978330338599.png" title="哨兵机制的三项任务与目标" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/32978330338599.png" alt="哨兵机制的三项任务与目标"></a></p><h1 id="监控"><a href="#监控" class="headerlink" title="监控"></a>监控</h1><p>Redis哨兵的监控流程涉及多个步骤，用于实时监控Redis集群中各个节点的状态并采取必要的措施来确保集群的可用性和稳定性。</p><ol><li><p><strong>节点发现和配置：</strong> 哨兵通过配置文件指定要监控的主节点和从节点。启动哨兵后，它会连接到指定的节点，并获取有关其他节点的信息，形成一个初始的监控拓扑。</p></li><li><p><strong>心跳检测：</strong> 哨兵会定期向监控的节点发送PING命令来检测节点是否存活。这些节点可以是主节点、从节点或其他哨兵节点。如果哨兵在一定时间内没有收到响应，它会认为节点不可用。</p></li><li><p><strong>节点状态变更：</strong> 当哨兵连续多次无法连接到一个节点时，它会将该节点标记为主观下线。当多个哨兵都将节点标记为主观下线时，这个节点会被认为是客观下线。</p></li><li><p><strong>故障判断和选举：</strong> 当主节点被标记为客观下线时，哨兵会执行故障判断。它会从剩余的健康主节点中选举一个作为新的主节点，并将该信息广播给其他哨兵和客户端。故障判断的逻辑考虑了多个因素，包括优先级、最近一次复制偏移量等。</p></li><li><p><strong>自动故障切换：</strong> 如果主节点被标记为客观下线，哨兵会通知从节点晋升为新的主节点。同时，哨兵会更新其他从节点的配置，使其复制新的主节点。这确保了即使主节点发生故障，集群仍然可以继续提供服务。</p></li><li><p><strong>监控从节点：</strong> 哨兵还会监控从节点的状态，包括从节点是否与主节点保持同步，以及从节点的复制延迟情况。如果从节点无法同步或者复制延迟过高，哨兵会将其标记为不健康。</p></li><li><p><strong>节点恢复：</strong> 如果一个节点从客观下线状态恢复，哨兵会将其标记为健康，并将其重新纳入集群中。从节点恢复后，它会重新同步主节点的数据。</p></li><li><p><strong>配置更新：</strong> 如果集群的拓扑发生变化，例如添加或移除节点，哨兵会自动更新配置，以便客户端能够正确连接到集群。</p></li><li><p><strong>事件通知：</strong> 哨兵通过发布订阅机制向订阅者（通常是客户端）发送有关集群状态变化的消息。这使得应用程序能够根据实时的集群状态做出相应的决策。</p></li><li><p><strong>持续监控：</strong> 哨兵会持续地监控集群中的节点，定期执行心跳检测、状态更新和故障判断，以确保集群的稳定运行。</p></li></ol><h1 id="主观下线与客观下线"><a href="#主观下线与客观下线" class="headerlink" title="主观下线与客观下线"></a>主观下线与客观下线</h1><p>在Redis的哨兵监控机制中，有两个关键概念：主观下线（Subjective Down）和客观下线（Objective Down）。这些概念帮助哨兵判断节点的可用性和故障状态。</p><ol><li><p><strong>主观下线（Subjective Down）：</strong><br>主观下线是指单个哨兵节点认为一个特定的Redis节点（主节点、从节点或其他哨兵）不可用。主观下线是一种主观的判断，是基于单个哨兵节点的观察结果得出的。当一个哨兵无法连接到某个Redis节点，它会将该节点标记为主观下线。多个哨兵节点可能会对同一个节点发出主观下线标记。</p></li><li><p><strong>客观下线（Objective Down）：</strong><br>客观下线是指在整个哨兵集合中达成一致，认为某个特定的Redis节点不可用。客观下线是一种更客观的判断，需要多个哨兵节点共同达成一致。当多个哨兵节点都主观下线同一个Redis节点时，这个节点会被认为是客观下线。</p></li></ol><p>举例说明：</p><ul><li><p>假设有三个哨兵节点：Sentinel A、Sentinel B 和 Sentinel C，以及一个主节点 Master 和一个从节点 Slave。如果 Sentinel A 无法连接到<br>Master 节点，它会将 Master 标记为主观下线。同样地，如果 Sentinel B 也无法连接到 Master 节点，它也会将 Master<br>标记为主观下线。但这还不足以让 Master 被认为是客观下线。</p></li><li><p>当 Sentinel A 和 Sentinel B 都主观下线了 Master 节点，并且他们相互通信时发现了这个情况，他们就会在达成一致意见后将<br>Master 节点标记为客观下线。这时，整个哨兵集合达成一致，认为 Master 节点已下线。</p></li></ul><p>客观下线是一个更严格的判断，需要多个哨兵节点一致认为某个节点不可用，才会触发后续的故障判断和自动故障切换等动作。这种机制确保了在一个哨兵节点认为某节点下线时，不会立即触发故障切换，以避免误判造成不必要的切换。只有多个哨兵节点一致认为节点下线，才会触发后续的故障处理流程。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/33314544699200.png" title="客观下线的判断" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/33314544699200.png" alt="客观下线的判断"></a></p><h1 id="如何选定新主库"><a href="#如何选定新主库" class="headerlink" title="如何选定新主库"></a>如何选定新主库</h1><p>在Redis Sentinel模式中，当主节点（Master）发生故障导致下线后，哨兵会通过选举过程选择一个新的主节点（Master）来取代原来的主节点。选定新主库的过程如下：</p><ol><li><p><strong>主观下线和客观下线判断：</strong> 当哨兵节点主观下线（单个哨兵认为不可用）一个主节点时，如果多数哨兵都主观下线了同一个主节点，那么这个主节点会被标记为客观下线（多数派共识）。</p></li><li><p><strong>选举新主节点：</strong> 当一个主节点被标记为客观下线后，哨兵节点会开始选举一个新的主节点。选举过程如下：</p><ul><li>哨兵会在所有没有下线的从节点（Slaves）中选择一个作为新主节点。**哨兵会选择一个延迟最小、复制偏移量最大的从节点作为新主节点<br>**。这确保了新主节点是最接近原主节点的从节点。</li><li>如果没有合适的从节点，哨兵会选择一个具备最高优先级的从节点，将其升级为主节点。如果优先级相同，那么哨兵会选择一个复制偏移量最大的从节点。</li></ul></li><li><p><strong>故障转移和切换：</strong> 一旦新主节点被选定，哨兵会发起故障转移操作。旧主节点会变成新主节点的一个从节点。其他从节点会重新配置，指向新的主节点。这个过程会保证尽量不丢失数据，并且保证整个集群的高可用性。</p></li></ol><p>选定新主库的过程是一个由哨兵节点协同工作的流程，确保了在主节点故障的情况下，尽可能地选择一个合适的从节点作为新的主节点，实现集群的高可用性和数据完整性。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/33452451605700.png" title="新主库的选择" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/33452451605700.png" alt="新主库的选择"></a></p><h1 id="如何配置哨兵"><a href="#如何配置哨兵" class="headerlink" title="如何配置哨兵"></a>如何配置哨兵</h1><ol><li><p><strong>哨兵配置文件：</strong> 在Redis 6.x版本中，哨兵的配置文件名称默认为<code>redis-sentinel.conf</code>。</p></li><li><p><strong>配置变化：</strong> Redis 6.x版本引入了一些新的哨兵配置选项，以适应新的功能和改进。以下是一些常见的配置选项：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sentinel monitor mymaster 127.0.0.1 6379 2   # 监控名为 &quot;mymaster&quot; 的主节点，2表示至少需要2个哨兵同意主观下线才会执行故障转移</span><br><span class="line">sentinel down-after-milliseconds mymaster 5000   # 主观下线判定为5秒无响应</span><br><span class="line">sentinel parallel-syncs mymaster 1   # 执行故障转移时同时同步的从节点数量</span><br><span class="line">sentinel failover-timeout mymaster 10000   # 故障转移超时时间为10秒</span><br><span class="line">sentinel auth-pass mymaster mypassword   # 主节点的访问密码</span><br></pre></td></tr></table></figure></li><li><p><strong>启动哨兵节点：</strong> 在Redis 6.x版本中，启动哨兵节点的命令为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server /path/to/redis-sentinel.conf --sentinel</span><br></pre></td></tr></table></figure></li><li><p><strong>查看哨兵状态：</strong> 使用以下命令查看Redis 6.x版本哨兵节点的状态：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -p 26379</span><br><span class="line">sentinel master mymaster   <span class="comment"># 查看主节点的信息</span></span><br><span class="line">sentinel slaves mymaster   <span class="comment"># 查看从节点的信息</span></span><br><span class="line">sentinel sentinels mymaster   <span class="comment"># 查看其他哨兵节点的信息</span></span><br></pre></td></tr></table></figure></li></ol><h1 id="哨兵是如何互相发现的？"><a href="#哨兵是如何互相发现的？" class="headerlink" title="哨兵是如何互相发现的？"></a>哨兵是如何互相发现的？</h1><p>我们查看配置可以看到，我们并没有配置从节点的哨兵，我们只配置了主节点地址。</p><p>那么哨兵之间是如何互相发现通信的呢？</p><p>在Redis Sentinel（哨兵）集群中，哨兵节点之间通过发布订阅机制来互相发现和通信。这种方式使得哨兵节点能够监控主节点和从节点的状态，并进行故障检测和故障转移。</p><p>以下是哨兵集群如何通过发布订阅机制互相发现的工作流程：</p><ol><li><p><strong>初始连接：</strong> 在启动时，每个哨兵节点会尝试连接到指定的主节点。这些哨兵节点通过配置文件中的<code>sentinel monitor</code><br>命令指定要监控的主节点信息。</p></li><li><p><strong>Sentinel命令发布：</strong><br>当一个哨兵节点成功连接到主节点后，它会开始定期向主节点发送PING命令，以确保主节点处于活跃状态。如果哨兵节点检测到主节点不可用，它会将一个<code>+switch-master</code><br>命令发布到频道中，通知其他哨兵节点。</p></li><li><p><strong>发布订阅机制：</strong><br>Redis的发布订阅机制允许一个节点（发布者）向一个或多个节点（订阅者）广播消息。在哨兵集群中，每个哨兵节点都订阅了一个名为<code>__sentinel__:hello</code><br>的频道，用于接收其他哨兵节点发送的信息。<a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/34055357267900.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/34055357267900.png"></a></p></li><li><p><strong>发现其他哨兵节点：</strong> 当一个哨兵节点成功连接到主节点后，它会向<code>__sentinel__:hello</code>频道发布一个”Hello”<br>消息，其中包含它自己的信息（如IP地址和端口号）。其他哨兵节点通过订阅这个频道，可以获取所有其他哨兵节点的信息。</p></li><li><p><strong>收集哨兵信息：</strong> 每个哨兵节点通过订阅<code>__sentinel__:hello</code>频道，收集到其他哨兵节点的信息。这使得每个哨兵节点都知道了集群中其他哨兵节点的存在。</p></li><li><p><strong>故障检测和转移：</strong> 当一个哨兵节点检测到主节点不可用时，它会通过发布<code>+switch-master</code><br>命令来通知其他哨兵节点。这个命令包含了新的主节点信息，以及在执行故障转移时需要的其他信息。其他哨兵节点收到这个命令后，会进行判断并可能发起故障转移。</p></li></ol><p>通过以上机制，哨兵节点可以相互发现和通信，共同监控主节点和从节点的状态，并在主节点下线时协同执行故障转移操作。这种发布订阅机制确保了哨兵集群中节点之间的实时信息传递和协作。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/33993466200100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/33993466200100.png"></a></p><h1 id="由哪个哨兵执行主从切换？"><a href="#由哪个哨兵执行主从切换？" class="headerlink" title="由哪个哨兵执行主从切换？"></a>由哪个哨兵执行主从切换？</h1><h2 id="客观下线具体判断流程"><a href="#客观下线具体判断流程" class="headerlink" title="客观下线具体判断流程"></a>客观下线具体判断流程</h2><ol><li><p><strong>故障检测：</strong> 哨兵节点定期向集群中的所有主节点和从节点发送PING命令来检测节点的可用性。如果一个哨兵节点连续一定次数没有收到节点的回复，就会将该节点标记为可能进入客观下线状态。</p></li><li><p><strong>Quorum判断：</strong> 在判断一个节点是否客观下线时，需要考虑Quorum的概念。Quorum是指一个最小的投票数，当达到或超过这个投票数时，哨兵认为节点可能进入客观下线状态。Quorum的值通常设置为哨兵节点数量的一半加一。</p></li><li><p><strong>投票过程：</strong> 当哨兵节点开始怀疑某个节点可能客观下线时，它会向其他哨兵节点发送一个SENTINEL<br>is-master-down-by-addr命令，询问其他哨兵节点是否也认为该节点客观下线。其他哨兵节点会对此做出回应，根据回应的数量来判断是否达到Quorum。</p></li><li><p><strong>达到Quorum：</strong> 如果收到的回应数量达到或超过Quorum，那么哨兵节点就会认为该节点进入客观下线状态。这表示集群中有足够多的哨兵都认为该节点可能下线，进而触发后续的主从切换流程。</p></li><li><p><strong>执行后续操作：</strong> 一旦一个节点被认为客观下线，哨兵节点将开始执行故障转移操作，选择新的主节点并开始同步数据。这将最终导致一个新的主节点被选出，从而实现高可用性。<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/34509565301199.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/34509565301199.png"></a></p></li></ol><h2 id="选举Leader流程"><a href="#选举Leader流程" class="headerlink" title="选举Leader流程"></a>选举Leader流程</h2><p>Redis Sentinel（哨兵）是用于监控和管理Redis主从复制以及自动故障切换的工具。当主节点失效时，哨兵会协调选择一个从节点作为新的主节点，这涉及到选举Leader的过程。详细流程如下：</p><ol><li><p><strong>监控主节点：</strong> 哨兵持续监控Redis主节点的状态，包括主节点是否在线，主从复制是否正常，以及哨兵和其他节点的通信情况。</p></li><li><p><strong>检测主节点失效：</strong> 当哨兵检测到主节点失效（例如，无法响应PING命令），它会将主节点标记为“主观下线”。</p></li><li><p><strong>广播主观下线状态：</strong> 一旦主观下线状态被确认，哨兵会广播该信息给其他哨兵和节点，告知主节点已经“主观下线”。</p></li><li><p><strong>投票：</strong> 当其他哨兵收到关于主观下线状态的广播时，它们会进行投票来决定是否需要进行领导者选举。</p></li><li><p><strong>选举Leader：</strong> 如果多个哨兵都认为主节点失效，它们将进入领导者选举过程。选举过程使用了Raft算法的变体。</p></li><li><p><strong>提议投票：</strong> 在选举过程中，哨兵会提议自己作为领导者，然后请求其他哨兵投票支持。</p></li><li><p><strong>投票表决：</strong> 哨兵在收到提议后会表决是否支持该提议。通常，哨兵会投票给具有最高配置版本号的提议者。</p></li><li><p><strong>Quorum判断：</strong> 在选举过程中，哨兵需要收集足够数量的投票，达到Quorum（大多数）的支持才能选举成功。</p></li><li><p><strong>选出新领导者：</strong> 如果某个哨兵获得足够多的投票，超过了Quorum，那么它将被选为新的领导者。</p></li><li><p><strong>通知其他节点：</strong> 新选出的Leader会向其他哨兵和节点广播其成为领导者的消息，确保集群中的所有节点都知道领导者的变更。</p></li><li><p><strong>故障切换：</strong> 一旦新的Leader选举完成，哨兵会协调进行故障切换，将一个从节点提升为新的主节点，使整个集群继续正常运行。</p></li><li><p><strong>恢复正常状态：</strong> 一旦故障切换完成，新的主节点将开始处理客户端请求，集群会恢复到正常运行状态。</p></li></ol><p>需要注意的是，Redis Sentinel的选举Leader过程受到Paxos算法和Raft算法等分布式一致性算法的影响，以保证在主节点失效时能够选择合适的节点作为新的主节点，从而保持数据的一致性和高可用性。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/34362039455500.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-21/34362039455500.png"></a></p><h1 id="TIP"><a href="#TIP" class="headerlink" title="TIP"></a>TIP</h1><ol><li><p>如果哨兵集群只有 2 个实例，此时，一个哨兵要想成为 Leader，必须获得 2 票，而不是 1<br>票。所以，如果有个哨兵挂掉了，那么，此时的集群是无法进行主从库切换的。因此，通常我们至少会配置 3 个哨兵实例。</p></li><li><p>要保证所有哨兵实例的配置是一致的，尤其是主观下线的判断值 down-after-milliseconds。down-after-milliseconds。</p></li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 深入理解Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 哨兵机制 </tag>
            
            <tag> 高可用性 </tag>
            
            <tag> 故障切换 </tag>
            
            <tag> 监控 </tag>
            
            <tag> 选主 </tag>
            
            <tag> 客观下线 </tag>
            
            <tag> Quorum </tag>
            
            <tag> 选举Leader </tag>
            
            <tag> 数据一致性 </tag>
            
            <tag> 哨兵配置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【BUG】Error- module ‘cv2.cv2‘ has no attribute ‘wechat_qrcode_WeChatQRCode‘</title>
      <link href="/8ecf637c.html"/>
      <url>/8ecf637c.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="首发博客地址"><a href="#首发博客地址" class="headerlink" title="首发博客地址"></a>首发博客地址</h1><p><a href="https://blog.zysicyj.top/">https://blog.zysicyj.top/</a></p><h1 id="报错内容"><a href="#报错内容" class="headerlink" title="报错内容"></a>报错内容</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AttributeError: module &#x27;cv2&#x27; has no attribute &#x27;wechat_qrcode_WeChatQRCode&#x27;</span><br></pre></td></tr></table></figure><h1 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install opencv-python</span><br><span class="line">pip install opencv-contrib-python</span><br><span class="line">``` opencv-contrib-python</span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> BUG </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
            <tag> cv2 </tag>
            
            <tag> AttributeError </tag>
            
            <tag> module </tag>
            
            <tag> cv2.wechat_qrcode_WeChatQRCode </tag>
            
            <tag> pip install </tag>
            
            <tag> opencv-python </tag>
            
            <tag> opencv-contrib-python </tag>
            
            <tag> 首发博客地址 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安装Pip</title>
      <link href="/ab703f57.html"/>
      <url>/ab703f57.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -m ensurepip --upgrade</span><br><span class="line">```-m ensurepip --upgrade</span><br></pre></td></tr></table></figure><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/131284487059100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-12/131284487059100.png"></a></p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pip </tag>
            
            <tag> python </tag>
            
            <tag> ensurepip </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>源码安装mysql5.7</title>
      <link href="/3f760569.html"/>
      <url>/3f760569.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><h1 id="通过-RPM-包安装-MySQL"><a href="#通过-RPM-包安装-MySQL" class="headerlink" title="通过 RPM 包安装 MySQL"></a>通过 RPM 包安装 MySQL</h1><ol><li><p><strong>下载 MySQL RPM 包：</strong> 首先，您需要从 MySQL 官方网站（<a href="https://dev.mysql.com/downloads/mysql/%EF%BC%89%E4%B8%8B%E8%BD%BD%E9%80%82%E7%94%A8%E4%BA%8E%E6%82%A8%E7%9A%84%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%89%88%E6%9C%AC%E5%92%8C%E6%9E%B6%E6%9E%84%E7%9A%84">https://dev.mysql.com/downloads/mysql/）下载适用于您的操作系统版本和架构的</a><br>MySQL RPM 包。选择与您的操作系统和系统架构相对应的版本。</p></li><li><p><strong>安装 RPM 包：</strong> 下载完成后，您可以使用 <code>rpm</code> 命令安装 MySQL RPM 包。假设您下载的 RPM 包名为 <code>mysql.rpm</code>，您可以使用以下命令进行安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -ivh mysql.rpm</span><br></pre></td></tr></table></figure></li><li><p><strong>启动 MySQL 服务：</strong> 安装完成后，您可以使用以下命令启动 MySQL 服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start mysql</span><br></pre></td></tr></table></figure></li><li><p><strong>设置开机启动：</strong> 若要确保系统重启后 MySQL 服务能够自动启动，可以使用以下命令启用开机自启动：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> mysql</span><br></pre></td></tr></table></figure></li><li><p><strong>设置 MySQL 根密码：</strong> 安装 MySQL 后，需要设置 MySQL 根用户的密码。可以使用以下命令进行设置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql_secure_installation</span><br></pre></td></tr></table></figure></li><li><p><strong>访问 MySQL：</strong> 安装和配置完成后，您可以使用以下命令登录到 MySQL 数据库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure></li></ol><h1 id="给root用户取消IP配置"><a href="#给root用户取消IP配置" class="headerlink" title="给root用户取消IP配置"></a>给root用户取消IP配置</h1><p>在 MySQL 数据库中，有时默认会限制 root 用户只能通过 localhost（127.0.0.1）连接，以提高安全性。如果您希望允许 root 用户从其他主机连接到<br>MySQL，您可以按照以下步骤取消 root 用户的 IP 限制：</p><ol><li><p><strong>编辑 MySQL 配置文件：</strong> 打开 MySQL 的配置文件，通常是 <code>/etc/my.cnf</code> 或 <code>/etc/mysql/my.cnf</code><br>，使用您喜欢的文本编辑器（例如 <code>nano</code> 或 <code>vim</code>）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/my.cnf</span><br></pre></td></tr></table></figure></li><li><p><strong>在 <code>[mysqld]</code> 段添加 <code>skip-networking</code> 行：</strong> 在配置文件中找到 <code>[mysqld]</code><br>段，在该段中添加以下行以禁用 <code>skip-networking</code> 选项，确保其处于注释状态（行前面有 <code>#</code>）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># skip-networking</span><br></pre></td></tr></table></figure></li><li><p><strong>重启 MySQL 服务：</strong> 保存配置文件后，重启 MySQL 服务以应用更改：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart mysql</span><br></pre></td></tr></table></figure></li><li><p><strong>登录 MySQL 并更新 root 用户权限：</strong> 现在您可以登录到 MySQL 数据库，并为 root 用户设置允许从其他主机连接的权限。打开终端，输入以下命令登录到<br>MySQL：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure></li><li><p><strong>更新 root 用户的主机设置：</strong> 在 MySQL 命令行中，使用以下 SQL 命令更新 root 用户的主机设置，允许从任何主机连接：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;your_password&#x27;</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION;</span><br></pre></td></tr></table></figure><p>请将 <code>&#39;your_password&#39;</code> 替换为您希望设置的 root 用户密码。</p></li><li><p><strong>刷新权限：</strong> 更新了权限设置后，执行以下 SQL 命令以刷新 MySQL 的权限：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure></li><li><p><strong>退出 MySQL 命令行：</strong> 输入以下命令退出 MySQL 命令行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXIT;</span><br></pre></td></tr></table></figure></li></ol><h1 id="详细解读mysql5-7的配置文件"><a href="#详细解读mysql5-7的配置文件" class="headerlink" title="详细解读mysql5.7的配置文件"></a>详细解读mysql5.7的配置文件</h1><p>��读mysql5.7的配置文件</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> 安装 </tag>
            
            <tag> 源码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yum离线安装elasticsearch7.x</title>
      <link href="/943c1545.html"/>
      <url>/943c1545.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><p>要在 CentOS 7 上使用 <code>yum</code> 安装 Elasticsearch 7，您可以按照以下步骤进行操作：</p><ol><li><strong>准备yum包</strong></li></ol><p>关注威信【程序员朱永胜】回复【1016】不限速下载</p><ol start="2"><li><p><strong>安装 Elasticsearch 7：</strong> 上传压缩包后解压。执行以下命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> es</span><br><span class="line">sudo yum install *.rpm</span><br></pre></td></tr></table></figure></li><li><p><strong>配置 Elasticsearch：</strong> 安装完成后，您需要进行一些配置。打开 Elasticsearch 配置文件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/elasticsearch/elasticsearch.yml</span><br></pre></td></tr></table></figure><p>根据您的需求进行配置，例如设置集群名称、节点名称、监听地址等。完成配置后，保存并退出编辑器。</p></li><li><p><strong>启动 Elasticsearch 服务：</strong> 安装和配置完成后，您可以启动 Elasticsearch 服务：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start elasticsearch</span><br></pre></td></tr></table></figure><p>您还可以将 Elasticsearch 设置为开机自启动：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> elasticsearch</span><br></pre></td></tr></table></figure></li><li><p><strong>检查 Elasticsearch 状态：</strong> 您可以使用以下命令检查 Elasticsearch 服务的状态：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status elasticsearch</span><br></pre></td></tr></table></figure></li></ol><p>现在，您已经成功在 CentOS 7 上使用 <code>yum</code> 安装了 Elasticsearch 7。您可以根据您的实际需求进行配置和管理。记得在配置文件中设置适当的安全措施和网络访问限制，以确保<br>Elasticsearch 的安全性。�保 Elasticsearch 的安全性。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> yum </tag>
            
            <tag> es </tag>
            
            <tag> elasticsearch </tag>
            
            <tag> 离线安装 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yum离线安装mysql5.7</title>
      <link href="/b1fe8c2a.html"/>
      <url>/b1fe8c2a.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><ol><li><p>下载rpm包<br>在一台能连网的服务器上执行命令:</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install --downloadonly --downloaddir=mysql mysql-community-server</span><br></pre></td></tr></table></figure><p>这里我准备了一个离线包：关注威信【程序员朱永胜】回复【1015】不限速下载</p></li><li><p>复制mysql目录及下面所有子文件到离线服务器上</p></li><li><p>在离线环境中执行命令</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd mysql</span><br><span class="line">yum install *.rpm</span><br></pre></td></tr></table></figure></li><li><p><strong>启动 MySQL 服务：</strong> 安装完成后，您可以启动 MySQL 5.7 服务：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start mysqld</span><br></pre></td></tr></table></figure></li><li><p><strong>查看初始密码：</strong> MySQL 5.7 第一次启动后，会生成一个初始密码。您可以使用以下命令查看初始密码：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo grep <span class="string">&#x27;temporary password&#x27;</span> /var/log/mysqld.log</span><br></pre></td></tr></table></figure></li><li><p><strong>设置新密码：</strong> 使用初始密码登录 MySQL，然后设置一个新的密码：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br><span class="line">ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="string">&#x27;new_password&#x27;</span>;</span><br></pre></td></tr></table></figure><p>将 <code>&#39;new_password&#39;</code> 替换为您想要设置的新密码。</p></li><li><p><strong>重新加载权限：</strong> 修改密码后，重新加载权限：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure></li><li><p><strong>设置开机自启动：</strong> 如果您想要 MySQL 在系统启动时自动启动，执行以下命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> mysqld</span><br></pre></td></tr></table></figure></li><li><p><strong>检查 MySQL 状态：</strong> 您可以使用以下命令检查 MySQL 服务的状态：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status mysqld</span><br><span class="line">```systemctl status mysqld</span><br></pre></td></tr></table></figure></li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> yum </tag>
            
            <tag> 离线安装 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yum离线安装nginx</title>
      <link href="/17fdf463.html"/>
      <url>/17fdf463.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><ol><li>下载rpm包<br>在一台能连网的服务器上执行命令: <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install --downloadonly --downloaddir=nginx nginx</span><br></pre></td></tr></table></figure>这里我准备了一个离线包：关注威信【程序员朱永胜】回复【1014】不限速下载</li><li>复制nginx目录及下面所有子文件到离线服务器上</li><li>在离线环境中执行命令 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd nginx</span><br><span class="line">yum install *.rpm</span><br></pre></td></tr></table></figure>yum install *.rpm<pre><code></code></pre></li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> yum </tag>
            
            <tag> 离线安装 </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis系列（三）：深入解读Redis主从同步机制</title>
      <link href="/e5ef9f90.html"/>
      <url>/e5ef9f90.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><h1 id="Redis高可靠靠什么保证？"><a href="#Redis高可靠靠什么保证？" class="headerlink" title="Redis高可靠靠什么保证？"></a>Redis高可靠靠什么保证？</h1><p>为什么要提这个呢，因为Redis主从库目的呢其实就是为了实现高可靠。上篇文章中我们说过Redis的AOF、RDB日志其实就是为了**减少数据丢失<br>**，这是高可靠的一部分。</p><p>这篇文章呢，我们聊聊Redis实现高可靠的另一方面：<strong>尽量减少服务中断</strong>。这里Redis是怎么做的呢？Redis的做法是<strong>增加副本冗余</strong><br>，将一份数据同时保存在多个实例上。这样某个实例挂掉并不影响其它实例提供对外服务，保证我们的业务正常运行。</p><p>Redis有哪些手段提高高可用呢？</p><ol><li><p><strong>数据持久化</strong>：Redis 支持多种数据持久化方式，包括快照（snapshotting）和日志（append-only<br>file）。快照会定期将内存中的数据保存到磁盘文件，而日志会记录每次写操作，以便在重启时进行恢复。这些持久化方式可以确保即使服务器意外关闭，数据也不会丢失。</p></li><li><p><strong>主从复制</strong>：Redis 支持主从复制机制，其中一个 Redis 实例作为主节点，负责写操作，而其他实例作为从节点，负责复制主节点的数据。这种方式可以实现数据的备份和负载均衡，从而提高可靠性和性能。</p></li><li><p><strong>Sentinel 哨兵</strong>：Redis Sentinel 是一个监控和自动故障恢复系统，可以监控 Redis<br>实例的健康状态并在主节点故障时自动进行故障切换。它可以确保系统在主节点发生故障时能够自动切换到备用的从节点，保证服务的连续性。</p></li><li><p><strong>Cluster 集群</strong>：Redis Cluster<br>是一种分布式系统，将数据分布在多个节点上，以提高可用性和扩展性。每个节点都持有部分数据，并且可以容忍部分节点的故障。当节点发生故障时，集群可以自动重新分配数据，确保服务的可靠性和高可用性。</p></li></ol><h1 id="如何保证副本数据一致？"><a href="#如何保证副本数据一致？" class="headerlink" title="如何保证副本数据一致？"></a>如何保证副本数据一致？</h1><p>首先我们要知道，Redis提供了<strong>主从库模式</strong>，以保证副本一致，主从库之间采用的是<strong>读写分离</strong>的方式。</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-17/4353139547600.png" title="Redis主从库和读写分离" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-17/4353139547600.png" alt="Redis主从库和读写分离"></a></p><h2 id="Redis中的读写分离基本原理和步骤"><a href="#Redis中的读写分离基本原理和步骤" class="headerlink" title="Redis中的读写分离基本原理和步骤"></a>Redis中的读写分离基本原理和步骤</h2><p>Redis 读写分离是一种架构设计，将读操作和写操作分别路由到不同的 Redis 节点上，以提高性能和扩展性。在 Redis<br>读写分离中，通常会有一个主节点负责写操作，多个从节点负责读操作。</p><ol><li><p><strong>主节点（写节点）</strong>：</p><ul><li>主节点负责处理所有的写操作，包括写入、更新和删除等。</li><li>写操作在主节点上执行，然后主节点将写操作的结果同步到所有从节点。</li></ul></li><li><p><strong>从节点（读节点）</strong>：</p><ul><li>从节点负责处理读操作，例如获取数据、查询等。</li><li>从节点从主节点复制数据，并在本地保存一份与主节点相同的数据副本。</li></ul></li><li><p><strong>读写分离的实现</strong>：</p><ul><li>客户端根据需要的操作类型将请求分发到主节点或从节点。</li><li>读操作可以通过负载均衡策略，将请求分发到不同的从节点，实现负载分担。</li><li>写操作仍然发送给主节点，确保数据的一致性和完整性。</li></ul></li></ol><p>需要注意的是，<strong>Redis 读写分离并不是完全的数据实时同步</strong><br>，因为从节点的数据可能会有一定的延迟。另外，读写分离适用于大多数场景下的负载均衡和性能优化，但在一些特定情况下，例如有序集合等复杂数据结构的查询，仍然需要访问主节点。</p><p>实现 Redis 读写分离需要正确配置主从节点的关系，以及在客户端中使用合适的策略进行读写操作的路由。同时，需要注意主节点和从节点之间的数据同步和故障处理，以确保系统的稳定性和可靠性。</p><h1 id="Redis主从库第一次同步是如何实现的？"><a href="#Redis主从库第一次同步是如何实现的？" class="headerlink" title="Redis主从库第一次同步是如何实现的？"></a>Redis主从库第一次同步是如何实现的？</h1><ol><li><p><strong>建立连接：</strong> 从服务器会向主服务器发送 <code>PSYNC</code> 命令，表示要进行同步。主服务器收到 <code>PSYNC</code><br>命令后，会创建一个专门用于复制的后台线程（replication thread），并等待从服务器的连接。</p></li><li><p><strong>全量复制（第一次同步）：</strong> 当从服务器连接到主服务器后，主服务器会将自己的数据发送给从服务器。这个过程叫做<strong>全量复制</strong><br>，主服务器会遍历自己的数据集，将所有数据发送给从服务器。</p><ul><li><p>主服务器会在一个 RDB 文件中保存当前数据集的快照，然后<strong>将这个 RDB 文件发送给从服务器</strong>。从服务器接收到 RDB<br>文件后，会加载这个文件，将自己的数据集替换成主服务器的数据集。</p></li><li><p>在 RDB 文件传输的过程中，主服务器会将在传输期间的写操作记录下来，称为<strong>命令传播</strong>（command<br>propagation）。这样一来，主服务器就能够在发送完 RDB 文件后，将期间的写操作重新发送给从服务器，以保证从服务器的数据集与主服务器保持一致。</p></li></ul></li><li><p><strong>增量复制：</strong> 在完成全量复制后，主从服务器之间会保持一个 TCP 连接，主服务器会将自己的写操作发送给从服务器，从服务器执行这些写操作，从而保持数据一致性。增量复制的数据同步是<br><strong>异步</strong>的，但通过记录写操作，主从服务器之间的数据最终会达到一致状态。</p></li></ol><p>需要注意的是，在第一次全量复制的过程中，可能会有一些网络故障、主从服务器负载等情况影响同步。为了提高稳定性和安全性，Redis<br>提供了一些配置选项和机制，如持久化、复制偏移量、主服务器验证等，来确保主从复制的正常进行。<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-17/4716895377800.png" title="主从库第一次同步的流程" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-17/4716895377800.png" alt="主从库第一次同步的流程"></a></p><h2 id="PSYNC命令"><a href="#PSYNC命令" class="headerlink" title="PSYNC命令"></a>PSYNC命令</h2><p>当 Redis 主从复制中的从服务器（Slave）需要与主服务器（Master）进行数据同步时，可以使用 PSYNC（Partial SYNC）命令。PSYNC 命令在<br>Redis 2.8 版本引入，用于提高数据同步的效率和可靠性。</p><p>PSYNC 命令包括两种模式：完全同步（Full Sync）和部分同步（Partial Sync）。</p><ol><li><p><strong>完全同步（Full Sync）：</strong><br>完全同步在以下情况下发生：</p><ul><li>从服务器初次连接主服务器时。</li><li>从服务器需要进行初次同步，或者复制偏移量与主服务器的偏移量差距较大时。</li><li>主服务器没有保存 RDB 快照文件，所以无法进行部分同步。</li></ul><p>完全同步的过程如下：</p><ul><li>从服务器向主服务器发送一条 PSYNC 命令，并附带上自己的复制积压缓冲区的偏移量（offset）和 replid（复制 ID）。</li><li>主服务器使用<code>bgsave</code>命令，生成RDB文件，接着将文件发给从库。</li><li>从库接收到RDB文件后，会先清空当前数据库，然后加载RDB文件。</li></ul></li><li><p><strong>部分同步（Partial Sync）：</strong><br>部分同步在以下情况下发生：</p><ul><li>从服务器已经复制了一部分数据，并且复制偏移量与主服务器的偏移量差距较小时。</li></ul><p>部分同步的过程如下：</p><ul><li>主库将后续所有<strong>写操作</strong>记录到内存中的replication buffer中</li><li>从服务器向主服务器发送一条 PSYNC 命令，并附带上自己的复制积压缓冲区的偏移量和 replid。</li><li>主库将所有保存的写操作发送给从库，具体来说，就是当RDB发送完成后，就会把此时replication<br>buffer中的修改发给从库，从库再重新执行这些操作。这样一来，主从库就实现同步了</li></ul></li></ol><p>PSYNC 命令的目标是在保证数据一致性的前提下，尽可能地减少数据同步所需的数据传输量，从而提高复制效率。完全同步和部分同步的选择取决于从服务器与主服务器之间的复制状态和数据差距。</p><h1 id="主库的烦恼"><a href="#主库的烦恼" class="headerlink" title="主库的烦恼"></a>主库的烦恼</h1><p>这里我们能分析得到主库做全量同步时的两个耗时操作：</p><ol><li>生成RDB文件</li><li>传输RDB文件</li></ol><p>这里设想一个场景，如果是一主多从的架构，那么主节点就要生成多份RDB并传输给从节点，很显然，这种操作是非常耗时的。这里主要占用两块资源</p><ol><li>通过fork子进程生成RDB快照会<strong>阻塞主线程处理请求</strong></li><li>传输RDB文件会占用<strong>网络带宽</strong></li></ol><p>那么有什么方法可以解决这些问题呢？<br>这里呀，我们就引入了“主-从-从”架构，很容易理解，就是主库只需要同步一份给某从库A，其他从库从从库A同步数据。</p><h1 id="如何理解-主-从-从-架构？"><a href="#如何理解-主-从-从-架构？" class="headerlink" title="如何理解 主-从-从 架构？"></a>如何理解 主-从-从 架构？</h1><p>主从（Master-Slave）架构是一种常见的数据库复制和数据备份方案。在这种架构中，存在一个主数据库（主服务器）和一个或多个从数据库（从服务器），主数据库负责处理写操作和读操作，从数据库负责复制主数据库的数据，以提供读取操作和备份。</p><p>主从架构的工作方式如下：</p><ol><li><p><strong>主数据库（主服务器）：</strong></p><ul><li>主数据库是系统的主要数据库，负责处理所有的写操作（数据的插入、更新、删除）和部分读操作。</li><li>当主数据库接收到写操作时，会将这些写操作记录到自己的日志文件（例如 MySQL 的二进制日志）中，并发送给从数据库。</li><li>主数据库也会保存一个复制积压缓冲区（replication backlog buffer），其中存储了一部分的写操作数据，用于满足部分同步和断线重连的需求。</li></ul></li><li><p><strong>从数据库（从服务器）：</strong></p><ul><li>从数据库是主数据库的复制副本，负责从主数据库复制数据以供读取操作和备份。</li><li>从数据库会连接到主数据库，并发送复制请求（如 PSYNC 命令）以获取主数据库的数据更新。</li><li>从数据库会持续地复制主数据库的写操作，将写操作应用到自己的数据副本中，以保持与主数据库的数据一致性。</li><li>从数据库可以处理读取请求，从而减轻主数据库的读取压力。</li></ul></li></ol><p>主从架构的优势：</p><ul><li><strong>负载均衡：</strong> 通过将读操作分发给从数据库，可以分担主数据库的读取压力，提高整体系统的吞吐量。</li><li><strong>高可用性：</strong> 当主数据库出现故障时，可以将其中一个从数据库提升为新的主数据库，从而实现快速故障切换。</li><li><strong>数据备份：</strong> 从数据库可以作为主数据库的数据备份，用于恢复数据和灾难恢复。</li><li><strong>数据分析：</strong> 从数据库可以用于读取操作，以进行数据分析、报表生成等工作，而不影响主数据库的性能。</li></ul><p>需要注意的是，主从架构并不是完全实时的，因为从数据库需要时间来同步主数据库的数据更新。因此，在考虑使用主从架构时，需要权衡数据一致性和性能之间的需求。<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-17/47798493312900.png" title="级联的“主-从-从”模式" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-17/47798493312900.png" alt="级联的“主-从-从”模式"></a></p><h1 id="如何配置主从从架构呢"><a href="#如何配置主从从架构呢" class="headerlink" title="如何配置主从从架构呢"></a>如何配置主从从架构呢</h1><ol><li><p><strong>安装和配置主服务器（Master）：</strong></p><ul><li>安装Redis主服务器并确保主服务器正常运行。</li><li>在主服务器的配置文件（redis.conf）中开启持久化（通常使用RDB快照或AOF日志）和监听端口，确保配置项如下：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">port 6379</span><br><span class="line">save 900 1</span><br><span class="line">appendonly yes  # 如果使用AOF日志</span><br></pre></td></tr></table></figure></li><li>如果需要对外提供访问，确保防火墙或网络设置允许访问主服务器的6379端口。</li></ul></li><li><p><strong>安装和配置第一个从服务器（Slave1）：</strong></p><ul><li>在从服务器1上安装Redis数据库。</li><li>在从服务器1的配置文件中配置主从关系。在配置文件中添加类似如下的内容，其中<code>masterauth</code>是主服务器的密码，<code>master</code><br>是主服务器的IP和端口：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">slaveof master_ip master_port</span><br><span class="line">masterauth your_master_password</span><br></pre></td></tr></table></figure></li><li>重启从服务器1使配置生效。</li></ul></li><li><p><strong>安装和配置第二个从服务器（Slave2）：</strong></p><ul><li>在从服务器2上安装Redis数据库。</li><li>在从服务器2的配置文件中配置主从关系，与从服务器1相似。确保配置项不冲突。</li><li>重启从服务器2使配置生效。</li></ul></li><li><p><strong>重启主服务器：</strong></p><ul><li>在主服务器上查看主服务器的信息，如IP和端口。通常使用以下命令：<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INFO server</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>测试主从从架构：</strong></p><ul><li>在主服务器上进行写操作，如插入、更新或删除数据。</li><li>查看从服务器1和从服务器2是否同步了主服务器的数据。</li></ul></li></ol><p>需要注意的是，Redis的主从从架构在部署和配置上与主从架构类似，只是需要在从服务器上再次配置主从关系。另外，Redis还可以配置更多高可用性的功能，如哨兵（Sentinel）和集群（Cluster），以实现更强大的架构。具体配置细节可能会因版本和需求而有所不同，建议参考官方文档或相关资源进行详细了解和配置。</p><h1 id="主从库间网络断了怎么办？"><a href="#主从库间网络断了怎么办？" class="headerlink" title="主从库间网络断了怎么办？"></a>主从库间网络断了怎么办？</h1><p>在 Redis 2.8 之前，如果主从库在命令传播时出现了网络闪断，那么，从库就会和主库重新进行一次全量复制，开销非常大。</p><p>2.8之后呢是支持增量同步的，那么Redis是怎么实现增量同步的呢？<br>当Redis主从库之间的网络断开后，网络恢复时从库需要进行增量同步，以获取在网络断开期间主库中的更新数据。Redis实现增量同步的方式是通过Redis复制机制，具体流程如下：</p><ol><li><p><strong>保存主服务器的数据：</strong> 主服务器会将更新的数据写入内存，并在内存中保存一份副本。同时，主服务器会将更新的数据写入AOF（Append-Only<br>File）日志文件，以便在断电或宕机情况下能够进行数据恢复。</p></li><li><p><strong>记录复制偏移量：</strong> 在主服务器的复制过程中，主服务器会记录一个复制偏移量（replication<br>offset），表示从服务器在主服务器中的数据位置。这个偏移量会随着数据的更新而递增。</p></li><li><p><strong>网络恢复：</strong> 当网络恢复时，从服务器会尝试连接主服务器并请求进行复制。</p></li><li><p><strong>发送SYNC命令：</strong> 从服务器会发送SYNC命令给主服务器。如果是初次连接复制，从服务器发送的SYNC命令中不包含任何参数。如果是增量同步，从服务器会发送带有偏移量参数的SYNC命令。</p></li><li><p><strong>全量复制或部分复制：</strong> 根据情况，主服务器会执行全量复制或部分复制：</p><ul><li><strong>全量复制（初次连接）：</strong> 如果是初次连接复制，主服务器会执行全量复制。它会创建一个RDB快照（数据库快照），将数据库中的数据快照发送给从服务器。这样从服务器就能够拥有主服务器的完整数据集。</li><li><strong>部分复制（增量同步）：</strong> 如果是增量同步，主服务器会从记录的偏移量处开始，将从偏移量后的所有更新数据发送给从服务器。这样从服务器就能够获取在断开网络期间主服务器的更新数据。</li></ul></li><li><p><strong>复制数据传输：</strong> 主服务器会将全量数据或增量数据通过网络传输给从服务器。从服务器会接收并处理这些数据，更新自己的数据集。</p></li><li><p><strong>复制过程继续：</strong> 一旦复制数据传输完成，从服务器会持续地与主服务器保持连接，接收来自主服务器的增量更新。这样，主从库之间的数据保持同步。</p></li></ol><p>需要注意的是，当网络断开时间较长或断开期间数据更新较大时，增量同步可能会导致从服务器落后于主服务器。在网络恢复后，从服务器需要足够的时间来接收和处理更新数据，以保持与主服务器的数据同步。<br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-17/48329170103300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-17/48329170103300.png"></a></p><h1 id="一般的排查流程"><a href="#一般的排查流程" class="headerlink" title="一般的排查流程"></a>一般的排查流程</h1><ol><li><p><strong>检查网络连接问题：</strong> 首先，确保网络连接问题的确是造成主从库通信中断的原因。检查网络配置、防火墙规则、路由等设置，确保主从库之间可以互相访问。</p></li><li><p><strong>重新连接网络：</strong> 如果网络问题是暂时的，你可以尝试恢复网络连接，让主从库之间恢复通信。</p></li><li><p><strong>检查主从状态：</strong> 在主从库网络连接恢复后，使用<code>INFO replication</code>命令检查主从库的同步状态。确保主库已将数据同步到从库。</p></li><li><p><strong>手动重新同步：</strong> 如果主从库之间的网络断开时间较长，可以考虑进行手动重新同步：</p><ul><li>在从库上，使用<code>SLAVEOF NO ONE</code>命令解除从库状态。</li><li>在从库上，删除持久化文件（RDB文件或AOF文件）。</li><li>在从库上，执行<code>SLAVEOF master_ip master_port</code>命令，将其重新设置为主库的从库。</li><li>在主库上，执行<code>SLAVEOF NO ONE</code>命令解除主库状态。</li><li>在主库上，执行<code>SLAVEOF slave_ip slave_port</code>命令，将其重新设置为从库的主库。</li></ul></li><li><p><strong>手动复制数据：</strong> 如果网络断开时间较长且重新同步不可行，你可能需要手动复制数据。在主库上导出数据，并在从库上导入数据。</p></li><li><p><strong>备份和恢复：</strong> 如果网络问题无法解决，你可能需要在网络恢复后考虑从主库重新备份数据，然后在从库上进行数据恢复。</p></li></ol><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>文章中介绍了Redis主从库架构以及如何配置、维护和解决主从库网络断开的问题。以下是文章中涉及到的主要内容：</p><ol><li><p><strong>Redis主从库架构及其保证的高可靠性：</strong></p><ul><li>Redis主从库的目的是实现高可靠性，通过数据持久化、主从复制、Sentinel哨兵和Cluster集群等方式来保障数据的安全性和可用性。</li></ul></li><li><p><strong>如何保证副本数据一致：</strong></p><ul><li>Redis通过全量复制和部分复制（增量同步）来保证主从库之间的数据一致性。复制偏移量和复制积压缓冲区等机制用于记录和传输数据。</li></ul></li><li><p><strong>主从库第一次同步的过程：</strong></p><ul><li>主从库之间的第一次同步涉及主服务器创建RDB快照，发送给从服务器，以及记录期间的写操作进行命令传播。</li></ul></li><li><p><strong>PSYNC命令和增量同步：</strong></p><ul><li>PSYNC命令用于主从库网络断开后的增量同步。完全同步用于初次连接，部分同步用于增量同步，从而减少数据传输量。</li></ul></li><li><p><strong>主从从架构及其优势：</strong></p><ul><li>主从从架构是在主从架构基础上的扩展，通过级联的方式减轻主服务器的复制压力，实现更高的可用性和负载均衡。</li></ul></li><li><p><strong>配置主从从架构的步骤：</strong></p><ul><li>安装和配置主服务器，从服务器1和从服务器2。</li><li>重启主服务器，查看主服务器信息。</li><li>进行测试，验证主从库之间是否同步。</li></ul></li><li><p><strong>解决主从库间网络断开问题：</strong></p><ul><li>检查网络连接问题，确保主从库之间可以互相访问。</li><li>重新连接网络，恢复通信。</li><li>检查主从状态，确保同步。</li><li>手动重新同步，尝试恢复数据一致性。</li><li>手动复制数据或备份恢复数据。��或备份恢复数据。</li></ul></li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 深入理解Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> 主从同步 </tag>
            
            <tag> 数据持久化 </tag>
            
            <tag> 主从复制 </tag>
            
            <tag> Sentinel哨兵 </tag>
            
            <tag> Cluster集群 </tag>
            
            <tag> 读写分离 </tag>
            
            <tag> PSYNC命令 </tag>
            
            <tag> 增量同步 </tag>
            
            <tag> 主从从架构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一键免费部署自己的GPT网站（无需服务器）</title>
      <link href="/43450002.html"/>
      <url>/43450002.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>有的时候博客内容会有变动，首发博客是最新的，其他博客地址可能会未同步,认准<code>https://blog.zysicyj.top</code></p></blockquote><h1 id="先看看效果"><a href="#先看看效果" class="headerlink" title="先看看效果"></a>先看看效果</h1><p><a href="https://chat-gpt-next-web2-xi-three.vercel.app/">https://chat-gpt-next-web2-xi-three.vercel.app</a></p><p>为啥推荐这个呢，其实市面上已经有很多了，这个主要是UI蛮漂亮的，嘿嘿！<br>你要是简单想弄的话，CSDN就能免费搭建一个，这个就自行百度吧，还是很简单的。</p><h2 id="自定义角色"><a href="#自定义角色" class="headerlink" title="自定义角色"></a>自定义角色</h2><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/20230815144403.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/20230815144403.png"></a></p><h2 id="详细的配置"><a href="#详细的配置" class="headerlink" title="详细的配置"></a>详细的配置</h2><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/20230815144647.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/20230815144647.png"></a><br><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/20230815144706.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/20230815144706.png"></a><br><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/20230815144724.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/20230815144724.png"></a></p><h1 id="Fork项目"><a href="#Fork项目" class="headerlink" title="Fork项目"></a>Fork项目</h1><p><a href="https://github.com/zysicyj/ChatGPT-Next-Web2">https://github.com/zysicyj/ChatGPT-Next-Web2</a></p><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><p>打开链接：<br><a href="https://vercel.com/new/clone?repository-url=https://github.com/Yidadaa/ChatGPT-Next-Web&env=OPENAI_API_KEY&env=CODE&project-name=chatgpt-next-web&repository-name=ChatGPT-Next-Web">https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2FYidadaa%2FChatGPT-Next-Web&amp;env=OPENAI_API_KEY&amp;env=CODE&amp;project-name=chatgpt-next-web&amp;repository-name=ChatGPT-Next-Web</a></p><p>注册后，填写这个<br><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/20230815145222.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/20230815145222.png"></a></p><p>点击部署即可22.png)</p><p>点击部署即可</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 一键部署 </tag>
            
            <tag> GPT网站 </tag>
            
            <tag> 无需服务器 </tag>
            
            <tag> UI漂亮 </tag>
            
            <tag> 自定义角色 </tag>
            
            <tag> 配置详细 </tag>
            
            <tag> Fork项目 </tag>
            
            <tag> 部署 </tag>
            
            <tag> 注册 </tag>
            
            <tag> 填写信息 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决国内IDEA AI无法连接问题</title>
      <link href="/5d77a2ac.html"/>
      <url>/5d77a2ac.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="什么是Clash的TUN模式"><a href="#什么是Clash的TUN模式" class="headerlink" title="什么是Clash的TUN模式"></a>什么是Clash的TUN模式</h1><p>Clash的TUN模式是一种网络代理模式，它允许将网络流量通过虚拟网络接口进行转发和处理。TUN（全称为”network TUNnel”<br>）是一种在操作系统内核中创建虚拟网络接口的技术。</p><p>使用Clash的TUN模式，你可以配置Clash作为一个VPN客户端，将所有的网络流量通过TUN接口进行转发。这样，你可以实现在应用层面上对网络流量进行代理和过滤，从而实现网络访问的自由和安全。</p><p>TUN模式的工作原理如下：</p><ol><li>Clash会在操作系统内核中创建一个虚拟网络接口，比如tun0。</li><li>你可以将tun0接口配置为系统的默认网关，使所有的网络流量都通过该接口发送。</li><li>Clash会监听tun0接口上的网络流量，并根据你的配置对流量进行处理，比如执行代理、过滤或其他操作。</li><li>处理后的流量会被发送到目标服务器或者代理服务器上，然后返回响应给应用程序。</li></ol><p>总结起来，Clash的TUN模式提供了一种在应用层面对网络流量进行控制和处理的方式，使你能够自由地配置、代理和过滤网络访问。这对于实现个人隐私保护和访问受限内容非常有用。</p><p>这里呢，我们打开Clash的TUN模式即可</p><p>官方文档：<a href="https://docs.cfw.lbyczf.com/contents/tun.html">https://docs.cfw.lbyczf.com/contents/tun.html</a></p><h1 id="下面简单说说怎么操作，总共呢就两步"><a href="#下面简单说说怎么操作，总共呢就两步" class="headerlink" title="下面简单说说怎么操作，总共呢就两步"></a>下面简单说说怎么操作，总共呢就两步</h1><h2 id="第一步-点击该图标等待变绿"><a href="#第一步-点击该图标等待变绿" class="headerlink" title="第一步,点击该图标等待变绿"></a>第一步,点击该图标等待变绿</h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-16/5716146543700.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-16/5716146543700.png"></a><br><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-16/5797233508100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-16/5797233508100.png"></a></p><h2 id="勾选TUN模式即可"><a href="#勾选TUN模式即可" class="headerlink" title="勾选TUN模式即可"></a>勾选TUN模式即可</h2><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-16/5827036314100.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-08-16/5827036314100.png"></a><br>23-08-16&#x2F;5827036314100.png)</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> BUG </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Clash </tag>
            
            <tag> TUN模式 </tag>
            
            <tag> 网络代理 </tag>
            
            <tag> 应用层面 </tag>
            
            <tag> VPN客户端 </tag>
            
            <tag> 网络流量 </tag>
            
            <tag> 自由和安全 </tag>
            
            <tag> 配置 </tag>
            
            <tag> 代理服务器 </tag>
            
            <tag> 隐私保护 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>脚本一键生成通用接口，一分钟实现增删改查</title>
      <link href="/8bb51d72.html"/>
      <url>/8bb51d72.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>直接使用无需看此配置</p><p>快速生成通用接口业务配置 ： <a href="https://blog.zysicyj.top/ba6838a7">https://blog.zysicyj.top/ba6838a7</a></p><h2 id="一、插件安装"><a href="#一、插件安装" class="headerlink" title="一、插件安装"></a>一、插件安装</h2><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142150759.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142150759.png"></a></p><h2 id="二、脚本"><a href="#二、脚本" class="headerlink" title="二、脚本"></a>二、脚本</h2><p>关注绿色聊天软件【程序员朱永胜】回复：1013 下载</p><h2 id="三、使用"><a href="#三、使用" class="headerlink" title="三、使用"></a>三、使用</h2><h3 id="拷贝到扩展目录下"><a href="#拷贝到扩展目录下" class="headerlink" title="拷贝到扩展目录下"></a>拷贝到扩展目录下</h3><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142151774.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142151774.png"></a></p><h3 id="修改mybatisCodehelper-vm"><a href="#修改mybatisCodehelper-vm" class="headerlink" title="修改mybatisCodehelper.vm"></a>修改mybatisCodehelper.vm</h3><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142151263.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142151263.png"></a></p><h3 id="修改init-vm"><a href="#修改init-vm" class="headerlink" title="修改init.vm"></a>修改init.vm</h3><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142151447.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142151447.png"></a></p><h3 id="右键使用插件生成"><a href="#右键使用插件生成" class="headerlink" title="右键使用插件生成"></a>右键使用插件生成</h3><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142151908.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142151908.png"></a></p><h3 id="这样配置并确定"><a href="#这样配置并确定" class="headerlink" title="这样配置并确定"></a>这样配置并确定</h3><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142151286.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308142151286.png"></a>&#x2F;blog&#x2F;202308142151286.png)</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> 通用接口 </tag>
            
            <tag> 脚本 </tag>
            
            <tag> 插件安装 </tag>
            
            <tag> 扩展目录 </tag>
            
            <tag> mybatisCodehelper.vm </tag>
            
            <tag> init.vm </tag>
            
            <tag> 右键使用插件生成 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>快速生成通用接口业务配置</title>
      <link href="/ba6838a7.html"/>
      <url>/ba6838a7.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="这个是干什么的？"><a href="#这个是干什么的？" class="headerlink" title="这个是干什么的？"></a>这个是干什么的？</h2><p>简单介绍下：</p><p>作用：通过插件一键生成某个表对应的增删改查等基础或者说通用接口，这里面的代码是基础版的，后续改良后，很多业务的通用功能，比如流程的启动，自动下一步，通用导出，通用导入等等。</p><p>原理：核心就是<code>BasicControllerPostProcessor </code>，通过动态生成代理对象，完成逻辑实现。这里呢经过实践呢后续也有不少优化的，后续我总结后发一个新版的</p><h2 id="一、核心处理类"><a href="#一、核心处理类" class="headerlink" title="一、核心处理类"></a>一、核心处理类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nari.core.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.collection.ListUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.date.DateUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.date.TimeInterval;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.CommonAnnotationBeanPostProcessor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.Ordered;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.annotation.Order;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 动态加载baseMapper，baseDao，baseService</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> &lt;a href=&quot;mailto:njpkhuan@gmail.com&quot;&gt;朱永胜&lt;/a&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2021/3/2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Order(Ordered.HIGHEST_PRECEDENCE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BasicControllerPostProcessor</span> <span class="keyword">extends</span> <span class="title class_">CommonAnnotationBeanPostProcessor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">945664767382485314L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;NullableProblems&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInstantiation</span><span class="params">(Class&lt;?&gt; beanClass, String beanName)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">packageName</span> <span class="operator">=</span> beanClass.getPackage().getName();</span><br><span class="line">        log.trace(<span class="string">&quot;beanName---&#123;&#125;,packageName:&#123;&#125;&quot;</span>, beanName, packageName);</span><br><span class="line">        List&lt;String&gt; per = ListUtil.of(<span class="string">&quot;com.nari.supervision.daily&quot;</span>);</span><br><span class="line">        List&lt;String&gt; tail = ListUtil.of(<span class="string">&quot;outbound&quot;</span>,<span class="string">&quot;personal&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (per.stream().anyMatch(packageName::contains)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (tail.stream().map(v -&gt; v + <span class="string">&quot;.controller&quot;</span>).anyMatch(packageName::contains)) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    updateResourceName(beanClass, beanName, <span class="string">&quot;basicService&quot;</span>, <span class="string">&quot;Controller&quot;</span>, <span class="string">&quot;Service&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (tail.stream().map(v -&gt; v + <span class="string">&quot;.service&quot;</span>).anyMatch(packageName::contains)) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    updateResourceName(beanClass, beanName, <span class="string">&quot;basicMapper&quot;</span>, <span class="string">&quot;Service&quot;</span>, <span class="string">&quot;TransformImpl&quot;</span>);</span><br><span class="line">                    updateResourceName(beanClass, beanName, <span class="string">&quot;basicDao&quot;</span>, <span class="string">&quot;Service&quot;</span>, <span class="string">&quot;Mapper&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (tail.stream().map(v -&gt; v + <span class="string">&quot;serviceImpl&quot;</span>).anyMatch(packageName::contains)) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    updateResourceName(beanClass, beanName, <span class="string">&quot;basicMapper&quot;</span>, <span class="string">&quot;Service&quot;</span>, <span class="string">&quot;TransformImpl&quot;</span>);</span><br><span class="line">                    updateResourceName(beanClass, beanName, <span class="string">&quot;basicDao&quot;</span>, <span class="string">&quot;Service&quot;</span>, <span class="string">&quot;Mapper&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateResourceName</span><span class="params">(Class&lt;?&gt; beanClass, String beanName, String destField, String searchString, String replaceString)</span></span><br><span class="line">            <span class="keyword">throws</span> NoSuchFieldException, IllegalAccessException &#123;</span><br><span class="line">        <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> beanClass.getSuperclass().getDeclaredField(destField);</span><br><span class="line">        <span class="type">Resource</span> <span class="variable">basicMapper</span> <span class="operator">=</span> field.getAnnotation(Resource.class);</span><br><span class="line">        <span class="type">InvocationHandler</span> <span class="variable">invocationHandler</span> <span class="operator">=</span> Proxy.getInvocationHandler(basicMapper);</span><br><span class="line">        <span class="type">Field</span> <span class="variable">memberValues</span> <span class="operator">=</span> invocationHandler.getClass().getDeclaredField(<span class="string">&quot;memberValues&quot;</span>);</span><br><span class="line">        memberValues.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//noinspection unchecked</span></span><br><span class="line">        Map&lt;String, Object&gt; map = (Map&lt;String, Object&gt;) memberValues.get(invocationHandler);</span><br><span class="line">        map.put(<span class="string">&quot;name&quot;</span>, StringUtils.replace(beanName, searchString, replaceString));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="二、基础类"><a href="#二、基础类" class="headerlink" title="二、基础类"></a>二、基础类</h2><h3 id="BasicController"><a href="#BasicController" class="headerlink" title="BasicController"></a>BasicController</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nari.core.basic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.nari.core.annotation.OperationLog;</span><br><span class="line"><span class="keyword">import</span> com.nari.core.groups.basic.InsertGroup;</span><br><span class="line"><span class="keyword">import</span> com.nari.core.groups.basic.UpdateGroup;</span><br><span class="line"><span class="keyword">import</span> com.nari.core.groups.query.PageQueryGroup;</span><br><span class="line"><span class="keyword">import</span> com.nari.core.web.ApiResult;</span><br><span class="line"><span class="keyword">import</span> com.nari.core.web.BaseParam;</span><br><span class="line"><span class="keyword">import</span> com.nari.core.web.PageResult;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiSort;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.annotation.Validated;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.validation.Valid;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 基础接口管理</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> &lt;a href=&quot;mailto:njpkhuan@gmail.com&quot;&gt;朱永胜&lt;/a&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2021/3/1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Valid</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BasicController</span>&lt;T <span class="keyword">extends</span> <span class="title class_">BasicModel</span>, Q <span class="keyword">extends</span> <span class="title class_">BaseParam</span>, V, D, M <span class="keyword">extends</span> <span class="title class_">BasicMapper</span>&lt;T, Q, D, V&gt;&gt; <span class="keyword">extends</span> <span class="title class_">com</span>.nari.core.web.BaseController &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> BasicService&lt;T, Q, V, D, M&gt; basicService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> query &#123;<span class="doctag">@link</span> Q&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;1.1 添加&quot;)</span></span><br><span class="line">    <span class="meta">@OperationLog(value = &quot;添加&quot;)</span></span><br><span class="line">    <span class="meta">@Validated(value = InsertGroup.class)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResult <span class="title function_">insert</span><span class="params">(<span class="meta">@RequestBody</span> Q query)</span> &#123;</span><br><span class="line">        basicService.insert(query);</span><br><span class="line">        <span class="keyword">return</span> success(<span class="string">&quot;添加成功！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id删除</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 主键</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;1.2 根据id删除&quot;)</span></span><br><span class="line">    <span class="meta">@OperationLog(value = &quot;根据id删除&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResult <span class="title function_">del</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span> &#123;</span><br><span class="line">        basicService.del(id);</span><br><span class="line">        <span class="keyword">return</span> success(<span class="string">&quot;删除成功！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id删除-软删除，实际修改标识符</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 主键</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;/weak&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;1.3 根据id删除-软删除，实际修改标识符&quot;)</span></span><br><span class="line">    <span class="meta">@OperationLog(value = &quot;根据id删除-软删除，实际修改标识符&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResult <span class="title function_">delWeak</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span> &#123;</span><br><span class="line">        basicService.delWeak(id);</span><br><span class="line">        <span class="keyword">return</span> success(<span class="string">&quot;删除成功！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id更新信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> query &#123;<span class="doctag">@link</span> Q&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;update&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;1.4 根据id更新信息&quot;)</span></span><br><span class="line">    <span class="meta">@OperationLog(value = &quot;根据id更新信息&quot;)</span></span><br><span class="line">    <span class="meta">@Validated(value = UpdateGroup.class)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResult&lt;V&gt; <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Q query)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> success(basicService.update(query));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id更新信息-批量</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> query &#123;<span class="doctag">@link</span> Q&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;updateBatch&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;1.5 根据id更新信息-批量&quot;)</span></span><br><span class="line">    <span class="meta">@OperationLog(value = &quot;根据id更新信息-批量&quot;)</span></span><br><span class="line">    <span class="meta">@Validated(value = UpdateGroup.class)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResult <span class="title function_">updateBatch</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Q&gt; query)</span> &#123;</span><br><span class="line">        basicService.updateBatch(query);</span><br><span class="line">        <span class="keyword">return</span> success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询单个数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 主键</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;1.6 查询单个数据&quot;)</span></span><br><span class="line">    <span class="meta">@OperationLog(value = &quot;查询单个数据&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResult&lt;V&gt; <span class="title function_">select</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> success(basicService.select(id));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> query &#123;<span class="doctag">@link</span> Q&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;page&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;1.7 分页&quot;)</span></span><br><span class="line">    <span class="meta">@OperationLog(value = &quot;分页&quot;)</span></span><br><span class="line">    <span class="meta">@Validated(value = PageQueryGroup.class)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResult&lt;PageResult&lt;V&gt;&gt; <span class="title function_">listUser</span><span class="params">(Q query)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> success(basicService.page(query));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="BasicDao"><a href="#BasicDao" class="headerlink" title="BasicDao"></a>BasicDao</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nari.core.basic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.nari.core.web.BaseParam;</span><br><span class="line"><span class="keyword">import</span> com.nari.core.web.PageParam;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 基础接口</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> &lt;a href=&quot;mailto:njpkhuan@gmail.com&quot;&gt;朱永胜&lt;/a&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2021/3/1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BasicDao</span>&lt;T <span class="keyword">extends</span> <span class="title class_">BasicModel</span>, D, Q <span class="keyword">extends</span> <span class="title class_">BaseParam</span>&gt; <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;T&gt; &#123;</span><br><span class="line">    List&lt;D&gt; <span class="title function_">selectPageRel</span><span class="params">(<span class="meta">@Param(&quot;page&quot;)</span> PageParam&lt;D, Q&gt; page, <span class="meta">@Param(&quot;param&quot;)</span> Q param)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="BasicEnum"><a href="#BasicEnum" class="headerlink" title="BasicEnum"></a>BasicEnum</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nari.core.basic;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 基础枚举</span></span><br><span class="line"><span class="comment"> * 主要用来配合apijson实现枚举展示</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> &lt;a href=&quot;mailto:17602556550@189.cn&quot;&gt;朱永胜&lt;/a&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023/5/25</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BasicEnum</span> &#123;</span><br><span class="line">    String <span class="title function_">getName</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    Integer <span class="title function_">getValue</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="BasicMapper"><a href="#BasicMapper" class="headerlink" title="BasicMapper"></a>BasicMapper</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nari.core.basic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mapstruct.MappingTarget;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 基础转换</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> &lt;a href=&quot;mailto:njpkhuan@gmail.com&quot;&gt;朱永胜&lt;/a&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2021/3/1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BasicMapper</span>&lt;T, Q, D, V&gt; &#123;</span><br><span class="line">    T <span class="title function_">query2do</span><span class="params">(Q query)</span>;</span><br><span class="line"></span><br><span class="line">    V <span class="title function_">dto2View</span><span class="params">(D dto)</span>;</span><br><span class="line"></span><br><span class="line">    D <span class="title function_">do2dto</span><span class="params">(T role)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Q query, <span class="meta">@MappingTarget</span> T t)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;V&gt; <span class="title function_">dto2ViewPage</span><span class="params">(List&lt;D&gt; dto)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="BasicModel"><a href="#BasicModel" class="headerlink" title="BasicModel"></a>BasicModel</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nari.core.basic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用模型</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> &lt;a href=&quot;mailto:17602556550@189.cn&quot;&gt;朱永胜&lt;/a&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023/5/26</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BasicModel</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 主键</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除标识</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;删除标识&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String deleted;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="BasicService"><a href="#BasicService" class="headerlink" title="BasicService"></a>BasicService</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nari.core.basic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.IdUtil;</span><br><span class="line"><span class="keyword">import</span> com.nari.core.web.BaseParam;</span><br><span class="line"><span class="keyword">import</span> com.nari.core.web.PageParam;</span><br><span class="line"><span class="keyword">import</span> com.nari.core.web.PageResult;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.validation.Valid;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotNull;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 基础服务</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> &lt;a href=&quot;mailto:njpkhuan@gmail.com&quot;&gt;朱永胜&lt;/a&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2021/3/1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BasicService</span>&lt;T <span class="keyword">extends</span> <span class="title class_">BasicModel</span>, Q <span class="keyword">extends</span> <span class="title class_">BaseParam</span>, V, D, M <span class="keyword">extends</span> <span class="title class_">BasicMapper</span>&lt;T, Q, D, V&gt;&gt; &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> BasicDao&lt;T, D, Q&gt; basicDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> BasicMapper&lt;T, Q, D, V&gt; basicMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> query &#123;<span class="doctag">@link</span> Q&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> &lt;a href = &quot;mailto:njpkhuan@gmail.com&quot; &gt;朱永胜&lt;/a &gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2021/3/1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.0.0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="meta">@Valid</span> Q query)</span> &#123;</span><br><span class="line">        <span class="type">T</span> <span class="variable">t</span> <span class="operator">=</span> basicMapper.query2do(query);</span><br><span class="line">        t.setId(IdUtil.simpleUUID());</span><br><span class="line">        basicDao.insert(t);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id &#123;<span class="doctag">@link</span> Q&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> &lt;a href = &quot;mailto:njpkhuan@gmail.com&quot; &gt;朱永胜&lt;/a &gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2021/3/1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.0.0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">del</span><span class="params">(<span class="meta">@NotNull</span> String id)</span> &#123;</span><br><span class="line">        basicDao.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据用户id更新</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> query @&#123;<span class="doctag">@link</span> Q&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> &lt;a href = &quot;mailto:njpkhuan@gmail.com&quot; &gt;朱永胜&lt;/a &gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2021/3/1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.0.0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">update</span><span class="params">(<span class="meta">@Valid</span> Q query)</span> &#123;</span><br><span class="line">        <span class="type">T</span> <span class="variable">data</span> <span class="operator">=</span> basicMapper.query2do(query);</span><br><span class="line">        basicDao.updateById(data);</span><br><span class="line">        <span class="type">D</span> <span class="variable">d</span> <span class="operator">=</span> basicMapper.do2dto(data);</span><br><span class="line">        <span class="keyword">return</span> basicMapper.dto2View(d);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> &lt;a href = &quot;mailto:njpkhuan@gmail.com&quot; &gt;朱永胜&lt;/a &gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2021/3/1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.0.0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">select</span><span class="params">(<span class="meta">@NotNull</span> String id)</span> &#123;</span><br><span class="line">        <span class="type">T</span> <span class="variable">data</span> <span class="operator">=</span> basicDao.selectById(id);</span><br><span class="line">        <span class="type">D</span> <span class="variable">d</span> <span class="operator">=</span> basicMapper.do2dto(data);</span><br><span class="line">        <span class="keyword">return</span> basicMapper.dto2View(d);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询多条记录</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> query &#123;<span class="doctag">@link</span> Q&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> &lt;a href = &quot;mailto:njpkhuan@gmail.com&quot; &gt;朱永胜&lt;/a &gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2021/2/23</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.0.0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> PageResult&lt;V&gt; <span class="title function_">page</span><span class="params">(<span class="meta">@Valid</span> Q query)</span> &#123;</span><br><span class="line">        PageParam&lt;D, Q&gt; page = <span class="keyword">new</span> <span class="title class_">PageParam</span>&lt;&gt;(query);</span><br><span class="line">        page.setDefaultOrder(<span class="string">&quot;create_time desc&quot;</span>);</span><br><span class="line">        List&lt;D&gt; list = basicDao.selectPageRel(page, query);</span><br><span class="line"></span><br><span class="line">        List&lt;V&gt; vList = basicMapper.dto2ViewPage(list);</span><br><span class="line">        log.trace(<span class="string">&quot;&#123;&#125;&quot;</span>, list);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageResult</span>&lt;&gt;(vList, page.getTotal());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 软删除</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> &lt;a href=&quot;mailto:17602556550@189.cn&quot;&gt;朱永胜&lt;/a&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2023/5/26</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delWeak</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="type">T</span> <span class="variable">t</span> <span class="operator">=</span> basicDao.selectById(id);</span><br><span class="line">        t.setDeleted(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        basicDao.updateById(t);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量更新</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> &lt;a href=&quot;mailto:17602556550@189.cn&quot;&gt;朱永胜&lt;/a&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2023/6/6</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateBatch</span><span class="params">(List&lt;Q&gt; query)</span> &#123;</span><br><span class="line">        query.forEach(<span class="built_in">this</span>::update);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="GenericSuperclassUtil"><a href="#GenericSuperclassUtil" class="headerlink" title="GenericSuperclassUtil"></a>GenericSuperclassUtil</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nari.core.basic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.ParameterizedType;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Type;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericSuperclassUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 获取泛型类Class对象，不是泛型类则返回null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Class&lt;?&gt; getActualTypeArgument(Class&lt;?&gt; clazz) &#123;</span><br><span class="line">        Class&lt;?&gt; entitiClass = <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Type</span> <span class="variable">genericSuperclass</span> <span class="operator">=</span> clazz.getGenericSuperclass();</span><br><span class="line">        <span class="keyword">if</span> (genericSuperclass <span class="keyword">instanceof</span> ParameterizedType) &#123;</span><br><span class="line">            Type[] actualTypeArguments = ((ParameterizedType) genericSuperclass)</span><br><span class="line">                    .getActualTypeArguments();</span><br><span class="line">            <span class="keyword">if</span> (actualTypeArguments != <span class="literal">null</span> &amp;&amp; actualTypeArguments.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                entitiClass = (Class&lt;?&gt;) actualTypeArguments[<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> entitiClass;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 获取泛型类Class对象，不是泛型类则返回null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> Class&lt;?&gt; getActualTypeArgument(Class&lt;?&gt; clazz, Integer pos) &#123;</span><br><span class="line">        Class&lt;?&gt; entitiClass = <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Type</span> <span class="variable">genericSuperclass</span> <span class="operator">=</span> clazz.getGenericSuperclass();</span><br><span class="line">        <span class="keyword">if</span> (genericSuperclass <span class="keyword">instanceof</span> ParameterizedType) &#123;</span><br><span class="line">            Type[] actualTypeArguments = ((ParameterizedType) genericSuperclass)</span><br><span class="line">                    .getActualTypeArguments();</span><br><span class="line">            <span class="keyword">if</span> (actualTypeArguments != <span class="literal">null</span> &amp;&amp; actualTypeArguments.length &gt; pos) &#123;</span><br><span class="line">                entitiClass = (Class&lt;?&gt;) actualTypeArguments[pos];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> entitiClass;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="三、POM"><a href="#三、POM" class="headerlink" title="三、POM"></a>三、POM</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">org.mapstruct.version</span>&gt;</span>1.5.5.Final<span class="tag">&lt;/<span class="name">org.mapstruct.version</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mapstruct<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapstruct<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;org.mapstruct.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">annotationProcessorPaths</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">path</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">path</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok-mapstruct-binding<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">path</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mapstruct<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapstruct-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;org.mapstruct.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">annotationProcessorPaths</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">```<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> 代理 </tag>
            
            <tag> 动态加载 </tag>
            
            <tag> 基础类 </tag>
            
            <tag> 基础接口 </tag>
            
            <tag> 基础枚举 </tag>
            
            <tag> 基础转换 </tag>
            
            <tag> 基础模型 </tag>
            
            <tag> 基础服务 </tag>
            
            <tag> POM </tag>
            
            <tag> mapstruct </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【开发规范系列】（一）：Mysql篇</title>
      <link href="/e1aecfe9.html"/>
      <url>/e1aecfe9.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="MySQL-编码规范：保障代码质量的关键"><a href="#MySQL-编码规范：保障代码质量的关键" class="headerlink" title="MySQL 编码规范：保障代码质量的关键"></a>MySQL 编码规范：保障代码质量的关键</h1><h2 id="1-流程"><a href="#1-流程" class="headerlink" title="1. 流程"></a>1. 流程</h2><p>数据库表结构的修改需要相关人员和Leader一起评审，保证符合涉及规范。</p><p>不允许使用root账号，所有开发和测试应当分配指定账号，并授予最小数据库权限</p><h2 id="2-数据库与表规范"><a href="#2-数据库与表规范" class="headerlink" title="2. 数据库与表规范"></a>2. 数据库与表规范</h2><h3 id="表命名规范"><a href="#表命名规范" class="headerlink" title="表命名规范"></a>表命名规范</h3><ol><li>常规表表名以 t_开头，t 代表 table 的意思，命名规则即 <strong>t + 模块（包含模块含义的简写）+ 表（包含表含义的简写）</strong><br>，比如用户模块的教育信息表：t_user_eduinfo。</li><li>临时表（RD、QA 或 DBA 同学用于数据临时处理的表），命名规则：<strong>temp 前缀+模块+表+日期后缀</strong>：temp_user_eduinfo_20210719</li><li>备份表（用于保存和归档历史数据或者作为灾备恢复的数据）命名规则，<strong>bak 前缀+模块+表+日期后缀</strong>：bak_user_eduinfo_20210719</li><li>区分位: iz_* [String(1)] 1表示是 0表示否，（禁用 is_,代码生成实体有问题 )</li><li>状态位: *_status [String(1-2)] 状态字段必须加注释说明每个值代表含义</li><li>同一个模块的表尽可能使用相同的前缀，表名称尽可能表达含义</li><li>多个单词以下划线 _ 分隔</li><li>常规表表名尽量不超过 30 个字符，temp 表和 bak 表视情况而定，也尽量简短为宜，命名应使用小写</li></ol><h3 id="数据库对象设计规范"><a href="#数据库对象设计规范" class="headerlink" title="数据库对象设计规范"></a>数据库对象设计规范</h3><ol><li>字符集统一使用<code>utf8mb4</code>,排序<code>utf8mb4_general_ci</code></li><li>不允许使用视图、存储过程、触发器</li><li>数据库引擎统一<code>innodb</code></li><li>模块划分和代码中业务模块一致</li></ol><h3 id="表设计规范"><a href="#表设计规范" class="headerlink" title="表设计规范"></a>表设计规范</h3><ol><li>不要使用外键</li><li>表必须有主键，设置为varchar(64)，唯一</li><li>表必须有create_time(timestamp)字段</li><li>表必须有update_time(timestamp)字段</li><li>禁止使用复杂类型，json使用要看情况</li><li><strong>需要json连接的字段，类型必须一致，防止隐式转换</strong></li><li>严禁使用分区表</li><li>单表字段数不要太多，建议最多不要大于50个。过度的宽表对性能也是很大的影响。</li><li>MySQL在处理大表时，性能就开始明显降低，所以建议单表物理大小限制在16GB，表中数据行数控制在2000W内。^[<br>业内的规则是超过2000W性能开始明显降低。但是这个值是灵活的，你可以根据实际情况进行测试来判断，比如阿里的标准就是500W，百度的确是2000W。实际上是否宽表，单行数据所占用的空间都有起到作用的。</li><li>表字段注释，每个字段必须设置注释说明;</li><li>表字段注释，状态类型的字段必须说明取值规则（比如性别sex取值规则）</li></ol><h2 id="3-字段规范"><a href="#3-字段规范" class="headerlink" title="3. 字段规范"></a>3. 字段规范</h2><h4 id="字段命名规范"><a href="#字段命名规范" class="headerlink" title="字段命名规范"></a>字段命名规范</h4><ol><li>字段命名需要表示其实际含义的英文单词或简写，<strong>单词之间用下划线 _ 进行连接</strong>，如 service_ip、service_port。</li><li><strong>各表之间相同意义的字段必须同名</strong>，比如 a 表和 b 表都有创建时间，应该统一为 create_time，不一致会很混乱。</li><li>多个单词以下划线 _ 分隔</li><li>字段名尽量不超过 30 个字符，<strong>命名应该使用小写</strong></li></ol><h4 id="字段设计规范"><a href="#字段设计规范" class="headerlink" title="字段设计规范"></a>字段设计规范</h4><ol><li><strong>对于精确浮点型数据存储，需要使用DECIMAL</strong>，严禁使用FLOAT和DOUBLE</li><li>禁止使用TEXT、BLOG字段，特殊情况除外</li><li><strong>字段使用NOT NULL属性</strong>，可用默认值代替NULL</li><li>区分、状态、类型字段，尽量用String类型，避免数字类型的一些问题</li><li>字段默认值（字段尽量不设置默认值，采用编码方式加默认值）</li><li>逻辑删除字段，del_flag [int(1)]，1表示删除 0表示未删除 ，可选择加</li><li>乐观锁字段， update_count[Integer]，可选择加</li></ol><h2 id="4-索引规范"><a href="#4-索引规范" class="headerlink" title="4. 索引规范"></a>4. 索引规范</h2><h4 id="索引命名规范"><a href="#索引命名规范" class="headerlink" title="索引命名规范"></a>索引命名规范</h4><ol><li>唯一索引使用<strong>uni + 字段名</strong> 来命名：create unique index uni_uid on t_user_basic(uid) 。</li><li>非唯一索引使用<strong>idx + 字段名</strong> 来命名：create index idx_uname_mobile on t_user_basic(uname,mobile) 。</li><li>多个单词以<strong>下划线 _ 分隔</strong>。</li><li>索引名尽量不超过50个字符，命名应该使用小写，组合索引的字段不宜太多，不然也不利于查询效率的提升。</li><li>多单词组成的列名，取尽可能代表意义的缩写，如 test_contact表member_id和friend_id上的组合索引：idx_mid_fid。</li><li><strong>理解组合索引最左前缀原则，避免重复建设索引</strong>，如果建立了(a,b,c)，相当于建立了(a), (a,b), (a,b,c)。</li></ol><h4 id="索引设计规范"><a href="#索引设计规范" class="headerlink" title="索引设计规范"></a>索引设计规范</h4><ol><li>索引必须创建在索引选择性（区分度）较高的列上，选择性的计算方式为:  selecttivity &#x3D; count(distinct c_name)&#x2F;count(*) ;<br>如果区分度结果小于0.2，则不建议在此列上创建索引，否则大概率会拖慢SQL执行</li><li>单张表的索引数量理论上应<strong>控制在5个以内</strong>。经常有大批量插入、更新操作表，应尽量少建索引，索引建立的原则理论上是**多读少写的场景<br>**。</li><li><strong>ORDER BY，GROUP BY，DISTINCT的字段需要添加在索引的后面，形成覆盖索引</strong></li><li>联合索引注意<strong>最左匹配原则</strong>：必须按照从左到右的顺序匹配，MySQL会一直向右匹配索引直到遇到范围查询(&gt;、&lt;、between、like)<br>然后停止匹配。如：depno&#x3D;1 and empname&gt;’’ and job&#x3D;1 如果建立(depno,empname,job)顺序的索引，job是用不到索引的。</li><li>应需而取策略，查询记录的时候，<strong>不要一上来就使用</strong>*，只取需要的数据，可能的话尽量只利用索引覆盖，可以减少回表操作，提升效率。</li><li>避免索引失效的原则：<strong>禁止对索引字段使用函数、运算符操作，会使索引失效</strong>。</li><li><strong>避免非必要的类型转换</strong>，字符串字段使用数值进行比较的时候会导致索引无效。</li><li><strong>模糊查询’%value%’会使索引无效</strong>，变为全表扫描，因为无法判断扫描的区间，<strong>但是’value%’是可以有效利用索引</strong>。</li><li><strong>索引覆盖排序字段</strong>，这样可以减少排序步骤，提升查询效率</li><li><strong>尽量的扩展索引，非必要不新建索引</strong>。比如表中已经有a的索引，现在要加(a,b)的索引，那么只需要修改原来的索引即可。</li></ol><p>扩展下最左前缀</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 这里创建一个索引</span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_name <span class="keyword">ON</span> users (first_name, last_name);</span><br><span class="line"></span><br><span class="line"># 在这个索引中，first_name 是最左前缀。现在，当您执行类似以下的查询时，索引可以被有效地利用：</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> first_name <span class="operator">=</span> <span class="string">&#x27;John&#x27;</span> <span class="keyword">AND</span> last_name <span class="operator">=</span> <span class="string">&#x27;Doe&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5-SQL-查询编写规范"><a href="#5-SQL-查询编写规范" class="headerlink" title="5. SQL 查询编写规范"></a>5. SQL 查询编写规范</h2><ol><li>不允许使用<code>select *</code></li><li>查询必须加where条件，避免全表扫描</li><li>如果必须有TEXT对象，必须单独加表并关联</li><li>where条件中过滤字段严禁使用任何函数，包括数据类型转换函数</li><li>分页查询必须带排序条件</li><li>用in&#x2F;union替换or，并注意in个数小于300</li><li>如无必要不要使用%前缀进行模糊查询，避免全表查询</li><li>避免使用子查询，转为join连接</li></ol><p>子查询性能差原因</p><p><strong>「·」</strong>子查询的结果集无法使用索引，通常子查询的结果集会被存储到临时表中，不论是内存临时表还是磁盘临时表都不会存在索引，所以查询性能<br>会受到一定的影响；</p><p><strong>「·」</strong>特别是对于返回结果集比较大的子查询，其对查询性能的影响也就越大；</p><p><strong>「·」</strong>由于子查询会产生大量的临时表也没有索引，所以会消耗过多的CPU和IO资源，产生大量的慢查询。</p><h2 id="6-事务管理和性能优化"><a href="#6-事务管理和性能优化" class="headerlink" title="6. 事务管理和性能优化"></a>6. 事务管理和性能优化</h2><ol><li>所有方法涉及到更新、删除、添加操作需要使用<code>@Transactional</code>注解</li><li>数据量大的情况下， 需要分批次操作</li></ol><h2 id="7-安全性考虑"><a href="#7-安全性考虑" class="headerlink" title="7. 安全性考虑"></a>7. 安全性考虑</h2><ul><li>数据库配置应当使用druid等框架对明文进行加密</li><li>避免拼接SQL</li><li>防止SQL注入��接SQL</li><li>防止SQL注入</li></ul><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 开发规范 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> 开发规范 </tag>
            
            <tag> 数据库表结构 </tag>
            
            <tag> 账号权限 </tag>
            
            <tag> 表命名规范 </tag>
            
            <tag> 数据库对象设计 </tag>
            
            <tag> 表设计规范 </tag>
            
            <tag> 字段命名规范 </tag>
            
            <tag> 字段设计规范 </tag>
            
            <tag> 索引命名规范 </tag>
            
            <tag> 索引设计规范 </tag>
            
            <tag> SQL查询编写规范 </tag>
            
            <tag> 事务管理 </tag>
            
            <tag> 性能优化 </tag>
            
            <tag> 安全性考虑 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cmd部署HexoGithub443问题</title>
      <link href="/c46b5f05.html"/>
      <url>/c46b5f05.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy “localhost:7890”</span><br></pre></td></tr></table></figure><p>配置下代理即可&#96;<br>配置下代理即可</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> BUG </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
            <tag> Cmd </tag>
            
            <tag> Hexo </tag>
            
            <tag> Github </tag>
            
            <tag> 443问题 </tag>
            
            <tag> git config </tag>
            
            <tag> http.proxy </tag>
            
            <tag> 代理配置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis系列（二）：深入解读Redis的两种持久化方式</title>
      <link href="/52275545.html"/>
      <url>/52275545.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><blockquote><p>博客地址：blog.zysicyj.top</p></blockquote><h1 id="Redis为什么要引入持久化机制"><a href="#Redis为什么要引入持久化机制" class="headerlink" title="Redis为什么要引入持久化机制"></a>Redis为什么要引入持久化机制</h1><p>Redis引入持久化机制是为了解决内存数据库的数据安全性和可靠性问题。虽然内存数据库具有高速读写的优势，但由于数据存储在内存中，一旦服务器停止或崩溃，所有数据将会丢失。持久化机制的引入旨在将内存中的数据持久化到磁盘上，从而在服务器重启后能够恢复数据，提供更好的数据保护和可靠性。</p><p>以下是持久化机制的几个主要原因：</p><p><strong>1. 数据安全和可靠性：</strong><br>通过将数据持久化到磁盘上，即使在服务器崩溃或异常停止的情况下，也可以保证数据不会丢失。持久化机制可以防止重要的数据在突发情况下遭受损失。</p><p><strong>2. 数据恢复：</strong><br>持久化机制允许在服务器重启后将数据重新加载到内存中，从而实现数据的恢复。这对于业务的连续性和可用性非常重要。</p><p><strong>3. 数据灾难恢复：</strong><br>持久化机制对于灾难恢复也很有帮助。在不幸发生硬件故障、电力中断等情况下，持久化机制可以帮助恢复数据。</p><p><strong>4. 数据迁移：</strong><br>持久化机制也有助于将数据从一个服务器迁移到另一个服务器。你可以通过备份持久化文件并在另一台服务器上进行恢复来完成数据迁移。</p><p>虽然持久化机制带来了磁盘IO和性能开销，但它为Redis提供了更强大的数据保护能力。根据应用的需求，可以根据数据的重要性和数据丢失的容忍度来选择适当的持久化方式，或者结合两种方式以提供更高的数据保护级别。</p><h1 id="Redis提供了哪些持久化机制"><a href="#Redis提供了哪些持久化机制" class="headerlink" title="Redis提供了哪些持久化机制"></a>Redis提供了哪些持久化机制</h1><p>Redis提供了两种主要的持久化机制，分别是RDB快照（Snapshotting）和AOF日志（Append-Only File）。这两种机制可以根据不同的需求和场景来选择使用。</p><p><strong>1. RDB快照（Snapshotting）：</strong><br>RDB快照是一种全量持久化方式，它会周期性地将内存中的数据以二进制格式保存到磁盘上的RDB文件。RDB文件是一个经过压缩的二进制文件，包含了数据库在某个时间点的数据快照。RDB快照有助于实现紧凑的数据存储，适合用于备份和恢复。</p><p><strong>优点：</strong></p><ul><li>RDB快照在恢复大数据集时速度较快，因为它是全量的数据快照。</li><li>由于RDB文件是压缩的二进制文件，它在磁盘上的存储空间相对较小。</li><li>适用于数据备份和灾难恢复。</li></ul><p><strong>缺点：</strong></p><ul><li>RDB快照是周期性的全量持久化，可能导致某个时间点之后的数据丢失。</li><li>在保存快照时，Redis服务器会阻塞，可能对系统性能造成影响。</li></ul><p><strong>2. AOF日志（Append-Only File）：</strong><br>AOF日志是一种追加式持久化方式，它记录了每个写操作命令，以追加的方式将命令写入AOF文件。通过重新执行AOF文件中的命令，可以重建出数据在内存中的状态。AOF日志提供了更精确的持久化，适用于需要更高数据安全性和实时性的场景。</p><p><strong>优点：</strong></p><ul><li>AOF日志可以实现更精确的数据持久化，每个写操作都会被记录。</li><li>在AOF文件中，数据可以更好地恢复，因为它保存了所有的写操作历史。</li><li>AOF日志适用于需要实时恢复数据的场景，如秒级数据恢复要求。</li></ul><p><strong>缺点：</strong></p><ul><li>AOF日志相对于RDB快照来说，可能会占用更多的磁盘空间，因为它是记录每个写操作的文本文件。</li><li>AOF日志在恢复大数据集时可能会比RDB快照慢，因为需要逐条执行写操作。</li></ul><p>根据不同的需求，可以选择RDB快照、AOF日志或两者结合使用。你可以根据数据的重要性、恢复速度要求以及磁盘空间限制来选择合适的持久化方式。有时候，也可以通过同时使用两种方式来提供更高的数据保护级别。</p><h1 id="AOF日志是如何实现的"><a href="#AOF日志是如何实现的" class="headerlink" title="AOF日志是如何实现的"></a>AOF日志是如何实现的</h1><p>首先，大家要知道，AOF是写后日志，“写后”的意思是Redis先执行命令，把数据写入内存，然后才记录日志，如下图所示：<br><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308131424275.png" title="Redis AOF操作过程" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308131424275.png" alt="Redis AOF操作过程"></a></p><h2 id="AOF-为什么要先执行命令再记日志呢"><a href="#AOF-为什么要先执行命令再记日志呢" class="headerlink" title="AOF 为什么要先执行命令再记日志呢"></a>AOF 为什么要先执行命令再记日志呢</h2><p>AOF（Append-Only File）持久化机制中，为什么要先执行命令再记录日志，而不是相反，这涉及到数据的一致性和持久性。</p><p>AOF的设计目标之一是保证数据的持久性，即在服务器重启后能够恢复出与重启前一致的数据状态。为了实现这个目标，AOF的操作顺序非常重要。</p><p><strong>先执行命令再记录日志的原因：</strong></p><ol><li><p><strong>数据一致性：</strong> 如果先记录日志再执行命令，假设记录日志成功而执行命令失败（例如服务器崩溃），那么日志中记录的操作实际上没有被应用，会导致数据在重启后与预期不一致。</p></li><li><p><strong>可恢复性：</strong> 先执行命令再记录日志可以保证在服务器重启后，即使在崩溃前未能将操作记录到日志中，也可以通过重新执行AOF日志中的命令，将数据恢复到正确的状态。</p></li><li><p><strong>避免日志丢失：</strong> 如果先记录日志再执行命令，如果在记录日志之前发生了服务器崩溃，会导致操作丢失，而这些操作可能已经影响了数据的一致性。</p></li></ol><p>当然，这里面还有一个非常重要的原因，<strong>它是在命令执行后才记录日志，所以不会阻塞当前的写操作</strong>。</p><p>因此，为了确保数据的持久性和一致性，Redis选择了先执行命令再记录日志的方式。这样可以保证只有在操作真正成功执行后，才会将操作记录到AOF日志中，从而在服务器重启后能够准确地重放这些操作，保持数据的正确性。</p><h2 id="AOF日志里面记录了什么内容呢"><a href="#AOF日志里面记录了什么内容呢" class="headerlink" title="AOF日志里面记录了什么内容呢"></a>AOF日志里面记录了什么内容呢</h2><p>AOF（Append-Only File）日志记录了每个写操作命令，以追加的方式将命令写入AOF文件。这些写操作命令被以一种协议格式（通常是RESP协议）写入AOF文件，以文本形式保存。下面是AOF日志中记录的内容示例：</p><p>假设执行了以下操作：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SET key1 value1</span><br><span class="line">INCR key2</span><br><span class="line">LPUSH list1 item1</span><br></pre></td></tr></table></figure><p>对应的AOF日志内容可能是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*3\r\n$3\r\nSET\r\n$4\r\nkey1\r\n$6\r\nvalue1\r\n</span><br><span class="line">*2\r\n$4\r\nINCR\r\n$4\r\nkey2\r\n</span><br><span class="line">*3\r\n$5\r\nLPUSH\r\n$5\r\nlist1\r\n$5\r\nitem1\r\n</span><br></pre></td></tr></table></figure><p>在这个示例中，每个写操作都以RESP协议格式记录在AOF文件中，以一系列字节数组来表示命令和参数。每个写操作的记录由多行组成，以\r\n分隔。</p><ul><li><code>*3</code>：表示命令参数的个数为3。</li><li><code>$3\r\nSET\r\n</code>：表示第一个参数为长度为3的字符串 “SET”。</li><li><code>$4\r\nkey1\r\n</code>：表示第二个参数为长度为4的字符串 “key1”。</li><li><code>$6\r\nvalue1\r\n</code>：表示第三个参数为长度为6的字符串 “value1”。</li></ul><p>这样的记录方式允许在AOF文件中按照操作的顺序逐条重放写操作命令，从而实现数据在服务器重启后的恢复。由于AOF记录的是写操作命令本身，所以在执行AOF文件中的命令时，可以完全还原数据的状态。</p><h2 id="AOF日志潜在的问题"><a href="#AOF日志潜在的问题" class="headerlink" title="AOF日志潜在的问题"></a>AOF日志潜在的问题</h2><p>AOF（Append-Only File）写日志是Redis的持久化机制之一，它记录了每个写操作命令，以追加的方式将命令写入AOF文件。尽管AOF具有许多优点，但也存在一些风险和潜在的问题，需要注意和管理：</p><p><strong>1. 磁盘IO开销：</strong><br>AOF日志以追加写入方式工作，每次写入操作都会直接追加到AOF文件末尾。这意味着频繁的写入操作可能会导致磁盘IO开销增加，可能会影响系统的性能和响应时间。</p><p><strong>2. 磁盘空间占用：</strong><br>AOF日志记录的是每个写操作命令本身，相比于RDB快照，AOF文件可能会更大。如果写入操作频繁，AOF文件可能会不断增大，占用过多的磁盘空间。</p><p><strong>3. 数据一致性：</strong><br>尽管AOF的先执行命令再记录日志的机制保证了数据一致性，但如果在记录日志前发生服务器崩溃，尚未记录的操作可能会丢失，可能导致数据一致性问题。</p><p><strong>4. AOF文件损坏：</strong><br>由于AOF文件是以文本格式记录的命令，如果AOF文件在写入或存储过程中受到损坏，可能导致数据恢复时出现问题，甚至无法正确恢复数据。</p><p><strong>5. AOF重写耗时：</strong><br>AOF重写是为了减小AOF文件的大小，但它是一个耗时的操作，可能会对系统性能产生影响，尤其是在大数据集的情况下。</p><p><strong>6. AOF重写可能引发的问题：</strong><br>AOF重写过程中可能会因为各种原因导致数据丢失，例如中断的重写过程、文件系统问题等。在执行AOF重写时，需要谨慎对待，确保数据的完整性。</p><p><strong>7. AOF文件合并：</strong><br>在一些场景下，可能需要将多个AOF文件合并成一个，这样的操作需要小心处理，以避免数据丢失或错误。</p><p><strong>8. 硬件故障：</strong><br>虽然AOF可以提供持久性保证，但硬件故障（例如磁盘故障）可能会导致AOF文件丢失或损坏，需要适当的备份和恢复策略。</p><p>为了减轻AOF写日志带来的风险，可以采取一些措施，如选择适当的AOF同步策略、定期备份AOF文件、监控AOF文件的大小和状态、定期执行AOF重写、备份数据等。这些策略可以帮助减少潜在的问题，并提高系统的可靠性。</p><h2 id="AOF日志三种写回策略"><a href="#AOF日志三种写回策略" class="headerlink" title="AOF日志三种写回策略"></a>AOF日志三种写回策略</h2><p>AOF（Append-Only<br>File）持久化机制在Redis中有三种不同的写回（sync）策略，用于控制何时将AOF缓冲区中的写入操作刷新到磁盘上的AOF文件。这些策略决定了AOF日志的同步频率，影响了数据的持久性和性能。以下是这三种写回策略：</p><p><strong>1. always（始终同步）：</strong><br>在这个策略下，每次执行写入操作之后，Redis都会立即将写入操作刷新到磁盘，确保写入操作已经持久化。虽然这种方式能够提供最高的数据保证，但也是性能开销最大的一种方式，因为每次写入操作都会引起磁盘IO。</p><p><strong>优点：</strong></p><ul><li>最高的数据保证，即使系统崩溃，也只会丢失上一个写入操作。</li></ul><p><strong>缺点：</strong></p><ul><li>性能开销较大，频繁的磁盘IO可能影响系统的性能和响应时间。</li></ul><p><strong>2. everysec（每秒同步）：</strong><br>在这个策略下，Redis会每秒一次将AOF缓冲区中的写入操作批量刷新到磁盘上的AOF文件。这样可以在一定程度上平衡数据保证和性能。</p><p><strong>优点：</strong></p><ul><li>较高的数据保证，每秒一次的同步保证了不会丢失过多的写入操作。</li><li>性能开销相对较低，因为是每秒一次的批量刷新。</li></ul><p><strong>缺点：</strong></p><ul><li>在一秒内的操作可能会丢失。</li></ul><p><strong>3. no（不同步）：</strong><br>这个策略下，Redis不会主动将AOF缓冲区中的写入操作刷新到磁盘，而是由操作系统来决定何时将数据写入磁盘。这是性能开销最小的方式，但数据持久性相对较低。</p><p><strong>优点：</strong></p><ul><li>最小的性能开销，几乎不会影响系统的响应时间。</li><li>最高的性能表现，写入操作不会导致频繁的磁盘IO。</li></ul><p><strong>缺点：</strong></p><ul><li>数据持久性较低，如果系统崩溃，可能会丢失多个写入操作。</li></ul><p>选择合适的AOF写回策略取决于数据的重要性和性能需求。如果数据安全性最为重要，可以选择<code>always</code><br>策略。如果在数据一致性和性能之间需要平衡，可以选择<code>everysec</code><br>策略。如果对性能要求较高，而可以接受一定程度的数据丢失，可以选择<code>no</code>策略。根据实际情况，可以根据需求来配置AOF的写回策略。</p><p>这里呢给大家总结一下各种配置的优缺点<br><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308131434405.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308131434405.png"></a></p><h2 id="日志文件太大了怎么办"><a href="#日志文件太大了怎么办" class="headerlink" title="日志文件太大了怎么办"></a>日志文件太大了怎么办</h2><p>AOF（Append-Only<br>File）重写是为了减小AOF文件的大小，避免AOF文件不断增大导致的磁盘空间占用问题。AOF重写是一种以全量的方式生成新的AOF文件，其中记录的是一个数据集的写入操作，这个数据集的大小通常比原始AOF文件小很多。</p><p>AOF重写的工作原理如下：</p><ol><li><p><strong>触发重写：</strong><br>AOF重写可以手动触发，也可以根据配置自动触发。当满足一定条件（例如AOF文件大小超过指定百分比或最小大小）时，Redis会启动AOF重写过程。</p></li><li><p><strong>后台进程启动：</strong><br>当AOF重写触发时，Redis会启动一个子进程，这个子进程会负责执行AOF重写操作。</p></li><li><p><strong>创建数据集快照：</strong><br>在子进程中，Redis会创建一个数据集的内存快照，即内存中数据在某个时间点的快照。</p></li><li><p><strong>遍历数据集：</strong><br>子进程开始遍历数据集中的键，并将写操作转换成命令序列。</p></li><li><p><strong>生成新AOF文件：</strong><br>子进程会将遍历期间生成的命令序列追加到新的AOF文件中，这个新文件是紧凑的，只包含了数据集在某个时间点的写入操作。</p></li><li><p><strong>替换原AOF文件：</strong><br>当新的AOF文件生成完成后，子进程会将原始的AOF文件替换为新的AOF文件。这一步通常很快，因为新的AOF文件相对较小。</p></li><li><p><strong>主线程继续服务：</strong><br>在AOF重写过程中，主线程仍然可以继续处理客户端请求，响应读取操作等，不会被阻塞。</p></li></ol><p>AOF重写的优势在于它可以生成一个更小、更紧凑的AOF文件，避免了不断增大的AOF文件所带来的磁盘空间和读写开销。此外，新的AOF文件只包含了写入操作，没有之前的读操作，因此它在恢复数据时不需要考虑之前的读操作。</p><p>AOF重写可以通过多种方式触发：</p><ul><li>手动触发：可以使用<code>BGREWRITEAOF</code>命令手动触发AOF重写。</li><li>自动触发：可以通过设置<code>auto-aof-rewrite-percentage</code>和<code>auto-aof-rewrite-min-size</code><br>来自动触发AOF重写。当AOF文件大小达到指定的百分比或最小大小时，Redis会自动启动AOF重写。</li></ul><p>需要注意的是，AOF重写是一个资源密集型操作，可能会影响系统的性能，特别是在大数据集的情况下。因此，在进行AOF重写时，应该考虑其对系统性能的影响，并确保系统具备足够的资源来执行重写操作。<br>下面举例说明一下：<br><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308131436435.png" title="AOF重写减少文件大小" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308131436435.png" alt="AOF重写减少文件大小"></a><br>这里大家能看到，经过优化后，AOF日志文件会缩小很多，但是，要把整个数据库的最新数据的操作日志都写回磁盘，仍然是一个非常耗时的过程。这时，我们就要继续关注另一个问题了。</p><h2 id="重写会不会阻塞主线程？"><a href="#重写会不会阻塞主线程？" class="headerlink" title="重写会不会阻塞主线程？"></a>重写会不会阻塞主线程？</h2><p>AOF重写不会阻塞Redis的主线程。Redis的AOF重写是作为一个后台进程（子进程）来执行的，不会影响主要的服务线程。</p><p>AOF重写过程中，Redis会创建一个子进程来遍历数据集，将写操作转换为命令序列，并生成新的AOF文件。主线程仍然可以继续处理客户端请求，响应读取操作等。</p><p>这种设计使得Redis能够在不中断服务的情况下执行AOF重写，从而减少对系统的影响。但需要注意的是，虽然AOF重写不会阻塞主线程，但它仍然是一个资源密集型操作，可能会占用较多的CPU和内存资源，因此在进行AOF重写时，需要考虑系统的资源情况，避免影响其他业务操作。</p><h1 id="RDB快照是如何实现的？"><a href="#RDB快照是如何实现的？" class="headerlink" title="RDB快照是如何实现的？"></a>RDB快照是如何实现的？</h1><p>RDB（Redis<br>DataBase）是Redis的一种持久化机制，用于将数据从内存中保存到磁盘上，以便在服务器重启时恢复数据。RDB通过创建一个快照（Snapshot）来保存数据库在某个时间点的数据状态，然后将这个快照保存到磁盘上的一个二进制文件中。</p><p><strong>RDB的实现过程：</strong></p><ol><li><p><strong>创建快照：</strong><br>当RDB持久化被触发时（可以手动触发或根据配置自动触发），Redis会生成一个数据集的内存快照。这个快照包含了数据库在某个时间点的所有键值对以及相关的数据结构信息。</p></li><li><p><strong>快照数据序列化：</strong><br>在创建快照后，Redis会将快照中的数据进行序列化，将键、值、过期时间等信息按照一定的格式编码成二进制数据。</p></li><li><p><strong>保存到文件：</strong><br>将序列化后的数据保存到磁盘上的RDB文件中。RDB文件的扩展名通常为<code>.rdb</code>。</p></li><li><p><strong>持久化完成：</strong><br>一旦RDB文件保存完成，持久化过程结束。这个RDB文件包含了数据库在快照时间点的完整数据状态。</p></li></ol><p><strong>RDB的优缺点：</strong></p><p><strong>优点：</strong></p><ul><li><strong>紧凑的数据格式：</strong> RDB文件是一个二进制文件，采用了紧凑的编码格式，因此在磁盘上占用的空间相对较小。</li><li><strong>快速恢复：</strong> 在恢复数据时，通过加载RDB文件，可以快速地将数据恢复到指定时间点的状态。</li><li><strong>适用于备份和恢复：</strong> RDB文件适用于进行数据备份、迁移和灾难恢复，可以方便地复制到其他服务器上。</li></ul><p><strong>缺点：</strong></p><ul><li><strong>数据丢失：</strong> 由于RDB是周期性的全量持久化，可能会导致某个时间点之后的数据丢失。</li><li><strong>IO开销：</strong> RDB持久化时，需要将整个数据集写入磁盘，可能在大数据集上引起IO开销，影响性能。</li><li><strong>耗时：</strong> 在生成RDB快照的过程中，如果数据集很大，可能会占用较多的CPU资源，导致短时间内的性能下降。</li></ul><p>总的来说，RDB持久化适用于需要紧凑的备份和数据迁移，以及在服务器重启时需要快速恢复数据的场景。但需要注意的是，RDB的全量持久化可能会导致某些数据的丢失，因此在选择持久化方式时需要权衡数据的重要性和性能需求。</p><h2 id="给哪些内存数据做快照？"><a href="#给哪些内存数据做快照？" class="headerlink" title="给哪些内存数据做快照？"></a>给哪些内存数据做快照？</h2><p>在RDB持久化中，Redis会对内存中的各种数据进行快照，将数据保存到RDB文件中。这些内存数据包括：</p><ol><li><p><strong>字符串类型数据：</strong> 包括使用<code>SET</code>命令设置的字符串键值对。</p></li><li><p><strong>哈希表（Hash）：</strong> 包括使用<code>HSET</code>、<code>HMSET</code>等命令设置的哈希键值对。</p></li><li><p><strong>列表（List）：</strong> 包括使用<code>LPUSH</code>、<code>RPUSH</code>等命令添加的列表元素。</p></li><li><p><strong>集合（Set）：</strong> 包括使用<code>SADD</code>等命令添加的集合元素。</p></li><li><p><strong>有序集合（Sorted Set）：</strong> 包括使用<code>ZADD</code>等命令添加的有序集合元素。</p></li><li><p><strong>Bitmaps、HyperLogLogs、Streams：</strong> 包括这些特殊数据类型的内容。</p></li><li><p><strong>过期时间：</strong> 快照会记录每个键的过期时间，以便在恢复数据时进行过期判断。</p></li><li><p><strong>数据库配置：</strong> 包括数据库的配置信息，如数据库编号、键空间的选项等。</p></li><li><p><strong>服务器信息：</strong> 包括服务器的信息，如版本号、运行模式等。</p></li><li><p><strong>客户端连接信息：</strong> 包括客户端连接的信息。</p></li></ol><p>需要注意的是，RDB持久化是一种全量持久化机制，它会在某个时间点生成一个数据库的快照，将所有内存中的数据保存到RDB文件中。这种方式有一些优点，如紧凑的数据格式和快速恢复，但也有缺点，如可能造成数据丢失和IO开销。在选择使用RDB持久化时，需要权衡这些优缺点，根据业务需求来确定是否适合使用。</p><h2 id="哪些命令能生成RDB文件？"><a href="#哪些命令能生成RDB文件？" class="headerlink" title="哪些命令能生成RDB文件？"></a>哪些命令能生成RDB文件？</h2><p>RDB文件是通过执行持久化操作来生成的，而不是通过特定的命令来生成。在Redis中，可以手动触发RDB持久化操作，也可以根据配置自动触发。以下是生成RDB文件的方式：</p><ol><li><p><strong>手动触发：</strong><br>使用<code>SAVE</code>命令可以手动触发RDB持久化操作，该命令会<strong>阻塞服务器</strong>的主线程，直到RDB文件生成完成为止。这个命令适合用于测试或紧急情况下的数据备份。</p><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SAVE</span><br></pre></td></tr></table></figure></li><li><p><strong>后台触发：</strong><br>使用<code>BGSAVE</code>命令可以在后台触发RDB持久化操作，这个命令会派生一个子进程来执行RDB持久化，<strong>不会阻塞服务器</strong><br>的主线程。这是比较常用的生成RDB文件的方式。</p><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BGSAVE</span><br></pre></td></tr></table></figure></li><li><p><strong>自动触发：</strong><br>可以通过配置文件中的参数来自动触发RDB持久化操作。在配置文件（redis.conf）中可以设置<code>save</code>参数，用于指定在何时执行RDB持久化操作，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">save 900 1</span><br><span class="line">save 300 10</span><br><span class="line">save 60 10000</span><br></pre></td></tr></table></figure><p>这表示当900秒内至少发生1次写操作、300秒内至少发生10次写操作、60秒内至少发生10000次写操作时，自动触发BGSAVE命令。</p></li></ol><p>无论是手动触发还是后台触发，RDB持久化操作都会生成一个RDB文件，其中包含了内存中的数据快照。需要注意的是，RDB持久化是一个资源密集型操作，可能会影响服务器的性能，特别是在数据集较大的情况下。因此，在选择何时执行RDB持久化时，需要根据业务需求和性能要求做出权衡。</p><h2 id="快照时数据能修改吗？"><a href="#快照时数据能修改吗？" class="headerlink" title="快照时数据能修改吗？"></a>快照时数据能修改吗？</h2><p>这里大家可能会想到<code>bgsave</code>命令避免阻塞。这里大家可能会有误区，<strong>避免阻塞和正常处理读写请求并不是一回事</strong><br>。此时，主线程确实没有阻塞，可以正常接收请求，但是，为了保证快照完整性，它只能处理读操作，因为不能修改正在执行快照的数据。<br>那么Redis是如何解决这个问题的呢？<br>实际上，Redis 6.0 版本引入了<strong>写时复制（Copy-On-Write，COW）技术</strong>来保证在执行快照（RDB）时数据是可修改的。这个特性被称为 “<br>RDB快照时复制”（RDB Snapshotting）。</p><p>在 Redis 6.0 中，当进行 RDB 快照持久化时，Redis 会执行以下步骤来确保数据可修改：</p><ol><li>Redis 创建一个子进程。</li><li>在子进程中，将内存中的数据进行写时复制，创建出一个副本，而不会影响主进程的数据。</li><li>子进程将副本数据写入 RDB 文件，这个过程是在子进程的上下文中执行的，不会影响主进程。</li></ol><blockquote></blockquote><p>这个操作在实际执行过程中，是子进程复制了主线程的页表，所以通过页表映射，能读到主线程的原始数据，而当有新数据写入或数据修改时，主线程会把新数据或修改后的数据写到一个新的物理内存地址上，并修改主线程自己的页表映射。所以，子进程读到的类似于原始数据的一个副本，而主线程也可以正常进行修改。</p><p>因此，RDB 快照时，主进程仍然可以继续处理写操作，而子进程则负责将数据写入 RDB 文件。这样，写时复制技术确保了在生成 RDB<br>快照期间，数据是可修改的，同时保持了数据的一致性。</p><p>需要注意的是，这种特性仅适用于 Redis 6.0 及以上版本，并且在 RDB 快照时起作用。在生成 AOF 文件时，Redis 仍然会阻塞主线程以确保数据一致性。<br><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308131501799.png" title="写时复制机制保证快照期间数据可修改" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308131501799.png" alt="写时复制机制保证快照期间数据可修改"></a></p><h2 id="可以每秒做一次快照吗"><a href="#可以每秒做一次快照吗" class="headerlink" title="可以每秒做一次快照吗"></a>可以每秒做一次快照吗</h2><p>虽然理论上可以每秒钟做一次快照（RDB持久化），但实际上这样做可能会对Redis服务器的性能产生显著的影响，特别是在负载较重的情况下。</p><p>每秒钟生成快照会引起以下一些问题：</p><ol><li><p><strong>性能开销：</strong> 快照操作需要遍历内存中的所有数据，并将数据序列化到磁盘中。频繁的快照操作会占用大量的CPU和内存资源，影响服务器的性能，导致响应时间变长。</p></li><li><p><strong>IO压力：</strong> 每秒钟生成的快照会导致频繁的磁盘写入，增加了磁盘IO的负担，可能影响其他应用程序和操作系统的正常运行。</p></li><li><p><strong>数据丢失：</strong> 每秒钟生成的快照可能会导致数据丢失，因为生成快照的操作需要一定的时间，如果在两次快照之间发生了写操作，那么这段时间内的数据会丢失。</p></li></ol><p>通常情况下，每秒钟生成快照并<strong>不是一个推荐的做法</strong><br>。更合理的做法是根据业务需求和系统资源来选择合适的持久化频率。如果数据的一致性要求很高，可以考虑使用AOF持久化机制，它可以在不同程度上提供数据的保护和持久性，而且可以通过设置不同的写回策略来平衡性能和数据保护。如果数据的一致性要求相对较低，可以选择适当的RDB持久化频率，避免频繁的IO和性能开销。</p><h1 id="为什么推荐AOF和RDB混合使用"><a href="#为什么推荐AOF和RDB混合使用" class="headerlink" title="为什么推荐AOF和RDB混合使用"></a>为什么推荐AOF和RDB混合使用</h1><p>推荐在Redis中同时使用AOF（Append-Only File）持久化和RDB（Redis DataBase）持久化的原因是，这两种持久化机制可以相互补充，提供更好的数据保护、恢复能力和性能优化。</p><p>以下是推荐同时使用AOF和快照的主要原因：</p><ol><li><p><strong>数据恢复能力：</strong><br>AOF持久化记录了所有写操作的日志，这使得在发生意外情况时（如服务器崩溃）可以精确地恢复数据到崩溃前的状态。而RDB持久化通过全量快照提供了快速的数据恢复能力。结合使用两者，可以在AOF日志的基础上，通过加载最近的RDB快照来加速恢复。</p></li><li><p><strong>数据安全性：</strong> AOF持久化记录了每个写操作，可以确保每个写操作都被持久化到日志中。RDB持久化则提供了一个点对点的数据备份。同时使用这两种持久化机制可以提供更高的数据安全性。</p></li><li><p><strong>性能优化：</strong> AOF持久化对于读操作的性能影响较小，因为读操作不涉及AOF文件的写入。而RDB持久化对于快速的全量数据恢复很有帮助。通过结合使用AOF和RDB，可以在一定程度上平衡数据保护和性能要求。</p></li><li><p><strong>多层次的备份：</strong> 使用AOF和RDB，您可以获得多层次的数据备份。AOF日志可以提供精确的操作日志，RDB快照可以提供全量备份。这样，即使其中一个持久化机制出现问题，另一个仍然可以提供数据保护。</p></li></ol><p>综上所述，使用AOF和RDB两种持久化机制的组合，能够提供更全面的数据保护、灾难恢复和性能优化。在配置Redis持久化时，根据业务需求和性能要求，结合使用这两种机制，可以实现更好的数据管理和保护。</p><h2 id="如何配置呢"><a href="#如何配置呢" class="headerlink" title="如何配置呢"></a>如何配置呢</h2><p>在 Redis 中，同时使用 AOF 持久化和 RDB 持久化的配置是很常见的，这样可以兼顾数据的持久性和恢复性能。以下是一个将 AOF 持久化和<br>RDB 持久化混合使用的示例配置：</p><ol><li><p>打开 Redis 配置文件，通常是 <code>redis.conf</code>。</p></li><li><p>启用 AOF 持久化：<br>找到以下行并确保其被设置为以下值，以启用 AOF 持久化：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">appendonly yes</span><br></pre></td></tr></table></figure></li><li><p>设置 AOF 重写策略（可选）：<br>可以设置 AOF 重写的触发条件，以便控制 AOF 文件的大小和写入频率。例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">auto-aof-rewrite-percentage 100</span><br><span class="line">auto-aof-rewrite-min-size 64mb</span><br></pre></td></tr></table></figure></li><li><p>启用 RDB 持久化：<br>默认情况下，Redis 会使用 RDB 持久化，但要确保以下行没有被注释掉：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">save 900 1</span><br><span class="line">save 300 10</span><br><span class="line">save 60 10000</span><br></pre></td></tr></table></figure></li><li><p>设置 RDB 快照文件名（可选）：<br>如果希望为 RDB 快照指定特定的文件名，可以添加以下行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dbfilename dump.rdb</span><br></pre></td></tr></table></figure><p>这会将 RDB 快照文件命名为 <code>dump.rdb</code>。</p></li><li><p>设置 RDB 快照保存路径（可选）：<br>如果希望将 RDB 快照保存到特定的路径，可以添加以下行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dir /path/to/rdb/directory</span><br></pre></td></tr></table></figure><p>这会将 RDB 快照保存到指定的目录。</p></li><li><p>重启 Redis 服务器：<br>在对配置文件进行更改后，需要重新启动 Redis 服务器，以使配置生效。</p></li></ol><p>使用以上配置，Redis 将同时使用 AOF 持久化和 RDB 持久化，提供了多层次的数据保护和恢复机制。AOF 持久化记录写操作，提供操作日志用于数据恢复。RDB<br>持久化提供了全量备份，用于快速恢复整个数据集。混合使用这两种机制可以充分利用它们各自的优点，提供更全面的数据持久性和保护。</p><h1 id="关于AOF和RDB的选择，三点建议"><a href="#关于AOF和RDB的选择，三点建议" class="headerlink" title="关于AOF和RDB的选择，三点建议"></a>关于AOF和RDB的选择，三点建议</h1><ul><li>数据不能丢失时，内存快照和 AOF 的混合使用是一个很好的选择；</li><li>如果允许分钟级别的数据丢失，可以只使用 RDB；</li><li>如果只用 AOF，优先使用 everysec 的配置选项，因为它在可靠性和性能之间取了一个平衡。��能之间取了一个平衡。</li></ul><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 深入理解Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> RDB </tag>
            
            <tag> AOF </tag>
            
            <tag> 快照 </tag>
            
            <tag> 写时复制 </tag>
            
            <tag> 持久化策略 </tag>
            
            <tag> AOF重写 </tag>
            
            <tag> 数据恢复 </tag>
            
            <tag> 数据安全性 </tag>
            
            <tag> AOF和RDB混合使用 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis系列（一）：深入了解Redis数据类型和底层数据结构</title>
      <link href="/84392d3f.html"/>
      <url>/84392d3f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>Redis有以下几种常用的数据类型：</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/image.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/image.png"></a></p><h2 id="redis数据是如何组织的"><a href="#redis数据是如何组织的" class="headerlink" title="redis数据是如何组织的"></a>redis数据是如何组织的</h2><p>为了实现从键到值的快速访问，Redis 使用了一个哈希表来保存所有键值对。</p><p>Redis全局哈希表（Global Hash Table）是指在Redis数据库内部用于存储所有键值对的主要数据结构。它的实现原理涉及到哈希表、字典、渐进式rehash等技术，以下是Redis全局哈希表的实现原理和查询流程：</p><p><strong>实现原理：</strong></p><ol><li><p><strong>哈希表（Hash Table）：</strong></p><p>Redis的全局哈希表是由多个哈希表构成的，每个哈希表称为一个数据库（DB）。数据库的数量可以通过配置进行设置，默认是16个。每个数据库都是一个独立的哈希表，负责存储键值对。</p></li><li><p><strong>字典（Dictionary）：</strong></p><p>每个数据库都使用字典（Dictionary）来实现键值对的存储。字典是一种高效的键值对存储结构，它使用哈希表来支持快速的查找、插入和删除操作。</p></li><li><p><strong>渐进式rehash：</strong></p><p>当数据库的键值对数量较多时，为了保持查询性能，Redis会在不中断服务的情况下，逐步将旧的数据库哈希表中的数据迁移到新的数据库哈希表中，这个过程叫做渐进式rehash。这样，Redis能够平滑地将数据从旧的哈希表迁移到新的哈希表，避免大规模的数据迁移对性能造成影响。</p></li></ol><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121104358.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121104358.png"></a></p><p><strong>查询流程：</strong></p><ol><li>客户端发送查询命令，指定要查询的键。</li><li>Redis会根据键通过哈希函数计算哈希槽（hash slot）的索引，确定键在哪个数据库中。</li><li>Redis根据数据库的哈希表，找到对应的字典。</li><li>在字典中，Redis使用键进行查找，通过哈希表查找对应的值。如果找到了值，则将其返回给客户端。</li><li>如果键在当前数据库没有找到对应的值，Redis可以根据需要进行跳转到其他数据库（例如在Redis集群中）。</li></ol><p>整个查询流程涉及到多次哈希计算和哈希表查找，这使得Redis能够在平均时间复杂度为O(1)<br>的情况下，高效地进行键值对的查询操作。由于Redis的全局哈希表是一个核心组件，其优化和设计对于保障Redis的性能和可用性非常重要。</p><p>如果你只是了解了哈希表的 O(1) 复杂度和快速查找特性，那么，当你往 Redis<br>中写入大量数据后，就可能发现操作有时候会突然变慢了。这其实是因为你忽略了一个潜在的风险点，那就是哈希表的冲突问题和 rehash<br>可能带来的操作阻塞。</p><p><strong>为什么哈希表操作变慢了？</strong></p><p>Redis 解决哈希冲突的方式，就是链式哈希。链式哈希也很容易理解，就是指同一个哈希桶中的多个元素用一个链表来保存，它们之间依次用指针连接。</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121106905.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121106905.png"></a></p><p>哈希冲突是指在使用哈希函数将键映射到哈希表中的索引时，两个或多个键被映射到相同的索引位置。在Redis中，哈希表是通过哈希函数将键映射到一个固定数量的桶（bucket）中的。</p><p>Redis使用MurmurHash2算法作为默认的哈希函数，它是一种快速且低碰撞率的哈希函数。然而，即使使用了高质量的哈希函数，仍然存在哈希冲突的可能性。</p><p>当发生哈希冲突时，Redis使用链地址法（chaining）来解决。具体来说，每个桶中存储的是一个链表，链表中的每个节点都包含了键值对。当多个键被映射到同一个桶时，它们会被添加到链表中，形成一个键值对的集合。</p><p>当执行哈希表的读取操作时，Redis会遍历链表，直到找到匹配的键值对或者链表结束。这个过程的时间复杂度取决于链表的长度，因此，如果哈希冲突较多，链表会变得很长，导致读取操作的性能下降。</p><p><strong>为了减少哈希冲突的发生，可以采取以下措施：</strong></p><ol><li>使用更好的哈希函数：选择一个更具随机性和低碰撞率的哈希函数，可以减少哈希冲突的概率。</li><li>扩大哈希表的大小：增加哈希表的桶数量，可以分散键的分布，减少哈希冲突的可能性。</li><li>使用一致性哈希算法：一致性哈希算法可以将键均匀地映射到多个节点上，减少单个节点上的哈希冲突。</li></ol><p>哈希冲突是不可避免的，但可以通过选择合适的哈希函数和调整哈希表的大小来减少其发生的概率，并且Redis的链地址法能够有效地解决哈希冲突带来的问题。</p><p>但是，这里依然存在一个问题，哈希冲突链上的元素只能通过指针逐一查找再操作。如果哈希表里写入的数据越来越多，哈希冲突可能也会越来越多，这就会导致某些哈希冲突链过长，进而导致这个链上的元素查找耗时长，效率降低。对于追求“快”的<br>Redis 来说，这是不太能接受的。</p><p>所以，Redis 会对哈希表做 rehash 操作。rehash 也就是增加现有的哈希桶数量，让逐渐增多的 entry<br>元素能在更多的桶之间分散保存，减少单个桶中的元素数量，从而减少单个桶中的冲突。</p><p><strong>那具体怎么做rehash呢？</strong></p><p>Redis的rehash是指在哈希表扩容或缩小时，重新计算并重新分配所有键值对的过程。rehash的目的是为了保持哈希表的负载因子在一个合理的范围内，以提高哈希表的性能。</p><p>在Redis中，rehash是一个渐进式的过程，它不会一次性地将所有键值对重新分配到新的哈希表中，而是分多次进行，每次处理一小部分键值对。这种渐进式的rehash过程可以保证在rehash期间，Redis仍然可以正常处理读取和写入操作，不会阻塞客户端请求。</p><p><strong>具体的rehash过程</strong>如下：</p><ol><li>Redis会创建一个新的空哈希表，大小是当前哈希表的两倍（或更小，如果是缩小操作）。</li><li>Redis会将当前哈希表的rehashidx属性设置为0，表示rehash的起始位置。</li><li>在每次执行读取或写入操作时，Redis会同时对当前哈希表和新哈希表进行操作。</li><li>对于读取操作，Redis首先在当前哈希表中查找键值对，如果找不到，则继续在新哈希表中查找。</li><li>对于写入操作，Redis会将新的键值对添加到新哈希表中，同时保留当前哈希表中的键值对。</li><li>在每次执行完一定数量的操作后，Redis会逐步将当前哈希表中的键值对迁移到新哈希表中，直到迁移完成。</li><li>最后，Redis会将新哈希表设置为当前哈希表，并释放旧的哈希表的内存空间。</li></ol><p>通过<strong>渐进式的rehash过程</strong><br>，Redis可以平滑地将键值对从旧哈希表迁移到新哈希表，避免了一次性的大规模迁移带来的性能问题。同时，由于读取操作可以同时在两个哈希表中进行，所以即使在rehash过程中，Redis仍然可以提供正常的读取服务。</p><p>需要注意的是，rehash过程是一个相对耗时的操作，特别是在哈希表中存储了大量键值对的情况下。因此，在进行rehash时，应该避免对Redis进行大量的写入操作，以免影响性能。</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121115732.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121115732.png"></a></p><h2 id="底层实现复杂度总结"><a href="#底层实现复杂度总结" class="headerlink" title="底层实现复杂度总结"></a>底层实现复杂度总结</h2><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121119851.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121119851.png"></a></p><h2 id="一、字符串（String）"><a href="#一、字符串（String）" class="headerlink" title="一、字符串（String）"></a>一、字符串（String）</h2><h3 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h3><p>字符串（String）类型在Redis中是最常用的数据类型之一，适用于以下场景：</p><ol><li>缓存：字符串类型可以用于缓存数据，例如缓存数据库查询结果、计算结果等。由于Redis的高性能和快速读写能力，使用字符串类型作为缓存可以大大提高系统的响应速度。</li><li>计数器：字符串类型可以用于实现计数器功能，例如统计网站的访问次数、用户的点赞数等。通过使用字符串类型的自增命令，可以方便地对计数器进行增加或减少操作。</li><li>分布式锁：字符串类型可以用于实现分布式锁，保证在分布式环境下的数据一致性和并发控制。通过设置一个唯一的字符串作为锁的值，并利用Redis的原子性操作，可以实现简单而高效的分布式锁机制。</li><li>会话管理：字符串类型可以用于存储用户的会话信息，例如用户登录状态、购物车内容等。通过将会话信息存储在字符串类型中，可以方便地进行读写操作，并且可以设置过期时间来自动清理过期的会话数据。</li><li>消息队列：字符串类型可以用于实现简单的消息队列，例如将消息内容作为字符串存储在Redis中，然后使用列表类型的命令进行消息的发布和订阅。</li><li>分布式缓存：字符串类型可以用于实现分布式缓存，例如将经过序列化的对象存储在字符串类型中，然后通过缓存命中来提高系统的性能和扩展性。</li></ol><h3 id="底层实现是什么"><a href="#底层实现是什么" class="headerlink" title="底层实现是什么"></a>底层实现是什么</h3><p>当我们在Redis中存储字符串时，Redis使用了一种称为简单动态字符串（Simple Dynamic String，SDS）的数据结构来表示字符串。</p><p>SDS是Redis自己实现的一种字符串表示方式，相比于传统的C语言字符串，SDS具有许多优势和特点。</p><ol><li>动态调整大小：SDS可以根据字符串的长度动态调整内存大小。这意味着当我们向SDS中添加更多的字符时，SDS会自动分配更多的内存空间来容纳新的字符，而不需要手动管理内存分配和释放。这样可以避免频繁的内存重新分配操作，提高了性能。</li><li>O(1)时间复杂度的长度获取：SDS在内部维护了字符串的长度信息。因此，无论字符串的长度是多少，我们都可以在常数时间内获取字符串的长度，而不需要遍历整个字符串。这使得获取字符串长度的操作非常高效。</li><li>二进制安全：SDS可以存储任意二进制数据，而不仅仅局限于文本字符串。这意味着我们可以在SDS中存储包含空字符（’\0’<br>）在内的任意二进制数据，而不会导致字符串的截断或错误解析。</li><li></li></ol><p>缓冲区溢出保护：SDS在内部维护了字符串的长度信息，这使得Redis能够有效地防止缓冲区溢出的问题。当我们向SDS中添加新的字符时，Redis会检查是否有足够的空间来容纳新的字符，如果没有足够的空间，Redis会自动分配更多的内存空间，以避免溢出。</p><ol start="5"><li></li></ol><p>兼容C字符串：SDS可以通过转换函数与C字符串进行互相转换。这意味着我们可以在Redis中使用SDS来存储字符串，然后将其转换为C字符串，以便与现有的C代码进行交互。反之，我们也可以将C字符串转换为SDS，以便在Redis中使用更多的字符串操作功能。</p><p>SDS的结构如下：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sdshdr</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> len;        <span class="comment">// 字符串的长度</span></span><br><span class="line">    <span class="type">int</span> <span class="built_in">free</span>;       <span class="comment">// 未使用的字节长度</span></span><br><span class="line">    <span class="type">char</span> buf[];     <span class="comment">// 字符串的实际内容</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>其中，<code>len</code>表示字符串的长度，<code>free</code>表示未使用的字节长度，<code>buf</code>是一个柔性数组，用于存储字符串的实际内容。</p><p>通过使用简单动态字符串作为底层数据结构，Redis能够高效地处理字符串操作，并提供了丰富的字符串操作命令和功能。这使得Redis成为一个强大的键值存储系统，可以用于各种不同的应用场景。作为新手，了解SDS的特点和结构将有助于你更好地理解和使用Redis中的字符串数据类型。</p><h3 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h3><p>要在Redis中使用字符串类型，你可以使用以下命令：</p><ol><li>设置字符串值：使用<code>SET</code>命令可以设置一个字符串键的值。例如，<code>SET key value</code>将键<code>key</code>的值设置为<code>value</code>。</li><li>获取字符串值：使用<code>GET</code>命令可以获取一个字符串键的值。例如，<code>GET key</code>将返回键<code>key</code>的值。</li><li>自增&#x2F;自减操作：使用<code>INCR</code>命令可以将一个字符串键的值自增1，使用<code>DECR</code>命令可以将一个字符串键的值自减1。例如，<code>INCR key</code><br>将键<code>key</code>的值增加1。</li><li>设置过期时间：使用<code>EXPIRE</code>命令可以为一个字符串键设置过期时间，单位为秒。例如，<code>EXPIRE key seconds</code>将键<code>key</code><br>的过期时间设置为<code>seconds</code>秒。</li><li>批量操作：使用<code>MSET</code>命令可以同时设置多个字符串键的值，使用<code>MGET</code>命令可以同时获取多个字符串键的值。</li><li>字符串拼接：使用<code>APPEND</code>命令可以将指定字符串追加到一个字符串键的值的末尾。</li><li>其他操作：Redis还提供了许多其他的字符串操作命令，如获取子字符串、获取字符串长度、设置指定位置的字符等。</li></ol><p>以下是一些示例命令的用法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SET name <span class="string">&quot;John&quot;</span>          // 设置键为name的值为<span class="string">&quot;John&quot;</span></span><br><span class="line">GET name                 // 获取键为name的值</span><br><span class="line">INCR counter             // 将键为counter的值自增1</span><br><span class="line">EXPIRE key 60            // 设置键为key的过期时间为60秒</span><br><span class="line">MSET key1 value1 key2 value2   // 同时设置多个键值对</span><br><span class="line">MGET key1 key2           // 同时获取多个键的值</span><br><span class="line">APPEND greeting <span class="string">&quot;, welcome!&quot;</span>   // 将<span class="string">&quot;, welcome!&quot;</span>追加到键greeting的值的末尾</span><br></pre></td></tr></table></figure><p>通过使用这些命令，你可以在Redis中灵活地操作字符串类型，实现各种功能和应用场景。记得在使用字符串类型时，根据具体需求选择合适的命令和参数，并注意处理异常情况和错误返回值。</p><h3 id="需要注意的地方"><a href="#需要注意的地方" class="headerlink" title="需要注意的地方"></a>需要注意的地方</h3><p>在使用Redis的字符串类型时，有一些需要注意的地方：</p><ol><li>字符串长度限制：Redis的字符串类型最大可以存储512MB的数据。如果需要存储更大的数据，可以考虑使用Redis的其他数据类型或将数据分片存储。</li><li>数据类型转换：当使用字符串类型时，需要注意数据类型的转换。Redis的字符串类型是二进制安全的，可以存储任意二进制数据，但在使用时需要根据具体情况进行数据的序列化和反序列化。</li><li>过期时间设置：通过使用<code>EXPIRE</code>命令可以为字符串键设置过期时间，但需要注意过期时间的合理设置。过期时间过短可能导致频繁的数据失效和重新加载，过期时间过长可能导致数据过期不及时。</li><li>内存使用：由于Redis是内存数据库，使用字符串类型时需要注意内存的使用情况。特别是在存储大量字符串数据时，需要合理控制内存的分配和释放，避免出现内存溢出的问题。</li><li>并发操作：在多线程或多进程环境下使用字符串类型时，需要注意并发操作的问题。Redis提供了原子性操作命令，如自增、自减等，可以保证操作的原子性，但需要注意并发操作可能导致的数据竞争和一致性问题。</li><li>键的命名规范：为了避免键的冲突和混淆，建议在命名字符串键时使用有意义的、具有一定规范的命名方式，以便更好地管理和维护数据。</li><li>数据备份和持久化：Redis提供了数据持久化的机制，可以将数据保存到磁盘上，以防止数据丢失。在使用字符串类型时，可以考虑定期进行数据备份和持久化操作，以保证数据的安全性和可恢复性。</li></ol><p>总之，在使用Redis的字符串类型时，需要根据具体的应用场景和需求，合理选择命令和参数，并注意处理异常情况和错误返回值。同时，合理规划和管理数据，注意内存使用和并发操作，可以更好地利用Redis的字符串类型，提高系统的性能和可靠性。</p><h2 id="二、列表（List）"><a href="#二、列表（List）" class="headerlink" title="二、列表（List）"></a>二、列表（List）</h2><h3 id="适用场景-1"><a href="#适用场景-1" class="headerlink" title="适用场景"></a>适用场景</h3><p>列表（List）类型在Redis中是一种非常常用的数据类型，适用于以下场景：</p><ol><li>消息队列：列表类型可以用于实现简单的消息队列。生产者可以使用<code>LPUSH</code>命令将消息添加到列表的头部，消费者可以使用<code>RPOP</code><br>命令从列表的尾部获取消息。这种方式可以实现先进先出（FIFO）的消息处理。</li><li>实时排行榜：列表类型可以用于实现实时排行榜。例如，可以使用<code>LPUSH</code>命令将用户的得分添加到列表中，然后使用<code>LPOP</code>命令获取排行榜的前几名。</li><li>任务队列：列表类型可以用于实现任务队列。生产者可以使用<code>LPUSH</code>命令将任务添加到列表的尾部，消费者可以使用<code>RPOP</code><br>命令从列表的头部获取任务。这种方式可以实现任务的分发和处理。</li><li>消息发布与订阅：列表类型可以用于实现简单的消息发布与订阅。生产者可以使用<code>LPUSH</code><br>命令将消息添加到列表的头部，订阅者可以使用<code>BLPOP</code>命令阻塞地从列表中获取消息。</li><li>历史记录：列表类型可以用于存储历史记录。例如，可以使用<code>LPUSH</code>命令将用户的浏览记录添加到列表中，然后使用<code>LRANGE</code><br>命令获取最近的浏览记录。</li></ol><h3 id="底层实现是什么-1"><a href="#底层实现是什么-1" class="headerlink" title="底层实现是什么"></a>底层实现是什么</h3><p>当涉及到Redis中列表类型的底层实现时，有两种可能的数据结构：压缩列表（Ziplist）和双向链表（Doubly Linked List）。</p><ol><li><p>压缩列表（Ziplist）：</p><p>压缩列表是一种紧凑的数据结构，用于存储较小的列表。它将多个列表元素紧密地存储在一起，以减少内存的使用。压缩列表的结构如下：</p></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;zlbytes&gt;&lt;zltail&gt;&lt;zllen&gt;&lt;entry&gt;&lt;entry&gt;...&lt;entry&gt;&lt;zlend&gt;</span></span><br></pre></td></tr></table></figure><pre><code>- `&lt;zlbytes&gt;`：表示压缩列表的总字节数。- `&lt;zltail&gt;`：指向压缩列表的最后一个节点。- `&lt;zllen&gt;`：表示压缩列表中的元素数量。- `&lt;entry&gt;`：表示每个列表元素的存储形式，包括元素长度和元素内容。- `&lt;zlend&gt;`：表示压缩列表的结束标志。压缩列表的优势在于它可以在一定程度上减少内存的使用，并且对于较小的列表，它的性能比双向链表更好。但是，当列表的长度或元素的大小超过一定限制时，Redis会自动将压缩列表转换为双向链表。</code></pre><ol start="2"><li><p>双向链表（Doubly Linked List）：</p><p>双向链表是一种常见的数据结构，用于存储列表元素。每个节点都包含一个指向前一个节点和后一个节点的指针。双向链表的结构如下：</p></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;prev&gt;&lt;entry&gt;&lt;next&gt;</span></span><br></pre></td></tr></table></figure><pre><code>- `&lt;prev&gt;`：指向前一个节点的指针。- `&lt;entry&gt;`：表示节点中存储的列表元素。- `&lt;next&gt;`：指向后一个节点的指针。双向链表的优势在于它可以高效地进行插入、删除和遍历操作。通过指针，可以快速地在链表中移动，并且在任意位置插入或删除节点的开销较小。</code></pre><p>Redis在选择使用压缩列表还是双向链表作为列表的底层实现时，会根据以下两个因素进行判断：</p><ul><li>列表的长度：当列表的长度超过一定限制（默认为512个元素）时，Redis会将压缩列表转换为双向链表，以便更好地处理大型列表。</li><li>列表元素的大小：当列表中的元素大小超过一定限制（默认为64字节）时，Redis会将压缩列表转换为双向链表，以便更好地处理大型元素。</li></ul><p>转换时机是在执行插入或删除操作时进行检查的。如果列表满足转换条件，Redis会自动将压缩列表转换为双向链表，并将数据从压缩列表复制到新的双向链表中。这个转换过程可能会导致一些额外的内存开销，但它使得Redis能够更好地处理大型列表和大型元素。</p><p>通过使用压缩列表和双向链表作为底层实现，Redis的列表类型可以在不同的场景下提供高效的性能和灵活性。</p><h3 id="如何使用-1"><a href="#如何使用-1" class="headerlink" title="如何使用"></a>如何使用</h3><p>在Redis中，可以使用列表（List）类型进行以下操作：</p><ol><li>添加元素：<ul><li>使用<code>LPUSH key value</code>命令将一个或多个元素添加到列表的头部。</li><li>使用<code>RPUSH key value</code>命令将一个或多个元素添加到列表的尾部。</li></ul></li><li>弹出元素：<ul><li>使用<code>LPOP key</code>命令从列表的头部弹出并返回一个元素。</li><li>使用<code>RPOP key</code>命令从列表的尾部弹出并返回一个元素。</li></ul></li><li>获取元素：<ul><li>使用<code>LINDEX key index</code>命令获取列表中指定位置的元素。索引从0开始，负数表示从尾部开始计数。</li><li>使用<code>LRANGE key start stop</code>命令获取列表中指定范围的元素。范围包括起始位置和结束位置，负数表示从尾部开始计数。</li></ul></li><li>获取列表长度：<ul><li>使用<code>LLEN key</code>命令获取列表的长度。</li></ul></li><li>在指定元素前或后插入元素：<ul><li>使用<code>LINSERT key BEFORE|AFTER pivot value</code>命令在列表中指定元素的前或后插入一个元素。</li></ul></li><li>移除指定数量的元素：<ul><li>使用<code>LREM key count value</code>命令从列表中移除指定数量的匹配元素。</li></ul></li><li>获取并设置指定位置的元素：<ul><li>使用<code>LSET key index value</code>命令将列表中指定位置的元素设置为新的值，并返回旧的值。</li></ul></li><li>获取并移动元素：<ul><li>使用<code>RPOPLPUSH source destination</code>命令从一个列表的尾部弹出一个元素，并将它添加到另一个列表的头部。</li></ul></li><li>阻塞弹出元素：<ul><li>使用<code>BLPOP key1 key2 ... timeout</code>命令阻塞地从多个列表中弹出元素，直到有元素可弹出或超时。</li></ul></li></ol><p>这些是列表类型的一些常用操作，可以根据具体的需求选择适合的命令来操作列表。列表类型在Redis中非常灵活和多用途，适用于各种场景，包括消息队列、排行榜、任务队列、消息发布与订阅、历史记录等。</p><h3 id="需要注意的地方-1"><a href="#需要注意的地方-1" class="headerlink" title="需要注意的地方"></a>需要注意的地方</h3><p>在使用Redis中的列表数据类型时，有一些注意事项和最佳实践，特别是对于新手来说。以下是一些使用Redis列表时需要注意的地方：</p><ol><li><p><strong>插入顺序和重复：</strong></p><p>列表是有序的数据结构，插入的元素按照插入的顺序排列。允许插入重复的元素，因此列表可以作为一个简单的数据结构来实现队列或栈。</p></li><li><p><strong>左右插入操作：</strong></p><p>Redis提供了 <code>LPUSH</code> 和 <code>RPUSH</code> 命令来在列表的左侧和右侧插入元素。左侧插入类似于栈的操作，右侧插入类似于队列的操作。</p></li><li><p><strong>范围操作：</strong></p><p>使用 <code>LRANGE</code> 命令可以获取列表中的一定范围的元素。这对于分页显示、获取最近的数据等场景非常有用。</p></li><li><p><strong>修剪列表：</strong></p><p>使用 <code>LTRIM</code> 命令可以修剪列表，只保留指定范围的元素，其余的元素会被删除。</p></li><li><p><strong>列表长度：</strong></p><p>使用 <code>LLEN</code> 命令可以获取列表的长度。</p></li><li><p><strong>弹出元素：</strong></p><p>使用 <code>LPOP</code> 和 <code>RPOP</code> 命令可以从列表的左侧和右侧弹出一个元素。这可以用于实现队列和栈的行为。</p></li><li><p><strong>阻塞操作：</strong></p><p>Redis还提供了阻塞版本的弹出操作，例如 <code>BLPOP</code> 和 <code>BRPOP</code>，这些命令可以在列表为空时阻塞等待新元素的到来。</p></li><li><p><strong>遍历操作：</strong></p><p>Redis并没有直接提供像迭代器一样的遍历机制，因此如果需要遍历列表，需要自己实现。</p></li><li><p><strong>内存注意：</strong></p><p>列表虽然很方便，但随着元素的增加，内存占用也会增加。在插入大量元素时要注意内存消耗。</p></li><li><p><strong>不适合大型列表：</strong></p><p>Redis的列表是基于链表实现的，对于大型列表的随机访问效率较低，如果需要频繁的随机访问，请考虑其他数据结构。</p></li><li><p><strong>避免滥用：</strong></p><p>列表适用于有序插入和删除的场景，但不适合用作集合数据的存储。如果需要集合操作，可以考虑使用集合（Set）数据类型。</p></li></ol><p>总之，使用Redis列表时需要根据具体的业务需求和场景来选择。了解Redis列表的特点和限制，可以帮助你更好地规划和使用这一数据类型。</p><h2 id="三、集合（Set）"><a href="#三、集合（Set）" class="headerlink" title="三、集合（Set）"></a>三、集合（Set）</h2><h3 id="适用场景-2"><a href="#适用场景-2" class="headerlink" title="适用场景"></a>适用场景</h3><p>Redis的Set数据类型是一个无序的字符串集合，它可以存储多个不重复的元素。Set在Redis中有许多实际的使用场景，以下是一些常见的使用场景：</p><ol><li><p><strong>唯一性数据存储：</strong></p><p>最基本的使用场景就是用来存储不重复的数据。你可以使用Set来存储用户ID、IP地址、邮箱地址等，确保数据的唯一性。</p></li><li><p><strong>标签和标记系统：</strong></p><p>Set可以用于创建标签或标记系统。例如，你可以为文章、商品或其他实体创建一个包含相关标签的Set，以便后续快速检索。</p></li><li><p><strong>关注和粉丝系统：</strong></p><p>在社交媒体或用户关系管理中，Set可以用来实现关注和粉丝系统。每个用户可以有一个Set，其中包含他们关注的其他用户或粉丝。</p></li><li><p><strong>在线用户：</strong></p><p>Set可以用于跟踪在线用户。将用户ID添加到一个Set中，表示用户当前在线。通过检查Set中的成员，可以快速查找在线用户。</p></li><li><p><strong>投票系统：</strong></p><p>Set可以用于实现投票系统。每个投票项目可以表示为一个Set，用户投票时将其ID添加到相应的Set中，确保每个用户只能投一次。</p></li><li><p><strong>集合运算：</strong></p><p>Redis提供了多种Set运算，如交集、并集和差集。这些运算可以用于计算多个集合之间的共同元素、合并元素等。</p></li><li><p><strong>排行榜和排名：</strong></p><p>Set可以用于创建排行榜系统。例如，每个元素代表一个玩家，分数作为元素的权重。可以通过有序集合操作获取排名和排行。</p></li><li><p><strong>地理位置标记：</strong></p><p>Set可以用于存储地理位置数据，例如存储用户的经纬度坐标，然后利用Set运算来查找附近的位置。</p></li><li><p><strong>过滤重复事件：</strong></p><p>如果你需要记录一系列事件，并且要确保事件不重复记录，可以使用Set来存储已经发生的事件，防止重复记录。</p></li></ol><p>总的来说，Redis的Set数据类型非常适合需要存储不重复数据、进行集合运算以及需要高效查找元素的场景。无论是在社交网络、实时分析、排行榜、地理位置服务等领域，Set都有着广泛的应用。</p><h3 id="底层实现是什么-2"><a href="#底层实现是什么-2" class="headerlink" title="底层实现是什么"></a>底层实现是什么</h3><p>在Redis中，集合（Set）类型的底层实现有两种：哈希表（Hash Table）和跳跃表（Skip List）。</p><ol><li>哈希表（Hash<br>Table）：哈希表是一种使用哈希函数将元素映射到桶（bucket）的数据结构。在Redis中，集合的每个元素都被存储在哈希表的一个桶中。哈希表提供了快速的插入、删除和查找操作，平均情况下的时间复杂度为O(<br>1)。哈希表适用于存储大量元素的集合，并且对于查找操作的性能要求较高。</li><li>跳跃表（Skip<br>List）：跳跃表是一种有序的数据结构，它通过多层链表的方式来提供快速的查找操作。每个节点都包含一个指向下一层和右侧节点的指针。在Redis中，集合的元素按照从小到大的顺序存储在跳跃表中。跳跃表提供了快速的插入、删除和范围查找操作，平均情况下的时间复杂度为O(<br>log n)。跳跃表适用于有序集合的场景，或者对于范围查找操作的性能要求较高。</li></ol><p>在Redis中，当集合的元素数量较少时，底层实现会使用哈希表。当集合的元素数量增加到一定阈值时，Redis会自动将哈希表转换为跳跃表，以提供更好的性能和空间效率。</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121117928.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308121117928.png"></a></p><p>Redis中的有序集合（Sorted Set）使用的是跳跃表（Skip List）数据结构来实现的。跳跃表是一种用于有序元素存储和检索的数据结构，它的设计使得有序集合的插入、删除和查找操作都能在平均情况下达到<br>O(log n) 的时间复杂度。</p><p><strong>跳跃表（Skip List）实现原理：</strong></p><ol><li><p><strong>多级索引：</strong></p><p>跳跃表的核心思想是使用多级索引来加速查找操作。除了底层的链表结构，跳跃表还有多个级别的索引，每一级索引都是一个较小的有序链表，其中的节点包含指向下一级索引节点的指针。</p></li><li><p><strong>底层链表：</strong></p><p>跳跃表的底层是一个有序链表，节点按照键的大小顺序排列。每个节点包含一个键和对应的值。</p></li><li><p><strong>多级索引节点：</strong></p><p>跳跃表的多级索引节点也是有序链表，但是它的节点数目比底层链表少。每个多级索引节点都存储了指向底层链表中对应范围节点的指针。不同级别的索引通过链式连接在一起。</p></li><li><p><strong>节点的分布：</strong></p><p>节点在不同级别的索引中以一定概率分布，使得跳跃表在查询时能够快速跳过一些不必要的节点，从而达到快速查找的效果。</p></li></ol><p><strong>跳跃表查询流程：</strong></p><ol><li>客户端发送查询命令，指定要查询的成员。</li><li>Redis会从顶级索引（最高级别）开始，逐级向右移动，查找每一级索引中的节点。</li><li>在每一级索引中，Redis会沿着链表移动，比较节点的键与要查找的成员的大小。</li><li>当找到第一个大于等于要查找成员的节点时，如果节点的键等于要查找的成员，查找成功；如果节点的键大于要查找的成员，就会进入下一级索引继续查找。</li><li>如果最底层链表中没有找到匹配的节点，那么查询失败，返回结果为空。</li></ol><p>跳跃表的设计使得它在有序集合中实现高效的查找、插入和删除操作，特别是对于范围查询等操作。通过多级索引和有序链表的结合，Redis的有序集合能够在平均情况下达到<br>O(log n) 的时间复杂度，从而保证了高性能的数据操作。</p><h3 id="如何使用-2"><a href="#如何使用-2" class="headerlink" title="如何使用"></a>如何使用</h3><p>Redis的Set是一种无序、不重复元素的数据结构，类似于数学上的集合。它支持添加、删除和查询元素，并且能够对多个集合进行交集、并集、差集等操作。下面是关于Redis<br>Set的基本使用方法：</p><p><strong>1. 添加元素：</strong></p><p>使用 <code>SADD</code> 命令可以向一个Set中添加一个或多个元素。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SADD myset value1 value2 value3</span><br></pre></td></tr></table></figure><p><strong>2. 删除元素：</strong></p><p>使用 <code>SREM</code> 命令可以从一个Set中删除一个或多个元素。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SREM myset value1 value2</span><br></pre></td></tr></table></figure><p><strong>3. 判断元素是否存在：</strong></p><p>使用 <code>SISMEMBER</code> 命令可以判断一个元素是否存在于Set中。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SISMEMBER myset value</span><br></pre></td></tr></table></figure><p><strong>4. 获取集合中的元素数量：</strong></p><p>使用 <code>SCARD</code> 命令可以获取一个Set中元素的数量。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SCARD myset</span><br></pre></td></tr></table></figure><p><strong>5. 获取集合中的所有元素：</strong></p><p>使用 <code>SMEMBERS</code> 命令可以获取一个Set中的所有元素。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SMEMBERS myset</span><br></pre></td></tr></table></figure><p><strong>6. 集合操作：</strong></p><ul><li>并集：使用 <code>SUNION</code> 命令可以对多个Set进行并集操作。</li><li>交集：使用 <code>SINTER</code> 命令可以对多个Set进行交集操作。</li><li>差集：使用 <code>SDIFF</code> 命令可以对多个Set进行差集操作。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SUNION destination_set set1 set2</span><br><span class="line">SINTER destination_set set1 set2</span><br><span class="line">SDIFF destination_set set1 set2</span><br></pre></td></tr></table></figure><h3 id="需要注意的地方-2"><a href="#需要注意的地方-2" class="headerlink" title="需要注意的地方"></a>需要注意的地方</h3><p>在使用Redis的Set数据类型时，有一些注意事项和最佳实践可以帮助你更好地利用它。以下是使用Redis Set时需要注意的几个方面：</p><p><strong>1. 唯一性：</strong></p><p>Set是无序、不重复元素的集合。确保你向Set中添加的元素是唯一的，因为Set不会存储重复的值。</p><p><strong>2. 数据量：</strong></p><p>虽然Redis可以处理大量的数据，但仍需谨慎处理数据量较大的Set。当Set中的元素数量变得很大时，查询、插入和删除等操作的性能可能会受到影响。</p><p><strong>3. 考虑使用过期时间：</strong></p><p>可以为Set设置过期时间，让不再需要的数据自动过期，以释放内存资源。</p><p><strong>4. 避免大量的成员操作：</strong></p><p>在某些情况下，如果需要对Set中的大量成员进行操作（如删除），可能会影响性能。如果需要频繁进行大规模操作，可以考虑使用多个小规模的Set，而不是一个包含大量成员的Set。</p><p><strong>5. 集合操作注意事项：</strong></p><p>集合操作（如并集、交集、差集）可能会对性能产生一定影响，特别是在Set的成员数量较大时。在执行集合操作时，应该考虑其对性能的影响，并根据实际情况进行优化。</p><p><strong>6. 避免全量遍历：</strong></p><p>避免使用<code>SMEMBERS</code>等命令获取所有成员，因为在大数据集下会产生性能问题。如果需要遍历成员，可以考虑使用<code>SSCAN</code>命令进行分页式的遍历。</p><p><strong>7. 使用有序集合代替：</strong></p><p>如果你需要有序的集合，可以考虑使用有序集合（Sorted Set）数据类型，它可以同时提供有序性和唯一性，适用于排行榜、计分系统等场景。</p><p><strong>8. 持久化和备份：</strong></p><p>在重要的生产环境中，始终要考虑持久化和备份策略，以确保数据不会因为意外情况而丢失。</p><p>总之，在使用Redis的Set数据类型时，需要根据应用需求和数据量合理规划和优化。了解你的数据模型、数据量以及操作需求，可以帮助你更好地利用Redis的Set功能，并确保系统的性能和稳定性。</p><h2 id="四、有序集合（Sorted-Set）：与集合类似，但每个元素都关联一个分数，可以根据分数进行排序。"><a href="#四、有序集合（Sorted-Set）：与集合类似，但每个元素都关联一个分数，可以根据分数进行排序。" class="headerlink" title="四、有序集合（Sorted Set）：与集合类似，但每个元素都关联一个分数，可以根据分数进行排序。"></a>四、有序集合（Sorted Set）：与集合类似，但每个元素都关联一个分数，可以根据分数进行排序。</h2><h3 id="适用场景-3"><a href="#适用场景-3" class="headerlink" title="适用场景"></a>适用场景</h3><p>有序集合（Sorted Set）是Redis中的一种特殊数据类型，它在有序性和唯一性的基础上，为存储一组成员（元素）分配了一个分数（score）。这种数据结构使得有序集合在许多应用场景中非常有用。以下是一些适用场景：</p><p><strong>1. 排行榜和计分系统：</strong><br>有序集合非常适合实现排行榜和计分系统。成员的分数可以表示玩家的得分、评分、积分等。你可以通过分数对成员进行排序，快速地获取前几名的排名。</p><p><strong>2. 时间序列数据：</strong><br>如果你需要存储带有时间戳的数据，有序集合可以根据时间戳（作为分数）进行排序，然后按时间范围快速查询数据。</p><p><strong>3. 最新消息：</strong><br>有序集合可以用来存储最新的消息，每个消息的分数可以是消息的时间戳，这样可以方便地获取最新的消息。</p><p><strong>4. 带权重的标签&#x2F;标签云：</strong><br>在社交网络或标签系统中，你可以使用有序集合来存储标签，成员是标签，分数可以表示标签的热度、权重等。这可以用来实现标签云、热门标签等功能。</p><p><strong>5. 范围查询：</strong><br>有序集合允许根据分数范围进行查询，从而可以快速地获取在某个分数范围内的成员。</p><p><strong>6. 唯一性：</strong><br>有序集合保持了成员的唯一性，这意味着你可以方便地存储和查询不重复的元素。</p><p><strong>7. 高级集合运算：</strong><br>Redis提供了对有序集合的集合运算（交集、并集、差集）操作，这可以用来实现多个数据集的交叉分析、数据筛选等。</p><p><strong>8. 范围分页：</strong><br>使用<code>ZRANGE</code>等命令，可以对有序集合进行分页查询，获取指定范围内的成员。</p><p>总之，有序集合适用于需要保持元素有序性、需要快速进行范围查询、具有权重或分数的情况。它在多个场景中都提供了高效的数据存储和操作，使得Redis成为了解决这些问题的有力工具。</p><h3 id="底层实现是什么-3"><a href="#底层实现是什么-3" class="headerlink" title="底层实现是什么"></a>底层实现是什么</h3><p>Redis的有序集合（Sorted Set）底层的实现采用了跳跃表（Skip List）和哈希表（Hash<br>Table）的结合。这种设计使得有序集合既能在保持有序性的同时，也能够高效地执行添加、删除、查询等操作。</p><p><strong>跳跃表（Skip List）：</strong><br>跳跃表是用来维护有序集合中的成员的。在有序集合中，每个成员都有一个分数（score），而跳跃表则根据这个分数来排序成员。跳跃表通过多级索引，可以在平均情况下实现<br>O(log n) 的插入、删除和查询操作。</p><p><strong>哈希表（Hash Table）：</strong><br>有序集合在存储成员和分数之间的映射关系时，使用了哈希表。每个成员都会在哈希表中对应一个键值对，其中键是成员，值是分数。通过哈希表，Redis可以在<br>O(1) 时间内查找某个成员的分数。</p><p><strong>结合使用的方式：</strong><br>有序集合的每个元素在底层的哈希表中存储着成员和分数的映射关系，同时在跳跃表中存储了成员的排序信息。通过这种方式，Redis可以在跳跃表中按照成员的分数顺序快速地进行范围查询，而在哈希表中通过成员快速查找分数。</p><p>这种底层实现结合了跳跃表和哈希表的优点，使得Redis有序集合能够同时满足有序性和高效性的需求。这种设计让有序集合在插入、删除、查询和范围操作等场景下都能表现出色。</p><h3 id="如何使用-3"><a href="#如何使用-3" class="headerlink" title="如何使用"></a>如何使用</h3><p>使用Redis的有序集合（Sorted Set）需要掌握一些基本命令和操作。以下是一些常见的有序集合操作示例：</p><p><strong>1. 添加成员：</strong></p><p>使用 <code>ZADD</code> 命令可以向有序集合中添加成员，同时指定成员的分数。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ZADD myset 10 member1</span><br><span class="line">ZADD myset 20 member2</span><br></pre></td></tr></table></figure><p><strong>2. 获取成员分数：</strong></p><p>使用 <code>ZSCORE</code> 命令可以获取指定成员的分数。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZSCORE myset member1</span><br></pre></td></tr></table></figure><p><strong>3. 获取成员排名：</strong></p><p>使用 <code>ZRANK</code> 命令可以获取指定成员在有序集合中的排名（从0开始）。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZRANK myset member2</span><br></pre></td></tr></table></figure><p><strong>4. 获取分数范围内的成员：</strong></p><p>使用 <code>ZRANGEBYSCORE</code> 命令可以获取指定分数范围内的成员列表。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZRANGEBYSCORE myset 15 25</span><br></pre></td></tr></table></figure><p><strong>5. 获取排名范围内的成员：</strong></p><p>使用 <code>ZRANGE</code> 命令可以获取指定排名范围内的成员列表。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZRANGE myset 0 2</span><br></pre></td></tr></table></figure><p><strong>6. 删除成员：</strong></p><p>使用 <code>ZREM</code> 命令可以从有序集合中删除一个或多个成员。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZREM myset member1</span><br></pre></td></tr></table></figure><p><strong>7. 获取成员数量：</strong></p><p>使用 <code>ZCARD</code> 命令可以获取有序集合中成员的数量。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZCARD myset</span><br></pre></td></tr></table></figure><p><strong>8. 集合操作：</strong></p><ul><li>并集：使用 <code>ZUNIONSTORE</code> 命令可以对多个有序集合进行并集操作。</li><li>交集：使用 <code>ZINTERSTORE</code> 命令可以对多个有序集合进行交集操作。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ZUNIONSTORE destination_set 2 set1 set2 WEIGHTS 1 2</span><br><span class="line">ZINTERSTORE destination_set 2 set1 set2 WEIGHTS 0.5 0.5</span><br></pre></td></tr></table></figure><p>这只是有序集合的基本操作，你还可以使用其他命令进行更复杂的操作，如获取成员排名、计算分数之差等。使用有序集合时，要根据实际需求选择合适的命令和操作，以充分利用其有序性和高效性。</p><h3 id="需要注意的地方-3"><a href="#需要注意的地方-3" class="headerlink" title="需要注意的地方"></a>需要注意的地方</h3><p>在使用Redis的有序集合（Sorted Set）时，有一些注意事项可以帮助你避免一些常见的问题，以及优化性能和数据管理。以下是一些需要注意的地方：</p><p><strong>1. 成员的唯一性：</strong><br>有序集合的成员是唯一的，重复的成员不会被插入。确保你向有序集合中添加的成员是唯一的，以免出现预期之外的数据情况。</p><p><strong>2. 分数的重复性：</strong><br>虽然成员是唯一的，但是不同成员之间的分数可以是重复的。这在一些场景中是正常的，但需要根据具体需求处理。</p><p><strong>3. 数据量：</strong><br>尽管有序集合可以处理大量的数据，但仍需谨慎处理数据量较大的有序集合。大数据集合可能会影响性能和内存使用。</p><p><strong>4. 分数范围：</strong><br>在进行范围查询时，确保分数范围是合理的。大范围查询可能会消耗较多的计算资源。</p><p><strong>5. 数据结构选择：</strong><br>有序集合适用于需要有序性的场景，但不适合用于仅仅需要存储唯一性成员的情况。对于仅需要唯一性的数据，使用集合（Set）数据类型更合适。</p><p><strong>6. 集合操作的影响：</strong><br>在执行集合操作（并集、交集、差集）时，考虑其对性能的影响。集合操作可能会消耗更多的计算资源，特别是在有大量成员的情况下。</p><p><strong>7. 选择适当的分数类型：</strong><br>分数可以是整数或浮点数。根据实际需求，选择适合的分数类型。</p><p><strong>8. 性能和内存优化：</strong><br>合理使用Redis的配置参数，考虑分片、持久化、内存管理等策略，以优化性能和内存使用。</p><p><strong>9. 避免全量遍历：</strong><br>避免使用<code>ZRANGE</code>等命令获取所有成员，特别是在大数据集合中。考虑使用<code>ZSCAN</code>进行分页式遍历。</p><p><strong>10. 持久化和备份：</strong><br>在重要的生产环境中，考虑持久化和备份策略，以防止数据丢失。</p><p><strong>11. 内存占用：</strong><br>有序集合会占用一定的内存，要注意监控和管理内存使用，防止内存溢出。</p><p>总之，使用Redis的有序集合时，要根据实际需求合理规划和优化，以保证系统的性能和稳定性。</p><h2 id="五、哈希表（Hash）"><a href="#五、哈希表（Hash）" class="headerlink" title="五、哈希表（Hash）"></a>五、哈希表（Hash）</h2><h3 id="适用场景-4"><a href="#适用场景-4" class="headerlink" title="适用场景"></a>适用场景</h3><p>Redis的哈希表（Hash）是一种存储键值对的数据结构，其中的键是唯一的，而值则可以是字符串、整数、浮点数等。哈希表适用于许多场景，特别是需要存储和查询多个字段的情况。以下是一些适用场景：</p><p><strong>1. 存储对象信息：</strong><br>如果你需要存储一个对象的多个字段信息，例如用户信息（用户名、年龄、邮箱等），可以使用哈希表来存储每个用户的字段信息。</p><p><strong>2. 缓存数据：</strong><br>哈希表适用于缓存大量的键值对数据，例如缓存数据库查询结果，以减少数据库的访问频率。</p><p><strong>3. 存储配置信息：</strong><br>将配置信息存储在哈希表中，可以方便地获取和修改配置项，而无需在内存中存储多个单独的键。</p><p><strong>4. 计数器：</strong><br>可以使用哈希表来实现计数器功能，每个字段存储一个计数，比如网站的点赞数、阅读数等。</p><p><strong>5. 存储多种属性：</strong><br>如果你需要为一组对象存储多种属性，例如商品的名称、价格、库存等，可以使用哈希表来存储每个商品的多个属性。</p><p><strong>6. 联合索引：</strong><br>在关系型数据库中，联合索引常用于加速多字段的查询。在Redis中，可以使用哈希表来存储多个字段，并通过一个字段作为主键，实现类似的联合索引效果。</p><p><strong>7. 实时统计：</strong><br>哈希表可以用于实时统计信息，例如统计用户每天的登录次数、订单数等。</p><p><strong>8. 用户会话：</strong><br>可以使用哈希表来存储用户会话信息，每个字段存储一个会话属性，如用户ID、登录时间、过期时间等。</p><p><strong>9. 图数据结构：</strong><br>如果需要实现图数据结构，例如社交网络关系图，可以使用哈希表来表示节点和边。</p><p><strong>10. 多字段查询：</strong><br>哈希表适用于存储多个字段，可以更快速地查询和更新多个字段的值。</p><p>总之，哈希表适用于需要存储多个字段信息的情况，可以在一次查询中获取和更新多个字段，从而提高了数据的访问效率。它在多种应用场景中都能发挥作用，特别是需要存储和操作多个属性的数据。</p><h3 id="底层实现是什么-4"><a href="#底层实现是什么-4" class="headerlink" title="底层实现是什么"></a>底层实现是什么</h3><p>Redis的哈希表（Hash）数据类型在底层的实现上是使用哈希表（Hash Table）来存储键值对的。哈希表是一种非常高效的数据结构，它能够在平均情况下以<br>O(1) 的时间复杂度进行插入、删除和查询操作。下面是Redis哈希表底层实现的一些细节：</p><p><strong>1. 散列函数（Hash Function）：</strong><br>在哈希表中，键通过散列函数计算得到一个哈希值（hash），这个哈希值被用作数组（桶）的索引。Redis使用MurmurHash2等散列函数来均匀地将键分散到不同的桶中。</p><p><strong>2. 桶数组：</strong><br>哈希表底层维护了一个桶数组，每个桶中存储了一个或多个键值对。这个数组的大小通常会动态调整，以保证桶的填充因子不会过高。</p><p><strong>3. 冲突处理：</strong><br>由于不同的键可能会经过散列函数映射到同一个桶中，这就产生了冲突。Redis使用链式解决冲突的方法，每个桶中可以存储一个链表，当有多个键映射到同一个桶时，它们会按照插入顺序形成链表。</p><p><strong>4. 动态扩容：</strong><br>当哈希表中的元素数量逐渐增加时，Redis会根据负载因子动态扩容桶数组，以保持桶的填充因子在一个合适的范围内。这可以保证插入、删除和查询操作的高效性。</p><p><strong>5. 迁移：</strong><br>在扩容时，Redis会将原有的键值对重新散列到新的桶数组中。这个过程称为“迁移”，它会在后台进行，以免影响正常的读写操作。</p><p><strong>6. 哈希表的嵌套：</strong><br>在Redis的源码中，哈希表本身也可以被嵌套使用，这种嵌套的哈希表常常用于实现数据类型的复杂结构，例如用于存储集合和有序集合等。</p><p>综上所述，Redis的哈希表底层是通过散列函数、桶数组、链式解决冲突等机制来实现的。这种设计使得Redis能够高效地存储和查询键值对数据，哈希表在Redis中扮演着非常重要的角色。</p><h3 id="如何使用-4"><a href="#如何使用-4" class="headerlink" title="如何使用"></a>如何使用</h3><p>使用Redis的哈希表（Hash）数据类型涉及一系列命令，这些命令可以帮助你对哈希表中的键值对进行添加、查询、删除等操作。以下是一些常见的哈希表操作示例：</p><p><strong>1. 添加键值对：</strong></p><p>使用 <code>HSET</code> 命令可以向哈希表中添加一个键值对。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HSET user:id123 name <span class="string">&quot;John&quot;</span> age 30</span><br></pre></td></tr></table></figure><p><strong>2. 获取单个键的值：</strong></p><p>使用 <code>HGET</code> 命令可以获取指定键的值。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HGET user:id123 name</span><br></pre></td></tr></table></figure><p><strong>3. 获取多个键的值：</strong></p><p>使用 <code>HMGET</code> 命令可以同时获取多个键的值。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HMGET user:id123 name age</span><br></pre></td></tr></table></figure><p><strong>4. 获取所有键值对：</strong></p><p>使用 <code>HGETALL</code> 命令可以获取哈希表中所有的键值对。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HGETALL user:id123</span><br></pre></td></tr></table></figure><p><strong>5. 增加或更新键的值：</strong></p><p>使用 <code>HINCRBY</code> 命令可以为键的值增加一个整数。如果键不存在，会创建一个新的键。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HINCRBY user:id123 age 1</span><br></pre></td></tr></table></figure><p><strong>6. 删除键值对：</strong></p><p>使用 <code>HDEL</code> 命令可以从哈希表中删除一个或多个键值对。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HDEL user:id123 age</span><br></pre></td></tr></table></figure><p><strong>7. 获取所有键或值：</strong></p><p>使用 <code>HKEYS</code> 命令可以获取哈希表中所有的键，使用 <code>HVALS</code> 命令可以获取哈希表中所有的值。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HKEYS user:id123</span><br><span class="line">HVALS user:id123</span><br></pre></td></tr></table></figure><p><strong>8. 获取键值对数量：</strong></p><p>使用 <code>HLEN</code> 命令可以获取哈希表中键值对的数量。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HLEN user:id123</span><br></pre></td></tr></table></figure><p><strong>9. 检查键是否存在：</strong></p><p>使用 <code>HEXISTS</code> 命令可以检查指定键是否存在于哈希表中。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HEXISTS user:id123 name</span><br></pre></td></tr></table></figure><p>这些只是哈希表的基本操作，你还可以使用其他命令来进行更高级的操作，如迭代、批量添加、获取字段数量等。在使用哈希表时，要根据实际需求选择合适的命令和操作，以充分利用其灵活性和高效性。</p><h3 id="需要注意的地方-4"><a href="#需要注意的地方-4" class="headerlink" title="需要注意的地方"></a>需要注意的地方</h3><p>在使用Redis的哈希表（Hash）数据类型时，有一些注意事项可以帮助你避免常见问题，优化性能，以及更好地管理数据。以下是一些需要注意的地方：</p><p><strong>1. 键的命名：</strong><br>选择有意义的键名，以便更好地区分不同的哈希表。避免过长或者冗余的键名，以减少内存占用。</p><p><strong>2. 数据量：</strong><br>虽然Redis可以处理大量的数据，但仍需谨慎处理大数据量的哈希表。大数据量可能会影响性能和内存使用。</p><p><strong>3. 单个哈希表的字段数量：</strong><br>虽然Redis能够高效地处理多个字段，但是如果单个哈希表中的字段数量非常多，可能会影响性能。如果需要存储大量的字段，考虑拆分成多个哈希表或其他数据结构。</p><p><strong>4. 复杂度：</strong><br>在哈希表中的字段数量不宜过多，以保持读写操作的高效性。过多的字段可能会增加内存消耗和操作复杂度。</p><p><strong>5. 适用场景：</strong><br>哈希表适用于存储和查询多个字段的情况。如果只需要存储单一的值或者简单的数据，考虑使用字符串（String）数据类型。</p><p><strong>6. 批量操作：</strong><br>如果需要一次操作多个键值对，使用批量操作命令如 <code>HMSET</code>，而不是多次使用单个键的操作命令。</p><p><strong>7. 缓存失效：</strong><br>设置适当的缓存失效时间，避免过期的键值对占用内存。</p><p><strong>8. 键值大小：</strong><br>如果哈希表中的字段值较大，考虑其对内存的影响。大字段值可能会增加内存占用。</p><p><strong>9. 深度嵌套：</strong><br>避免在哈希表中使用太多嵌套的键值对，这可能会增加查找和维护的复杂度。</p><p><strong>10. 数据持久化：</strong><br>对于重要的数据，考虑开启持久化以防止数据丢失。</p><p><strong>11. 数据备份：</strong><br>定期备份数据，以防止意外数据丢失。</p><p>总之，使用哈希表时，要根据实际需求合理规划和优化，以确保系统的性能和稳定性。考虑数据模型、数据量、操作频率等因素，以及根据需要选择合适的Redis配置和命令来使用哈希表。��选择合适的Redis配置和命令来使用哈希表。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 系列文章 </category>
          
          <category> 深入理解Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> 跳表 </tag>
            
            <tag> 哈希表 </tag>
            
            <tag> 数据结构 </tag>
            
            <tag> 有序集合 </tag>
            
            <tag> Set </tag>
            
            <tag> List </tag>
            
            <tag> Hash </tag>
            
            <tag> String </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EasyCode自动生成脚本</title>
      <link href="/5ee71a5e.html"/>
      <url>/5ee71a5e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>配合优化的项目架构，能够自动生成基础CURUD，实现10秒钟开发新业务接口</p><p><a href="https://brucege.com/doc/#/generateByTemplate">https://brucege.com/doc/#/generateByTemplate</a></p><p>EasyCode自动生成脚本是一个与优化项目架构配合的工具，能够快速生成基础CURUD操作，帮助开发人员在10秒钟内创建新的业务接口。本文介绍了如何使用EasyCode自动生成脚本，并展示了生成的Controller和Mapper类的示例代码。</p><h2 id="自动生成以下类，还有一个xml没截取到"><a href="#自动生成以下类，还有一个xml没截取到" class="headerlink" title="自动生成以下类，还有一个xml没截取到"></a>自动生成以下类，还有一个xml没截取到</h2><p><a href="https://github.com/zysicyj/EasyCode_hubei/assets/64080867/b730d785-bbf2-4ef6-9a3f-b5aaccb981a6" title="img" class="gallery-item"><img src="https://github.com/zysicyj/EasyCode_hubei/assets/64080867/b730d785-bbf2-4ef6-9a3f-b5aaccb981a6" alt="img"></a></p><h2 id="生成的controller"><a href="#生成的controller" class="headerlink" title="生成的controller"></a>生成的controller</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nari.supervision.daily.outbound.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.nari.core.basic.BasicController;</span><br><span class="line"><span class="keyword">import</span> com.nari.supervision.daily.outbound.model.IdLibraryChecklist;</span><br><span class="line"><span class="keyword">import</span> com.nari.supervision.daily.outbound.param.IdLibraryChecklistParam;</span><br><span class="line"><span class="keyword">import</span> com.nari.supervision.daily.outbound.view.IdLibraryChecklistView;</span><br><span class="line"><span class="keyword">import</span> com.nari.supervision.daily.outbound.transform.IdLibraryChecklistTransform;</span><br><span class="line"><span class="keyword">import</span> com.nari.supervision.daily.outbound.dto.IdLibraryChecklistDto;</span><br><span class="line"><span class="keyword">import</span> com.nari.supervision.daily.outbound.service.IdLibraryChecklistService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.validation.Valid;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 证照清单-路由管理</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> &lt;a href=&quot;mailto:17602556550@189.cn&quot;&gt; 朱永胜 &lt;/a&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-05-26 17:08:30</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@Valid</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;idLibraryChecklist&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IdLibraryChecklistController</span> <span class="keyword">extends</span> <span class="title class_">BasicController</span>&lt;IdLibraryChecklist, IdLibraryChecklistParam, IdLibraryChecklistView, IdLibraryChecklistDto, IdLibraryChecklistTransform&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="生成的mapper"><a href="#生成的mapper" class="headerlink" title="生成的mapper"></a>生成的mapper</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nari.supervision.daily.outbound.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.nari.supervision.daily.outbound.model.IdLibraryChecklist;</span><br><span class="line"><span class="keyword">import</span> com.nari.supervision.daily.outbound.param.IdLibraryChecklistParam;</span><br><span class="line"><span class="keyword">import</span> com.nari.supervision.daily.outbound.dto.IdLibraryChecklistDto;</span><br><span class="line"><span class="keyword">import</span> com.nari.core.basic.BasicDao;</span><br><span class="line"><span class="keyword">import</span> com.nari.core.web.PageParam;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 证照清单-SQL处理</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> &lt;a href=&quot;mailto:17602556550@189.cn&quot;&gt; 朱永胜 &lt;/a&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-05-26 17:08:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IdLibraryChecklistMapper</span> <span class="keyword">extends</span> <span class="title class_">BasicDao</span>&lt;IdLibraryChecklist, IdLibraryChecklistDto, IdLibraryChecklistParam&gt; &#123;</span><br><span class="line">    List&lt;IdLibraryChecklistDto&gt; <span class="title function_">selectPageRel</span><span class="params">(<span class="meta">@Param(&quot;page&quot;)</span> PageParam&lt;IdLibraryChecklistDto, IdLibraryChecklistParam&gt; page, <span class="meta">@Param(&quot;param&quot;)</span> IdLibraryChecklistParam param)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><h3 id="一、将项目拷贝到该位置"><a href="#一、将项目拷贝到该位置" class="headerlink" title="一、将项目拷贝到该位置"></a>一、将项目拷贝到该位置</h3><p><a href="https://github.com/zysicyj/EasyCode_hubei/assets/64080867/4ea2b22d-414e-4bf6-9236-0a6468cacf6e" title="image" class="gallery-item"><img src="https://github.com/zysicyj/EasyCode_hubei/assets/64080867/4ea2b22d-414e-4bf6-9236-0a6468cacf6e" alt="image" title="image"></a></p><p>我们需要使用的是第三个模板</p><p><a href="https://github.com/zysicyj/EasyCode_hubei/assets/64080867/2c89ad74-2e9c-4f53-aa57-0f9e70f09d96" title="image" class="gallery-item"><img src="https://github.com/zysicyj/EasyCode_hubei/assets/64080867/2c89ad74-2e9c-4f53-aa57-0f9e70f09d96" alt="image" title="image"></a></p><h3 id="二、安装插件"><a href="#二、安装插件" class="headerlink" title="二、安装插件"></a>二、安装插件</h3><p><a href="https://github.com/zysicyj/EasyCode_hubei/assets/64080867/2fc5d35f-b20b-45c8-b4ed-87508b866e26" title="image" class="gallery-item"><img src="https://github.com/zysicyj/EasyCode_hubei/assets/64080867/2fc5d35f-b20b-45c8-b4ed-87508b866e26" alt="image" title="image"></a></p><h3 id="三、右键表，按照图示点击"><a href="#三、右键表，按照图示点击" class="headerlink" title="三、右键表，按照图示点击"></a>三、右键表，按照图示点击</h3><blockquote><p>如果你的idea没有配置db，请自行百度配置下</p></blockquote><p><a href="https://github.com/zysicyj/EasyCode_hubei/assets/64080867/14f8dab8-8520-4965-903d-a57e9c2b8dcb" title="image" class="gallery-item"><img src="https://github.com/zysicyj/EasyCode_hubei/assets/64080867/14f8dab8-8520-4965-903d-a57e9c2b8dcb" alt="image" title="image"></a></p><h3 id="四、按照图示勾选即可"><a href="#四、按照图示勾选即可" class="headerlink" title="四、按照图示勾选即可"></a>四、按照图示勾选即可</h3><p><a href="https://github.com/zysicyj/EasyCode_hubei/assets/64080867/020af128-fded-441f-a5fa-e58b683cdced" title="image" class="gallery-item"><img src="https://github.com/zysicyj/EasyCode_hubei/assets/64080867/020af128-fded-441f-a5fa-e58b683cdced" alt="image" title="image"></a></p><p>总结：<br>EasyCode自动生成脚本是一个强大的工具，可以极大地提高开发效率。通过简单的配置和几个简单的步骤，开发人员可以快速生成基础CURUD操作的代码，从而节省大量的开发时间和精力。生成的Controller和Mapper类示例代码展示了EasyCode的功能和灵活性，使开发人员能够轻松创建和管理业务接口。如果您想要提高开发效率并减少重复劳动，EasyCode自动生成脚本绝对是一个值得尝试的工具。<br>对是一个值得尝试的工具。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> EasyCode </tag>
            
            <tag> Idea </tag>
            
            <tag> 插件 </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> 自动生成脚本 </tag>
            
            <tag> CURUD </tag>
            
            <tag> Controller </tag>
            
            <tag> Mapper </tag>
            
            <tag> 开发效率 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Java根据表名导出与导入Sql</title>
      <link href="/60c46e69.html"/>
      <url>/60c46e69.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>很粗糙啊，有很多可以优化的地方，而且也不安全，但是临时用还是OK的，我这个是公司里面的单机软件，不联网。</p><p>嗨！我是一名社交媒体增长黑客，很高兴能帮助您优化和丰富关于批量作业导出和导入的文章。这个主题相当技术性，但我会将其分解为易于理解的部分。让我们开始吧！</p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>在当今快节奏的数字世界中，高效地导出和导入批量作业对于企业至关重要。批量作业操作涉及处理大量数据，拥有流畅的流程可以节省时间和精力。在本文中，我们将探讨一种基于Java的解决方案，可以让您无缝地导出和导入批量作业。</p><h2 id="导出批量作业"><a href="#导出批量作业" class="headerlink" title="导出批量作业"></a>导出批量作业</h2><p>提供的代码片段演示了如何使用基于Java的解决方案导出批量作业。以下是代码的详细说明：</p><ol><li><p><code>exportBatchJobs</code> 方法负责导出批量作业。它使用 <code>StringBuilder</code> 构建每个表的 SQL 语句。</p></li><li><p><code>getTableNames</code> 方法使用 <code>SHOW TABLES</code> SQL 查询检索所有表名。</p></li><li><p>对于每个表，都会调用 <code>downloadTable</code> 方法。它查询表数据并为每一行生成 SQL 插入语句。</p></li><li><p>生成的 SQL 语句会追加到 <code>sqlBuilder</code> 中。</p></li><li><p>最后，<code>sqlBuilder</code> 的内容会写入 HTTP 响应，允许用户下载 SQL 文件。</p></li></ol><p>为了优化这段代码，您可以考虑以下改进：</p><ul><li><p>使用 <code>ExecutorService</code> 和 <code>Future</code> 类实现多线程，以并行化导出过程。这可以显著提高性能，特别是在处理大量表时。</p></li><li><p>探索优化 SQL 生成过程的方法。例如，可以使用批量插入而不是单个插入语句来提高效率。</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 导出批次作业</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> &lt;a href = &quot;mailto:zysicyj@163.com&quot; &gt; 公众号：【程序员朱永胜】 个人博客：【blog.zysicyj.to】 &lt;/a &gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2023/8/10</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/exportBatchJobs&quot;)</span></span><br><span class="line">    <span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exportBatchJobs</span><span class="params">(HttpServletResponse response)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">sqlBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newFixedThreadPool(getTableNames().size());</span><br><span class="line">            List&lt;Future&lt;?&gt;&gt; futures = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (String tableName : getTableNames()) &#123;</span><br><span class="line">                Future&lt;?&gt; future = executorService.submit(() -&gt; &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        downloadTable(tableName, sqlBuilder);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                futures.add(future);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Wait for all threads to finish</span></span><br><span class="line">            <span class="keyword">for</span> (Future&lt;?&gt; future : futures) &#123;</span><br><span class="line">                future.get();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Set response headers for file download</span></span><br><span class="line">            response.setContentType(<span class="string">&quot;application/octet-stream&quot;</span>);</span><br><span class="line">            response.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            response.setHeader(HttpHeaders.CONTENT_DISPOSITION, <span class="string">&quot;attachment; filename=&quot;</span> + format(DateUtil.now(), <span class="string">&quot;YYYY-MM-dd HH:mm:ss&quot;</span>) + <span class="string">&quot;.sql&quot;</span>);</span><br><span class="line"></span><br><span class="line">            response.getWriter().write(sqlBuilder.toString());</span><br><span class="line"></span><br><span class="line">            executorService.shutdown();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取所有表名</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> java.util.List&lt;java.lang.String&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> &lt;a href = &quot;mailto:zysicyj@163.com&quot; &gt; 公众号：【程序员朱永胜】 个人博客：【blog.zysicyj.to】  &lt;/a &gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023/8/10</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getTableNames</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> jdbcTemplate.queryForList(<span class="string">&quot;SHOW TABLES&quot;</span>, String.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 导出指定表SQL</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> tableName</span></span><br><span class="line"><span class="comment">     *         表明</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sqlBuilder</span></span><br><span class="line"><span class="comment">     *         拼接sql</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> &lt;a href = &quot;mailto:zysicyj@163.com&quot; &gt; 公众号：【程序员朱永胜】 个人博客：【blog.zysicyj.to】 &lt;/a &gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2023/8/10</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">downloadTable</span><span class="params">(String tableName, StringBuilder sqlBuilder)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 查询表数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM ??&quot;</span>;</span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; tableData = jdbcTemplate.queryForList(sql, tableName);</span><br><span class="line">        <span class="comment">// 拼接SQL插入语句</span></span><br><span class="line">        <span class="keyword">for</span> (Map&lt;String, Object&gt; row : tableData) &#123;</span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">valuesBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">columnsBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (Map.Entry&lt;String, Object&gt; entry : row.entrySet()) &#123;</span><br><span class="line">                columnsBuilder.append(entry.getKey()).append(<span class="string">&quot;, &quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (entry.getValue() <span class="keyword">instanceof</span> <span class="type">byte</span>[]) &#123;</span><br><span class="line">                    <span class="type">byte</span>[] binaryData = (<span class="type">byte</span>[]) entry.getValue();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">hexString</span> <span class="operator">=</span> bytesToHexString(binaryData);</span><br><span class="line">                    valuesBuilder.append(<span class="string">&quot;0x&quot;</span>).append(hexString).append(<span class="string">&quot;, &quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    valuesBuilder.append(<span class="string">&quot;&#x27;&quot;</span>).append(entry.getValue()).append(<span class="string">&quot;&#x27;, &quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">columns</span> <span class="operator">=</span> columnsBuilder.substring(<span class="number">0</span>, columnsBuilder.length() - <span class="number">2</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">values</span> <span class="operator">=</span> valuesBuilder.substring(<span class="number">0</span>, valuesBuilder.length() - <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">            sqlBuilder.append(<span class="string">&quot;INSERT INTO &quot;</span>).append(tableName).append(<span class="string">&quot; (&quot;</span>).append(columns).append(<span class="string">&quot;) VALUES (&quot;</span>)</span><br><span class="line">                    .append(values).append(<span class="string">&quot;);\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>导出来的就是这种格式的文件</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308102210122.png" title="image-20230810221022867" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308102210122.png" alt="image-20230810221022867"></a></p><h2 id="导入批量作业"><a href="#导入批量作业" class="headerlink" title="导入批量作业"></a>导入批量作业</h2><p>提供的代码片段演示了如何导入包含批量作业数据的 SQL 文件。以下是代码的详细说明：</p><ol><li><p><code>executeSqlFile</code> 方法处理导入过程。它接受一个 SQL 文件作为 <code>MultipartFile</code> 并读取其内容。</p></li><li><p>使用分号（<code>;</code>）分隔符将 SQL 文件内容拆分为单个语句。</p></li><li><p>使用参数化查询执行每个语句，确保安全性并防止 SQL 注入攻击。</p></li><li><p>如果 SQL 文件成功执行，则方法返回成功消息。否则，它会记录导入过程中出现的任何错误。</p></li></ol><p>为了优化这段代码，您可以考虑以下改进：</p><ul><li><p>实现错误处理，并提供更详细的错误消息，以帮助用户排除导入过程中可能出现的任何问题。</p></li><li><p>考虑在执行语句之前验证 SQL 文件内容。这可以帮助防止由格式错误或不兼容的 SQL 语句引起的潜在错误。</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 导入SQL</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> com.nari.common.core.domain.AjaxResult</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> &lt;a href = &quot;mailto:zysicyj@163.com&quot; &gt; 公众号：【程序员朱永胜】 个人博客：【blog.zysicyj.to】 &lt;/a &gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2023/8/10</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/importBatchJobs&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> AjaxResult <span class="title function_">executeSqlFile</span><span class="params">(<span class="meta">@RequestParam(&quot;filePath&quot;)</span> MultipartFile file)</span> &#123;</span><br><span class="line">        List&lt;String&gt; results = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Read the SQL file content</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(file.getBytes());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Split the SQL file content into individual statements</span></span><br><span class="line">            String[] statements = sql.split(<span class="string">&quot;;&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Execute each statement using parameterized queries</span></span><br><span class="line">            <span class="keyword">for</span> (String statement : statements) &#123;</span><br><span class="line">                <span class="comment">// Skip empty statements</span></span><br><span class="line">                <span class="keyword">if</span> (statement.trim().isEmpty()) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Execute the statement using parameterized queries</span></span><br><span class="line">                jdbcTemplate.update(statement);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> AjaxResult.success(<span class="string">&quot;SQL file executed successfully&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            results.add(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(<span class="string">&quot;导入失败的SQL数量:&#123;&#125;,&#123;&#125;&quot;</span>, results.size(), results);</span><br><span class="line">        <span class="keyword">return</span> success();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>总之，本文探讨了一种基于Java的解决方案，用于导出和导入批量作业。导出过程检索表数据并生成 SQL 插入语句，允许用户下载 SQL<br>文件。导入过程读取 SQL 文件，将其拆分为单个语句，并使用参数化查询执行这些语句。通过优化代码并实现错误处理，您可以提高批量作业导出和导入功能的效率和可靠性。</p><p>希望这篇优化和丰富的文章能帮助您为读者提供有价值的见解。如果您有任何进一步的问题或需要额外的帮助，请随时提问！</p><p>�助，请随时提问！</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 导出 </tag>
            
            <tag> Sql </tag>
            
            <tag> Mysql </tag>
            
            <tag> 批量作业 </tag>
            
            <tag> 导入 </tag>
            
            <tag> 多线程 </tag>
            
            <tag> 参数化查询 </tag>
            
            <tag> 错误处理 </tag>
            
            <tag> 优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot生成表结构和表数据sql</title>
      <link href="/196b7a2b.html"/>
      <url>/196b7a2b.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>业务背景是需要某单机程序需要把正在进行的任务导出，然后另一台电脑上单机继续运行，我这里选择的方案是同步SQL形式，并保证ID随机，多个数据库不会重复。</p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.nari.</span><br><span class="line">![](image.png)</span><br><span class="line">web.controller.demo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.io.FileUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.InputStreamResource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpHeaders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/download&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoController</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 二进制转成十六进制</span></span><br><span class="line"><span class="comment">     * 这里主要是处理图片数据，因为数据库存了图片Base64</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">bytesToHexString</span><span class="params">(<span class="type">byte</span>[] bytes)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">hexString</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">byte</span> b : bytes) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">hex</span> <span class="operator">=</span> Integer.toHexString(<span class="number">0xff</span> &amp; b);</span><br><span class="line">            <span class="keyword">if</span> (hex.length() == <span class="number">1</span>) &#123;</span><br><span class="line">                hexString.append(<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            hexString.append(hex);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> hexString.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 导出指定表SQL</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/table/&#123;tableName&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">downloadTable</span><span class="params">(<span class="meta">@PathVariable</span> String tableName, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 查询表数据</span></span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; tableData = jdbcTemplate.queryForList(<span class="string">&quot;SELECT * FROM &quot;</span> + tableName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查询表结构</span></span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; tableStructure = jdbcTemplate.queryForList(<span class="string">&quot;SHOW CREATE TABLE &quot;</span> + tableName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 拼接SQL插入语句</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sqlBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        sqlBuilder.append(tableStructure.get(<span class="number">0</span>).get(<span class="string">&quot;Create Table&quot;</span>)).append(<span class="string">&quot;;\n\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Map&lt;String, Object&gt; row : tableData) &#123;</span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">valuesBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">columnsBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (Map.Entry&lt;String, Object&gt; entry : row.entrySet()) &#123;</span><br><span class="line">                columnsBuilder.append(entry.getKey()).append(<span class="string">&quot;, &quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (entry.getValue() <span class="keyword">instanceof</span> <span class="type">byte</span>[]) &#123;</span><br><span class="line">                    <span class="type">byte</span>[] binaryData = (<span class="type">byte</span>[]) entry.getValue();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">hexString</span> <span class="operator">=</span> bytesToHexString(binaryData);</span><br><span class="line">                    valuesBuilder.append(<span class="string">&quot;0x&quot;</span>).append(hexString).append(<span class="string">&quot;, &quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    valuesBuilder.append(<span class="string">&quot;&#x27;&quot;</span>).append(entry.getValue()).append(<span class="string">&quot;&#x27;, &quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">columns</span> <span class="operator">=</span> columnsBuilder.substring(<span class="number">0</span>, columnsBuilder.length() - <span class="number">2</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">values</span> <span class="operator">=</span> valuesBuilder.substring(<span class="number">0</span>, valuesBuilder.length() - <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">            sqlBuilder.append(<span class="string">&quot;INSERT INTO &quot;</span>).append(tableName).append(<span class="string">&quot; (&quot;</span>).append(columns).append(<span class="string">&quot;) VALUES (&quot;</span>).append(values).append(<span class="string">&quot;);\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 构建响应</span></span><br><span class="line">        response.setHeader(HttpHeaders.CONTENT_DISPOSITION, <span class="string">&quot;attachment; filename=&quot;</span> + tableName+<span class="string">&quot;.sql&quot;</span>);</span><br><span class="line">        response.getWriter().write(sqlBuilder.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p>能看到这边图片已经正常导出了</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308082133731.png" title="image-20230808213359441" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308082133731.png" alt="image-20230808213359441"></a><br>ud.com&#x2F;blog&#x2F;202308082133731.png)</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> mysql </tag>
            
            <tag> jdbc </tag>
            
            <tag> sql </tag>
            
            <tag> 下载 </tag>
            
            <tag> 表数据 </tag>
            
            <tag> 表结构 </tag>
            
            <tag> 导出 </tag>
            
            <tag> 插入语句 </tag>
            
            <tag> 响应 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客优化差不多了</title>
      <link href="/c37612c9.html"/>
      <url>/c37612c9.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>博客地址：<a href="https://blog.zysicyj.top/">https://blog.zysicyj.top/</a></p><p>这篇文章不是教学博客，后续考虑看是否出教学</p><p>具体优化视频可以观看B站视频</p><p><a href="https://space.bilibili.com/258577429">https://space.bilibili.com/258577429</a></p><p>这个博客是Hexo+Github<br>Pages搭建的，如何搭建可以看我之前的文章，主题是Butterfly，图床是腾讯云COS，老文章使用的是阿里云OOS，换成COS主要是出于成本，腾讯的便宜太多了，而且有很多免费额度<a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072341119.png" title="image-20230807234107815" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072341119.png" alt="image-20230807234107815"></a></p><p>阿里云已经开始扣费了，价格是0.5元&#x2F;G流量，不包括存储费用，上个月扣了几块钱了。。看了下，最低的流量包是100G。。腾讯是10G好像，价格上也贵不少</p><p>总感觉流量扣的不对，没办法，开始上防盗链了。。。COS和OSS都上了。。后续有时间再把OSS文档迁移到COS吧，╮(╯▽╰)╭</p><h2 id="新增搜索功能"><a href="#新增搜索功能" class="headerlink" title="新增搜索功能"></a>新增搜索功能</h2><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072348757.png" title="image-20230807234835404" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072348757.png" alt="image-20230807234835404"></a></p><h2 id="新增评论系统"><a href="#新增评论系统" class="headerlink" title="新增评论系统"></a>新增评论系统</h2><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072337879.png" title="image-20230807233701749" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072337879.png" alt="image-20230807233701749"></a></p><h2 id="新增在线聊天系统"><a href="#新增在线聊天系统" class="headerlink" title="新增在线聊天系统"></a>新增在线聊天系统</h2><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072337780.png" title="image-20230807233728451" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072337780.png" alt="image-20230807233728451"></a></p><h2 id="语言改为中文"><a href="#语言改为中文" class="headerlink" title="语言改为中文"></a>语言改为中文</h2><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072338122.png" title="image-20230807233812817" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072338122.png" alt="image-20230807233812817"></a></p><h2 id="去掉了默认那个大图，直接展示文章"><a href="#去掉了默认那个大图，直接展示文章" class="headerlink" title="去掉了默认那个大图，直接展示文章"></a>去掉了默认那个大图，直接展示文章</h2><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072347459.png" title="image-20230807234701110" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072347459.png" alt="image-20230807234701110"></a></p><h2 id="新增友链"><a href="#新增友链" class="headerlink" title="新增友链"></a>新增友链</h2><p>这个友链也需要完善，时间上不够啊，有时间再弄吧</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072349572.png" title="image-20230807234921266" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072349572.png" alt="image-20230807234921266"></a></p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 日记 </category>
          
          <category> 2023年 </category>
          
          <category> 八月 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterfly </tag>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly安装文档(三)主题配置-1</title>
      <link href="/9effb4a6.html"/>
      <url>/9effb4a6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="语言"><a href="#语言" class="headerlink" title="语言"></a>语言</h2><p>修改站点配置文件 _config.yml</p><p>默认语言是 en</p><p>主题支持三种语言</p><ul><li>default(en)</li><li>zh-CN (简体中文)</li><li>zh-TW (繁体中文)</li></ul><h2 id="网站资料"><a href="#网站资料" class="headerlink" title="网站资料"></a>网站资料</h2><p>修改网站各种资料，例如标题、副标题和邮箱等个人资料，请修改博客根目录的_config.yml</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072057104.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072057104.png" alt="img"></a></p><h2 id="导航栏设置-Navigation-bar-settings"><a href="#导航栏设置-Navigation-bar-settings" class="headerlink" title="导航栏设置 (Navigation bar settings)"></a>导航栏设置 (Navigation bar settings)</h2><h3 id="参数设置"><a href="#参数设置" class="headerlink" title="参数设置"></a>参数设置</h3><p>主题配置文件中</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">nav:</span></span><br><span class="line">  <span class="attr">logo:</span> <span class="comment">#image</span></span><br><span class="line">  <span class="attr">display_title:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">fixed:</span> <span class="literal">false</span> <span class="comment"># fixed navigation bar</span></span><br></pre></td></tr></table></figure><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072058163.png" title="image-20230807205821105" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072058163.png" alt="image-20230807205821105"></a></p><h3 id="菜单-目录"><a href="#菜单-目录" class="headerlink" title="菜单&#x2F;目录"></a>菜单&#x2F;目录</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line"><span class="attr">Archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line"><span class="attr">Tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line"><span class="attr">Categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line"><span class="string">List||fas</span> <span class="attr">fa-list:</span></span><br><span class="line">  <span class="attr">Music:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">  <span class="attr">Movie:</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-video</span></span><br><span class="line"><span class="attr">Link:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-link</span></span><br><span class="line"><span class="attr">About:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-heart</span></span><br></pre></td></tr></table></figure><p>必须是 &#x2F;xxx&#x2F;，后面||分开，然后写图标名。</p><p>如果不希望显示图标，图标名可不写。</p><p>默认子目录是展开的，如果你想要隐藏，在子目录里添加 hide 。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">List||fas</span> <span class="string">fa-list||hide:</span></span><br><span class="line">  <span class="attr">Music:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">  <span class="attr">Movie:</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-video</span></span><br></pre></td></tr></table></figure><p>注意： 导航的文字可自行更改</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">首页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">时间轴:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="string">标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="string">分类:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="string">清单||fa</span> <span class="attr">fa-heartbeat:</span></span><br><span class="line">    <span class="string">音乐:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">    <span class="string">照片:</span> <span class="string">/Gallery/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-images</span></span><br><span class="line">    <span class="string">电影:</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-video</span></span><br><span class="line">  <span class="string">友链:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="string">关于:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-heart</span></span><br></pre></td></tr></table></figure><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072059133.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072059133.png" alt="img"></a></p><h2 id="代码-Code-Blocks"><a href="#代码-Code-Blocks" class="headerlink" title="代码 (Code Blocks)"></a>代码 (Code Blocks)</h2><blockquote><p>代码块中的所有功能只适用于 Hexo 自带的代码渲染</p><p>如果使用第三方的渲染器，不一定会有效</p></blockquote><h3 id="代码高亮主题"><a href="#代码高亮主题" class="headerlink" title="代码高亮主题"></a>代码高亮主题</h3><p>Butterfly 支持6种代码高亮样式：</p><ul><li>darker</li><li>pale night</li><li>light</li><li>ocean</li><li>mac</li><li>mac light</li></ul><p>修改 主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_theme:</span> <span class="string">light</span></span><br></pre></td></tr></table></figure><blockquote><p>darker</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072100889.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072100889.png" alt="img"></a></p><blockquote><p>pale night</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072100334.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072100334.png" alt="img"></a></p><blockquote><p>light</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072100700.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072100700.png" alt="img"></a></p><blockquote><p>ocean</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072101386.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072101386.png" alt="img"></a></p><blockquote><p>mac</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072101737.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072101737.png" alt="img"></a></p><blockquote><p>mac light</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072101442.png" title="image-20200731175026827" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072101442.png" alt="image-20200731175026827"></a></p><h3 id="代码复制"><a href="#代码复制" class="headerlink" title="代码复制"></a>代码复制</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_copy:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072101594.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072101594.png" alt="img"></a></p><h3 id="代码框展开-关闭"><a href="#代码框展开-关闭" class="headerlink" title="代码框展开&#x2F;关闭"></a>代码框展开&#x2F;关闭</h3><p>在默认情况下，代码框自动展开，可设置是否所有代码框都关闭状态，点击&gt;可展开代码</p><ul><li>true 全部代码框不展开，需点击&gt;打开</li><li>false 代码框展开，有&gt;点击按钮</li><li>none 不显示&gt;按钮</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_shrink:</span> <span class="literal">true</span> <span class="comment">#代码框不展开，需点击 &#x27;&gt;&#x27; 打开</span></span><br></pre></td></tr></table></figure><blockquote><p>你也可以在post&#x2F;page页对应的markdown文件front-matter添加highlight_shrink来独立配置。</p><p>当主题配置文件中的 highlight_shrink 设为true时，可在front-matter添加highlight_shrink: false来单独配置文章展开代码框。</p><p>当主题配置文件中的 highlight_shrink 设为false时，可在front-matter添加highlight_shrink: true来单独配置文章收缩代码框。</p></blockquote><p><code>highlight_shrink: true</code></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072102616.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072102616.png" alt="img"></a></p><p><code>highlight_shrink: false</code></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072103552.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072103552.png" alt="img"></a></p><p><code>highlight_shrink: none</code></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072103366.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072103366.png" alt="img"></a></p><h3 id="代码换行"><a href="#代码换行" class="headerlink" title="代码换行"></a>代码换行</h3><p>在默认情况下，Hexo 在编译的时候不会实现代码自动换行。如果你不希望在代码块的区域里有横向滚动条的话，那么你可以考虑开启这个功能。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">code_word_wrap:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>如果你是使用 highlight 渲染，需要找到你站点的 Hexo 配置文件_config.yml，将line_number改成false:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span> <span class="comment"># &lt;- 改这里</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span></span><br></pre></td></tr></table></figure><p>如果你是使用 prismjs 渲染，需要找到你站点的 Hexo 配置文件_config.yml，将line_number改成false:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">preprocess:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span> <span class="comment"># &lt;- 改这里</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>设置code_word_wrap之前:</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072104470.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072104470.png" alt="img"></a></p><p>设置code_word_wrap之后:</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072104153.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072104153.png" alt="img"></a></p><h3 id="代码高度限制"><a href="#代码高度限制" class="headerlink" title="代码高度限制"></a>代码高度限制</h3><blockquote><p>3.7.0 及以上支持</p></blockquote><p>可配置代码高度限制，超出的部分会隐藏，并显示展开按钮。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_height_limit:</span> <span class="literal">false</span> <span class="comment"># unit: px</span></span><br></pre></td></tr></table></figure><p>注意：</p><ol><li>单位是 px，直接添加数字，如 200</li><li>实际限制高度为 highlight_height_limit + 30 px ，多增加 30px 限制，目的是避免代码高度只超出highlight_height_limit<br>一点时，出现展开按钮，展开没内容。</li><li>不适用于隐藏后的代码块（ css 设置 display: none）</li></ol><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072105585.gif" title="hexo-theme-butterfly-docs-highlight-heigh-limit" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072105585.gif" alt="hexo-theme-butterfly-docs-highlight-heigh-limit"></a></p><h2 id="社交图标-Social-Settings"><a href="#社交图标-Social-Settings" class="headerlink" title="社交图标 (Social Settings)"></a>社交图标 (Social Settings)</h2><p>Butterfly支持 font-awesome v6 图标.</p><p>书写格式 图标名：url || 描述性文字 || color</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">fab fa-github:</span> <span class="string">https://github.com/xxxxx</span> <span class="string">||</span> <span class="string">Github</span> <span class="string">||</span> <span class="string">&quot;#hdhfbb&quot;</span></span><br><span class="line">  <span class="attr">fas fa-envelope:</span> <span class="string">mailto:xxxxxx@gmail.com</span> <span class="string">||</span> <span class="string">Email</span> <span class="string">||</span> <span class="string">&quot;#000000&quot;</span></span><br></pre></td></tr></table></figure><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072105121.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072105121.png" alt="img"></a></p><p>PC:</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072105313.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072105313.png" alt="img"></a></p><p>Mobile:</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072105225.png" title="1560603353743" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072105225.png" alt="1560603353743"></a></p><h2 id="头像"><a href="#头像" class="headerlink" title="头像"></a>头像</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">/img/avatar.png</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span> <span class="comment"># 头像会一直转圈</span></span><br></pre></td></tr></table></figure><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072106042.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072106042.png" alt="img"></a></p><h2 id="顶部图"><a href="#顶部图" class="headerlink" title="顶部图"></a>顶部图</h2><blockquote><p>如果不要显示顶部图，可直接配置 disable_top_img: true</p></blockquote><blockquote><p>顶部图的获取顺序，如果都没有配置，则不显示顶部图。</p><ol><li><p>页面顶部图的获取顺序：</p><p>各自配置的 top_img &gt; 配置文件的 default_top_img</p></li><li><p>文章页顶部图的获取顺序：</p><p>各自配置的 top_img &gt; cover &gt; 配置文件的 default_top_img</p></li></ol></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072106295.png" title="image-20230807210647228" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072106295.png" alt="image-20230807210647228"></a></p><p>其它页面 （tags&#x2F;categories&#x2F;自建页面）和 文章页 的 top_img ，请到对应的 md 页面设置front-matter中的top_img</p><p>以上所有的 top_img 可配置以下值</p><blockquote><p>3.2.0 以下版本的配置只支持</p><ul><li>留空，true 和 false - 显示默认的顔色</li><li>img链接 - 显示所配置的图片</li></ul></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072107929.png" title="image-20230807210721862" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072107929.png" alt="image-20230807210721862"></a></p><p>tag_per_img 和 category_per_img 是 3.2.0 新增的内容，可对 tag 和 category 进行单独的配置</p><p>并不推荐为每个 tag 和每个 category 都配置不同的顶部图，因为配置太多会拖慢生成速度</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">tag_per_img：</span></span><br><span class="line">  <span class="attr">aplayer:</span> <span class="string">https://xxxxxx.png</span></span><br><span class="line">  <span class="attr">android:</span> <span class="string">ddddddd.png</span></span><br><span class="line">  </span><br><span class="line"><span class="string">category_per_img：</span></span><br><span class="line">  <span class="string">随想:</span> <span class="string">hdhdh.png</span></span><br><span class="line">  <span class="string">推荐:</span> <span class="string">ddjdjdjd.png</span></span><br></pre></td></tr></table></figure><blockquote><p>top_img: false</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072107443.png" title="image-20200924224536013" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072107443.png" alt="image-20200924224536013"></a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072107817.png" title="image-20201027210949089" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072107817.png" alt="image-20201027210949089"></a></p><blockquote><p>top_img: orange</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072108160.png" title="image-20200924225024153" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072108160.png" alt="image-20200924225024153"></a></p><blockquote><p>top_img: ‘linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347)’</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072108023.png" title="image-20200924225300934" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072108023.png" alt="image-20200924225300934"></a></p><h2 id="文章封面"><a href="#文章封面" class="headerlink" title="文章封面"></a>文章封面</h2><p>文章的 markdown 文档上,在 Front-matter 添加 cover ,并填上要显示的图片地址。</p><p>如果不配置 cover,可以设置显示默认的 cover。</p><p>如果不想在首页显示 cover, 可以设置为 false。</p><blockquote><p>文章封面的获取顺序 Front-matter 的 cover &gt; 配置文件的 default_cover &gt; false</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="comment"># 是否显示文章封面</span></span><br><span class="line">  <span class="attr">index_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">aside_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">archives_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 封面显示的位置</span></span><br><span class="line">  <span class="comment"># 三个值可配置 left , right , both</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">both</span></span><br><span class="line">  <span class="comment"># 当没有设置cover时，默认的封面显示</span></span><br><span class="line">  <span class="attr">default_cover:</span> </span><br></pre></td></tr></table></figure><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072110069.png" title="image-20230807211011003" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072110069.png" alt="image-20230807211011003"></a></p><p>当配置多张图片时,会随机选择一张作为cover.此时写法应为</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">default_cover:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://file.crazywong.com/gh/jerryc127/CDN@latest/cover/default_bg.png</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://file.crazywong.com/gh/jerryc127/CDN@latest/cover/default_bg2.png</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://file.crazywong.com/gh/jerryc127/CDN@latest/cover/default_bg3.png</span></span><br></pre></td></tr></table></figure><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072110869.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072110869.png" alt="img"></a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072110295.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072110295.png" alt="img"></a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072110971.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072110971.png" alt="img"></a></p><blockquote><p>left</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072110677.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072110677.png" alt="img"></a></p><blockquote><p>right</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072111478.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072111478.png" alt="img"></a></p><blockquote><p>both</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072111182.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072111182.png" alt="img"></a></p><h2 id="页面-meta-显示"><a href="#页面-meta-显示" class="headerlink" title="页面 meta 显示"></a>页面 meta 显示</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">page:</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 主页文章日期是创建日或者更新日或都显示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">relative</span> <span class="comment"># date/relative 显示日期还是相对日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 主页是否显示分类</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false 主页是否显示标签</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 显示描述性文字</span></span><br><span class="line">  <span class="attr">post:</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 文章页日期是创建日或者更新日或都显示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">relative</span> <span class="comment"># date/relative 显示日期还是相对日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 文章页是否显示分类</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false 文章页是否显示标签</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 显示描述性文字</span></span><br></pre></td></tr></table></figure><blockquote><p>主页</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072111713.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072111713.png" alt="img"></a></p><blockquote><p>文章页</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072112598.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072112598.png" alt="img"></a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072112995.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072112995.png" alt="img"></a></p><p>date_format 是 3.2.0 新增的内容，配置时间显示明确时间还是相对时间</p><h2 id="主页文章节选-自动节选和文章页description"><a href="#主页文章节选-自动节选和文章页description" class="headerlink" title="主页文章节选(自动节选和文章页description)"></a>主页文章节选(自动节选和文章页description)</h2><p>因为主题UI的关係，主页文章节选只支持自动节选和文章页description。</p><p>在butterfly里，有四种可供选择</p><ol><li>description： 只显示description</li><li>both： 优先选择description，如果没有配置description，则显示自动节选的内容</li><li>auto_excerpt：只显示自动节选</li><li>false： 不显示文章内容</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">index_post_content:</span></span><br><span class="line">  <span class="attr">method:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">500</span> <span class="comment"># if you set method to 2 or 3, the length need to config</span></span><br></pre></td></tr></table></figure><p>description在front-matter里添加</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072113793.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072113793.png" alt="img"></a></p><h2 id="页面锚点"><a href="#页面锚点" class="headerlink" title="页面锚点"></a>页面锚点</h2><p>开启页面锚点后，当你在进行滚动时，页面链接会根据标题ID进行替换<br>(注意: 每替换一次，会留下一个历史记录。所以如果一篇文章有很多锚点的话，网页的历史记录会很多。)</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># anchor</span></span><br><span class="line"><span class="comment"># when you scroll in post , the url will update according to header id.</span></span><br><span class="line"><span class="attr">anchor:</span></span><br><span class="line">  <span class="attr">button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">always_show:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="comment"># the unicode value of Font Awesome icon, such as &#x27;\3423&#x27;</span></span><br><span class="line">  <span class="attr">auto_update:</span> <span class="literal">false</span> <span class="comment"># when you scroll in post, the URL will update according to header id.</span></span><br></pre></td></tr></table></figure><h2 id="图片描述"><a href="#图片描述" class="headerlink" title="图片描述"></a>图片描述</h2><p>可开启图片Figcaption描述文字显示</p><p>优先显示图片的 title 属性，然后是 alt 属性</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">photofigcaption:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072114836.png" title="img" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072114836.png" alt="img"></a></p><h2 id="复制相关配置"><a href="#复制相关配置" class="headerlink" title="复制相关配置"></a>复制相关配置</h2><p>可配置网站是否可以复制、复制的内容是否添加版权信息</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># copy settings</span></span><br><span class="line"><span class="section"># copyright: Add the copyright information after copied content (复制的内容后面加上版权信息)</span></span><br><span class="line">copy:</span><br><span class="line">  enable: true</span><br><span class="line">  copyright:</span><br><span class="line"><span class="code">    enable: true</span></span><br><span class="line"><span class="code">    limit_count: 50</span></span><br></pre></td></tr></table></figure><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072114926.png" title="image-20230807211429858" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072114926.png" alt="image-20230807211429858"></a></p><blockquote><p>添加版权信息后</p></blockquote><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Lorem ipsum dolor sit amet, test link consectetur adipiscing elit. Strong text pellentesque ligula commodo viverra vehicula. Italic text at ullamcorper enim. Morbi a euismod nibh. Underline text non elit nisl. Deleted text tristique, sem id condimentum tempus, metus lectus venenatis mauris, sit amet semper lorem felis a eros. Fusce egestas nibh at sagittis auctor. Sed ultricies ac arcu quis molestie. Donec dapibus nunc in nibh egestas, vitae volutpat sem iaculis. Curabitur sem tellus, elementum nec quam id, fermentum laoreet mi. Ut mollis ullamcorper turpis, vitae facilisis velit ultricies sit amet. Etiam laoreet dui odio, id tempus justo tincidunt id. Phasellus scelerisque nunc sed nunc ultricies accumsan.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">作者: Jerry</span><br><span class="line">连结: http://localhost:4000/posts/bd3c650b/<span class="params">#</span>Paragraph</span><br><span class="line">来源: Butterfly</span><br><span class="line">着作权归作者所有。商业转载请联络作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure><h2 id="文章页相关配置"><a href="#文章页相关配置" class="headerlink" title="文章页相关配置"></a>文章页相关配置</h2><h3 id="文章版权"><a href="#文章版权" class="headerlink" title="文章版权"></a>文章版权</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_copyright:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">decode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">author_href:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">CC</span> <span class="string">BY-NC-SA</span> <span class="number">4.0</span></span><br><span class="line">  <span class="attr">license_url:</span> <span class="string">https://creativecommons.org/licenses/by-nc-sa/4.0/</span></span><br></pre></td></tr></table></figure><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072115931.png" title="image-20210130161913121" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072115931.png" alt="image-20210130161913121"></a></p><h3 id="文章打赏"><a href="#文章打赏" class="headerlink" title="文章打赏"></a>文章打赏</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">QR_code:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/img/wechat.jpg</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">微信</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/img/alipay.jpg</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">支付宝</span></span><br></pre></td></tr></table></figure><h3 id="TOC"><a href="#TOC" class="headerlink" title="TOC"></a>TOC</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">expand:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">style_simple:</span> <span class="literal">false</span> <span class="comment"># for post</span></span><br><span class="line">  <span class="attr">scroll_percent:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072116217.png" title="image-20230807211609151" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072116217.png" alt="image-20230807211609151"></a></p><h3 id="为特定的文章配置"><a href="#为特定的文章配置" class="headerlink" title="为特定的文章配置"></a>为特定的文章配置</h3><p>在你的文章md文件的头部，加入toc_number和toc，并配置true或者false即可。</p><p>主题会优先判断文章Markdown的Front-matter是否有配置，如有，则以Front-matter的配置为准。否则，以主题配置文件中的配置为准</p><h3 id="相关文章"><a href="#相关文章" class="headerlink" title="相关文章"></a>相关文章</h3><blockquote><p>当文章封面设置为 false 时，或者没有获取到封面配置，相关文章背景将会显示主题色。</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">related_post:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span> <span class="comment"># 显示推荐文章数目</span></span><br><span class="line">  <span class="attr">date_type:</span> <span class="string">created</span> <span class="comment"># or created or updated 文章日期显示创建日或者更新日</span></span><br></pre></td></tr></table></figure><h3 id="文章过期提醒"><a href="#文章过期提醒" class="headerlink" title="文章过期提醒"></a>文章过期提醒</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Displays outdated notice for a post (文章过期提醒)</span></span><br><span class="line"><span class="attr">noticeOutdate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">flat</span> <span class="comment"># style: simple/flat</span></span><br><span class="line">  <span class="attr">limit_day:</span> <span class="number">365</span> <span class="comment"># When will it be shown</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top</span> <span class="comment"># position: top/bottom</span></span><br><span class="line">  <span class="attr">message_prev:</span> <span class="string">It</span> <span class="string">has</span> <span class="string">been</span></span><br><span class="line">  <span class="attr">message_next:</span> <span class="string">days</span> <span class="string">since</span> <span class="string">the</span> <span class="string">last</span> <span class="string">update,</span> <span class="string">the</span> <span class="string">content</span> <span class="string">of</span> <span class="string">the</span> <span class="string">article</span> <span class="string">may</span> <span class="string">be</span> <span class="string">outdated.</span></span><br></pre></td></tr></table></figure><p>limit_day： 距离更新时间多少天才显示文章过期提醒</p><p>message_prev ： 天数之前的文字</p><p>message_next：天数之后的文字</p><h4 id="文章编辑按钮"><a href="#文章编辑按钮" class="headerlink" title="文章编辑按钮"></a>文章编辑按钮</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Post edit</span></span><br><span class="line"><span class="comment"># Easily browse and edit blog source code online.</span></span><br><span class="line"><span class="attr">post_edit:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># url: https://github.com/user-name/repo-name/edit/branch-name/subdirectory-name/</span></span><br><span class="line">  <span class="comment"># For example: https://github.com/jerryc127/butterfly.js.org/edit/main/source/</span></span><br><span class="line">  <span class="attr">url:</span></span><br></pre></td></tr></table></figure><h3 id="文章分页按钮"><a href="#文章分页按钮" class="headerlink" title="文章分页按钮"></a>文章分页按钮</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># post_pagination (分页)</span></span><br><span class="line"><span class="comment"># value: 1 || 2 || false</span></span><br><span class="line"><span class="comment"># 1: The &#x27;next post&#x27; will link to old post</span></span><br><span class="line"><span class="comment"># 2: The &#x27;next post&#x27; will link to new post</span></span><br><span class="line"><span class="comment"># false: disable pagination</span></span><br><span class="line"><span class="attr">post_pagination:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072117788.png" title="image-20230807211745729" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072117788.png" alt="image-20230807211745729"></a></p><h2 id="Footer-设置"><a href="#Footer-设置" class="headerlink" title="Footer 设置"></a>Footer 设置</h2><h3 id="博客年份"><a href="#博客年份" class="headerlink" title="博客年份"></a>博客年份</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">since:</span> <span class="number">2018</span></span><br></pre></td></tr></table></figure><h2 id="页脚自定义文本"><a href="#页脚自定义文本" class="headerlink" title="页脚自定义文本"></a>页脚自定义文本</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_text:</span> <span class="string">Hi,</span> <span class="string">welcome</span> <span class="string">to</span> <span class="string">my</span> <span class="string">&lt;a</span> <span class="string">href=&quot;https://butterfly.js.org/&quot;&gt;blog&lt;/a&gt;!</span></span><br></pre></td></tr></table></figure><h3 id="ICP"><a href="#ICP" class="headerlink" title="ICP"></a>ICP</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_text:</span> <span class="string">&lt;a</span> <span class="string">href=&quot;icp链接&quot;&gt;&lt;img</span> <span class="string">class=&quot;icp-icon&quot;</span> <span class="string">src=&quot;icp图片&quot;&gt;&lt;span&gt;备案号：xxxxxx&lt;/span&gt;&lt;/a&gt;</span></span><br></pre></td></tr></table></figure><h2 id="侧边栏设置-aside"><a href="#侧边栏设置-aside" class="headerlink" title="侧边栏设置 (aside)"></a>侧边栏设置 (aside)</h2><h3 id="侧边排版"><a href="#侧边排版" class="headerlink" title="侧边排版"></a>侧边排版</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span> <span class="comment"># display on mobile</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">right</span> <span class="comment"># left or right</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">archive:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">category:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_author:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">description:</span></span><br><span class="line">    <span class="attr">button:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">Follow</span> <span class="string">Me</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://github.com/xxxxxx</span></span><br><span class="line">  <span class="attr">card_announcement:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">This</span> <span class="string">is</span> <span class="string">my</span> <span class="string">Blog</span></span><br><span class="line">  <span class="attr">card_recent_post:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">5</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">sort:</span> <span class="string">date</span> <span class="comment"># date or updated</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_categories:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">expand:</span> <span class="string">none</span> <span class="comment"># none/true/false</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_tags:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">40</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">color:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">orderby:</span> <span class="string">random</span> <span class="comment"># Order of tags, random/name/length</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">1</span> <span class="comment"># Sort of order. 1, asc for ascending; -1, desc for descending</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_archives:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">monthly</span> <span class="comment"># yearly or monthly</span></span><br><span class="line">    <span class="attr">format:</span> <span class="string">MMMM</span> <span class="string">YYYY</span> <span class="comment"># eg: YYYY年MM月</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-1</span> <span class="comment"># Sort of order. 1, asc for ascending; -1, desc for descending</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_webinfo:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">post_count:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">last_push_date:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="访问人数-busuanzi-UV-和-PV"><a href="#访问人数-busuanzi-UV-和-PV" class="headerlink" title="访问人数 busuanzi (UV 和 PV)"></a>访问人数 busuanzi (UV 和 PV)</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">busuanzi:</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>如果需要修改 busuanzi 的 CDN 链接，可通过 主题配置文件 的 CDN 中的 option 进行修改</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">CDN:</span></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">  <span class="attr">busuanzi:</span> <span class="string">xxxxxxxxx</span></span><br></pre></td></tr></table></figure><h3 id="运行时间"><a href="#运行时间" class="headerlink" title="运行时间"></a>运行时间</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">runtimeshow:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">publish_date:</span> <span class="number">6</span><span class="string">/7/2018</span> <span class="number">00</span><span class="string">:00:00</span>  </span><br><span class="line">  <span class="comment">##网页开通时间</span></span><br><span class="line">  <span class="comment">#格式: 月/日/年 时间</span></span><br><span class="line">  <span class="comment">#也可以写成 年/月/日 时间</span></span><br></pre></td></tr></table></figure><h3 id="最新评论"><a href="#最新评论" class="headerlink" title="最新评论"></a>最新评论</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Aside widget - Newest Comments</span></span><br><span class="line"><span class="attr">newest_comments:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span></span><br><span class="line">  <span class="attr">storage:</span> <span class="number">10</span> <span class="comment"># unit: mins, save data to localStorage</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072120491.png" title="image-20230807212012418" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072120491.png" alt="image-20230807212012418"></a></p><h3 id="自定义添加栏目"><a href="#自定义添加栏目" class="headerlink" title="自定义添加栏目"></a>自定义添加栏目</h3><p><a href="https://butterfly.js.org/posts/ea33ab97/">https://butterfly.js.org/posts/ea33ab97/</a></p><h2 id="右下角按钮-Bottom-right-button"><a href="#右下角按钮-Bottom-right-button" class="headerlink" title="右下角按钮 (Bottom right button)"></a>右下角按钮 (Bottom right button)</h2><h3 id="简繁转换"><a href="#简繁转换" class="headerlink" title="简繁转换"></a>简繁转换</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">translate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 默认按钮显示文字(网站是简体，应设置为&#x27;default: 繁&#x27;)</span></span><br><span class="line">  <span class="attr">default:</span> <span class="string">简</span></span><br><span class="line">  <span class="comment">#网站默认语言，1: 繁体中文, 2: 简体中文</span></span><br><span class="line">  <span class="attr">defaultEncoding:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment">#延迟时间,若不在前, 要设定延迟翻译时间, 如100表示100ms,默认为0</span></span><br><span class="line">  <span class="attr">translateDelay:</span> <span class="number">0</span></span><br><span class="line">  <span class="comment">#当文字是简体时，按钮显示的文字</span></span><br><span class="line">  <span class="attr">msgToTraditionalChinese:</span> <span class="string">&quot;繁&quot;</span></span><br><span class="line">  <span class="comment">#当文字是繁体时，按钮显示的文字</span></span><br><span class="line">  <span class="attr">msgToSimplifiedChinese:</span> <span class="string">&quot;简&quot;</span></span><br></pre></td></tr></table></figure><h3 id="閲读模式"><a href="#閲读模式" class="headerlink" title="閲读模式"></a>閲读模式</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">readmode:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="夜间模式"><a href="#夜间模式" class="headerlink" title="夜间模式"></a>夜间模式</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dark mode</span></span><br><span class="line"><span class="attr">darkmode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># dark mode和 light mode切换按钮</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">autoChangeMode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Set the light mode time. The value is between 0 and 24. If not set, the default value is 6 and 18</span></span><br><span class="line">  <span class="attr">start:</span> <span class="comment"># 8</span></span><br><span class="line">  <span class="attr">end:</span> <span class="comment"># 22</span></span><br></pre></td></tr></table></figure><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072121962.png" title="image-20230807212134887" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072121962.png" alt="image-20230807212134887"></a></p><h3 id="滚动状态百分比"><a href="#滚动状态百分比" class="headerlink" title="滚动状态百分比"></a>滚动状态百分比</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># show scroll percent in scroll-to-top button</span></span><br><span class="line"><span class="attr">rightside_scroll_percent:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="按钮排序"><a href="#按钮排序" class="headerlink" title="按钮排序"></a>按钮排序</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Don&#x27;t modify the following settings unless you know how they work (非必要请不要修改 )</span></span><br><span class="line"><span class="comment"># Choose: readmode,translate,darkmode,hideAside,toc,chat,comment</span></span><br><span class="line"><span class="comment"># Don&#x27;t repeat 不要重复</span></span><br><span class="line"><span class="attr">rightside_item_order:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="comment"># readmode,translate,darkmode,hideAside</span></span><br><span class="line">  <span class="attr">show:</span> <span class="comment"># toc,chat,comment</span></span><br></pre></td></tr></table></figure><h3 id="标签外挂（Tag-Plugins）"><a href="#标签外挂（Tag-Plugins）" class="headerlink" title="标签外挂（Tag Plugins）"></a>标签外挂（Tag Plugins）</h3><p><a href="https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89">https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89</a></p><h2 id="Gallery相册图库"><a href="#Gallery相册图库" class="headerlink" title="Gallery相册图库"></a>Gallery相册图库</h2><p><a href="https://butterfly.js.org/posts/4aa8abbe/#Gallery%E7%9B%B8%E5%86%8A%E5%9C%96%E5%BA%AB">https://butterfly.js.org/posts/4aa8abbe/#Gallery%E7%9B%B8%E5%86%8A%E5%9C%96%E5%BA%AB</a><br>%86%8A%E5%9C%96%E5%BA%AB</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterfly </tag>
            
            <tag> 安装文档 </tag>
            
            <tag> 语言 </tag>
            
            <tag> 网站资料 </tag>
            
            <tag> 导航栏设置 </tag>
            
            <tag> 参数设置 </tag>
            
            <tag> 菜单/目录 </tag>
            
            <tag> 代码 </tag>
            
            <tag> 代码高亮主题 </tag>
            
            <tag> 代码复制 </tag>
            
            <tag> 代码框展开/关闭 </tag>
            
            <tag> 代码换行 </tag>
            
            <tag> 代码高度限制 </tag>
            
            <tag> 社交图标 </tag>
            
            <tag> 头像 </tag>
            
            <tag> 顶部图 </tag>
            
            <tag> 图片描述 </tag>
            
            <tag> 复制相关配置 </tag>
            
            <tag> 文章页相关配置 </tag>
            
            <tag> 文章版权 </tag>
            
            <tag> 文章打赏 </tag>
            
            <tag> TOC </tag>
            
            <tag> 相关文章 </tag>
            
            <tag> 文章过期提醒 </tag>
            
            <tag> 文章编辑按钮 </tag>
            
            <tag> 文章分页按钮 </tag>
            
            <tag> Footer设置 </tag>
            
            <tag> 页脚自定义文本 </tag>
            
            <tag> ICP </tag>
            
            <tag> 侧边栏设置 </tag>
            
            <tag> 侧边排版 </tag>
            
            <tag> 访问人数 </tag>
            
            <tag> 运行时间 </tag>
            
            <tag> 最新评论 </tag>
            
            <tag> 自定义添加栏目 </tag>
            
            <tag> 右下角按钮 </tag>
            
            <tag> 简繁转换 </tag>
            
            <tag> 閲读模式 </tag>
            
            <tag> 夜间模式 </tag>
            
            <tag> 滚动状态百分比 </tag>
            
            <tag> 按钮排序 </tag>
            
            <tag> 标签外挂 </tag>
            
            <tag> Gallery相册图库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly 安装文档(一) 快速开始</title>
      <link href="/9c175aca.html"/>
      <url>/9c175aca.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>在你的Hexo根目录里面</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br></pre></td></tr></table></figure><h2 id="应用主题"><a href="#应用主题" class="headerlink" title="应用主题"></a>应用主题</h2><p>修改 Hexo 根目录下的 _config.yml，把主题改为 butterfly</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: butterfly</span><br></pre></td></tr></table></figure><h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><p>如果你没有 pug 以及 stylus 的渲染器，请下载安装：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo<span class="literal">-renderer-pug</span> hexo<span class="literal">-renderer-stylus</span> <span class="literal">--save</span></span><br></pre></td></tr></table></figure><h2 id="升级建议"><a href="#升级建议" class="headerlink" title="升级建议"></a>升级建议</h2><blockquote><p>升级完成后，请到 Github 的 Releases 界面 或者 文档七 查看新版的更新内容。</p><p>里面有标注 _config 文件的变更内容（如有），请根据实际情况更新你的配置内容。</p></blockquote><p>为了减少升级主题后带来的不便，请使用以下方法（建议，可以不做）。</p><p>在 hexo 的根目录创建一个文件 _config.butterfly.yml，并把主题目录的 _config.yml 内容复制到 _config.butterfly.yml 去。(<br>注意: 复制的是主题的 _config.yml ，而不是 hexo 的 _config.yml)</p><blockquote><p>注意： 不要把主题目录的 _config.yml 删掉</p></blockquote><blockquote><p>注意： 以后只需要在 _config.butterfly.yml 进行配置就行。<br>如果使用了 _config.butterfly.yml， 配置主题的 _config.yml 将不会有效果。</p></blockquote><p>Hexo会自动合併主题中的 _config.yml 和 _config.butterfly.yml 里的配置，如果存在同名配置，会使用 _config.butterfly.yml<br>的配置，其优先度较高。</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072043458.png" title="image-20200805191531090" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072043458.png" alt="image-20200805191531090"></a></p><p>g&#x2F;202308072043458.png)</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Butterfly </tag>
            
            <tag> 安装文档 </tag>
            
            <tag> 插件 </tag>
            
            <tag> 主题 </tag>
            
            <tag> pug </tag>
            
            <tag> stylus </tag>
            
            <tag> 升级建议 </tag>
            
            <tag> _config.yml </tag>
            
            <tag> Releases </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>配置Picgo图床之COS、OSS、Github图床</title>
      <link href="/e27b9279.html"/>
      <url>/e27b9279.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>PicGo是一款开源的图片上传和管理工具，它提供了简单易用的界面和丰富的功能，方便用户上传、管理和分享图片。</p><p>以下是PicGo的一些主要特点和功能：</p><ol><li><p>图片上传：PicGo支持将本地图片快速上传到云存储服务，如七牛云、腾讯云、阿里云等。你可以选择自己喜欢的云存储服务，并通过PicGo将图片批量上传到云端。</p></li><li><p>图片压缩：PicGo内置了图片压缩功能，可以帮助你在上传图片之前对图片进行压缩，减小图片文件大小，提高网页加载速度。</p></li><li><p>图片编辑：PicGo提供了简单的图片编辑功能，包括裁剪、旋转、调整亮度、对比度等。你可以在上传图片之前对图片进行一些基本的编辑操作。</p></li><li><p>图片管理：PicGo可以帮助你管理上传的图片，包括查看上传记录、复制图片链接、删除图片等。你可以方便地管理自己上传的图片，并在需要时获取图片链接进行分享。</p></li><li><p>自定义配置：PicGo支持自定义配置，你可以根据自己的需求设置上传的命名规则、存储路径、图片样式等。这样可以更好地满足个性化的需求。</p></li></ol><p>总的来说，PicGo是一款功能强大且易于使用的图片上传和管理工具，适用于个人用户、开发者和博主等多种场景。它可以帮助你更高效地上传、管理和分享图片。</p><h2 id="准备PicGo"><a href="#准备PicGo" class="headerlink" title="准备PicGo"></a>准备PicGo</h2><p>官网下载地址：<a href="https://github.com/Molunerfinn/picgo/releases">https://github.com/Molunerfinn/picgo/releases</a></p><p>关注【程序员朱永胜】回复【1012】获取安装包，免费高速下载</p><h2 id="配置Github"><a href="#配置Github" class="headerlink" title="配置Github"></a>配置Github</h2><h3 id="获取Token"><a href="#获取Token" class="headerlink" title="获取Token"></a>获取Token</h3><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072004107.png" title="image-20230807200430847" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072004107.png" alt="image-20230807200430847"></a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072005596.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072005596.png"></a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072005838.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072005838.png"></a></p><h3 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h3><p>随便创建一个仓库即可，我创建的是<code>pic</code>仓库</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072007898.png" title="image-20230807200705649" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072007898.png" alt="image-20230807200705649"></a></p><h3 id="配置PicGo"><a href="#配置PicGo" class="headerlink" title="配置PicGo"></a>配置PicGo</h3><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072007590.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072007590.png"></a></p><h2 id="配置腾讯云COS"><a href="#配置腾讯云COS" class="headerlink" title="配置腾讯云COS"></a>配置腾讯云COS</h2><h3 id="获取Token-1"><a href="#获取Token-1" class="headerlink" title="获取Token"></a>获取Token</h3><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072008733.png" title="image-20230807200848497" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072008733.png" alt="image-20230807200848497"></a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072009686.png" title="image-20230807200924438" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072009686.png" alt="image-20230807200924438"></a></p><h3 id="创建存储桶"><a href="#创建存储桶" class="headerlink" title="创建存储桶"></a>创建存储桶</h3><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072010800.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072010800.png"></a></p><p>设置为公有读私有写</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072011353.png" title="image-20230807201130106" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072011353.png" alt="image-20230807201130106"></a></p><p>参考下面模版填写</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072011921.png" title="image-20230807201157858" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072011921.png" alt="image-20230807201157858"></a></p><h2 id="设置阿里云OSS"><a href="#设置阿里云OSS" class="headerlink" title="设置阿里云OSS"></a>设置阿里云OSS</h2><h3 id="获取密钥"><a href="#获取密钥" class="headerlink" title="获取密钥"></a>获取密钥</h3><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072013528.png" title="image-20230807201312297" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072013528.png" alt="image-20230807201312297"></a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072013156.png" title="image-20230807201333924" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072013156.png" alt="image-20230807201333924"></a></p><h3 id="创建Bucket"><a href="#创建Bucket" class="headerlink" title="创建Bucket"></a>创建Bucket</h3><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072014937.png" title="image-20230807201403715" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072014937.png" alt="image-20230807201403715"></a></p><h3 id="参考下面模版"><a href="#参考下面模版" class="headerlink" title="参考下面模版"></a>参考下面模版</h3><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072014966.png" title="image-20230807201422903" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072014966.png" alt="image-20230807201422903"></a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072015802.png" title="image-20230807201500562" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072015802.png" alt="image-20230807201500562"></a><br>qcloud.com&#x2F;blog&#x2F;202308072015802.png)</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> PicGo </tag>
            
            <tag> 图床 </tag>
            
            <tag> COS </tag>
            
            <tag> OSS </tag>
            
            <tag> 图片上传 </tag>
            
            <tag> 图片压缩 </tag>
            
            <tag> 图片编辑 </tag>
            
            <tag> 图片管理 </tag>
            
            <tag> 自定义配置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jrebel与Xrebel激活</title>
      <link href="/db82e5f2.html"/>
      <url>/db82e5f2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>JRebel和XRebel是两个非常有用的工具，可以显著提升Java开发人员的生产力和应用程序性能。</p><p>JRebel是一个强大的Java开发工具，它允许开发人员在不重新启动应用程序的情况下进行代码修改和调试。传统上，每次修改Java代码都需要重新编译和重新启动应用程序，这会浪费大量的时间。但是，使用JRebel，你可以即时看到你的代码修改的效果，无需重新启动应用程序。这种即时反馈的能力极大地提高了开发效率，缩短了开发周期。</p><p>JRebel通过在运行时重新加载修改的类文件，使得代码修改能够立即生效。它支持各种Java框架和服务器，包括Spring、Hibernate、Tomcat等。此外，JRebel还提供了与常见IDE（如Eclipse、IntelliJ<br>IDEA）的集成，使得使用JRebel变得更加方便。</p><p>XRebel是另一个强大的工具，专注于Java应用程序的性能监控和优化。它可以实时监测和分析应用程序的性能瓶颈，帮助开发人员快速定位和解决性能问题。XRebel提供了一个直观的用户界面，显示了应用程序的请求和响应时间、数据库查询、HTTP会话等关键指标。它还能够检测潜在的性能问题，如慢查询、内存泄漏等，并提供相应的建议和解决方案。</p><p>XRebel支持各种Java应用程序，包括Web应用程序、企业应用程序等。它可以与常见的Java开发工具和服务器集成，如Eclipse、IntelliJ<br>IDEA、Tomcat等。</p><p>综上所述，JRebel和XRebel是两个非常有用的工具，可以极大地提升Java开发人员的生产力和应用程序性能。JRebel允许即时查看代码修改的效果，而XRebel帮助开发人员实时监测和优化应用程序的性能。这两个工具的结合将为你的Java开发带来更高效和优化的体验。</p><p>激活可以参考这篇文章：</p><p><a href="https://blog.zysicyj.top/db82e5f2">Jrebel与Xrebel激活</a></p><h1 id="一、XRebel有哪些功能"><a href="#一、XRebel有哪些功能" class="headerlink" title="一、XRebel有哪些功能"></a>一、XRebel有哪些功能</h1><blockquote><p>直接在调用接口时查看报错信息，不需要去服务器上看日志文件，避免繁琐定位日志问题，还在一次次的切窗口去翻日志？？？</p></blockquote><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS8wODMwLTEzLnBuZw?x-oss-process=image/format,png" class="gallery-item"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS8wODMwLTEzLnBuZw?x-oss-process=image/format,png"></a></p><blockquote><p>查看接口内部处理时间，可以通过这个分析并优化程序性能</p></blockquote><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS8wODMwLTE0LnBuZw?x-oss-process=image/format,png" class="gallery-item"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS8wODMwLTE0LnBuZw?x-oss-process=image/format,png"></a></p><blockquote><p>查看所有的IO操作，详细SQL，SQL耗时都有哦，神奇啊！！！！</p></blockquote><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS8wODMwLTE1LnBuZw?x-oss-process=image/format,png" class="gallery-item"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS8wODMwLTE1LnBuZw?x-oss-process=image/format,png"></a></p><blockquote><p>查看日志。。</p></blockquote><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS8wODMwLTE2LnBuZw?x-oss-process=image/format,png" class="gallery-item"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS8wODMwLTE2LnBuZw?x-oss-process=image/format,png"></a></p><h1 id="二、下载JRebel"><a href="#二、下载JRebel" class="headerlink" title="二、下载JRebel"></a>二、下载JRebel</h1><blockquote><p>官方地址:<code>https://jrebel.com/software/xrebel/download/thank-you/?file=xrebel/releases/xrebel-4.0.1.zip</code><br>私人提供:<code>https://weiyun-1253652709.cos.ap-guangzhou.myqcloud.com/xrebel.jar</code></p></blockquote><h1 id="三、启动"><a href="#三、启动" class="headerlink" title="三、启动"></a>三、启动</h1><blockquote><p>启动项目时，指定javaagent即可 :<code>-javaagent:xrebel.jar</code>，后面jar包地址根据实际环境修改</p></blockquote><h1 id="TIP：idea中springboot项目启动"><a href="#TIP：idea中springboot项目启动" class="headerlink" title="TIP：idea中springboot项目启动"></a>TIP：idea中springboot项目启动</h1><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS9RUSVFNiU4OCVBQSVFNSU5QiVCRTIwMTkwOTA0MTQyNTMzLnBuZw?x-oss-process=image/format,png" class="gallery-item"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS9RUSVFNiU4OCVBQSVFNSU5QiVCRTIwMTkwOTA0MTQyNTMzLnBuZw?x-oss-process=image/format,png"></a></p><h1 id="四、查看"><a href="#四、查看" class="headerlink" title="四、查看"></a>四、查看</h1><blockquote><p>项目启动后，在项目根url后面输入<code>/xrebel</code>，并点击<code>start</code>即可</p></blockquote><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS8wODMwLTcucG5n?x-oss-process=image/format,png" class="gallery-item"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS8wODMwLTcucG5n?x-oss-process=image/format,png"></a></p><blockquote><p>点击之后是这样子滴</p></blockquote><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS8wODMwLTgucG5n?x-oss-process=image/format,png" class="gallery-item"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS8wODMwLTgucG5n?x-oss-process=image/format,png"></a></p><blockquote><p>这时候进swagger就能直接看到了哦！</p></blockquote><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS8wODMwLTkucG5n?x-oss-process=image/format,png" class="gallery-item"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93ZWl5dW4tMTI1MzY1MjcwOS5jb3MuYXAtZ3Vhbmd6aG91Lm15cWNsb3VkLmNvbS8wODMwLTkucG5n?x-oss-process=image/format,png"></a></p><h1 id="五、激活"><a href="#五、激活" class="headerlink" title="五、激活"></a>五、激活</h1><p><a href="https://img-blog.csdnimg.cn/20190830160349890.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25qcGtodWFu,size_16,color_FFFFFF,t_70" title="在这里插入图片描述" class="gallery-item"><img src="https://img-blog.csdnimg.cn/20190830160349890.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25qcGtodWFu,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></a></p><hr><p>请关注某绿色软件【程序员朱永胜】回复<code>1011</code>获取</p><h1 id="双击打开"><a href="#双击打开" class="headerlink" title="双击打开"></a>双击打开</h1><h1 id=""><a href="#" class="headerlink" title=""></a><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072033983.png" title="image-20230806204843304" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/blog/202308072033983.png" alt="image-20230806204843304"></a></h1><h1 id="获取UUID"><a href="#获取UUID" class="headerlink" title="获取UUID"></a>获取UUID</h1><p>打开<a href="https://www.guidgen.com/">https://www.guidgen.com/</a> 生成一个UUID</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308062049509.png" title="image-20230806204943298" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308062049509.png" alt="image-20230806204943298"></a></p><h1 id="激活"><a href="#激活" class="headerlink" title="激活"></a>激活</h1><p>拷贝UUID到这里即可激活</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308062051024.png" title="image-20230806205133975" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308062051024.png" alt="image-20230806205133975"></a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308062052295.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308062052295.png"></a></p><h1 id="设置成开机自启"><a href="#设置成开机自启" class="headerlink" title="设置成开机自启"></a>设置成开机自启</h1><p>方法一启动后不久会自动挂掉，建议使用方法二</p><h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><p>打开cmd执行以下命令</p><p>这里要注意，必须为管理员启动</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/159049441042300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/159049441042300.png"></a></p><p>注册为服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sc create jrebel激活 binPath= &quot;C:\Users\17602\Documents\install\ReverseProxy_windows_386.exe&quot;</span><br></pre></td></tr></table></figure><p>设置开机自启</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sc config jrebel激活 start= auto</span><br></pre></td></tr></table></figure><p>启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sc start jrebel激活</span><br></pre></td></tr></table></figure><h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><p>关注【程序员朱永胜】回复【1022】获取安装包</p><p>打开cmd执行以下命令</p><p>这里要注意，必须为管理员启动</p><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/159049441042300.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/159049441042300.png"></a></p><p>将压缩包解压</p><p>执行命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd C:\Users\17602\Downloads\nssm-2.24-101-g897c7ad\win64\</span><br></pre></td></tr></table></figure><p>注册</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nssm install jrebel激活2 &quot;C:\Users\17602\Documents\install\ReverseProxy_windows_386.exe&quot;</span><br></pre></td></tr></table></figure><p>启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sc start jrebel激活</span><br></pre></td></tr></table></figure><p><a href="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/158997103589000.png" class="gallery-item"><img src="http://blog-1253652709.cos.ap-guangzhou.myqcloud.com/pasteimageintomarkdown/2023-09-05/158997103589000.png"></a></p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 开发效率 </tag>
            
            <tag> JRebel </tag>
            
            <tag> XRebel </tag>
            
            <tag> Java开发工具 </tag>
            
            <tag> 即时查看代码修改的效果 </tag>
            
            <tag> 实时监测和优化应用程序的性能 </tag>
            
            <tag> 开发周期 </tag>
            
            <tag> 性能监控 </tag>
            
            <tag> 性能瓶颈 </tag>
            
            <tag> 性能问题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IntelliJ IDEA 2023.2 最新变化</title>
      <link href="/571b0dbd.html"/>
      <url>/571b0dbd.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>IntelliJ IDEA 2023.2 引入 AI Assistant，通过一组由 AI 提供支持的功能助力开发。 升级的 IntelliJ 分析器现在提供编辑器内提示，使分析进程更加直观详尽。<br>此版本还包括有助于简化开发工作流的 GitLab 集成，以及其他多项值得关注的更新和改进，如下所述：</p><h1 id="主要更新"><a href="#主要更新" class="headerlink" title="主要更新"></a>主要更新</h1><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959533.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959533.png"></a></p><h3 id="AI-Assistant"><a href="#AI-Assistant" class="headerlink" title="AI Assistant"></a>AI Assistant</h3><p>限定访问 Ultimate 在此版本中，我们为 IntelliJ IDEA 引入了一项重要补充 – AI Assistant。 AI Assistant 当前具备一组由 AI<br>提供支持的初始功能，提供集成式 AI 聊天，可以完成一些任务，例如自动编写文档注释、建议名称、生成提交消息等。 JetBrains AI 服务为<br>AI Assistant 提供技术支持，此服务目前可以连接到 OpenAI，后续还将包含其他语言模型提供商。 要访问 Assistant 的 AI 功能，您需要安装<br>AI Assistant 插件并使用 JetBrains Account 登录 JetBrains AI 服务。 JetBrains AI 服务的初始可用性可能受限。 有关 AI<br>Assistant<br>的更多信息以及访问说明，请查阅<a href="https://blog.jetbrains.com/idea/2023/06/ai-assistant-in-jetbrains-ides/">这篇博文</a>。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959642.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959642.png"></a></p><h3 id="编辑器内性能提示"><a href="#编辑器内性能提示" class="headerlink" title="编辑器内性能提示"></a>编辑器内性能提示</h3><p>Ultimate 在 IntelliJ IDEA 2023.2 中，我们增强了 IntelliJ 分析器，为应用程序性能提供更有价值且易于理解的洞察。<br>新的编辑器内提示可供快速逐行分析代码性能，帮助您更快识别和解决问题。 编辑器装订区域中的颜色编码注解可以高亮显示关键方法，让您专注于性能瓶颈。<br>因此，您不再需要使用 _Flame Graph_（火焰图）和 _Call Tree_（调用树）视图执行彻底、耗时的分析。<br>在这篇<a href="https://blog.jetbrains.com/idea/2023/05/intellij-idea-2023-2-eap/#In-editorperformancehints">博文</a><br>中了解详情。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959607.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959607.png"></a></p><h3 id="GitLab-集成"><a href="#GitLab-集成" class="headerlink" title="GitLab 集成"></a>GitLab 集成</h3><p>IntelliJ IDEA 2023.2 引入了与 GitLab 的集成，帮助简化您的开发工作流。 现在，您可以直接在 IDE 中使用 <em>Merge Requests</em><br>（合并请求）功能：查看请求列表、检查更改、留下评论，以及导航到相关视图。 <a href="https://blog.jetbrains.com/2023/07/25/gitlab-support-in-jetbrains-ides/">了解详情</a>。</p><h1 id="用户体验"><a href="#用户体验" class="headerlink" title="用户体验"></a>用户体验</h1><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959553.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959553.png"></a></p><h3 id="Search-Everywhere-（随处搜索）中的文本搜索"><a href="#Search-Everywhere-（随处搜索）中的文本搜索" class="headerlink" title="Search Everywhere_（随处搜索）中的文本搜索"></a>Search Everywhere_（随处搜索）中的文本搜索</h3><p>Search Everywhere_（随处搜索）（按两次 Shift）主要用于搜索文件、类、方法、操作和设置。 在此更新后，它将包含类似于 <em>Find in Files</em><br>（在文件中查找）的文本搜索功能。 现在，当给定查询的其他搜索结果很少或没有时，将显示文本搜索结果。 此功能默认启用，可以在<br>_Settings&#x2F;Preferences | Advanced Settings | Search Everywhere_（设置&#x2F;偏好设置 | 高级设置 |<br>随处搜索）中管理。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959581.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959581.png"></a></p><h3 id="新-UI-中的彩色项目标题"><a href="#新-UI-中的彩色项目标题" class="headerlink" title="新 UI 中的彩色项目标题"></a>新 UI 中的彩色项目标题</h3><p>IntelliJ IDEA 2023.2 引入了彩色标题，可以简化多个打开的项目之间的导航。 现在，您可以为每个项目分配唯一的颜色和图标，使其在工作区中更易区分。<br>标题现在默认带有预定义的颜色，但您也可以自定义。 要为项目设置新的颜色，首先右键点击标题，然后访问上下文菜单。 然后，选择<br>_Change Project Color_（更改项目颜色）选项，并从建议的列表中选择所需颜色，或者浏览调色盘。 如果您想禁用此功能，只需在上下文菜单中取消选择<br><em>Show Project Gradient</em><br>（显示项目渐变）选项。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959569.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959569.png"></a></p><h3 id="在-Windows-和-Linux-上的主工具栏中重做了汉堡包菜单"><a href="#在-Windows-和-Linux-上的主工具栏中重做了汉堡包菜单" class="headerlink" title="在 Windows 和 Linux 上的主工具栏中重做了汉堡包菜单"></a>在 Windows 和 Linux 上的主工具栏中重做了汉堡包菜单</h3><p>我们改进了 Windows 和 Linux 上新 UI 中主工具栏汉堡包菜单的行为。 点击菜单图标后，元素现在水平显示在工具栏上方。<br>此外，现在还有一个选项可以将此菜单转换为单独的工具栏，此选项的路径为 <em>View | Appearance | Main menu as a Separate Toolbar</em><br>（视图 | 外观 |<br>主菜单作为单独的工具栏）。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959104.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959104.png"></a></p><h3 id="在-Project-（项目）视图中按修改时间对文件进行排序"><a href="#在-Project-（项目）视图中按修改时间对文件进行排序" class="headerlink" title="在 _Project_（项目）视图中按修改时间对文件进行排序"></a>在 _Project_（项目）视图中按修改时间对文件进行排序</h3><p>IntelliJ IDEA 2023.2 添加了备受期待的功能，让您可以根据修改时间在 _Project_（项目）视图中排列文件。<br>每当项目中有更改被保存时，这个新功能就会自动重排文件。 要启用此功能，首先打开 _Project_（项目）视图中的竖三点菜单，然后选择<br>_Tree Appearance | Sort by Modification Time_（树外观 |<br>按修改时间排序）。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959174.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959174.png"></a></p><h3 id="新-UI-中带有浅色标题的浅色主题"><a href="#新-UI-中带有浅色标题的浅色主题" class="headerlink" title="新 UI 中带有浅色标题的浅色主题"></a>新 UI 中带有浅色标题的浅色主题</h3><p>在 v2023.2 中，我们通过引入替代的 <em>Light with Light Header</em><br>（带有浅色标题的浅色主题）选项提升了_浅色_主题的用户体验，该选项可为窗口标题、工具提示和通知气球提供匹配的浅色。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959161.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959161.png"></a></p><h3 id="更新了-macOS-上的窗口控件"><a href="#更新了-macOS-上的窗口控件" class="headerlink" title="更新了 macOS 上的窗口控件"></a>更新了 macOS 上的窗口控件</h3><p>在 macOS 上以全屏模式使用新 UI<br>时，窗口控件现在将在主工具栏上显示，而不是像以前一样在浮动栏上显示。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959213.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959213.png"></a></p><h3 id="在新-UI-中移除了-Linux-上的标题栏"><a href="#在新-UI-中移除了-Linux-上的标题栏" class="headerlink" title="在新 UI 中移除了 Linux 上的标题栏"></a>在新 UI 中移除了 Linux 上的标题栏</h3><p>为了方便 Linux 用户，新 UI 中移除了操作系统的原生标题，使界面更加整洁。 默认将显示 IDE 的自定义标题，该标题提供了一系列工作区自定义选项。<br>如果您希望将标题还原为之前的外观，请取消选择 _Settings | Appearance &amp; Behavior | Appearance | UI Options_（设置 |<br>外观与行为 | 外观 | UI 选项）中的 <em>Merge main menu with window title</em><br>（将主菜单与窗口标题合并）选项。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959154.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959154.png"></a></p><h3 id="检查描述中的语法高亮显示"><a href="#检查描述中的语法高亮显示" class="headerlink" title="检查描述中的语法高亮显示"></a>检查描述中的语法高亮显示</h3><p>在 _Settings &#x2F; Preferences | Editor | Inspections_（设置&#x2F;偏好设置 | 编辑器 |<br>检查）中，代码示例现在将包含语法高亮显示，让您可以更容易理解是什么触发了检查并决定使其处于活跃状态还是停用状态。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959183.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959183.png"></a></p><h3 id="在项目目录之间单击导航"><a href="#在项目目录之间单击导航" class="headerlink" title="在项目目录之间单击导航"></a>在项目目录之间单击导航</h3><p>在 _Project_（项目）视图中，新增了 _Open Directories with Single Click_（单击打开目录）选项，可以更快展开和收起项目文件夹，更快响应。<br>点击竖三点菜单后，可以从下拉菜单中选择该选项。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959630.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959630.png"></a></p><h3 id="改进了主工具栏自定义"><a href="#改进了主工具栏自定义" class="headerlink" title="改进了主工具栏自定义"></a>改进了主工具栏自定义</h3><p>我们扩展了新 UI 主工具栏的自定义选项。 现在，您可以使用下拉菜单快速选择要添加到工具栏的操作。 右键点击任意微件，选择 <em>Add to<br>Main Toolbar</em><br>（添加到主工具栏），然后浏览可用选项。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959584.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959584.png"></a></p><h3 id="Settings-Preferences-（设置-偏好设置）中的推荐插件"><a href="#Settings-Preferences-（设置-偏好设置）中的推荐插件" class="headerlink" title="Settings&#x2F;Preferences_（设置&#x2F;偏好设置）中的推荐插件"></a>Settings&#x2F;Preferences_（设置&#x2F;偏好设置）中的推荐插件</h3><p>为了让您可以更轻松地为特定项目配置 IDE 以及通过插件扩展其功能，我们更新了 <em>Settings&#x2F;Preferences | Plugins</em><br>（设置&#x2F;偏好设置 | 插件）部分的 UI。<br>它现在包含一组推荐插件，根据您的项目具体情况自动定义，并在列表顶部显示。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959577.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959577.png"></a></p><h3 id="更新了Services（服务）工具窗口中-Run-Debug-（运行-调试）"><a href="#更新了Services（服务）工具窗口中-Run-Debug-（运行-调试）" class="headerlink" title="更新了Services（服务）工具窗口中 _Run&#x2F;Debug_（运行&#x2F;调试）"></a>更新了Services（服务）工具窗口中 _Run&#x2F;Debug_（运行&#x2F;调试）</h3><p>微件的 UI 我们重做了 _Services_（服务）工具窗口中运行和调试操作的 UI，使工具栏外观与主 <em>Run&#x2F;Debug</em><br>（运行&#x2F;调试）微件一致。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959619.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959619.png"></a></p><h3 id="在-Run-（运行）微件中固定运行配置"><a href="#在-Run-（运行）微件中固定运行配置" class="headerlink" title="在 _Run_（运行）微件中固定运行配置"></a>在 _Run_（运行）微件中固定运行配置</h3><p>为了简化多个运行配置的管理，我们在 _Run_（运行）微件中实现了固定首选配置的选项。 要将运行配置添加到 <em>Pinned</em><br>（固定）部分，首先打开其名称旁边的竖三点菜单，然后选择 _Pin_（固定）。 如果有多个固定的配置，在列表中拖放即可轻松排列。<br>#Java</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959626.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959626.png"></a></p><h3 id="新检查和其他代码分析改进"><a href="#新检查和其他代码分析改进" class="headerlink" title="新检查和其他代码分析改进"></a>新检查和其他代码分析改进</h3><p>我们改进并扩展了 Java 检查，帮助您维护优质代码并更有效地检测潜在问题。 当模式引用与实参不匹配时，新的 _Incorrect<br>‘MessageFormat’ pattern_（’MessageFormat’ 模式不正确）检查会发出警告，并且它还会检测 <code>MessageFormat</code> 模式中引号和大括号的错误用法。<br>此外，IDE 现在将报告带有显式 <code>ChronoField</code> 或 <code>ChronoUnit</code> 实参的调用，并建议将其替换为更具体的方法的调用，从而简化代码。<br>在这篇<a href="https://blog.jetbrains.com/idea/2023/05/intellij-idea-2023-2-eap-2/#Newinspectionsandothercodeanalysisimprovementss_and_other_improvements">博文</a><br>中详细了解 IntelliJ IDEA 2023.2<br>中的新检查和其他代码分析改进。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959640.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959640.png"></a></p><h3 id="格式字符串的代码高亮显示和导航"><a href="#格式字符串的代码高亮显示和导航" class="headerlink" title="格式字符串的代码高亮显示和导航"></a>格式字符串的代码高亮显示和导航</h3><p>现在，将文本光标置于格式说明符上后，IDE 将高亮显示相应实参和指向它的其他说明符。 此外，您现在可以使用 <em>Go To Declaration</em><br>（转到声明）(Ctrl+B)<br>跳转到特定格式字符串占位符的关联代码位置。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959020.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959020.png"></a></p><h3 id="改进了对-Javadoc-注释中-snippet-标记的支持"><a href="#改进了对-Javadoc-注释中-snippet-标记的支持" class="headerlink" title="改进了对 Javadoc 注释中 @snippet 标记的支持"></a>改进了对 Javadoc 注释中 <code>@snippet</code> 标记的支持</h3><p>IntelliJ IDEA 改进了 Javadoc 注释中的 <code>@snippet</code> 标记功能。 它允许在 <code>@snippet</code> 标记内添加标记注释，并在文档中正确呈现。<br>代码区域已得到支持，您可以指定要在 Javadoc 注释中引用的代码部分。 此外，IDE 现在还支持在 <code>@snippet</code><br>标记内包含外部代码段，这将允许您引用存储在单独文件或源中的代码段，并将其包含在 Javadoc<br>文档中。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959078.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959078.png"></a></p><h3 id="扩展了多个选定成员的重构选项"><a href="#扩展了多个选定成员的重构选项" class="headerlink" title="扩展了多个选定成员的重构选项"></a>扩展了多个选定成员的重构选项</h3><p>我们添加了新方式，可供同时将特定重构应用于多个成员。 现在，您可以在 _Project_（项目）或 _Structure_（结构）工具窗口中直接选择多个成员，同时对其调用<br>_Extract Delegate_（提取委托）、_Extract Interface_（提取接口）、_Extract Superclass_（提取超类）、_Pull Members Up_（向上拉取成员）和<br>_Push Members Down_（向下推送成员）。 此外，IntelliJ IDEA 现在支持以多文本光标选择进行扩展范围的重构，包括 _Encapsulate<br>Fields_（封装字段）、_Move Static Members_（移动 static 成员）、_Extract Delegate_（提取委托）、_Extract Interface_（提取接口）和<br>_Extract Superclass_（提取超类）。 要利用此功能，请将文本光标放置在您希望应用重构的各成员中，IDE<br>将自动在重构对话框中预选并检查这些成员。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959060.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959060.png"></a></p><h3 id="改进了堆栈跟踪分析的导航"><a href="#改进了堆栈跟踪分析的导航" class="headerlink" title="改进了堆栈跟踪分析的导航"></a>改进了堆栈跟踪分析的导航</h3><p>为了改进堆栈跟踪分析并更快地解决 bug，IntelliJ IDEA<br>现在可以准确猜测报告中方法的位置，即使行号不可用或已偏离。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959089.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959089.png"></a></p><h3 id="增强了动态-SQL-查询的污点分析"><a href="#增强了动态-SQL-查询的污点分析" class="headerlink" title="增强了动态 SQL 查询的污点分析"></a>增强了动态 SQL 查询的污点分析</h3><p>Ultimate IntelliJ IDEA 现在可以更好地分析 Java 和 Kotlin 中 SQL 的串联和内插，检测潜在的不安全查询，使代码避免可能的 SQL<br>注入漏洞。</p><h1 id="Scala"><a href="#Scala" class="headerlink" title="Scala"></a>Scala</h1><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959113.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959113.png"></a></p><h3 id="更出色的-Scala-3-支持"><a href="#更出色的-Scala-3-支持" class="headerlink" title="更出色的 Scala 3 支持"></a>更出色的 Scala 3 支持</h3><p>IntelliJ IDEA 2023.2 增强了 Scala 3 支持，专注于简化开发体验。 值得注意的改进包括对 Scala 3 枚举高亮显示的修正、枚举定义导航，以及多种上下文中枚举<br>case 的正确解析。 TASTy 反编译器得到显著增强，确保对 Akka、Cats、Play、ZIO 等流行 Scala 库进行准确的反编译。<br>此外，调试器中的 <code>scala-expression-compiler</code> 集成也将为 Scala 开发者提供更好的调试体验。 其他改进包括 Scala 3<br>通用应用方法的增强补全提示、对 IArray<br>的编辑器内支持，以及对“更少大括号”语法的改进支持。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959170.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959170.png"></a></p><h3 id="更好的-sbt-支持"><a href="#更好的-sbt-支持" class="headerlink" title="更好的 sbt 支持"></a>更好的 sbt 支持</h3><p>此版本对 IntelliJ IDEA 的 sbt 支持进行了许多改进。 重新打开项目后，为 sbt 设置的环境变量将被保留并正确处理。 重新设计的设置页面<br>_File | Settings | Build, Execution, Deployment | Build Tools | sbt_（文件 | 设置 | 构建、执行、部署 | 构建工具 |<br>sbt）更为易用，并新增了 _Environment variables_（环境变量）字段，因此，您可以将自定义环境变量传递到 sbt-shell<br>进程。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959482.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959482.png"></a></p><h3 id="ScalaDoc-呈现"><a href="#ScalaDoc-呈现" class="headerlink" title="ScalaDoc 呈现"></a>ScalaDoc 呈现</h3><p>在这个版本中，ScalaDoc 的快速文档与 Javadoc 的更加一致。 现在，显示的声明中的注解、关键字和文字将根据所选主题高亮显示。<br>如果超出可用空间，扩展的特征和类的列表将分成多行。 此外，文档中现在也支持 Scala 3<br>关键字。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959505.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959505.png"></a></p><h3 id="修正了类型推断错误"><a href="#修正了类型推断错误" class="headerlink" title="修正了类型推断错误"></a>修正了类型推断错误</h3><p>新版本对某些复杂或罕见情况下的无效类型推断进行了许多修正，例如类型具有复杂边界、sealed 特征层次结构可能不清晰或在复杂模式匹配中的情况。</p><h3 id="Zinc-作为默认编译器"><a href="#Zinc-作为默认编译器" class="headerlink" title="Zinc 作为默认编译器"></a>Zinc 作为默认编译器</h3><p>鉴于 Zinc 最近的性能改进，我们在 v2023.2 中将其设为默认增量编译器。 这确保了对 Scala 3 新功能（包括 <code>inline</code> 方法）的增量编译的全面支持。</p><h3 id="改进了源目录和目标目录的管理"><a href="#改进了源目录和目标目录的管理" class="headerlink" title="改进了源目录和目标目录的管理"></a>改进了源目录和目标目录的管理</h3><p>目标文件夹的子文件夹不再自动包含为源，除非它们被标记为托管。 这将加快在生成源代码的项目中进行搜索的速度。 此外，IDE<br>还为 <code>sbt-projectmatrix</code> 提供了更好的支持。</p><h1 id="性能分析器"><a href="#性能分析器" class="headerlink" title="性能分析器"></a>性能分析器</h1><p>—– <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959514.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959514.png"></a></p><h3 id="从-Run-（运行）工具窗口使用分析功能"><a href="#从-Run-（运行）工具窗口使用分析功能" class="headerlink" title="从 _Run_（运行）工具窗口使用分析功能"></a>从 _Run_（运行）工具窗口使用分析功能</h3><p>Ultimate 在 IntelliJ IDEA 2023.2 中，您可以直接从 _Run_（运行）工具窗口轻松访问 IntelliJ 分析器的功能。 使用新按钮，点击一下即可调用<br>_Attach IntelliJ Profiler_（附加 IntelliJ 分析器）和 _Capture Memory Snapshot_（捕获内存快照）操作，无需打开 <em>Profiler</em><br>（分析器）工具窗口或从头启动应用程序。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959496.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959496.png"></a></p><h3 id="默认挂钟分析模式"><a href="#默认挂钟分析模式" class="headerlink" title="默认挂钟分析模式"></a>默认挂钟分析模式</h3><p>Ultimate 我们将挂钟分析模式设为默认选项，增强了 IntelliJ IDEA 2023.2 中的分析体验。 此分析方法会考虑在方法中花费的总时间，包括等待时间。<br>它以毫秒为测量单位，是更强大、更直观的选项。</p><h1 id="运行-调试"><a href="#运行-调试" class="headerlink" title="运行&#x2F;调试"></a>运行&#x2F;调试</h1><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959539.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959539.png"></a></p><h3 id="Reactor-Mono-和-Flux-值求算"><a href="#Reactor-Mono-和-Flux-值求算" class="headerlink" title="Reactor Mono 和 Flux 值求算"></a>Reactor <code>Mono</code> 和 <code>Flux</code> 值求算</h3><p>Ultimate 调试反应式应用程序时，您现在可以轻松求算 <code>Mono</code> 和 <code>Flux</code> 类型的监视和局部变量的值。 IDE 现在会在调试会话期间进行检测，并在<br>_Variables_（变量）视图中提供相应的 <code>get</code> 或 <code>collectList</code> 链接，点击即可立即计算 Reactive Streams 条目。<br>默认情况下，调试器会获取 <code>Flux</code> 的前 100 个条目。 您可以在 <em>File | Settings | Languages &amp; Frameworks | Reactive Streams</em><br>（文件 | 设置 | 语言和框架 | Reactive<br>Streams）中配置此数量。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959545.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959545.png"></a></p><h3 id="Gradle、Maven-和-JPS-项目的持续测试"><a href="#Gradle、Maven-和-JPS-项目的持续测试" class="headerlink" title="Gradle、Maven 和 JPS 项目的持续测试"></a>Gradle、Maven 和 JPS 项目的持续测试</h3><p>我们扩展了自动测试功能，使其与 Maven、Gradle 和 JPS 构建系统完全兼容。 我们还使持续测试模式更易激活。 要启用该模式，请使用<br>_Run&#x2F;Debug_（运行&#x2F;调试）工具窗口中新增的 _Rerun Automatically_（自动重新运行）按钮。<br>每当更改保存时，测试都会自动运行，对代码更新提供即时反馈。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959903.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959903.png"></a></p><h3 id="return-语句的内联断点"><a href="#return-语句的内联断点" class="headerlink" title="return 语句的内联断点"></a>return 语句的内联断点</h3><p>IntelliJ IDEA 提供了对直接在 return 语句处设置断点的改进支持，类似于已在 lambda 表达式中实现的设置方式。<br>这一改进将为开发者提供更高的调试精度和更深入的代码分析，带来更有价值的代码行为和返回值洞察。 要设置内联断点，只需右键点击语句旁边的装订区域并选择<br><em>return</em> 选项即可。</p><h1 id="版本控制系统"><a href="#版本控制系统" class="headerlink" title="版本控制系统"></a>版本控制系统</h1><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959958.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959958.png"></a></p><h3 id="提交特定代码行的选项"><a href="#提交特定代码行的选项" class="headerlink" title="提交特定代码行的选项"></a>提交特定代码行的选项</h3><p>IntelliJ IDEA 2023.2 引入了一项备受期待的功能，可供有选择地提交代码区块的特定部分。 要执行部分提交，请选择区块中的行，然后从上下文菜单中调用<br>_Include these lines into commit_（将所选行包含到提交中）。 区块将被分为单独的行，所选行将被高亮显示。<br>您可以使用复选框或上下文菜单在选区中添加或排除行。</p><h1 id="性能"><a href="#性能" class="headerlink" title="性能"></a>性能</h1><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959046.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959046.png"></a></p><h3 id="轻松生成共享索引的新工具"><a href="#轻松生成共享索引的新工具" class="headerlink" title="轻松生成共享索引的新工具"></a>轻松生成共享索引的新工具</h3><p>IntelliJ IDEA 2023.2 提供了新的命令行工具，用于快速构建和上传共享索引。 它旨在简化团队合作并消除本地索引大型项目花费的时间。<br>新工具将简化为团队生成共享索引的过程，只需几下点击，无需多个脚本和服务。 <a href="https://blog.jetbrains.com/idea/2023/05/intellij-idea-2023-2-eap/#Newtoolforeasilygeneratingsharedindexes">了解详情</a>。</p><h1 id="框架和技术"><a href="#框架和技术" class="headerlink" title="框架和技术"></a>框架和技术</h1><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959036.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959036.png"></a></p><h3 id="在-WSL-上运行和调试"><a href="#在-WSL-上运行和调试" class="headerlink" title="在 WSL 上运行和调试"></a>在 WSL 上运行和调试</h3><p>Tomcat Ultimate 从 IntelliJ IDEA 2023.2 开始，您可以在适用于 Linux 的 Windows 子系统 (WSL) 上运行和调试部署到 Tomcat<br>的应用程序。 要在 WSL 上使用基于 Tomcat 的应用程序，您需要在 <code>/etc/environment</code> 或 <code>~/.bashrc</code> 文件中声明 <code>JAVA_HOME</code><br>环境变量。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959971.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959971.png"></a></p><h3 id="在-HTTP-客户端中使用-TLS-发送-gRPC-请求"><a href="#在-HTTP-客户端中使用-TLS-发送-gRPC-请求" class="headerlink" title="在 HTTP 客户端中使用 TLS 发送 gRPC 请求"></a>在 HTTP 客户端中使用 TLS 发送 gRPC 请求</h3><p>Ultimate 您现在可以在 HTTP 客户端中通过传输层安全 (TLS) 发送 gRPC 请求。 TLS 提供加密和身份验证，确保数据传输的保密性和完整性。<br>请求语法支持 <code>https://</code> 和 <code>grpcs://</code><br>架构。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959025.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959025.png"></a></p><h3 id="针对-Swagger-Codegen-的改进"><a href="#针对-Swagger-Codegen-的改进" class="headerlink" title="针对 Swagger Codegen 的改进"></a>针对 Swagger Codegen 的改进</h3><p>Ultimate 设置 Swagger Codegen 配置时，IDE 现在将提供更好的用户体验。 我们重做了 _Edit Swagger Codegen Configuration_（编辑<br>Swagger Codegen 配置）对话框，让您可以更轻松地根据需求定制运行配置。 另外，您现在还可以直接从装订区域访问 Swagger Codegen<br>运行配置，无需指定额外设置。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959353.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959353.png"></a></p><h3 id="HTTP-客户端中对-Swagger-和-OpenAPI-架构的支持"><a href="#HTTP-客户端中对-Swagger-和-OpenAPI-架构的支持" class="headerlink" title="HTTP 客户端中对 Swagger 和 OpenAPI 架构的支持"></a>HTTP 客户端中对 Swagger 和 OpenAPI 架构的支持</h3><p>Ultimate HTTP 客户端现在能够理解 Swagger 和 OpenAPI 规范，并为 JSON<br>请求正文提供相应的代码补全选项。 <a href="https://www.jetbrains.com.cn/idea/whatsnew/2023-2/img/Redoc_UI_previews_for_OpenAPI_and_Swagger_files.png"><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959537.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959537.png"></a> </a></p><h3 id="OpenAPI-和-Swagger-文件的-Redoc-UI-预览"><a href="#OpenAPI-和-Swagger-文件的-Redoc-UI-预览" class="headerlink" title="OpenAPI 和 Swagger 文件的 Redoc UI 预览"></a>OpenAPI 和 Swagger 文件的 Redoc UI 预览</h3><p>Ultimate IntelliJ IDEA 现已支持 OpenAPI 和 Swagger 规范文件（包括 YAML 和 JSON 文件）的 <a href="https://redocly.com/">Redoc UI</a><br>预览，允许您在 IDE 内的 Redoc 和 Swagger UI 之间切换。 通过 Redocly 集成，您可以从 IntelliJ IDEA 中访问 <em>Try it</em><br>控制台，使用它设置参数并向 API<br>发送请求。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959485.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959485.png"></a></p><h3 id="JavaScript-中的-JSON-正文补全"><a href="#JavaScript-中的-JSON-正文补全" class="headerlink" title="JavaScript 中的 JSON 正文补全"></a>JavaScript 中的 JSON 正文补全</h3><p>Ultimate IDE 现在为 JavaScript 代码中的 JSON 对象键提供补全，例如使用 <code>fetch()</code> 调用或引用 Axios 库的代码。 Spring MVC<br>服务器端点现已得到支持，未来将有更多服务器框架加入支持列表。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959552.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959552.png"></a> ###<br>HTTP 客户端中对 JavaScript 导入的支持 Ultimate 在 IntelliJ IDEA 2023.2 中，现在可以通过导入的模块共享 HTTP 客户端请求处理程序的通用<br>JavaScript 代码。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959618.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959618.png"></a></p><h3 id="HTTP-客户端中响应的-PDF-和-HTML-预览"><a href="#HTTP-客户端中响应的-PDF-和-HTML-预览" class="headerlink" title="HTTP 客户端中响应的 PDF 和 HTML 预览"></a>HTTP 客户端中响应的 PDF 和 HTML 预览</h3><p>Ultimate IntelliJ IDEA 现在能够在 HTTP 客户端的请求结果中显示 PDF 和 HTML<br>文件的预览。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959614.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959614.png"></a></p><h3 id="HTTP-客户端-CLI-中对-GraphQL-和-WebSocket-的支持"><a href="#HTTP-客户端-CLI-中对-GraphQL-和-WebSocket-的支持" class="headerlink" title="HTTP 客户端 CLI 中对 GraphQL 和 WebSocket 的支持"></a>HTTP 客户端 CLI 中对 GraphQL 和 WebSocket 的支持</h3><p>Ultimate 您现在可以在 IntelliJ IDEA<br>中使用 <a href="https://blog.jetbrains.com/idea/2022/12/http-client-cli-run-requests-and-tests-on-ci/">HTTP 客户端 CLI</a> 与<br>GraphQL API 交互，并与服务建立 WebSocket<br>连接，用于测试或自动化脚本。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959658.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959658.png"></a></p><h3 id="VM-options-（虚拟机选项）中-Spring-Boot-配置键的自动补全"><a href="#VM-options-（虚拟机选项）中-Spring-Boot-配置键的自动补全" class="headerlink" title="_VM options_（虚拟机选项）中 Spring Boot 配置键的自动补全"></a>_VM options_（虚拟机选项）中 Spring Boot 配置键的自动补全</h3><p>Ultimate 设置新的 Spring Boot 运行配置时，_VM options_（虚拟机选项）字段为 <code>-D</code><br>标志后面出现的键提供自动补全选项。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959859.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959859.png"></a></p><h3 id="Spring-配置-Bean-不再需要注解处理器"><a href="#Spring-配置-Bean-不再需要注解处理器" class="headerlink" title="Spring 配置 Bean 不再需要注解处理器"></a>Spring 配置 Bean 不再需要注解处理器</h3><p>Ultimate 我们简化了在 IntelliJ IDEA 中使用 Spring 的自定义配置 Bean 时的用户体验。 IDE 现在会在属性和 YAML<br>配置文件中提供代码补全和验证，无需设置 Spring Boot<br>配置注解处理器。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959914.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959914.png"></a></p><h3 id="Kotlin-中对-Spring-AOP-的支持"><a href="#Kotlin-中对-Spring-AOP-的支持" class="headerlink" title="Kotlin 中对 Spring AOP 的支持"></a>Kotlin 中对 Spring AOP 的支持</h3><p>Ultimate 我们扩展了 IntelliJ IDEA 对在 Spring 应用程序中使用 AspectJ 的支持。 IDE 现在可为 Kotlin 代码提供分析和补全，此前已经为<br>Java 代码提供。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959945.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959945.png"></a></p><h3 id="针对检测-YAML-文件中不匹配值类型的新检查"><a href="#针对检测-YAML-文件中不匹配值类型的新检查" class="headerlink" title="针对检测 YAML 文件中不匹配值类型的新检查"></a>针对检测 YAML 文件中不匹配值类型的新检查</h3><p>Ultimate 在 IntelliJ IDEA 2023.2<br>中，我们引入了一项新检查，旨在消除 <a href="https://hitchdev.com/strictyaml/why/implicit-typing-removed/">Norway Problem</a> 并防止对<br>YAML 文件中布尔值的意外误解。 当列表主要由字符串组成但包含布尔式文字时，IntelliJ IDEA 将高亮显示此文字，指示潜在的不一致，并建议为其添加引号。<br>如果列表主要由布尔式文字（例如 <code>true</code>、<code>false</code>、<code>off</code>、<code>on</code>、<code>yes</code> 或 <code>no</code><br>）组成，则偏离此模式的任何文字都将被高亮显示为可能的错误，不过，在这种情况下不会建议具体的快速修复。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959056.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959056.png"></a></p><h3 id="对编辑-AsyncAPI-文件的支持"><a href="#对编辑-AsyncAPI-文件的支持" class="headerlink" title="对编辑 AsyncAPI 文件的支持"></a>对编辑 AsyncAPI 文件的支持</h3><p>Ultimate 现在，在 IntelliJ IDEA 中使用 AsyncAPI 规范格式更加简单。 IDE 支持架构验证功能，并为引用、_Endpoints_（端点）视图和<br>_Editor Preview_（编辑器预览）窗格提供了代码补全。</p><h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959064.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959064.png"></a></p><h3 id="在-Docker-镜像层内预览文件"><a href="#在-Docker-镜像层内预览文件" class="headerlink" title="在 Docker 镜像层内预览文件"></a>在 Docker 镜像层内预览文件</h3><p>现在可以在 _Services_（服务）工具窗口中轻松访问和预览 Docker 镜像层的内容。 从列表选择镜像，选择 _Show layers_（显示层），然后点击<br>_Analyze image for more information_（分析镜像以获得更多信息）。 这将打开层中存储的文件列表，您可以右键点击文件，然后点击<br>_Open File_（打开文件）（对于二进制文件，则为 <em>Download File</em><br>（下载文件）），在编辑器中轻松打开所选文件。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959981.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959981.png"></a></p><h3 id="将-Docker-容器设为作为运行配置的-Before-Launch-（启动前）任务运行"><a href="#将-Docker-容器设为作为运行配置的-Before-Launch-（启动前）任务运行" class="headerlink" title="将 Docker 容器设为作为运行配置的 _Before Launch_（启动前）任务运行"></a>将 Docker 容器设为作为运行配置的 _Before Launch_（启动前）任务运行</h3><p>现在，可以将 Docker 运行配置指定为 _Before Launch_（启动前）任务，从而在另一个配置之前运行。 IDE 将等待当前运行的容器恢复正常，然后再启动下一个运行配置。<br>要将 Docker 运行配置放入队列中，首先创建配置，然后通过 <em>Modify options | Add before launch task | Run configuration</em><br>（修改选项 | 添加启动前任务 | 运行配置）将其添加到相关容器中。</p><h1 id="Kubernetes"><a href="#Kubernetes" class="headerlink" title="Kubernetes"></a>Kubernetes</h1><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959225.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959225.png"></a></p><h3 id="对单个项目中多个-kubeconfig-文件的支持"><a href="#对单个项目中多个-kubeconfig-文件的支持" class="headerlink" title="对单个项目中多个 kubeconfig 文件的支持"></a>对单个项目中多个 kubeconfig 文件的支持</h3><p>Ultimate 这项新引入的功能允许您在单个项目中设置多个 kubeconfig 文件。 这简化了处理多个集群或在同一项目中的不同集群上使用环境的体验。<br>转到 _File | Settings | Build, Execution, Deployment | Kubernetes_（文件 | 设置 | 构建、执行、部署 |<br>Kubernetes）即可设置文件。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959309.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959309.png"></a></p><h3 id="查看部署日志"><a href="#查看部署日志" class="headerlink" title="查看部署日志"></a>查看部署日志</h3><p>Ultimate 现在，您可以在 _Services_（服务）工具窗口中查看 Kubernetes 集群中的部署日志。 右键点击树中的 <em>Deployment</em><br>（部署），然后从上下文菜单中选择 _Follow Log_（关注日志）或 _Download Log_（下载日志）。</p><h1 id="Web-开发"><a href="#Web-开发" class="headerlink" title="Web 开发"></a>Web 开发</h1><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959321.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959321.png"></a></p><h3 id="针对-JavaScript-和-TypeScript-改进了错误格式设置"><a href="#针对-JavaScript-和-TypeScript-改进了错误格式设置" class="headerlink" title="针对 JavaScript 和 TypeScript 改进了错误格式设置"></a>针对 JavaScript 和 TypeScript 改进了错误格式设置</h3><p>Ultimate 我们在 IntelliJ IDEA 2023.2 中关注如何改进呈现 JavaScript 和 TypeScript 中类型错误的方式。<br>现在，您的错误和警告将以可读性更高的方式格式化，使代码中的问题更易发现。 这适用于所有 TypeScript 和一些最常见的 JavaScript<br>错误，甚至包括本地化后的错误。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959371.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959371.png"></a></p><h3 id="CSS-嵌套支持"><a href="#CSS-嵌套支持" class="headerlink" title="CSS 嵌套支持"></a>CSS 嵌套支持</h3><p>Ultimate IntelliJ IDEA 2023.2 现在支持 <a href="https://www.w3.org/TR/css-nesting-1/">CSS 嵌套</a>。<br>我们实现了语法支持和检查，新检查会在嵌套选择器以标识符或函数符号开头时发出提醒。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959418.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959418.png"></a></p><h3 id="Vue-语言服务器支持"><a href="#Vue-语言服务器支持" class="headerlink" title="Vue 语言服务器支持"></a>Vue 语言服务器支持</h3><p>Ultimate Vue 语言服务器（VLS，又称 Volar）支持可在快速导航和文档弹出窗口中提供更准确的错误检测和更好的类型信息。 VLS 默认将用于<br>TypeScript v5.0 及更高版本，TypeScript 服务的包装器将用于更低版本的 TypeScript。 在 _Settings | Languages &amp; Frameworks |<br>TypeScript | Vue_（设置 | 语言和框架 | TypeScript | Vue）下，您可以将 Vue 服务设置为在所有 TypeScript 版本上使用 VLS<br>集成。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959448.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959448.png"></a></p><h3 id="适用于-React-挂钩的新实时模板"><a href="#适用于-React-挂钩的新实时模板" class="headerlink" title="适用于 React 挂钩的新实时模板"></a>适用于 React 挂钩的新实时模板</h3><p>Ultimate 我们在 _Settings | Editor | Live Templates | React hooks_（设置 | 编辑器 | 实时模板 | React 挂钩）下为 React<br>挂钩添加了一组新的实时模板。 要使用实时模板，首先在编辑器中输入缩写，然后按 <em>Tab</em> 将其展开。</p><h1 id="代码质量工作流"><a href="#代码质量工作流" class="headerlink" title="代码质量工作流"></a>代码质量工作流</h1><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959591.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959591.png"></a></p><h3 id="捆绑了-Qodana-代码质量平台"><a href="#捆绑了-Qodana-代码质量平台" class="headerlink" title="捆绑了 Qodana 代码质量平台"></a>捆绑了 Qodana 代码质量平台</h3><p>通过完全集成我们旨在适应任何 CI&#x2F;CD<br>管道的智能静态分析引擎 <a href="https://www.jetbrains.com.cn/qodana/?utm_campaign=idea_x_qodana&utm_medium=referral&utm_source=whatsnew">JetBrains Qodana</a><br>，IntelliJ IDEA 2023.2 简化了静态分析工具的配置。 这一集成具备两大重要优势。 首先，简单的配置让您只需点击几下即可触发分析、查看项目级问题，以及在首选<br>CI&#x2F;CD 系统中设置质量门。 其次，您现在无需离开 IDE 即可直接查看服务器端分析结果。<br>在这篇<a href="https://blog.jetbrains.com/qodana/2023/07/qodana-is-out-of-preview-with-first-class-jetbrains-ide-integration/">博文</a><br>中详细了解 Qodana 及其最新版本。</p><h1 id="数据库工具"><a href="#数据库工具" class="headerlink" title="数据库工具"></a>数据库工具</h1><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959039.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959039.png"></a></p><h3 id="Redis-Cluster-支持"><a href="#Redis-Cluster-支持" class="headerlink" title="Redis Cluster 支持"></a>Redis Cluster 支持</h3><p>Ultimate 您现在可以连接到 Redis Cluster 并拥有与独立 Redis 相同的功能集。 连接到集群时，必须在所需 URL<br>之前输入 <code>jdbc:redis:cluster:</code>。 为此，您需要选择适当的连接类型。 如果连接到集群需要 SSH 隧道，应在 URL<br>中指明集群中所有节点的主机和端口。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959076.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959076.png"></a></p><h3 id="架构迁移对话框的新-UI"><a href="#架构迁移对话框的新-UI" class="headerlink" title="架构迁移对话框的新 UI"></a>架构迁移对话框的新 UI</h3><p>Ultimate 在 v2023.2 中，我们重做了架构迁移功能。<br>主要区别在于，同一个对象现在位于对话框两个部分的同一行上，从而更清晰地显示将在目标架构中添加、移除或更改的对象。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959109.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959109.png"></a></p><h3 id="数据编辑器的-Time-zone-（时区）设置"><a href="#数据编辑器的-Time-zone-（时区）设置" class="headerlink" title="数据编辑器的 _Time zone_（时区）设置"></a>数据编辑器的 _Time zone_（时区）设置</h3><p>Ultimate _Data Editor and Viewer_（数据编辑器和查看器）设置页面新增了 _Time zone_（时区）字段，用于设置显示 <code>datetime</code><br>值的时区。 <a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959129.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308051959129.png"></a></p><h3 id="对-Redshift-中外部数据库和数据共享的支持"><a href="#对-Redshift-中外部数据库和数据共享的支持" class="headerlink" title="对 Redshift 中外部数据库和数据共享的支持"></a>对 Redshift 中外部数据库和数据共享的支持</h3><p>Ultimate 现在，共享数据库及其内容均会内省。 创建这些数据库的数据共享也会内省。</p><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><ul><li>在这个版本中，我们为想要在 IDE 中使用特定 LSP 服务器提供编码辅助的插件开发者引入了 LSP API。 如果您已经创建了自己的编程语言或框架，则可以创建<br>LSP 服务器和插件以在 IDE 中获得支持。 请注意，此功能仅在 IDE<br>的付费版本中可用。 <a href="https://blog.jetbrains.com/platform/2023/07/lsp-for-plugin-developers/">了解详情</a>。</li><li>我们分解了 <a href="https://plugins.jetbrains.com/plugin/12494-big-data-tools">Big Data Tools</a> 插件，允许单独使用其各个部分。 这让<br>IntelliJ IDEA<br>得到六个新插件：<a href="https://plugins.jetbrains.com/plugin/21704-kafka">Kafka</a>、<a href="https://plugins.jetbrains.com/plugin/21700-spark">Spark</a>、<a href="https://plugins.jetbrains.com/plugin/21702-flink">Flink</a>、<a href="https://plugins.jetbrains.com/plugin/21706-remote-file-systems">Remote File Systems</a>、<a href="https://plugins.jetbrains.com/plugin/21701-big-data-file-viewer">Big Data File Viewer</a><br>和 <a href="https://plugins.jetbrains.com/plugin/21673-zeppelin">Zeppelin</a>。 如果您需要全部六个插件，仍然可以一键安装 Big Data<br>Tools 插件。</li><li><pre><code> IntelliJ IDEA 捆绑的 Android 插件现在提供 Android Studio Giraffe Beta 2 的所有功能，包括对 Android Gradle Plugin (AGP) 8.0.0 的支持。 请注意，此支持不包括需要登录 Firebase 帐号的功能。 </code></pre></li><li><pre><code>    从 2023.2 开始，最大堆大小 (-Xmx) 的默认值已更改为 2 GB。</code></pre></li></ul><p>�值已更改为 2 GB。</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
            <tag> 更新日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github Pages自定义域名</title>
      <link href="/eef35e86.html"/>
      <url>/eef35e86.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="Github-Pages自定义域名"><a href="#Github-Pages自定义域名" class="headerlink" title="Github Pages自定义域名"></a>Github Pages自定义域名</h1><p>当你想在网上发布内容时，配置Github Pages是一个很好的选择。如果你想要在自己的域名上发布，你可以使用Github<br>Pages来创建自己的网站。本文将介绍如何使用Github Pages自定义域名。</p><p>这里呢先列出前置条件：</p><ul><li>您的Github Pages能正常访问</li><li>拥有自己的域名并备案成功</li></ul><p>关于如何创建Github<br>Pages可以参考我之前的博客<a href="https://mp.weixin.qq.com/s/onryCTQHSSoFcJWAjziqig" title="https://mp.weixin.qq.com/s/onryCTQHSSoFcJWAjziqig">https://mp.weixin.qq.com/s/onryCTQHSSoFcJWAjziqig</a></p><p>下面详细介绍如何配置</p><h2 id="一、配置CName"><a href="#一、配置CName" class="headerlink" title="一、配置CName"></a>一、配置CName</h2><p>这里需要注意的是，记录值就是你的Github Pages地址，记录类型填写CName，主机记录就是你的二级域名地址</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308012309959.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308012309959.png"></a></p><h2 id="二、添加CNAME文件"><a href="#二、添加CNAME文件" class="headerlink" title="二、添加CNAME文件"></a>二、添加CNAME文件</h2><p>首先找到你的主分支，这个分支要和Setting里面配置的分支一致。然后创建一个NAME文件</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308012309973.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308012309973.png"></a></p><p>文件内容是<code>二级域名.自己的域名</code></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308012309943.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308012309943.png"></a></p><h2 id="三、访问配置的CNAME"><a href="#三、访问配置的CNAME" class="headerlink" title="三、访问配置的CNAME"></a>三、访问配置的CNAME</h2><p>这里等待几分钟，我这里几秒钟就刷出来了</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308012309952.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202308012309952.png"></a><br>com&#x2F;202308012309952.png)</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GithubPages </tag>
            
            <tag> 域名 </tag>
            
            <tag> Github Pages自定义域名 </tag>
            
            <tag> CName文件 </tag>
            
            <tag> 访问配置的CNAME </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+GithubPages免费搭建个人博客网站</title>
      <link href="/90bfb7d6.html"/>
      <url>/90bfb7d6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="Hexo-GithubPages免费搭建个人博客网站"><a href="#Hexo-GithubPages免费搭建个人博客网站" class="headerlink" title="Hexo+GithubPages免费搭建个人博客网站"></a>Hexo+GithubPages免费搭建个人博客网站</h1><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul><li><a href="#%E4%B8%80%E5%89%8D%E8%A8%80">一、前言</a></li><li><a href="#%E4%BA%8CGithub%E9%85%8D%E7%BD%AE">二、Github配置</a><ul><li><a href="#%E6%96%B0%E5%BB%BA%E5%90%8C%E5%90%8D%E4%BB%93%E5%BA%93">新建同名仓库</a></li><li><a href="#%E9%85%8D%E7%BD%AEPages">配置Pages</a></li></ul></li><li><a href="#%E4%B8%89%E5%AE%89%E8%A3%85Hexo">三、安装Hexo</a></li><li><a href="#%E5%9B%9B%E9%85%8D%E7%BD%AEhexo-deployer-git">四、配置hexo-deployer-git</a></li><li><a href="#%E4%BA%94%E8%AE%BF%E9%97%AE">五、访问</a></li><li><a href="#%E5%85%AD%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0">六、发布文章</a></li><li><a href="#%E4%B8%83%E5%AE%89%E8%A3%85%E4%B8%BB%E9%A2%98">七、安装主题</a></li></ul><h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>我之前开了好几年的云服务器了，实际上使用场景并不是很多，感觉有点浪费。前两个月都给关掉了，现在呢琢磨着弄一个免费的云服务搭建个人博客。暂时先弄Github的，Gitee的那个要身份证，暂时弄不了，等等吧。</p><p>需要准备的环境：</p><p>windows的话需要准备node环境，可以关注某绿色软件回复：1009 不限速下载软件安装</p><p>这里列一下清单</p><ol><li>node环境</li><li>能访问github并准备好github账号</li></ol><h2 id="二、Github配置"><a href="#二、Github配置" class="headerlink" title="二、Github配置"></a>二、Github配置</h2><h3 id="新建同名仓库"><a href="#新建同名仓库" class="headerlink" title="新建同名仓库"></a>新建同名仓库</h3><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021025.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021025.png"></a></p><p>这里需要注意的有两点</p><ol><li>仓库名格式： username.github.io</li><li>仓库需要设置public，不能设置为private</li></ol><h3 id="配置Pages"><a href="#配置Pages" class="headerlink" title="配置Pages"></a>配置Pages</h3><p>在仓库主页点击Setting</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021979.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021979.png"></a></p><p>这里的配置按照以下方式配置即可</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021001.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021001.png"></a></p><p>OK，那么这里需要配置的完成了。</p><h2 id="三、安装Hexo"><a href="#三、安装Hexo" class="headerlink" title="三、安装Hexo"></a>三、安装Hexo</h2><p>这里需要注意的是，需要先确认安装好了node环境，并配置了环境变量，可以通过cmd输入 <code>npm -v</code> 命令确认</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021887.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021887.png"></a></p><p>halo官网地址：<a href="https://hexo.io/zh-cn/" title="https://hexo.io/zh-cn/">https://hexo.io/zh-cn/</a></p><p>安装很简单，直接在cmd中输入 <code>npm install hexo-cli -g</code> 即可</p><p>此时，需要在本地建立一个仓库，这个仓库中的文件将来会同步到github上。</p><p>建立方式是在cmd中输入 <code>hexo init</code> ，需要说明的是，需要在指定目录执行该命令，我这里推荐一个简单的方式。</p><ol><li>进入需要初始化仓库的文件夹下</li><li>左上角输入cmd</li><li>回车</li></ol><p>这样打开的cmd窗口自动进入到当前目录了</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021066.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021066.png"></a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021947.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021947.png"></a></p><p>这样就算是创建好了，可以看到生成了一堆文件</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021916.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021916.png"></a></p><h2 id="四、配置hexo-deployer-git"><a href="#四、配置hexo-deployer-git" class="headerlink" title="四、配置hexo-deployer-git"></a>四、配置hexo-deployer-git</h2><p>官方地址：<a href="https://github.com/hexojs/hexo-deployer-git" title="https://github.com/hexojs/hexo-deployer-git">https://github.com/hexojs/hexo-deployer-git</a></p><p>安装也很简单，直接在cmd中输入  <code>npm install hexo-deployer-git --save</code></p><p>需要注意的是，执行该命令，需要在上面hexo初始化的仓库目录下执行，否则是没有用的。</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021574.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021574.png"></a></p><p>执行完效果如上图</p><p>我们需要关注的是生成的_config.yml文件，这里我们打开这个文件，并对部分配置做修改。</p><ol><li><p>修改url</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021546.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021546.png"></a></p></li><li><p>修改deploy</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021633.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021633.png"></a></p></li><li><p>这个配置可改可不改</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021598.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021598.png"></a></p></li></ol><p>修改完毕保存后，我们在cmd中执行命令 <code>helo d</code> 即可部署我们的项目，稍等几分钟，就能访问到了。</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021587.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021587.png"></a></p><p>正常到这边就结束了，但是后续多上传几次后就会报错</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021533.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021533.png"></a></p><p>这个原因可能是被限制了，我们需要配置token</p><p>打开github的settings</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021254.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021254.png"></a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021142.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021142.png"></a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021941.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021941.png"></a></p><p>权限勾选第一个就行了</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021896.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021896.png"></a></p><p>接下来我们需要在_config.yml中加上token</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021756.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021756.png"></a></p><h2 id="五、访问"><a href="#五、访问" class="headerlink" title="五、访问"></a>五、访问</h2><p>我的路由是：<a href="https://zysicyj.github.io/" title="https://zysicyj.github.io/">https://zysicyj.github.io/</a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021678.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021678.png"></a></p><h2 id="六、发布文章"><a href="#六、发布文章" class="headerlink" title="六、发布文章"></a>六、发布文章</h2><p>官方文档：<a href="https://hexo.io/zh-cn/docs/commands" title="https://hexo.io/zh-cn/docs/commands">https://hexo.io/zh-cn/docs/commands</a></p><p>执行<code>hexo -new</code> 可以创建文件</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021581.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021581.png"></a></p><p>执行上传命令 <code>helo g &amp;&amp; hexo d</code> ，然后等几分钟，能看到文件已经同步上去了</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021450.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021450.png"></a></p><h2 id="七、安装主题"><a href="#七、安装主题" class="headerlink" title="七、安装主题"></a>七、安装主题</h2><p>我是用的主题是bufferfly <a href="https://butterfly.js.org/posts/21cfbf15/#%E5%AE%89%E8%A3%9D" title="https://butterfly.js.org/posts/21cfbf15/#安裝">https://butterfly.js.org/posts/21cfbf15/#安裝</a></p><p>仓库根目录下拉取代码</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021441.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021441.png"></a></p><p>修改_config.yml</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021501.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021501.png"></a></p><p>安装插件</p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021568.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021568.png"></a></p><p>重新生成部署 <code>hexo -g &amp;&amp; hexo d</code></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021719.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021719.png"></a></p><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021226.png" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/aliyun/202307290021226.png"></a></p><p>后续的话还有不少可以优化的地方，比如hexo主题，分类和标签问题，图片显示问题等等，这个后续再写文章吧<br>个后续再写文章吧</p><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 网站 </tag>
            
            <tag> GithubPages </tag>
            
            <tag> 个人博客 </tag>
            
            <tag> 搭建 </tag>
            
            <tag> 免费 </tag>
            
            <tag> Github配置 </tag>
            
            <tag> 安装Hexo </tag>
            
            <tag> 配置hexo-deployer-git </tag>
            
            <tag> 访问 </tag>
            
            <tag> 发布文章 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IOC学习笔记（上篇）</title>
      <link href="/1a50bc40.html"/>
      <url>/1a50bc40.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="IOC学习笔记（上篇）"><a href="#IOC学习笔记（上篇）" class="headerlink" title="IOC学习笔记（上篇）"></a>IOC学习笔记（上篇）</h1><p>学习视频地址：<a href="https://time.geekbang.org/course/intro/100042601?tab=catalog">https://time.geekbang.org/course/detail/100042601-184049</a></p><h2 id="IOC容器的职责"><a href="#IOC容器的职责" class="headerlink" title="IOC容器的职责"></a>IOC容器的职责</h2><ul><li>依赖处理<ul><li>依赖查找</li><li>依赖注入</li></ul></li><li>生命周期管理<ul><li>容器</li><li>托管的资源（Java Beans 或其他资源<a href="#fn1">[1]</a>）</li></ul></li><li>配置<ul><li>容器</li><li>外部化配置</li><li>托管的资源（Java Beans或其他资源<a href="#fn1">[1:1]</a>）</li></ul></li></ul><h2 id="Ioc容器的实现"><a href="#Ioc容器的实现" class="headerlink" title="Ioc容器的实现"></a>Ioc容器的实现</h2><ul><li>Java SE<ul><li>Java Beans</li><li>Java ServiceLoader SPI<a href="#fn2">[2]</a></li><li>JNDI（Java Naming and Directory Interface）</li></ul></li><li>Java EE<ul><li>EJB（Enterprise Java Beans）</li><li>Servlet</li></ul></li><li>开源<ul><li>Apache Avalon（<a href="http://avalon.apache.org/closed.html%EF%BC%89">http://avalon.apache.org/closed.html）</a></li><li>PicoContainer（<a href="http://picocontainer.xn--com-c16s">http://picocontainer.com）</a></li><li>Google Guice（<a href="https://github.com/google/guice%EF%BC%89">https://github.com/google/guice）</a></li><li>Spring<br>Framework（<a href="https://spring.io/projects/spring-framework%EF%BC%89">https://spring.io/projects/spring-framework）</a></li></ul></li></ul><h2 id="传统IoC容器的实现"><a href="#传统IoC容器的实现" class="headerlink" title="传统IoC容器的实现"></a>传统IoC容器的实现</h2><ul><li>Java Beans作为IoC容器</li><li>特性<ul><li><a href="https://www.wolai.com/mRb4QGrHGR47QcZ7kJ1awQ">依赖查找</a></li><li>生命周期管理</li><li>配置元信息</li><li>事件</li><li>自定义</li><li>资源管理</li><li>持久化</li></ul></li><li><h2 id="规范"><a href="#规范" class="headerlink" title="规范"></a>规范</h2><h2 id="JavaBeans：https-www-oracle-com-technetwork-java-javase-tech-index-jsp-138795-html"><a href="#JavaBeans：https-www-oracle-com-technetwork-java-javase-tech-index-jsp-138795-html" class="headerlink" title="JavaBeans：https://www.oracle.com/technetwork/java/javase/tech/index-jsp-138795.html"></a>JavaBeans：<a href="https://_www.oracle.com_technetwork_java_javase_tech_index-jsp-138795/">https://www.oracle.com/technetwork/java/javase/tech/index-jsp-138795.html</a></h2>BeanContext：<a href="https://_docs.oracle.com_javase_8_docs_technotes_guides_beans_spec_beancontext/">https://docs.oracle.com/javase/8/docs/technotes/guides/beans/spec/beancontext.html</a></li></ul><h2 id="依赖查找VS依赖注入"><a href="#依赖查找VS依赖注入" class="headerlink" title="依赖查找VS依赖注入"></a>依赖查找VS依赖注入</h2><ul><li>优劣对比</li></ul><p><a href="https://cdn.nlark.com/yuque/0/2023/png/548519/1690289784867-c1b13ab7-3e36-48fe-84b0-5f23dccc0c3b.png#from=url&id=cgbg5&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=" class="gallery-item"><img src="https://cdn.nlark.com/yuque/0/2023/png/548519/1690289784867-c1b13ab7-3e36-48fe-84b0-5f23dccc0c3b.png#from=url&id=cgbg5&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="></a></p><h2 id="构造器注入VS-Setter注入"><a href="#构造器注入VS-Setter注入" class="headerlink" title="构造器注入VS Setter注入"></a>构造器注入VS Setter注入</h2><p>在选择构造器注入（Constructor Injection）和Setter注入（Setter Injection）之间，需要根据具体的情况来决定。<br>构造器注入是通过类的构造器来注入依赖对象，通常在创建对象的过程中完成注入。这种方式可以保证对象在创建完成后，其依赖关系已经完全被注入，使得对象在使用时具备完整的状态。构造器注入也可以使对象的依赖关系更加明确，减少了对于Setter方法的依赖。<br>Setter注入是通过类的Setter方法来注入依赖对象，通常在对象创建后通过调用Setter方法来完成注入。这种方式可以在对象创建后动态地修改其依赖关系，灵活性更高。Setter注入也可以支持可选的依赖，即某些依赖对象可以不注入而使用默认值。<br>选择构造器注入还是Setter注入，可以考虑以下几个方面：</p><ol><li>对象的依赖关系是否必须要在创建时注入，还是可以在对象创建后进行注入。如果依赖关系必须在创建时注入，那么构造器注入是更合适的选择；如果依赖关系可以在创建后动态修改，那么可以考虑使用Setter注入。</li><li>对象的依赖关系是否是必需的，还是可选的。如果某些依赖是必需的，而且没有合适的默认值，那么构造器注入可以确保这些依赖在创建时被注入；如果某些依赖是可选的，可以使用Setter注入，并提供默认值。</li><li>对象的可测试性。构造器注入可以使得对象的依赖关系更加明确，方便进行单元测试，因为可以通过构造器传入模拟对象。而Setter注入在单元测试中可能需要通过反射等方式来设置依赖对象。</li></ol><p>综上所述，选择构造器注入还是Setter注入取决于具体的情况。如果依赖关系必须在创建时注入，而且是必需的，那么构造器注入是更合适的选择；如果依赖关系可以在创建后动态修改，或者某些依赖是可选的，那么可以考虑使用Setter注入。同时，还需要考虑对象的可测试性和代码的可读性等因素。</p><h2 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h2><h3 id="1-什么是IOC？"><a href="#1-什么是IOC？" class="headerlink" title="1. 什么是IOC？"></a>1. 什么是IOC？</h3><p>IOC，全称为Inversion of Control（控制反转），是一种软件设计原则和编程思想。它是面向对象编程（OOP）中的一种设计模式，用于解耦对象间的依赖关系。<br>在传统的程序设计中，对象之间的依赖关系由对象自身负责管理。例如，一个类在创建其他类的对象时，需要直接调用其他类的构造函数或方法来获取所需的对象。这种方式使得类之间紧密耦合，难以进行单元测试、代码复用和替换等操作。<br>而IOC是一种反转了对象创建和依赖关系管理的控制方式。在IOC中，对象的创建和依赖关系的管理由一个容器（Container）来负责。容器负责创建对象，并将依赖的对象注入到需要的地方。对象只需要定义自己所需的依赖，而不需要关心如何创建和管理这些依赖。这样可以实现对象间的解耦，提高代码的可维护性和可扩展性。<br>IOC的核心思想是通过依赖注入（Dependency<br>Injection）来实现对象之间的解耦。依赖注入是指将需要的依赖对象通过构造器、Setter方法或其他方式注入到对象中，而不是由对象自己创建或获取依赖对象。依赖注入可以通过配置文件、注解或自动扫描等方式来实现。<br>IOC的好处包括：</p><ol><li>解耦：IOC通过将对象的创建和依赖关系的管理交给容器来处理，使得对象之间的关系更加松散，减少了耦合。</li><li>可测试性：由于对象的依赖关系由容器注入，可以方便地进行单元测试，通过替换依赖对象来进行测试或模拟。</li><li>可扩展性：在IOC中，可以通过配置文件或注解等方式来管理对象的依赖关系，使得系统更加灵活，能够方便地进行功能扩展或替换。</li></ol><p>常见的IOC框架包括Spring Framework、Google Guice等。这些框架提供了依赖注入的功能，可以帮助开发者实现IOC，并提供了其他的功能和工具来支持应用程序的开发。<br>总结来说，IOC（控制反转）是一种软件设计原则和编程思想，通过将对象的依赖关系的管理交给容器来处理，实现对象间的解耦。IOC的核心是依赖注入，将对象的依赖通过构造器、Setter方法或其他方式注入到对象中。IOC可以提高代码的可维护性、可测试性和可扩展性。</p><h3 id="2-依赖查找和依赖注入的区别"><a href="#2-依赖查找和依赖注入的区别" class="headerlink" title="2. 依赖查找和依赖注入的区别"></a>2. 依赖查找和依赖注入的区别</h3><p>依赖查找（Dependency Lookup）和依赖注入（Dependency Injection）是两种不同的依赖关系管理方式。<br>依赖查找是指通过容器或上下文来查找所需的依赖对象。在依赖查找中，对象自己负责获取它所依赖的对象，通常是通过容器提供的方法或API来获取。例如，通过容器的getBean()<br>方法来获取所需的对象。<br>依赖注入是指将依赖对象通过构造器、Setter方法或其他方式注入到对象中。在依赖注入中，对象不需要关心如何获取依赖对象，而是通过注入的方式来获取。注入可以通过配置文件、注解或自动扫描等方式实现。<br>区别如下：</p><ol><li>控制方式不同：依赖查找是由对象自己控制获取依赖对象，而依赖注入是由容器控制将依赖对象注入到对象中。</li><li>依赖关系的表达方式不同：依赖查找需要在对象中显式调用容器提供的方法来获取依赖对象，而依赖注入是通过构造器、Setter方法或其他方式将依赖对象注入到对象中。</li><li>对象的可测试性不同：依赖查找在单元测试中可能需要使用模拟对象等技术来替代真实的依赖对象，而依赖注入可以通过注入不同的依赖对象来进行单元测试。</li><li>对象的依赖关系管理方式不同：依赖查找需要在每个对象中显式获取依赖对象，而依赖注入将依赖对象的管理交给容器来处理，对象只需要定义自己所需的依赖，不需要关心如何获取和管理这些依赖。</li></ol><p>综上所述，依赖查找和依赖注入是两种不同的依赖关系管理方式。依赖查找由对象自己负责获取依赖对象，而依赖注入是由容器负责将依赖对象注入到对象中。选择依赖查找还是依赖注入取决于具体的需求和设计风格。依赖注入通常被认为是更推荐的一种方式，因为它能够实现对象间的解耦，提高代码的可维护性和可测试性。</p><h3 id="3-Spring作为IOC容器有什么优势"><a href="#3-Spring作为IOC容器有什么优势" class="headerlink" title="3. Spring作为IOC容器有什么优势"></a>3. Spring作为IOC容器有什么优势</h3><p>Spring作为一个流行的IOC（控制反转）容器，具有以下优势：</p><ol><li>松耦合：Spring实现了依赖注入（DI）机制，通过将对象的依赖关系交由容器管理，实现了对象间的松耦合。这使得代码更容易理解、维护和扩展，提高了系统的灵活性。</li><li>可测试性：Spring的依赖注入机制使得对象的依赖关系通过构造器、Setter方法或其他方式注入，而不是直接在对象内部创建或获取依赖对象。这样，在进行单元测试时，可以更方便地替换依赖对象，进行集成测试和模块测试。</li><li>面向接口编程：Spring鼓励面向接口编程，通过接口来定义具体类的依赖关系。这种编程方式使得代码更具扩展性和可替换性，有利于实现多态和依赖倒置原则。</li><li>AOP支持：Spring提供了AOP（面向切面编程）的支持，通过配置和代理技术，可以实现横切关注点（例如事务管理、日志记录等）的集中管理和复用。这样，可以将业务逻辑与横切关注点分离，提高代码的重用性和可维护性。</li><li>生命周期管理：Spring容器管理对象的生命周期，可以在对象创建、初始化和销毁时执行相应的操作。例如，通过配置初始化方法和销毁方法，可以在对象创建和销毁时执行特定的逻辑。</li><li>配置灵活性：Spring采用基于XML、注解或Java配置的方式来进行配置，使得配置更加灵活和可扩展。可以根据具体需求选择合适的配置方式，方便地切换和修改配置，而不需要修改代码。</li><li>集成丰富：Spring提供了丰富的集成支持，可以与各种开源和商业框架进行集成，如Hibernate、MyBatis、Spring<br>MVC等。这些集成支持简化了开发过程，提高了开发效率和系统的整合能力。</li></ol><p>总的来说，Spring作为一个IOC容器，通过依赖注入、面向接口编程、AOP支持、生命周期管理和灵活的配置等特性，提供了优秀的开发框架和工具，使得开发者能够更加专注于业务逻辑的实现，提高了系统的可维护性、可测试性和可扩展性。</p><hr><ol><li>比如监听器可以通过外部引入 <a href="#fnref1">↩︎</a><a href="">↩︎</a></li><li>从JDK1.6版本开始引入 <a href="#fnref2">↩︎</a><br>引入 <a href="#fnref2">↩︎</a></li></ol><h1 id="如果您喜欢我的内容，就点击关注吧"><a href="#如果您喜欢我的内容，就点击关注吧" class="headerlink" title="如果您喜欢我的内容，就点击关注吧"></a>如果您喜欢我的内容，就点击关注吧</h1><blockquote><p>扫码长按关注交流群获取最新消息，免费的面试题手册即将在交流群内推出</p></blockquote><blockquote><p>个人微信</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" title="请加个人微信备注【交流群】" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230903222821.jpg" alt="请加个人微信备注【交流群】"></a></p><blockquote><p>公众号</p></blockquote><p><a href="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430" class="gallery-item"><img src="https://blog-1253652709.cos.ap-guangzhou.myqcloud.com/%E4%BA%8C%E7%BB%B4%E7%A0%81/%E6%8E%A8%E5%B9%BF/qrcode_for_gh_de3cbab6482f_430"></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
      
      
      <categories>
          
          <category> 技术文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 配置 </tag>
            
            <tag> Spring Framework </tag>
            
            <tag> IOC </tag>
            
            <tag> 依赖处理 </tag>
            
            <tag> 依赖查找 </tag>
            
            <tag> 依赖注入 </tag>
            
            <tag> 生命周期管理 </tag>
            
            <tag> 容器 </tag>
            
            <tag> 托管的资源 </tag>
            
            <tag> 外部化配置 </tag>
            
            <tag> Java Beans </tag>
            
            <tag> Java ServiceLoader SPI </tag>
            
            <tag> JNDI </tag>
            
            <tag> EJB </tag>
            
            <tag> Servlet </tag>
            
            <tag> Apache Avalon </tag>
            
            <tag> PicoContainer </tag>
            
            <tag> Google Guice </tag>
            
            <tag> 依赖查找VS依赖注入 </tag>
            
            <tag> 构造器注入VS Setter注入 </tag>
            
            <tag> 什么是IOC </tag>
            
            <tag> 依赖查找和依赖注入的区别 </tag>
            
            <tag> Spring作为IOC容器的优势 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
